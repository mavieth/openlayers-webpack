!function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:i})},n.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=108)}([function(t,e,n){"use strict";n.d(e,"b",function(){return s}),n.d(e,"c",function(){return a}),n.d(e,"d",function(){return u}),n.d(e,"e",function(){return h}),n.d(e,"f",function(){return c}),n.d(e,"g",function(){return l}),n.d(e,"h",function(){return p}),n.d(e,"i",function(){return f}),n.d(e,"j",function(){return d}),n.d(e,"k",function(){return g}),n.d(e,"l",function(){return y}),n.d(e,"m",function(){return _}),n.d(e,"n",function(){return v}),n.d(e,"o",function(){return m}),n.d(e,"p",function(){return E}),n.d(e,"q",function(){return x}),n.d(e,"r",function(){return b}),n.d(e,"s",function(){return C}),n.d(e,"t",function(){return I}),n.d(e,"u",function(){return S}),n.d(e,"v",function(){return T}),n.d(e,"w",function(){return R}),n.d(e,"x",function(){return N}),n.d(e,"y",function(){return L}),n.d(e,"z",function(){return M}),n.d(e,"A",function(){return P}),n.d(e,"B",function(){return A}),n.d(e,"C",function(){return D}),n.d(e,"D",function(){return F}),n.d(e,"E",function(){return j}),n.d(e,"F",function(){return G}),n.d(e,"H",function(){return k}),n.d(e,"I",function(){return B}),n.d(e,"J",function(){return Y}),n.d(e,"G",function(){return X}),n.d(e,"a",function(){return q});var i=n(15),r=n(65),o=n(27);function s(t){for(var e=d(),n=0,i=t.length;n<i;++n)b(e,t[n]);return e}function a(t,e,n){return n?(n[0]=t[0]-e,n[1]=t[1]-e,n[2]=t[2]+e,n[3]=t[3]+e,n):[t[0]-e,t[1]-e,t[2]+e,t[3]+e]}function u(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t.slice()}function h(t,e,n){var i,r;return(i=e<t[0]?t[0]-e:t[2]<e?e-t[2]:0)*i+(r=n<t[1]?t[1]-n:t[3]<n?n-t[3]:0)*r}function c(t,e){return p(t,e[0],e[1])}function l(t,e){return t[0]<=e[0]&&e[2]<=t[2]&&t[1]<=e[1]&&e[3]<=t[3]}function p(t,e,n){return t[0]<=e&&e<=t[2]&&t[1]<=n&&n<=t[3]}function f(t,e){var n=t[0],i=t[1],r=t[2],s=t[3],a=e[0],u=e[1],h=o.a.UNKNOWN;return a<n?h|=o.a.LEFT:a>r&&(h|=o.a.RIGHT),u<i?h|=o.a.BELOW:u>s&&(h|=o.a.ABOVE),h===o.a.UNKNOWN&&(h=o.a.INTERSECTING),h}function d(){return[1/0,1/0,-1/0,-1/0]}function g(t,e,n,i,r){return r?(r[0]=t,r[1]=e,r[2]=n,r[3]=i,r):[t,e,n,i]}function y(t){return g(1/0,1/0,-1/0,-1/0,t)}function _(t,e){var n=t[0],i=t[1];return g(n,i,n,i,e)}function v(t,e){return w(y(e),t)}function m(t,e,n,i,r){return C(y(r),t,e,n,i)}function E(t,e){return t[0]==e[0]&&t[2]==e[2]&&t[1]==e[1]&&t[3]==e[3]}function x(t,e){return e[0]<t[0]&&(t[0]=e[0]),e[2]>t[2]&&(t[2]=e[2]),e[1]<t[1]&&(t[1]=e[1]),e[3]>t[3]&&(t[3]=e[3]),t}function b(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function w(t,e){for(var n=0,i=e.length;n<i;++n)b(t,e[n]);return t}function C(t,e,n,i,r){for(;n<i;n+=r)O(t,e[n],e[n+1]);return t}function O(t,e,n){t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],n),t[2]=Math.max(t[2],e),t[3]=Math.max(t[3],n)}function I(t,e,n){var i;return(i=e.call(n,T(t)))?i:(i=e.call(n,R(t)))?i:(i=e.call(n,F(t)))?i:(i=e.call(n,D(t)))||!1}function S(t){var e=0;return k(t)||(e=j(t)*P(t)),e}function T(t){return[t[0],t[1]]}function R(t){return[t[2],t[1]]}function N(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]}function L(t,e){var n;return e===r.a.BOTTOM_LEFT?n=T(t):e===r.a.BOTTOM_RIGHT?n=R(t):e===r.a.TOP_LEFT?n=D(t):e===r.a.TOP_RIGHT?n=F(t):Object(i.a)(!1,13),n}function M(t,e,n,i,r){var o=e*i[0]/2,s=e*i[1]/2,a=Math.cos(n),u=Math.sin(n),h=o*a,c=o*u,l=s*a,p=s*u,f=t[0],d=t[1],y=f-h+p,_=f-h-p,v=f+h-p,m=f+h+p,E=d-c-l,x=d-c+l,b=d+c+l,w=d+c-l;return g(Math.min(y,_,v,m),Math.min(E,x,b,w),Math.max(y,_,v,m),Math.max(E,x,b,w),r)}function P(t){return t[3]-t[1]}function A(t,e,n){var i=n||[1/0,1/0,-1/0,-1/0];return G(t,e)?(t[0]>e[0]?i[0]=t[0]:i[0]=e[0],t[1]>e[1]?i[1]=t[1]:i[1]=e[1],t[2]<e[2]?i[2]=t[2]:i[2]=e[2],t[3]<e[3]?i[3]=t[3]:i[3]=e[3]):y(i),i}function D(t){return[t[0],t[3]]}function F(t){return[t[2],t[3]]}function j(t){return t[2]-t[0]}function G(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]}function k(t){return t[2]<t[0]||t[3]<t[1]}function B(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t}function Y(t,e){var n=(t[2]-t[0])/2*(e-1),i=(t[3]-t[1])/2*(e-1);t[0]-=n,t[2]+=n,t[1]-=i,t[3]+=i}function X(t,e,n){var i=!1,r=f(t,e),s=f(t,n);if(r===o.a.INTERSECTING||s===o.a.INTERSECTING)i=!0;else{var a,u,h=t[0],c=t[1],l=t[2],p=t[3],d=e[0],g=e[1],y=n[0],_=n[1],v=(_-g)/(y-d);s&o.a.ABOVE&&!(r&o.a.ABOVE)&&(i=(a=y-(_-p)/v)>=h&&a<=l),i||!(s&o.a.RIGHT)||r&o.a.RIGHT||(i=(u=_-(y-l)*v)>=c&&u<=p),i||!(s&o.a.BELOW)||r&o.a.BELOW||(i=(a=y-(_-c)/v)>=h&&a<=l),i||!(s&o.a.LEFT)||r&o.a.LEFT||(i=(u=_-(y-h)*v)>=c&&u<=p)}return i}function q(t,e,n){var i=[t[0],t[1],t[0],t[3],t[2],t[1],t[2],t[3]];return e(i,i,2),function(t,e,n){return g(Math.min.apply(null,t),Math.min.apply(null,e),Math.max.apply(null,t),Math.max.apply(null,e),n)}([i[0],i[2],i[4],i[6]],[i[1],i[3],i[5],i[7]],n)}},function(t,e,n){"use strict";n.d(e,"a",function(){return u}),n.d(e,"b",function(){return h}),n.d(e,"c",function(){return c}),n.d(e,"e",function(){return l}),n.d(e,"d",function(){return p});var i=n(13);function r(t,e,n,i){for(var r,o=0,s=t.length;o<s;++o)if((r=t[o]).listener===e&&r.bindTo===n)return i&&(r.deleteIndex=o),r}function o(t,e){var n=t.ol_lm;return n?n[e]:void 0}function s(t){var e=t.ol_lm;return e||(e=t.ol_lm={}),e}function a(t,e){var n=o(t,e);if(n){for(var r=0,s=n.length;r<s;++r)t.removeEventListener(e,n[r].boundListener),Object(i.b)(n[r]);n.length=0;var a=t.ol_lm;a&&(delete a[e],0===Object.keys(a).length&&delete t.ol_lm)}}function u(t,e,n,i,o){var a=s(t),u=a[e];u||(u=a[e]=[]);var h=r(u,n,i,!1);return h?o||(h.callOnce=!1):(h={bindTo:i,callOnce:!!o,listener:n,target:t,type:e},t.addEventListener(e,function(t){var e=function(e){var n=t.listener,i=t.bindTo||t.target;return t.callOnce&&l(t),n.call(i,e)};return t.boundListener=e,e}(h)),u.push(h)),h}function h(t,e,n,i){return u(t,e,n,i,!0)}function c(t,e,n,i){var s=o(t,e);if(s){var a=r(s,n,i,!0);a&&l(a)}}function l(t){if(t&&t.target){t.target.removeEventListener(t.type,t.boundListener);var e=o(t.target,t.type);if(e){var n="deleteIndex"in t?t.deleteIndex:e.indexOf(t);-1!==n&&e.splice(n,1),0===e.length&&a(t.target,t.type)}Object(i.b)(t)}}function p(t){var e=s(t);for(var n in e)a(t,n)}},function(t,e,n){"use strict";e.a={POINT:"Point",LINE_STRING:"LineString",LINEAR_RING:"LinearRing",POLYGON:"Polygon",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon",GEOMETRY_COLLECTION:"GeometryCollection",CIRCLE:"Circle"}},function(t,e,n){"use strict";n.d(e,"c",function(){return u}),n.d(e,"b",function(){return h}),n.d(e,"d",function(){return c}),n.d(e,"e",function(){return l}),n.d(e,"f",function(){return p}),n.d(e,"g",function(){return f}),n.d(e,"i",function(){return d}),n.d(e,"k",function(){return g}),n.d(e,"l",function(){return y}),n.d(e,"m",function(){return _}),n.d(e,"j",function(){return v}),n.d(e,"h",function(){return m}),n.d(e,"o",function(){return E}),n.d(e,"a",function(){return C}),n.d(e,"p",function(){return T}),n.d(e,"q",function(){return R}),n.d(e,"s",function(){return N}),n.d(e,"r",function(){return L}),n.d(e,"n",function(){return M});var i=n(31),r=n(25),o=n(13),s=n(84),a=n(8),u="10px sans-serif",h=[0,0,0,1],c="round",l=[],p=0,f="round",d=10,g=[0,0,0,1],y="center",_="middle",v=[0,0,0,0],m=1,E=new s.a,x={},b=null,w={},C=function(){var t,e,n=60,r=x,s="32px ",a=["monospace","serif"],u=a.length,h="wmytzilWMYTZIL@#/&?$%10ï€“";function c(t){for(var n=O(),i=!0,r=0;r<u;++r){var o=a[r];if(n.font=s+o,e=n.measureText(h).width,t!=o){n.font=s+t+","+o;var c=n.measureText(h).width;i=i&&c!=e}}return i}function l(){var e=!0;for(var i in r)r[i]<n&&(c(i)?(r[i]=n,Object(o.b)(w),b=null,E.clear()):(++r[i],e=!1));e&&(clearInterval(t),t=void 0)}return function(e){var o=Object(i.e)(e);if(o)for(var s=0,a=o.length;s<a;++s){var u=o[s];u in r||(r[u]=n,c(u)||(r[u]=0,void 0===t&&(t=setInterval(l,32))))}}}();function O(){return b||(b=Object(r.a)(1,1)),b}var I,S,T=(S=w,function(t){var e=S[t];return void 0==e&&(I||((I=document.createElement("span")).textContent="M",I.style.margin=I.style.padding="0 !important",I.style.position="absolute !important",I.style.left="-99999px !important"),I.style.font=t,document.body.appendChild(I),e=S[t]=I.offsetHeight,document.body.removeChild(I)),e});function R(t,e){var n=O();return t!=n.font&&(n.font=t),n.measureText(e).width}function N(t,e,n,i){0!==e&&(t.translate(n,i),t.rotate(e),t.translate(-n,-i))}var L=Object(a.c)();function M(t,e,n,i,r,o,s,a,u,h,c){var l;1!=n&&(l=t.globalAlpha,t.globalAlpha=l*n),e&&t.setTransform.apply(t,e),t.drawImage(i,r,o,s,a,u,h,s*c,a*c),l&&(t.globalAlpha=l),e&&t.setTransform.apply(t,L)}},function(t,e,n){"use strict";e.a={CHANGE:"change",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",ERROR:"error",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",MOUSEDOWN:"mousedown",MOUSEMOVE:"mousemove",MOUSEOUT:"mouseout",MOUSEUP:"mouseup",MOUSEWHEEL:"mousewheel",MSPOINTERDOWN:"MSPointerDown",RESIZE:"resize",TOUCHSTART:"touchstart",TOUCHMOVE:"touchmove",TOUCHEND:"touchend",WHEEL:"wheel"}},function(t,e,n){"use strict";e.a={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4,ABORT:5}},function(t,e,n){"use strict";n.d(e,"b",function(){return r}),n.d(e,"a",function(){return o});var i=0;function r(t){return t.ol_uid||(t.ol_uid=++i)}var o="5.1.3"},function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return r}),n.d(e,"g",function(){return o}),n.d(e,"f",function(){return s}),n.d(e,"e",function(){return a}),n.d(e,"h",function(){return u}),n.d(e,"i",function(){return h}),n.d(e,"d",function(){return c}),n.d(e,"c",function(){return l});n(15);function i(t,e,n){return Math.min(Math.max(t,e),n)}var r="cosh"in Math?Math.cosh:function(t){var e=Math.exp(t);return(e+1/e)/2};function o(t,e,n,i,r,o){var a=r-n,u=o-i;if(0!==a||0!==u){var h=((t-n)*a+(e-i)*u)/(a*a+u*u);h>1?(n=r,i=o):h>0&&(n+=a*h,i+=u*h)}return s(t,e,n,i)}function s(t,e,n,i){var r=n-t,o=i-e;return r*r+o*o}function a(t){for(var e=t.length,n=0;n<e;n++){for(var i=n,r=Math.abs(t[n][n]),o=n+1;o<e;o++){var s=Math.abs(t[o][n]);s>r&&(r=s,i=o)}if(0===r)return null;var a=t[i];t[i]=t[n],t[n]=a;for(var u=n+1;u<e;u++)for(var h=-t[u][n]/t[n][n],c=n;c<e+1;c++)n==c?t[u][c]=0:t[u][c]+=h*t[n][c]}for(var l=new Array(e),p=e-1;p>=0;p--){l[p]=t[p][e]/t[p][p];for(var f=p-1;f>=0;f--)t[f][e]-=t[f][p]*l[p]}return l}function u(t){return 180*t/Math.PI}function h(t){return t*Math.PI/180}function c(t,e){var n=t%e;return n*e<0?n+e:n}function l(t,e,n){return t+n*(e-t)}},function(t,e,n){"use strict";n.d(e,"c",function(){return o}),n.d(e,"e",function(){return s}),n.d(e,"g",function(){return h}),n.d(e,"a",function(){return c}),n.d(e,"f",function(){return l}),n.d(e,"h",function(){return p}),n.d(e,"b",function(){return f}),n.d(e,"d",function(){return d});var i=n(15),r=new Array(6);function o(){return[1,0,0,1,0,0]}function s(t){return u(t,1,0,0,1,0,0)}function a(t,e){var n=t[0],i=t[1],r=t[2],o=t[3],s=t[4],a=t[5],u=e[0],h=e[1],c=e[2],l=e[3],p=e[4],f=e[5];return t[0]=n*u+r*h,t[1]=i*u+o*h,t[2]=n*c+r*l,t[3]=i*c+o*l,t[4]=n*p+r*f+s,t[5]=i*p+o*f+a,t}function u(t,e,n,i,r,o,s){return t[0]=e,t[1]=n,t[2]=i,t[3]=r,t[4]=o,t[5]=s,t}function h(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function c(t,e){var n=e[0],i=e[1];return e[0]=t[0]*n+t[2]*i+t[4],e[1]=t[1]*n+t[3]*i+t[5],e}function l(t,e,n){return a(t,u(r,e,0,0,n,0,0))}function p(t,e,n){return a(t,u(r,1,0,0,1,e,n))}function f(t,e,n,i,r,o,s,a){var u=Math.sin(o),h=Math.cos(o);return t[0]=i*h,t[1]=r*u,t[2]=-i*u,t[3]=r*h,t[4]=s*i*h-a*i*u+e,t[5]=s*r*u+a*r*h+n,t}function d(t){var e,n=(e=t)[0]*e[3]-e[1]*e[2];Object(i.a)(0!==n,32);var r=t[0],o=t[1],s=t[2],a=t[3],u=t[4],h=t[5];return t[0]=a/n,t[1]=-o/n,t[2]=-s/n,t[3]=r/n,t[4]=(s*h-a*u)/n,t[5]=-(r*h-o*u)/n,t}},function(t,e,n){"use strict";function i(){return!0}function r(){return!1}function o(){}n.d(e,"b",function(){return i}),n.d(e,"a",function(){return r}),n.d(e,"c",function(){return o})},function(t,e,n){"use strict";var i=n(4);e.a={SINGLECLICK:"singleclick",CLICK:i.a.CLICK,DBLCLICK:i.a.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"}},function(t,e,n){"use strict";n(7);function i(t,e){return t[0]+=e[0],t[1]+=e[1],t}function r(t,e){for(var n=!0,i=t.length-1;i>=0;--i)if(t[i]!=e[i]){n=!1;break}return n}function o(t,e){var n=Math.cos(e),i=Math.sin(e),r=t[0]*n-t[1]*i,o=t[1]*n+t[0]*i;return t[0]=r,t[1]=o,t}function s(t,e){return t[0]*=e,t[1]*=e,t}function a(t,e){var n=t[0]-e[0],i=t[1]-e[1];return n*n+i*i}n.d(e,"a",function(){return i}),n.d(e,"b",function(){return r}),n.d(e,"c",function(){return o}),n.d(e,"d",function(){return s}),n.d(e,"e",function(){return a})},function(t,e,n){"use strict";function i(t,e,n){for(var i,o,s=n||r,a=0,u=t.length,h=!1;a<u;)(o=+s(t[i=a+(u-a>>1)],e))<0?a=i+1:(u=i,h=!o);return h?a:~a}function r(t,e){return t>e?1:t<e?-1:0}function o(t,e){return t.indexOf(e)>=0}function s(t,e,n){var i,r=t.length;if(t[0]<=e)return 0;if(e<=t[r-1])return r-1;if(n>0){for(i=1;i<r;++i)if(t[i]<e)return i-1}else if(n<0){for(i=1;i<r;++i)if(t[i]<=e)return i}else for(i=1;i<r;++i){if(t[i]==e)return i;if(t[i]<e)return t[i-1]-e<e-t[i]?i-1:i}return r-1}function a(t,e,n){for(;e<n;){var i=t[e];t[e]=t[n],t[n]=i,++e,--n}}function u(t,e){for(var n=Array.isArray(e)?e:[e],i=n.length,r=0;r<i;r++)t[t.length]=n[r]}function h(t,e){var n=t.indexOf(e),i=n>-1;return i&&t.splice(n,1),i}function c(t,e){var n=t.length;if(n!==e.length)return!1;for(var i=0;i<n;i++)if(t[i]!==e[i])return!1;return!0}function l(t,e){var n,i=t.length,r=Array(t.length);for(n=0;n<i;n++)r[n]={index:n,value:t[n]};for(r.sort(function(t,n){return e(t.value,n.value)||t.index-n.index}),n=0;n<t.length;n++)t[n]=r[n].value}function p(t,e,n){var i=e||r;return t.every(function(e,r){if(0===r)return!0;var o=i(t[r-1],e);return!(o>0||n&&0===o)})}n.d(e,"a",function(){return i}),n.d(e,"g",function(){return r}),n.d(e,"d",function(){return o}),n.d(e,"f",function(){return s}),n.d(e,"i",function(){return a}),n.d(e,"c",function(){return u}),n.d(e,"h",function(){return h}),n.d(e,"b",function(){return c}),n.d(e,"j",function(){return l}),n.d(e,"e",function(){return p})},function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return r}),n.d(e,"c",function(){return o}),n.d(e,"d",function(){return s});var i="function"==typeof Object.assign?Object.assign:function(t,e){var n=arguments;if(void 0===t||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var i=Object(t),r=1,o=arguments.length;r<o;++r){var s=n[r];if(void 0!==s&&null!==s)for(var a in s)s.hasOwnProperty(a)&&(i[a]=s[a])}return i};function r(t){for(var e in t)delete t[e]}function o(t){var e=[];for(var n in t)e.push(t[n]);return e}function s(t){var e;for(e in t)return!1;return!e}},function(t,e,n){"use strict";n.d(e,"a",function(){return s}),n.d(e,"b",function(){return a}),n.d(e,"c",function(){return u}),n.d(e,"e",function(){return h}),n.d(e,"f",function(){return c}),n.d(e,"g",function(){return l}),n.d(e,"d",function(){return p});n(10);var i=n(15),r=n(9),o=n(26),s=function(t){var e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},a=r.b,u=function(t){var e=t.originalEvent;return 0==e.button&&!(o.i&&o.d&&e.ctrlKey)},h=(r.a,function(t){var e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey}),c=function(t){var e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},l=function(t){var e=t.originalEvent.target.tagName;return"INPUT"!==e&&"SELECT"!==e&&"TEXTAREA"!==e},p=function(t){return Object(i.a)(t.pointerEvent,56),"mouse"==t.pointerEvent.pointerType}},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var i=n(92);function r(t,e){if(!t)throw new i.a(e)}},function(t,e,n){"use strict";var i=n(77),r=n(0),o=n(7),s=n(32),a=function(t){this.code_=t.code,this.units_=t.units,this.extent_=void 0!==t.extent?t.extent:null,this.worldExtent_=void 0!==t.worldExtent?t.worldExtent:null,this.axisOrientation_=void 0!==t.axisOrientation?t.axisOrientation:"enu",this.global_=void 0!==t.global&&t.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit};a.prototype.canWrapX=function(){return this.canWrapX_},a.prototype.getCode=function(){return this.code_},a.prototype.getExtent=function(){return this.extent_},a.prototype.getUnits=function(){return this.units_},a.prototype.getMetersPerUnit=function(){return this.metersPerUnit_||s.a[this.units_]},a.prototype.getWorldExtent=function(){return this.worldExtent_},a.prototype.getAxisOrientation=function(){return this.axisOrientation_},a.prototype.isGlobal=function(){return this.global_},a.prototype.setGlobal=function(t){this.global_=t,this.canWrapX_=!(!t||!this.extent_)},a.prototype.getDefaultTileGrid=function(){return this.defaultTileGrid_},a.prototype.setDefaultTileGrid=function(t){this.defaultTileGrid_=t},a.prototype.setExtent=function(t){this.extent_=t,this.canWrapX_=!(!this.global_||!t)},a.prototype.setWorldExtent=function(t){this.worldExtent_=t},a.prototype.setGetPointResolution=function(t){this.getPointResolutionFunc_=t},a.prototype.getPointResolutionFunc=function(){return this.getPointResolutionFunc_};var u=a,h=6378137,c=Math.PI*h,l=[-c,-c,c,c],p=[-180,-85,180,85],f=function(t){function e(e){t.call(this,{code:e,units:s.b.METERS,extent:l,global:!0,worldExtent:p,getPointResolution:function(t,e){return t/Object(o.b)(e[1]/h)}})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(u),d=[new f("EPSG:3857"),new f("EPSG:102100"),new f("EPSG:102113"),new f("EPSG:900913"),new f("urn:ogc:def:crs:EPSG:6.18:3:3857"),new f("urn:ogc:def:crs:EPSG::3857"),new f("http://www.opengis.net/gml/srs/epsg.xml#3857")];function g(t,e,n){var i=t.length,r=n>1?n:2,o=e;void 0===o&&(o=r>2?t.slice():new Array(i));for(var s=c,a=0;a<i;a+=r){o[a]=s*t[a]/180;var u=h*Math.log(Math.tan(Math.PI*(t[a+1]+90)/360));u>s?u=s:u<-s&&(u=-s),o[a+1]=u}return o}function y(t,e,n){var i=t.length,r=n>1?n:2,o=e;void 0===o&&(o=r>2?t.slice():new Array(i));for(var s=0;s<i;s+=r)o[s]=180*t[s]/c,o[s+1]=360*Math.atan(Math.exp(t[s+1]/h))/Math.PI-90;return o}var _=[-180,-90,180,90],v=6378137*Math.PI/180,m=function(t){function e(e,n){t.call(this,{code:e,units:s.b.DEGREES,extent:_,axisOrientation:n,global:!0,metersPerUnit:v,worldExtent:_})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(u),E=[new m("CRS:84"),new m("EPSG:4326","neu"),new m("urn:ogc:def:crs:EPSG::4326","neu"),new m("urn:ogc:def:crs:EPSG:6.6:4326","neu"),new m("urn:ogc:def:crs:OGC:1.3:CRS84"),new m("urn:ogc:def:crs:OGC:2:84"),new m("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new m("urn:x-ogc:def:crs:EPSG:4326","neu")],x={};n(13);var b,w,C,O={};function I(t,e,n){var i=t.getCode(),r=e.getCode();i in O||(O[i]={}),O[i][r]=n}function S(t,e,n){var i;if(void 0!==e){for(var r=0,o=t.length;r<o;++r)e[r]=t[r];i=e}else i=t.slice();return i}function T(t,e,n){if(void 0!==e&&t!==e){for(var i=0,r=t.length;i<r;++i)e[i]=t[i];t=e}return t}function R(t){!function(t,e){x[t]=e}(t.getCode(),t),I(t,t,S)}function N(t){var e=null;if(t instanceof u)e=t;else if("string"==typeof t){e=function(t){return x[t]||null}(t)}return e}function L(t,e,n,r){var o,a=(t=N(t)).getPointResolutionFunc();if(a)o=a(e,n);else if(t.getUnits()==s.b.DEGREES&&!r||r==s.b.DEGREES)o=e;else{var u=D(t,N("EPSG:4326")),h=[n[0]-e/2,n[1],n[0]+e/2,n[1],n[0],n[1]-e/2,n[0],n[1]+e/2];h=u(h,h,2),o=(Object(i.a)(h.slice(0,2),h.slice(2,4))+Object(i.a)(h.slice(4,6),h.slice(6,8)))/2;var c=r?s.a[r]:t.getMetersPerUnit();void 0!==c&&(o/=c)}return o}function M(t){!function(t){t.forEach(R)}(t),t.forEach(function(e){t.forEach(function(t){e!==t&&I(e,t,S)})})}function P(t,e){return t?"string"==typeof t?N(t):t:N(e)}function A(t,e){if(t===e)return!0;var n=t.getUnits()===e.getUnits();return t.getCode()===e.getCode()?n:D(t,e)===S&&n}function D(t,e){var n=function(t,e){var n;return t in O&&e in O[t]&&(n=O[t][e]),n}(t.getCode(),e.getCode());return n||(n=T),n}function F(t,e){return D(N(t),N(e))}function j(t,e,n){return F(e,n)(t,void 0,t.length)}function G(t,e,n){var i=F(e,n);return Object(r.a)(t,i)}n.d(e,"c",function(){return N}),n.d(e,"d",function(){return L}),n.d(e,"a",function(){return P}),n.d(e,"b",function(){return A}),n.d(e,"e",function(){return F}),n.d(e,"f",function(){return j}),n.d(e,"g",function(){return G}),n.d(e,!1,function(){return s.a}),M(d),M(E),b=d,w=g,C=y,E.forEach(function(t){b.forEach(function(e){I(t,e,w),I(e,t,C)})})},function(t,e,n){"use strict";e.a={ANIMATING:0,INTERACTING:1}},function(t,e,n){"use strict";n.d(e,"b",function(){return u}),n.d(e,"c",function(){return h}),n.d(e,"d",function(){return c}),n.d(e,"e",function(){return l}),n.d(e,"f",function(){return p}),n.d(e,"g",function(){return f});var i=n(23),r=n(33),o=n(70),s=n(7),a=function(t){function e(e){t.call(this),this.map_=null,this.setActive(!0),this.handleEvent=e.handleEvent}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getActive=function(){return this.get(o.a.ACTIVE)},e.prototype.getMap=function(){return this.map_},e.prototype.setActive=function(t){this.set(o.a.ACTIVE,t)},e.prototype.setMap=function(t){this.map_=t},e}(i.a);function u(t,e,n){var i=t.getCenter();if(i){var o=t.constrainCenter([i[0]+e[0],i[1]+e[1]]);n?t.animate({duration:n,easing:r.d,center:o}):t.setCenter(o)}}function h(t,e,n,i){c(t,e=t.constrainRotation(e,0),n,i)}function c(t,e,n,i){if(void 0!==e){var o=t.getRotation(),s=t.getCenter();void 0!==o&&s&&i>0?t.animate({rotation:e,anchor:n,duration:i,easing:r.b}):t.rotate(e,n)}}function l(t,e,n,i,r){f(t,e=t.constrainResolution(e,0,r),n,i)}function p(t,e,n,i){var r=t.getResolution(),o=t.constrainResolution(r,e,0);if(void 0!==o){var a=t.getResolutions();o=Object(s.a)(o,t.getMinResolution()||a[a.length-1],t.getMaxResolution()||a[0])}if(n&&void 0!==o&&o!==r){var u=t.getCenter(),h=t.calculateCenterZoom(o,n);h=t.constrainCenter(h),n=[(o*u[0]-r*h[0])/(o-r),(o*u[1]-r*h[1])/(o-r)]}f(t,o,n,i)}function f(t,e,n,i){if(e){var o=t.getResolution(),s=t.getCenter();if(void 0!==o&&s&&e!==o&&i)t.animate({resolution:e,anchor:n,duration:i,easing:r.b});else{if(n){var a=t.calculateCenterZoom(e,n);t.setCenter(a)}t.setResolution(e)}}}e.a=a},function(t,e,n){"use strict";var i=n(92),r=n(22),o=n(23),s="length",a=function(t){function e(e,n){t.call(this,e),this.element=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(n(29).a),u=function(t){function e(e,n){t.call(this);var i=n||{};if(this.unique_=!!i.unique,this.array_=e||[],this.unique_)for(var r=0,o=this.array_.length;r<o;++r)this.assertUnique_(this.array_[r],r);this.updateLength_()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clear=function(){for(;this.getLength()>0;)this.pop()},e.prototype.extend=function(t){for(var e=0,n=t.length;e<n;++e)this.push(t[e]);return this},e.prototype.forEach=function(t){for(var e=this.array_,n=0,i=e.length;n<i;++n)t(e[n],n,e)},e.prototype.getArray=function(){return this.array_},e.prototype.item=function(t){return this.array_[t]},e.prototype.getLength=function(){return this.get(s)},e.prototype.insertAt=function(t,e){this.unique_&&this.assertUnique_(e),this.array_.splice(t,0,e),this.updateLength_(),this.dispatchEvent(new a(r.a.ADD,e))},e.prototype.pop=function(){return this.removeAt(this.getLength()-1)},e.prototype.push=function(t){this.unique_&&this.assertUnique_(t);var e=this.getLength();return this.insertAt(e,t),this.getLength()},e.prototype.remove=function(t){for(var e=this.array_,n=0,i=e.length;n<i;++n)if(e[n]===t)return this.removeAt(n)},e.prototype.removeAt=function(t){var e=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new a(r.a.REMOVE,e)),e},e.prototype.setAt=function(t,e){var n=this.getLength();if(t<n){this.unique_&&this.assertUnique_(e,t);var i=this.array_[t];this.array_[t]=e,this.dispatchEvent(new a(r.a.REMOVE,i)),this.dispatchEvent(new a(r.a.ADD,e))}else{for(var o=n;o<t;++o)this.insertAt(o,void 0);this.insertAt(t,e)}},e.prototype.updateLength_=function(){this.set(s,this.array_.length)},e.prototype.assertUnique_=function(t,e){for(var n=0,r=this.array_.length;n<r;++n)if(this.array_[n]===t&&n!==e)throw new i.a(58)},e}(o.a);e.a=u},function(t,e,n){"use strict";e.a={XY:"XY",XYZ:"XYZ",XYM:"XYM",XYZM:"XYZM"}},function(t,e,n){"use strict";e.a={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",SOURCE:"source"}},function(t,e,n){"use strict";e.a={ADD:"add",REMOVE:"remove"}},function(t,e,n){"use strict";n.d(e,"b",function(){return l});var i=n(6),r=n(61),o=n(91),s=n(29),a=n(13),u=function(t){function e(e,n,i){t.call(this,e),this.key=n,this.oldValue=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(s.a),h=function(t){function e(e){t.call(this),Object(i.b)(this),this.values_={},void 0!==e&&this.setProperties(e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){var e;return this.values_.hasOwnProperty(t)&&(e=this.values_[t]),e},e.prototype.getKeys=function(){return Object.keys(this.values_)},e.prototype.getProperties=function(){return Object(a.a)({},this.values_)},e.prototype.notify=function(t,e){var n;n=l(t),this.dispatchEvent(new u(n,t,e)),n=r.a.PROPERTYCHANGE,this.dispatchEvent(new u(n,t,e))},e.prototype.set=function(t,e,n){if(n)this.values_[t]=e;else{var i=this.values_[t];this.values_[t]=e,i!==e&&this.notify(t,i)}},e.prototype.setProperties=function(t,e){for(var n in t)this.set(n,t[n],e)},e.prototype.unset=function(t,e){if(t in this.values_){var n=this.values_[t];delete this.values_[t],e||this.notify(t,n)}},e}(o.a),c={};function l(t){return c.hasOwnProperty(t)?c[t]:c[t]="change:"+t}e.a=h},function(t,e,n){"use strict";n.d(e,"a",function(){return f}),n.d(e,"c",function(){return d});var i=n(9),r=n(10),o=n(35),s=n(18),a=n(13),u=i.c,h=i.a,c=i.a,l=i.c,p=function(t){function e(e){var n=e||{};t.call(this,{handleEvent:n.handleEvent||d}),this.handleDownEvent_=n.handleDownEvent?n.handleDownEvent:c,this.handleDragEvent_=n.handleDragEvent?n.handleDragEvent:u,this.handleMoveEvent_=n.handleMoveEvent?n.handleMoveEvent:l,this.handleUpEvent_=n.handleUpEvent?n.handleUpEvent:h,this.handlingDownUpSequence=!1,this.stopDown=n.stopDown?n.stopDown:g,this.trackedPointers_={},this.targetPointers=[]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.updateTrackedPointers_=function(t){if(function(t){var e=t.type;return e===r.a.POINTERDOWN||e===r.a.POINTERDRAG||e===r.a.POINTERUP}(t)){var e=t.pointerEvent,n=e.pointerId.toString();t.type==r.a.POINTERUP?delete this.trackedPointers_[n]:t.type==r.a.POINTERDOWN?this.trackedPointers_[n]=e:n in this.trackedPointers_&&(this.trackedPointers_[n]=e),this.targetPointers=Object(a.c)(this.trackedPointers_)}},e}(s.a);function f(t){for(var e=t.length,n=0,i=0,r=0;r<e;r++)n+=t[r].clientX,i+=t[r].clientY;return[n/e,i/e]}function d(t){if(!(t instanceof o.a))return!0;var e=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==r.a.POINTERDRAG)this.handleDragEvent_(t);else if(t.type==r.a.POINTERUP){var n=this.handleUpEvent_(t);this.handlingDownUpSequence=n&&this.targetPointers.length>0}}else if(t.type==r.a.POINTERDOWN){var i=this.handleDownEvent_(t);this.handlingDownUpSequence=i,e=this.stopDown(i)}else t.type==r.a.POINTERMOVE&&this.handleMoveEvent_(t);return!e}function g(t){return t}e.b=p},function(t,e,n){"use strict";function i(t,e){var n=document.createElement("CANVAS");return t&&(n.width=t),e&&(n.height=e),n.getContext("2d")}function r(t,e){var n=e.parentNode;n&&n.replaceChild(t,e)}function o(t){return t&&t.parentNode?t.parentNode.removeChild(t):null}function s(t){for(;t.lastChild;)t.removeChild(t.lastChild)}n.d(e,"a",function(){return i}),n.d(e,"d",function(){return r}),n.d(e,"c",function(){return o}),n.d(e,"b",function(){return s})},function(t,e,n){"use strict";n.d(e,"c",function(){return r}),n.d(e,"g",function(){return o}),n.d(e,"i",function(){return s}),n.d(e,"d",function(){return a}),n.d(e,"b",function(){return u}),n.d(e,"a",function(){return h}),n.d(e,"h",function(){return c}),n.d(e,"f",function(){return l}),n.d(e,"e",function(){return p});var i="undefined"!=typeof navigator?navigator.userAgent.toLowerCase():"",r=-1!==i.indexOf("firefox"),o=-1!==i.indexOf("safari")&&-1==i.indexOf("chrom"),s=-1!==i.indexOf("webkit")&&-1==i.indexOf("edge"),a=-1!==i.indexOf("macintosh"),u=window.devicePixelRatio||1,h=function(){var t=!1;try{t=!!document.createElement("CANVAS").getContext("2d").setLineDash}catch(t){}return t}(),c=(navigator,"ontouchstart"in window),l="PointerEvent"in window,p=!!navigator.msPointerEnabled},function(t,e,n){"use strict";e.a={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16}},function(t,e,n){"use strict";e.a={IDLE:0,LOADING:1,LOADED:2,ERROR:3}},function(t,e,n){"use strict";n.d(e,"b",function(){return r});var i=function(t){this.propagationStopped,this.type=t,this.target=null};function r(t){t.stopPropagation()}i.prototype.preventDefault=function(){this.propagationStopped=!0},i.prototype.stopPropagation=function(){this.propagationStopped=!0},e.a=i},function(t,e,n){"use strict";var i=n(12),r=n(0),o=n(20),s=n(2),a=n(39),u=n(75),h=n(37),c=n(47),l=n(43),p=n(59),f=function(t){function e(e,n){t.call(this),this.maxDelta_=-1,this.maxDeltaRevision_=-1,void 0===n||Array.isArray(e[0])?this.setCoordinates(e,n):this.setFlatCoordinates(n,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,e,n,i){return i<Object(r.e)(this.getExtent(),t,e)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Object(h.e)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Object(h.d)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,e,n,i))},e.prototype.getArea=function(){return Object(u.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getCoordinates=function(){return Object(l.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getSimplifiedGeometryInternal=function(t){var n=[];return n.length=Object(p.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,n,0),new e(n,o.a.XY)},e.prototype.getType=function(){return s.a.LINEAR_RING},e.prototype.intersectsExtent=function(t){},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Object(c.b)(this.flatCoordinates,0,t,this.stride),this.changed()},e}(a.a),d=n(48),g=(n(77),n(49)),y=n(90),_=n(72),v=n(53),m=n(7);n.d(e,"c",function(){return x}),n.d(e,"b",function(){return b}),n.d(e,"d",function(){return w});var E=function(t){function e(e,n,i){t.call(this),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,void 0!==n&&i?(this.setFlatCoordinates(n,e),this.ends_=i):this.setCoordinates(e,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.appendLinearRing=function(t){this.flatCoordinates?Object(i.c)(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout,this.ends_.slice())},e.prototype.closestPointXY=function(t,e,n,i){return i<Object(r.e)(this.getExtent(),t,e)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Object(h.a)(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Object(h.b)(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,e,n,i))},e.prototype.containsXY=function(t,e){return Object(g.c)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,e)},e.prototype.getArea=function(){return Object(u.b)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)},e.prototype.getCoordinates=function(t){var e;return void 0!==t?(e=this.getOrientedFlatCoordinates().slice(),Object(v.c)(e,0,this.ends_,this.stride,t)):e=this.flatCoordinates,Object(l.b)(e,0,this.ends_,this.stride)},e.prototype.getEnds=function(){return this.ends_},e.prototype.getFlatInteriorPoint=function(){if(this.flatInteriorPointRevision_!=this.getRevision()){var t=Object(r.x)(this.getExtent());this.flatInteriorPoint_=Object(y.a)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_},e.prototype.getInteriorPoint=function(){return new d.a(this.getFlatInteriorPoint(),o.a.XYM)},e.prototype.getLinearRingCount=function(){return this.ends_.length},e.prototype.getLinearRing=function(t){return t<0||this.ends_.length<=t?null:new f(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)},e.prototype.getLinearRings=function(){for(var t=this.layout,e=this.flatCoordinates,n=this.ends_,i=[],r=0,o=0,s=n.length;o<s;++o){var a=n[o],u=new f(e.slice(r,a),t);i.push(u),r=a}return i},e.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;Object(v.a)(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=Object(v.c)(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},e.prototype.getSimplifiedGeometryInternal=function(t){var n=[],i=[];return n.length=Object(p.c)(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),n,0,i),new e(n,o.a.XY,i)},e.prototype.getType=function(){return s.a.POLYGON},e.prototype.intersectsExtent=function(t){return Object(_.c)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var n=Object(c.c)(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===n.length?0:n[n.length-1],this.changed()},e}(a.a);e.a=E;function x(t){var e=t[0],n=t[1],i=t[2],r=t[3],s=[e,n,e,r,i,r,i,n,e,n];return new E(s,o.a.XY,[s.length])}function b(t,e,n){for(var i=e||32,r=t.getStride(),o=t.getLayout(),s=t.getCenter(),a=r*(i+1),u=new Array(a),h=0;h<a;h+=r){u[h]=0,u[h+1]=0;for(var c=2;c<r;c++)u[h+c]=s[c]}var l=[u.length],p=new E(u,o,l);return w(p,s,t.getRadius(),n),p}function w(t,e,n,i){for(var r=t.getFlatCoordinates(),o=t.getStride(),s=r.length/o-1,a=i||0,u=0;u<=s;++u){var h=u*o,c=a+2*Object(m.d)(u,s)*Math.PI/s;r[h]=e[0]+n*Math.cos(c),r[h+1]=e[1]+n*Math.sin(c)}t.changed()}},function(t,e,n){"use strict";n.d(e,"c",function(){return o}),n.d(e,"d",function(){return s}),n.d(e,"b",function(){return a}),n.d(e,"a",function(){return u}),n.d(e,"e",function(){return h});var i,r,o="ol-hidden",s="ol-unselectable",a="ol-control",u="ol-collapsed",h=(r={},function(t){if(i||(i=document.createElement("div").style),!(t in r)){i.font=t;var e=i.fontFamily;if(i.font="",!e)return null;r[t]=e.split(/,\s?/)}return r[t]})},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var i={DEGREES:"degrees",FEET:"ft",METERS:"m",PIXELS:"pixels",TILE_PIXELS:"tile-pixels",USFEET:"us-ft"},r={};r[i.DEGREES]=2*Math.PI*6370997/360,r[i.FEET]=.3048,r[i.METERS]=1,r[i.USFEET]=1200/3937,e.b=i},function(t,e,n){"use strict";function i(t){return Math.pow(t,3)}function r(t){return 1-i(1-t)}function o(t){return 3*t*t-2*t*t*t}function s(t){return t}n.d(e,"a",function(){return i}),n.d(e,"b",function(){return r}),n.d(e,"c",function(){return o}),n.d(e,"d",function(){return s})},function(t,e,n){"use strict";n.d(e,"b",function(){return i}),n.d(e,"a",function(){return r});var i=.5,r=!0},function(t,e,n){"use strict";var i=function(t){function e(e,n,i,r,o){t.call(this,e,n,i.originalEvent,r,o),this.pointerEvent=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(n(87).a);e.a=i},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var i=n(55);function r(t){return function(t){return"string"==typeof t||t instanceof CanvasPattern||t instanceof CanvasGradient}(t)?t:Object(i.b)(t)}},function(t,e,n){"use strict";n.d(e,"e",function(){return o}),n.d(e,"a",function(){return s}),n.d(e,"f",function(){return a}),n.d(e,"d",function(){return u}),n.d(e,"b",function(){return h}),n.d(e,"c",function(){return c});var i=n(7);function r(t,e,n,r,o,s,a){var u,h=t[e],c=t[e+1],l=t[n]-h,p=t[n+1]-c;if(0===l&&0===p)u=e;else{var f=((o-h)*l+(s-c)*p)/(l*l+p*p);if(f>1)u=n;else{if(f>0){for(var d=0;d<r;++d)a[d]=Object(i.c)(t[e+d],t[n+d],f);return void(a.length=r)}u=e}}for(var g=0;g<r;++g)a[g]=t[u+g];a.length=r}function o(t,e,n,r,o){var s=t[e],a=t[e+1];for(e+=r;e<n;e+=r){var u=t[e],h=t[e+1],c=Object(i.f)(s,a,u,h);c>o&&(o=c),s=u,a=h}return o}function s(t,e,n,i,r){for(var s=0,a=n.length;s<a;++s){var u=n[s];r=o(t,e,u,i,r),e=u}return r}function a(t,e,n,i,r){for(var o=0,a=n.length;o<a;++o){var u=n[o];r=s(t,e,u,i,r),e=u[u.length-1]}return r}function u(t,e,n,o,s,a,u,h,c,l,p){if(e==n)return l;var f,d;if(0===s){if((d=Object(i.f)(u,h,t[e],t[e+1]))<l){for(f=0;f<o;++f)c[f]=t[e+f];return c.length=o,d}return l}for(var g=p||[NaN,NaN],y=e+o;y<n;)if(r(t,y-o,y,o,u,h,g),(d=Object(i.f)(u,h,g[0],g[1]))<l){for(l=d,f=0;f<o;++f)c[f]=g[f];c.length=o,y+=o}else y+=o*Math.max((Math.sqrt(d)-Math.sqrt(l))/s|0,1);if(a&&(r(t,n-o,e,o,u,h,g),(d=Object(i.f)(u,h,g[0],g[1]))<l)){for(l=d,f=0;f<o;++f)c[f]=g[f];c.length=o}return l}function h(t,e,n,i,r,o,s,a,h,c,l){for(var p=l||[NaN,NaN],f=0,d=n.length;f<d;++f){var g=n[f];c=u(t,e,g,i,r,o,s,a,h,c,p),e=g}return c}function c(t,e,n,i,r,o,s,a,u,c,l){for(var p=l||[NaN,NaN],f=0,d=n.length;f<d;++f){var g=n[f];c=h(t,e,g,i,r,o,s,a,u,c,p),e=g[g.length-1]}return c}},function(t,e,n){"use strict";function i(t,e,n,i,r,o){for(var s=o||[],a=0,u=e;u<n;u+=i){var h=t[u],c=t[u+1];s[a++]=r[0]*h+r[2]*c+r[4],s[a++]=r[1]*h+r[3]*c+r[5]}return o&&s.length!=a&&(s.length=a),s}function r(t,e,n,i,r,o,s){for(var a=s||[],u=Math.cos(r),h=Math.sin(r),c=o[0],l=o[1],p=0,f=e;f<n;f+=i){var d=t[f]-c,g=t[f+1]-l;a[p++]=c+d*u-g*h,a[p++]=l+d*h+g*u;for(var y=f+2;y<f+i;++y)a[p++]=t[y]}return s&&a.length!=p&&(a.length=p),a}function o(t,e,n,i,r,o,s,a){for(var u=a||[],h=s[0],c=s[1],l=0,p=e;p<n;p+=i){var f=t[p]-h,d=t[p+1]-c;u[l++]=h+r*f,u[l++]=c+o*d;for(var g=p+2;g<p+i;++g)u[l++]=t[g]}return a&&u.length!=l&&(u.length=l),u}function s(t,e,n,i,r,o,s){for(var a=s||[],u=0,h=e;h<n;h+=i){a[u++]=t[h]+r,a[u++]=t[h+1]+o;for(var c=h+2;c<h+i;++c)a[u++]=t[c]}return s&&a.length!=u&&(a.length=u),a}n.d(e,"c",function(){return i}),n.d(e,"a",function(){return r}),n.d(e,"b",function(){return o}),n.d(e,"d",function(){return s})},function(t,e,n){"use strict";n.d(e,"b",function(){return l});var i=n(9),r=n(0),o=n(73),s=n(20),a=n(38),u=n(13),h=function(t){function e(){t.call(this),this.layout=s.a.XY,this.stride=2,this.flatCoordinates=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.computeExtent=function(t){return Object(r.o)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.getCoordinates=function(){},e.prototype.getFirstCoordinate=function(){return this.flatCoordinates.slice(0,this.stride)},e.prototype.getFlatCoordinates=function(){return this.flatCoordinates},e.prototype.getLastCoordinate=function(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)},e.prototype.getLayout=function(){return this.layout},e.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!=this.getRevision()&&(Object(u.b)(this.simplifiedGeometryCache),this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;var e=t.toString();if(this.simplifiedGeometryCache.hasOwnProperty(e))return this.simplifiedGeometryCache[e];var n=this.getSimplifiedGeometryInternal(t);return n.getFlatCoordinates().length<this.flatCoordinates.length?(this.simplifiedGeometryCache[e]=n,n):(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)},e.prototype.getSimplifiedGeometryInternal=function(t){return this},e.prototype.getStride=function(){return this.stride},e.prototype.setFlatCoordinates=function(t,e){this.stride=c(t),this.layout=t,this.flatCoordinates=e},e.prototype.setCoordinates=function(t,e){},e.prototype.setLayout=function(t,e,n){var i;if(t)i=c(t);else{for(var r=0;r<n;++r){if(0===e.length)return this.layout=s.a.XY,void(this.stride=2);e=e[0]}t=function(t){var e;2==t?e=s.a.XY:3==t?e=s.a.XYZ:4==t&&(e=s.a.XYZM);return e}(i=e.length)}this.layout=t,this.stride=i},e.prototype.applyTransform=function(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())},e.prototype.rotate=function(t,e){var n=this.getFlatCoordinates();if(n){var i=this.getStride();Object(a.a)(n,0,n.length,i,t,e,n),this.changed()}},e.prototype.scale=function(t,e,n){var i=e;void 0===i&&(i=t);var o=n;o||(o=Object(r.x)(this.getExtent()));var s=this.getFlatCoordinates();if(s){var u=this.getStride();Object(a.b)(s,0,s.length,u,t,i,o,s),this.changed()}},e.prototype.translate=function(t,e){var n=this.getFlatCoordinates();if(n){var i=this.getStride();Object(a.d)(n,0,n.length,i,t,e,n),this.changed()}},e}(o.a);function c(t){var e;return t==s.a.XY?e=2:t==s.a.XYZ||t==s.a.XYM?e=3:t==s.a.XYZM&&(e=4),e}function l(t,e,n){var i=t.getFlatCoordinates();if(i){var r=t.getStride();return Object(a.c)(i,0,i.length,r,e,n)}return null}h.prototype.containsXY=i.a,e.a=h},function(t,e,n){"use strict";n.r(e);var i=n(15),r=n(2),o=function(t){function e(e){var n=e||{};t.call(this,{points:1/0,fill:n.fill,radius:n.radius,snapToPixel:n.snapToPixel,stroke:n.stroke,atlasManager:n.atlasManager})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){var t=new e({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),snapToPixel:this.getSnapToPixel(),atlasManager:this.atlasManager_});return t.setOpacity(this.getOpacity()),t.setScale(this.getScale()),t},e.prototype.setRadius=function(t){this.radius_=t,this.render_(this.atlasManager_)},e}(n(79).default),s=n(66),a=n(62);n.d(e,"toFunction",function(){return h}),n.d(e,"createDefaultStyle",function(){return l}),n.d(e,"createEditingStyle",function(){return p});var u=function(t){var e=t||{};this.geometry_=null,this.geometryFunction_=f,void 0!==e.geometry&&this.setGeometry(e.geometry),this.fill_=void 0!==e.fill?e.fill:null,this.image_=void 0!==e.image?e.image:null,this.renderer_=void 0!==e.renderer?e.renderer:null,this.stroke_=void 0!==e.stroke?e.stroke:null,this.text_=void 0!==e.text?e.text:null,this.zIndex_=e.zIndex};function h(t){var e,n;"function"==typeof t?e=t:(Array.isArray(t)?n=t:(Object(i.a)(t instanceof u,41),n=[t]),e=function(){return n});return e}u.prototype.clone=function(){var t=this.getGeometry();return t&&t.clone&&(t=t.clone()),new u({geometry:t,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})},u.prototype.getRenderer=function(){return this.renderer_},u.prototype.setRenderer=function(t){this.renderer_=t},u.prototype.getGeometry=function(){return this.geometry_},u.prototype.getGeometryFunction=function(){return this.geometryFunction_},u.prototype.getFill=function(){return this.fill_},u.prototype.setFill=function(t){this.fill_=t},u.prototype.getImage=function(){return this.image_},u.prototype.setImage=function(t){this.image_=t},u.prototype.getStroke=function(){return this.stroke_},u.prototype.setStroke=function(t){this.stroke_=t},u.prototype.getText=function(){return this.text_},u.prototype.setText=function(t){this.text_=t},u.prototype.getZIndex=function(){return this.zIndex_},u.prototype.setGeometry=function(t){"function"==typeof t?this.geometryFunction_=t:"string"==typeof t?this.geometryFunction_=function(e){return e.get(t)}:t?void 0!==t&&(this.geometryFunction_=function(){return t}):this.geometryFunction_=f,this.geometry_=t},u.prototype.setZIndex=function(t){this.zIndex_=t};var c=null;function l(t,e){if(!c){var n=new s.default({color:"rgba(255,255,255,0.4)"}),i=new a.default({color:"#3399CC",width:1.25});c=[new u({image:new o({fill:n,stroke:i,radius:5}),fill:n,stroke:i})]}return c}function p(){var t={},e=[255,255,255,1],n=[0,153,255,1];return t[r.a.POLYGON]=[new u({fill:new s.default({color:[255,255,255,.5]})})],t[r.a.MULTI_POLYGON]=t[r.a.POLYGON],t[r.a.LINE_STRING]=[new u({stroke:new a.default({color:e,width:5})}),new u({stroke:new a.default({color:n,width:3})})],t[r.a.MULTI_LINE_STRING]=t[r.a.LINE_STRING],t[r.a.CIRCLE]=t[r.a.POLYGON].concat(t[r.a.LINE_STRING]),t[r.a.POINT]=[new u({image:new o({radius:6,fill:new s.default({color:n}),stroke:new a.default({color:e,width:1.5})}),zIndex:1/0})],t[r.a.MULTI_POINT]=t[r.a.POINT],t[r.a.GEOMETRY_COLLECTION]=t[r.a.POLYGON].concat(t[r.a.LINE_STRING],t[r.a.POINT]),t}function f(t){return t.getGeometry()}e.default=u},function(t,e,n){"use strict";function i(t){return t[0]>0&&t[1]>0}function r(t,e,n){return void 0===n&&(n=[0,0]),n[0]=t[0]*e+.5|0,n[1]=t[1]*e+.5|0,n}function o(t,e){return Array.isArray(t)?t:(void 0===e?e=[t,t]:e[0]=e[1]=t,e)}n.d(e,"a",function(){return i}),n.d(e,"b",function(){return r}),n.d(e,"c",function(){return o})},function(t,e,n){"use strict";var i=n(15),r=n(1),o=n(4),s=n(23),a=n(73),u=n(40),h=function(t){function e(e){if(t.call(this),this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,Object(r.a)(this,Object(s.b)(this.geometryName_),this.handleGeometryChanged_,this),void 0!==e)if(e instanceof a.a||!e){var n=e;this.setGeometry(n)}else{var i=e;this.setProperties(i)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){var t=new e(this.getProperties());t.setGeometryName(this.getGeometryName());var n=this.getGeometry();n&&t.setGeometry(n.clone());var i=this.getStyle();return i&&t.setStyle(i),t},e.prototype.getGeometry=function(){return this.get(this.geometryName_)},e.prototype.getId=function(){return this.id_},e.prototype.getGeometryName=function(){return this.geometryName_},e.prototype.getStyle=function(){return this.style_},e.prototype.getStyleFunction=function(){return this.styleFunction_},e.prototype.handleGeometryChange_=function(){this.changed()},e.prototype.handleGeometryChanged_=function(){this.geometryChangeKey_&&(Object(r.e)(this.geometryChangeKey_),this.geometryChangeKey_=null);var t=this.getGeometry();t&&(this.geometryChangeKey_=Object(r.a)(t,o.a.CHANGE,this.handleGeometryChange_,this)),this.changed()},e.prototype.setGeometry=function(t){this.set(this.geometryName_,t)},e.prototype.setStyle=function(t){var e,n;this.style_=t,this.styleFunction_=t?"function"==typeof(e=t)?e:(Array.isArray(e)?n=e:(Object(i.a)(e instanceof u.default,41),n=[e]),function(){return n}):void 0,this.changed()},e.prototype.setId=function(t){this.id_=t,this.changed()},e.prototype.setGeometryName=function(t){Object(r.c)(this,Object(s.b)(this.geometryName_),this.handleGeometryChanged_,this),this.geometryName_=t,Object(r.a)(this,Object(s.b)(this.geometryName_),this.handleGeometryChanged_,this),this.handleGeometryChanged_()},e}(s.a);e.a=h},function(t,e,n){"use strict";function i(t,e,n,i,r){for(var o=void 0!==r?r:[],s=0,a=e;a<n;a+=i)o[s++]=t.slice(a,a+i);return o.length=s,o}function r(t,e,n,r,o){for(var s=void 0!==o?o:[],a=0,u=0,h=n.length;u<h;++u){var c=n[u];s[a++]=i(t,e,c,r,s[a]),e=c}return s.length=a,s}function o(t,e,n,i,o){for(var s=void 0!==o?o:[],a=0,u=0,h=n.length;u<h;++u){var c=n[u];s[a++]=r(t,e,c,i,s[a]),e=c[c.length-1]}return s.length=a,s}n.d(e,"a",function(){return i}),n.d(e,"b",function(){return r}),n.d(e,"c",function(){return o})},function(t,e,n){"use strict";n.r(e);var i=n(6),r=n(19),o=n(22),s=n(61),a=n(12),u=n(15),h=n(1),c=n(29),l=n(4),p=n(0),f=n(9),d=n(54);function g(t,e){return function(t,e,n,i){return function(r,o,s){var a=new XMLHttpRequest;a.open("GET","function"==typeof t?t(r,o,s):t,!0),e.getType()==d.a.ARRAY_BUFFER&&(a.responseType="arraybuffer"),a.onload=function(t){if(!a.status||a.status>=200&&a.status<300){var r,o=e.getType();o==d.a.JSON||o==d.a.TEXT?r=a.responseText:o==d.a.XML?(r=a.responseXML)||(r=(new DOMParser).parseFromString(a.responseText,"application/xml")):o==d.a.ARRAY_BUFFER&&(r=a.response),r?n.call(this,e.readFeatures(r,{featureProjection:s}),e.readProjection(r),e.getLastExtent()):i.call(this)}else i.call(this)}.bind(this),a.onerror=function(){i.call(this)}.bind(this),a.send()}}(t,e,function(t,e){this.addFeatures(t)},f.c)}function y(t,e){return[[-1/0,-1/0,1/0,1/0]]}var _=n(13),v=n(83),m=n(57),E="addfeature",x="changefeature",b="clear",w="removefeature",C=n(51),O=n.n(C),I=function(t){this.rbush_=O()(t,void 0),this.items_={}};I.prototype.insert=function(t,e){var n={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};this.rbush_.insert(n),this.items_[Object(i.b)(e)]=n},I.prototype.load=function(t,e){for(var n=new Array(e.length),r=0,o=e.length;r<o;r++){var s=t[r],a=e[r],u={minX:s[0],minY:s[1],maxX:s[2],maxY:s[3],value:a};n[r]=u,this.items_[Object(i.b)(a)]=u}this.rbush_.load(n)},I.prototype.remove=function(t){var e=Object(i.b)(t),n=this.items_[e];return delete this.items_[e],null!==this.rbush_.remove(n)},I.prototype.update=function(t,e){var n=this.items_[Object(i.b)(e)],r=[n.minX,n.minY,n.maxX,n.maxY];Object(p.p)(r,t)||(this.remove(e),this.insert(t,e))},I.prototype.getAll=function(){return this.rbush_.all().map(function(t){return t.value})},I.prototype.getInExtent=function(t){var e={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]};return this.rbush_.search(e).map(function(t){return t.value})},I.prototype.forEach=function(t,e){return this.forEach_(this.getAll(),t,e)},I.prototype.forEachInExtent=function(t,e,n){return this.forEach_(this.getInExtent(t),e,n)},I.prototype.forEach_=function(t,e,n){for(var i,r=0,o=t.length;r<o;r++)if(i=e.call(n,t[r]))return i;return i},I.prototype.isEmpty=function(){return Object(_.d)(this.items_)},I.prototype.clear=function(){this.rbush_.clear(),this.items_={}},I.prototype.getExtent=function(t){var e=this.rbush_.data;return Object(p.k)(e.minX,e.minY,e.maxX,e.maxY,t)},I.prototype.concat=function(t){for(var e in this.rbush_.load(t.rbush_.all()),t.items_)this.items_[0|e]=t.items_[0|e]};var S=I;n.d(e,"VectorSourceEvent",function(){return T});var T=function(t){function e(e,n){t.call(this,e),this.feature=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(c.a),R=function(t){function e(e){var n=e||{};t.call(this,{attributions:n.attributions,projection:void 0,state:m.a.READY,wrapX:void 0===n.wrapX||n.wrapX}),this.loader_=f.c,this.format_=n.format,this.overlaps_=void 0==n.overlaps||n.overlaps,this.url_=n.url,void 0!==n.loader?this.loader_=n.loader:void 0!==this.url_&&(Object(u.a)(this.format_,7),this.loader_=g(this.url_,this.format_)),this.strategy_=void 0!==n.strategy?n.strategy:y;var i,o,s=void 0===n.useSpatialIndex||n.useSpatialIndex;this.featuresRtree_=s?new S:null,this.loadedExtentsRtree_=new S,this.nullGeometryFeatures_={},this.idIndex_={},this.undefIdIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null,n.features instanceof r.a?o=(i=n.features).getArray():Array.isArray(n.features)&&(o=n.features),s||void 0!==i||(i=new r.a(o)),void 0!==o&&this.addFeaturesInternal(o),void 0!==i&&this.bindFeaturesCollection_(i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(v.a);R.prototype.addFeature=function(t){this.addFeatureInternal(t),this.changed()},R.prototype.addFeatureInternal=function(t){var e=Object(i.b)(t).toString();if(this.addToIndex_(e,t)){this.setupChangeEvents_(e,t);var n=t.getGeometry();if(n){var r=n.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(r,t)}else this.nullGeometryFeatures_[e]=t;this.dispatchEvent(new T(E,t))}},R.prototype.setupChangeEvents_=function(t,e){this.featureChangeKeys_[t]=[Object(h.a)(e,l.a.CHANGE,this.handleFeatureChange_,this),Object(h.a)(e,s.a.PROPERTYCHANGE,this.handleFeatureChange_,this)]},R.prototype.addToIndex_=function(t,e){var n=!0,i=e.getId();return void 0!==i?i.toString()in this.idIndex_?n=!1:this.idIndex_[i.toString()]=e:(Object(u.a)(!(t in this.undefIdIndex_),30),this.undefIdIndex_[t]=e),n},R.prototype.addFeatures=function(t){this.addFeaturesInternal(t),this.changed()},R.prototype.addFeaturesInternal=function(t){for(var e=[],n=[],r=[],o=0,s=t.length;o<s;o++){var a=t[o],u=Object(i.b)(a).toString();this.addToIndex_(u,a)&&n.push(a)}for(var h=0,c=n.length;h<c;h++){var l=n[h],p=Object(i.b)(l).toString();this.setupChangeEvents_(p,l);var f=l.getGeometry();if(f){var d=f.getExtent();e.push(d),r.push(l)}else this.nullGeometryFeatures_[p]=l}this.featuresRtree_&&this.featuresRtree_.load(e,r);for(var g=0,y=n.length;g<y;g++)this.dispatchEvent(new T(E,n[g]))},R.prototype.bindFeaturesCollection_=function(t){var e=!1;Object(h.a)(this,E,function(n){e||(e=!0,t.push(n.feature),e=!1)}),Object(h.a)(this,w,function(n){e||(e=!0,t.remove(n.feature),e=!1)}),Object(h.a)(t,o.a.ADD,function(t){e||(e=!0,this.addFeature(t.element),e=!1)},this),Object(h.a)(t,o.a.REMOVE,function(t){e||(e=!0,this.removeFeature(t.element),e=!1)},this),this.featuresCollection_=t},R.prototype.clear=function(t){if(t){for(var e in this.featureChangeKeys_){this.featureChangeKeys_[e].forEach(h.e)}this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.undefIdIndex_={})}else if(this.featuresRtree_)for(var n in this.featuresRtree_.forEach(this.removeFeatureInternal,this),this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[n]);this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.loadedExtentsRtree_.clear(),this.nullGeometryFeatures_={};var i=new T(b);this.dispatchEvent(i),this.changed()},R.prototype.forEachFeature=function(t){return this.featuresRtree_?this.featuresRtree_.forEach(t):this.featuresCollection_?this.featuresCollection_.forEach(t):void 0},R.prototype.forEachFeatureAtCoordinateDirect=function(t,e){var n=[t[0],t[1],t[0],t[1]];return this.forEachFeatureInExtent(n,function(n){return n.getGeometry().intersectsCoordinate(t)?e(n):void 0})},R.prototype.forEachFeatureInExtent=function(t,e){return this.featuresRtree_?this.featuresRtree_.forEachInExtent(t,e):this.featuresCollection_?this.featuresCollection_.forEach(e):void 0},R.prototype.forEachFeatureIntersectingExtent=function(t,e){return this.forEachFeatureInExtent(t,function(n){if(n.getGeometry().intersectsExtent(t)){var i=e(n);if(i)return i}})},R.prototype.getFeaturesCollection=function(){return this.featuresCollection_},R.prototype.getFeatures=function(){var t;return this.featuresCollection_?t=this.featuresCollection_.getArray():this.featuresRtree_&&(t=this.featuresRtree_.getAll(),Object(_.d)(this.nullGeometryFeatures_)||Object(a.c)(t,Object(_.c)(this.nullGeometryFeatures_))),t},R.prototype.getFeaturesAtCoordinate=function(t){var e=[];return this.forEachFeatureAtCoordinateDirect(t,function(t){e.push(t)}),e},R.prototype.getFeaturesInExtent=function(t){return this.featuresRtree_.getInExtent(t)},R.prototype.getClosestFeatureToCoordinate=function(t,e){var n=t[0],i=t[1],r=null,o=[NaN,NaN],s=1/0,a=[-1/0,-1/0,1/0,1/0],u=e||f.b;return this.featuresRtree_.forEachInExtent(a,function(t){if(u(t)){var e=t.getGeometry(),h=s;if((s=e.closestPointXY(n,i,o,s))<h){r=t;var c=Math.sqrt(s);a[0]=n-c,a[1]=i-c,a[2]=n+c,a[3]=i+c}}}),r},R.prototype.getExtent=function(t){return this.featuresRtree_.getExtent(t)},R.prototype.getFeatureById=function(t){var e=this.idIndex_[t.toString()];return void 0!==e?e:null},R.prototype.getFormat=function(){return this.format_},R.prototype.getOverlaps=function(){return this.overlaps_},R.prototype.getResolutions=function(){},R.prototype.getUrl=function(){return this.url_},R.prototype.handleFeatureChange_=function(t){var e=t.target,n=Object(i.b)(e).toString(),r=e.getGeometry();if(r){var o=r.getExtent();n in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[n],this.featuresRtree_&&this.featuresRtree_.insert(o,e)):this.featuresRtree_&&this.featuresRtree_.update(o,e)}else n in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(e),this.nullGeometryFeatures_[n]=e);var s=e.getId();if(void 0!==s){var a=s.toString();n in this.undefIdIndex_?(delete this.undefIdIndex_[n],this.idIndex_[a]=e):this.idIndex_[a]!==e&&(this.removeFromIdIndex_(e),this.idIndex_[a]=e)}else n in this.undefIdIndex_||(this.removeFromIdIndex_(e),this.undefIdIndex_[n]=e);this.changed(),this.dispatchEvent(new T(x,e))},R.prototype.hasFeature=function(t){var e=t.getId();return void 0!==e?e in this.idIndex_:Object(i.b)(t).toString()in this.undefIdIndex_},R.prototype.isEmpty=function(){return this.featuresRtree_.isEmpty()&&Object(_.d)(this.nullGeometryFeatures_)},R.prototype.loadFeatures=function(t,e,n){for(var i=this,r=this.loadedExtentsRtree_,o=this.strategy_(t,e),s=function(t,s){var a=o[t];r.forEachInExtent(a,function(t){return Object(p.g)(t.extent,a)})||(i.loader_.call(i,a,e,n),r.insert(a,{extent:a.slice()}))},a=0,u=o.length;a<u;++a)s(a)},R.prototype.removeLoadedExtent=function(t){var e,n=this.loadedExtentsRtree_;n.forEachInExtent(t,function(n){if(Object(p.p)(n.extent,t))return e=n,!0}),e&&n.remove(e)},R.prototype.removeFeature=function(t){var e=Object(i.b)(t).toString();e in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[e]:this.featuresRtree_&&this.featuresRtree_.remove(t),this.removeFeatureInternal(t),this.changed()},R.prototype.removeFeatureInternal=function(t){var e=Object(i.b)(t).toString();this.featureChangeKeys_[e].forEach(h.e),delete this.featureChangeKeys_[e];var n=t.getId();void 0!==n?delete this.idIndex_[n.toString()]:delete this.undefIdIndex_[e],this.dispatchEvent(new T(w,t))},R.prototype.removeFromIdIndex_=function(t){var e=!1;for(var n in this.idIndex_)if(this.idIndex_[n]===t){delete this.idIndex_[n],e=!0;break}return e},R.prototype.setLoader=function(t){this.loader_=t};e.default=R},function(t,e,n){"use strict";e.a={IMAGE:"IMAGE",TILE:"TILE",VECTOR_TILE:"VECTOR_TILE",VECTOR:"VECTOR"}},function(t,e,n){"use strict";n.d(e,"c",function(){return r}),n.d(e,"d",function(){return o}),n.d(e,"a",function(){return s}),n.d(e,"b",function(){return a});var i=n(7);function r(t,e){return void 0!==t?0:void 0}function o(t,e){return void 0!==t?t+e:void 0}function s(t){var e=2*Math.PI/t;return function(t,n){return void 0!==t?t=Math.floor((t+n)/e+.5)*e:void 0}}function a(t){var e=t||Object(i.i)(5);return function(t,n){return void 0!==t?Math.abs(t+n)<=e?0:t+n:void 0}}},function(t,e,n){"use strict";function i(t,e,n,i){for(var r=0,o=n.length;r<o;++r)t[e++]=n[r];return e}function r(t,e,n,i){for(var r=0,o=n.length;r<o;++r)for(var s=n[r],a=0;a<i;++a)t[e++]=s[a];return e}function o(t,e,n,i,o){for(var s=o||[],a=0,u=0,h=n.length;u<h;++u){var c=r(t,e,n[u],i);s[a++]=c,e=c}return s.length=a,s}function s(t,e,n,i,r){for(var s=r||[],a=0,u=0,h=n.length;u<h;++u){var c=o(t,e,n[u],i,s[a]);s[a++]=c,e=c[c.length-1]}return s.length=a,s}n.d(e,"a",function(){return i}),n.d(e,"b",function(){return r}),n.d(e,"c",function(){return o}),n.d(e,"d",function(){return s})},function(t,e,n){"use strict";var i=n(0),r=n(2),o=n(39),s=n(47),a=n(7),u=function(t){function e(e,n){t.call(this),this.setCoordinates(e,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,e,n,i){var r=this.flatCoordinates,o=Object(a.f)(t,e,r[0],r[1]);if(o<i){for(var s=this.stride,u=0;u<s;++u)n[u]=r[u];return n.length=s,o}return i},e.prototype.getCoordinates=function(){return this.flatCoordinates?this.flatCoordinates.slice():[]},e.prototype.computeExtent=function(t){return Object(i.m)(this.flatCoordinates,t)},e.prototype.getType=function(){return r.a.POINT},e.prototype.intersectsExtent=function(t){return Object(i.h)(t,this.flatCoordinates[0],this.flatCoordinates[1])},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Object(s.a)(this.flatCoordinates,0,t,this.stride),this.changed()},e}(o.a);e.a=u},function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n.d(e,"b",function(){return o}),n.d(e,"c",function(){return s}),n.d(e,"d",function(){return a});var i=n(0);function r(t,e,n,r,s){return!Object(i.t)(s,function(i){return!o(t,e,n,r,i[0],i[1])})}function o(t,e,n,i,r,o){for(var s=0,a=t[n-i],u=t[n-i+1];e<n;e+=i){var h=t[e],c=t[e+1];u<=o?c>o&&(h-a)*(o-u)-(r-a)*(c-u)>0&&s++:c<=o&&(h-a)*(o-u)-(r-a)*(c-u)<0&&s--,a=h,u=c}return 0!==s}function s(t,e,n,i,r,s){if(0===n.length)return!1;if(!o(t,e,n[0],i,r,s))return!1;for(var a=1,u=n.length;a<u;++a)if(o(t,n[a-1],n[a],i,r,s))return!1;return!0}function a(t,e,n,i,r,o){if(0===n.length)return!1;for(var a=0,u=n.length;a<u;++a){var h=n[a];if(s(t,e,h,i,r,o))return!0;e=h[h.length-1]}return!1}},function(t,e,n){"use strict";e.a={POSTCOMPOSE:"postcompose",PRECOMPOSE:"precompose",RENDER:"render"}},function(t,e,n){"use strict";t.exports=r,t.exports.default=r;var i=n(104);function r(t,e){if(!(this instanceof r))return new r(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),this.clear()}function o(t,e,n){if(!n)return e.indexOf(t);for(var i=0;i<e.length;i++)if(n(t,e[i]))return i;return-1}function s(t,e){a(t,0,t.children.length,e,t)}function a(t,e,n,i,r){r||(r=g(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(var o,s=e;s<n;s++)o=t.children[s],u(r,t.leaf?i(o):o);return r}function u(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function h(t,e){return t.minX-e.minX}function c(t,e){return t.minY-e.minY}function l(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function p(t){return t.maxX-t.minX+(t.maxY-t.minY)}function f(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function d(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function g(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function y(t,e,n,r,o){for(var s,a=[e,n];a.length;)(n=a.pop())-(e=a.pop())<=r||(s=e+Math.ceil((n-e)/r/2)*r,i(t,s,e,n,o),a.push(e,s,s,n))}r.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,n=[],i=this.toBBox;if(!d(t,e))return n;for(var r,o,s,a,u=[];e;){for(r=0,o=e.children.length;r<o;r++)s=e.children[r],d(t,a=e.leaf?i(s):s)&&(e.leaf?n.push(s):f(t,a)?this._all(s,n):u.push(s));e=u.pop()}return n},collides:function(t){var e=this.data,n=this.toBBox;if(!d(t,e))return!1;for(var i,r,o,s,a=[];e;){for(i=0,r=e.children.length;i<r;i++)if(o=e.children[i],d(t,s=e.leaf?n(o):o)){if(e.leaf||f(t,s))return!0;a.push(o)}e=a.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,n=t.length;e<n;e++)this.insert(t[e]);return this}var i=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===i.height)this._splitRoot(this.data,i);else{if(this.data.height<i.height){var r=this.data;this.data=i,i=r}this._insert(i,this.data.height-i.height-1,!0)}else this.data=i;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=g([]),this},remove:function(t,e){if(!t)return this;for(var n,i,r,s,a=this.data,u=this.toBBox(t),h=[],c=[];a||h.length;){if(a||(a=h.pop(),i=h[h.length-1],n=c.pop(),s=!0),a.leaf&&-1!==(r=o(t,a.children,e)))return a.children.splice(r,1),h.push(a),this._condense(h),this;s||a.leaf||!f(a,u)?i?(n++,a=i.children[n],s=!1):a=null:(h.push(a),c.push(n),n=0,i=a,a=a.children[0])}return this},toBBox:function(t){return t},compareMinX:h,compareMinY:c,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},_build:function(t,e,n,i){var r,o=n-e+1,a=this._maxEntries;if(o<=a)return s(r=g(t.slice(e,n+1)),this.toBBox),r;i||(i=Math.ceil(Math.log(o)/Math.log(a)),a=Math.ceil(o/Math.pow(a,i-1))),(r=g([])).leaf=!1,r.height=i;var u,h,c,l,p=Math.ceil(o/a),f=p*Math.ceil(Math.sqrt(a));for(y(t,e,n,f,this.compareMinX),u=e;u<=n;u+=f)for(y(t,u,c=Math.min(u+f-1,n),p,this.compareMinY),h=u;h<=c;h+=p)l=Math.min(h+p-1,c),r.children.push(this._build(t,h,l,i-1));return s(r,this.toBBox),r},_chooseSubtree:function(t,e,n,i){for(var r,o,s,a,u,h,c,p,f,d;i.push(e),!e.leaf&&i.length-1!==n;){for(c=p=1/0,r=0,o=e.children.length;r<o;r++)u=l(s=e.children[r]),f=t,d=s,(h=(Math.max(d.maxX,f.maxX)-Math.min(d.minX,f.minX))*(Math.max(d.maxY,f.maxY)-Math.min(d.minY,f.minY))-u)<p?(p=h,c=u<c?u:c,a=s):h===p&&u<c&&(c=u,a=s);e=a||e.children[0]}return e},_insert:function(t,e,n){var i=this.toBBox,r=n?t:i(t),o=[],s=this._chooseSubtree(r,this.data,e,o);for(s.children.push(t),u(s,r);e>=0&&o[e].children.length>this._maxEntries;)this._split(o,e),e--;this._adjustParentBBoxes(r,o,e)},_split:function(t,e){var n=t[e],i=n.children.length,r=this._minEntries;this._chooseSplitAxis(n,r,i);var o=this._chooseSplitIndex(n,r,i),a=g(n.children.splice(o,n.children.length-o));a.height=n.height,a.leaf=n.leaf,s(n,this.toBBox),s(a,this.toBBox),e?t[e-1].children.push(a):this._splitRoot(n,a)},_splitRoot:function(t,e){this.data=g([t,e]),this.data.height=t.height+1,this.data.leaf=!1,s(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,n){var i,r,o,s,u,h,c,p,f,d,g,y,_,v;for(h=c=1/0,i=e;i<=n-e;i++)r=a(t,0,i,this.toBBox),o=a(t,i,n,this.toBBox),f=r,d=o,void 0,void 0,void 0,void 0,g=Math.max(f.minX,d.minX),y=Math.max(f.minY,d.minY),_=Math.min(f.maxX,d.maxX),v=Math.min(f.maxY,d.maxY),s=Math.max(0,_-g)*Math.max(0,v-y),u=l(r)+l(o),s<h?(h=s,p=i,c=u<c?u:c):s===h&&u<c&&(c=u,p=i);return p},_chooseSplitAxis:function(t,e,n){var i=t.leaf?this.compareMinX:h,r=t.leaf?this.compareMinY:c;this._allDistMargin(t,e,n,i)<this._allDistMargin(t,e,n,r)&&t.children.sort(i)},_allDistMargin:function(t,e,n,i){t.children.sort(i);var r,o,s=this.toBBox,h=a(t,0,e,s),c=a(t,n-e,n,s),l=p(h)+p(c);for(r=e;r<n-e;r++)o=t.children[r],u(h,t.leaf?s(o):o),l+=p(h);for(r=n-e-1;r>=e;r--)o=t.children[r],u(c,t.leaf?s(o):o),l+=p(c);return l},_adjustParentBBoxes:function(t,e,n){for(var i=n;i>=0;i--)u(e[i],t)},_condense:function(t){for(var e,n=t.length-1;n>=0;n--)0===t[n].children.length?n>0?(e=t[n-1].children).splice(e.indexOf(t[n]),1):this.clear():s(t[n],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}}},function(t,e,n){"use strict";n.r(e),n.d(e,"RenderType",function(){return u});var i=n(45),r=n(58),o=n(85),s=n(13),a=n(40),u={IMAGE:"image",VECTOR:"vector"},h="renderOrder",c=function(t){function e(e){var n=e||{},r=Object(s.a)({},n);delete r.style,delete r.renderBuffer,delete r.updateWhileAnimating,delete r.updateWhileInteracting,t.call(this,r),this.declutter_=void 0!==n.declutter&&n.declutter,this.renderBuffer_=void 0!==n.renderBuffer?n.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(n.style),this.updateWhileAnimating_=void 0!==n.updateWhileAnimating&&n.updateWhileAnimating,this.updateWhileInteracting_=void 0!==n.updateWhileInteracting&&n.updateWhileInteracting,this.renderMode_=n.renderMode||o.a.VECTOR,this.type=i.a.VECTOR}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDeclutter=function(){return this.declutter_},e.prototype.setDeclutter=function(t){this.declutter_=t},e.prototype.getRenderBuffer=function(){return this.renderBuffer_},e.prototype.getRenderOrder=function(){return this.get(h)},e.prototype.getStyle=function(){return this.style_},e.prototype.getStyleFunction=function(){return this.styleFunction_},e.prototype.getUpdateWhileAnimating=function(){return this.updateWhileAnimating_},e.prototype.getUpdateWhileInteracting=function(){return this.updateWhileInteracting_},e.prototype.setRenderOrder=function(t){this.set(h,t)},e.prototype.setStyle=function(t){this.style_=void 0!==t?t:a.createDefaultStyle,this.styleFunction_=null===t?void 0:Object(a.toFunction)(this.style_),this.changed()},e.prototype.getRenderMode=function(){return this.renderMode_},e}(r.a);c.prototype.getSource,e.default=c},function(t,e,n){"use strict";function i(t,e,n,i){for(;e<n-i;){for(var r=0;r<i;++r){var o=t[e+r];t[e+r]=t[n-i+r],t[n-i+r]=o}e+=i,n-=i}}function r(t,e,n,i){for(var r=0,o=t[n-i],s=t[n-i+1];e<n;e+=i){var a=t[e],u=t[e+1];r+=(a-o)*(u+s),o=a,s=u}return r>0}function o(t,e,n,i,o){for(var s=void 0!==o&&o,a=0,u=n.length;a<u;++a){var h=n[a],c=r(t,e,h,i);if(0===a){if(s&&c||!s&&!c)return!1}else if(s&&!c||!s&&c)return!1;e=h}return!0}function s(t,e,n,i,r){for(var s=0,a=n.length;s<a;++s)if(!o(t,e,n[s],i,r))return!1;return!0}function a(t,e,n,o,s){for(var a=void 0!==s&&s,u=0,h=n.length;u<h;++u){var c=n[u],l=r(t,e,c,o);(0===u?a&&l||!a&&!l:a&&!l||!a&&l)&&i(t,e,c,o),e=c}return e}function u(t,e,n,i,r){for(var o=0,s=n.length;o<s;++o)e=a(t,e,n[o],i,r);return e}n.d(e,"a",function(){return o}),n.d(e,"b",function(){return s}),n.d(e,"c",function(){return a}),n.d(e,"d",function(){return u})},function(t,e,n){"use strict";e.a={ARRAY_BUFFER:"arraybuffer",JSON:"json",TEXT:"text",XML:"xml"}},function(t,e,n){"use strict";n.d(e,"a",function(){return a}),n.d(e,"b",function(){return l});var i=n(15),r=n(7),o=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,s=/^([a-z]*)$/i;function a(t){return"string"==typeof t?t:l(t)}var u,h;u={},h=0;function c(t){return t[0]=Object(r.a)(t[0]+.5|0,0,255),t[1]=Object(r.a)(t[1]+.5|0,0,255),t[2]=Object(r.a)(t[2]+.5|0,0,255),t[3]=Object(r.a)(t[3],0,1),t}function l(t){var e=t[0];e!=(0|e)&&(e=e+.5|0);var n=t[1];n!=(0|n)&&(n=n+.5|0);var i=t[2];return i!=(0|i)&&(i=i+.5|0),"rgba("+e+","+n+","+i+","+(void 0===t[3]?1:t[3])+")"}},function(t,e,n){"use strict";var i=n(12),r=n(0),o=n(20),s=n(2),a=n(39),u=n(37),h=n(47),c=n(43),l=n(68),p=n(72),f=n(86),d=n(89),g=n(59),y=function(t){function e(e,n){t.call(this),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,void 0===n||Array.isArray(e[0])?this.setCoordinates(e,n):this.setFlatCoordinates(n,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.appendCoordinate=function(t){this.flatCoordinates?Object(i.c)(this.flatCoordinates,t):this.flatCoordinates=t.slice(),this.changed()},e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,e,n,i){return i<Object(r.e)(this.getExtent(),t,e)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Object(u.e)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Object(u.d)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,t,e,n,i))},e.prototype.forEachSegment=function(t){return Object(d.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.getCoordinateAtM=function(t,e){if(this.layout!=o.a.XYM&&this.layout!=o.a.XYZM)return null;var n=void 0!==e&&e;return Object(l.b)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,n)},e.prototype.getCoordinates=function(){return Object(c.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getCoordinateAt=function(t,e){return Object(l.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e)},e.prototype.getLength=function(){return Object(f.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getFlatMidpoint=function(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_},e.prototype.getSimplifiedGeometryInternal=function(t){var n=[];return n.length=Object(g.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,n,0),new e(n,o.a.XY)},e.prototype.getType=function(){return s.a.LINE_STRING},e.prototype.intersectsExtent=function(t){return Object(p.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Object(h.b)(this.flatCoordinates,0,t,this.stride),this.changed()},e}(a.a);e.a=y},function(t,e,n){"use strict";e.a={UNDEFINED:"undefined",LOADING:"loading",READY:"ready",ERROR:"error"}},function(t,e,n){"use strict";n.d(e,"b",function(){return f});var i=n(1),r=n(4),o=n(6),s=n(23),a=n(88),u=n(21),h=n(13),c=n(50),l=n(57),p=function(t){function e(e){var n=Object(h.a)({},e);delete n.source,t.call(this,n),this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,e.map&&this.setMap(e.map),Object(i.a)(this,Object(s.b)(u.a.SOURCE),this.handleSourcePropertyChange_,this);var r=e.source?e.source:null;this.setSource(r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getLayersArray=function(t){var e=t||[];return e.push(this),e},e.prototype.getLayerStatesArray=function(t){var e=t||[];return e.push(this.getLayerState()),e},e.prototype.getSource=function(){return this.get(u.a.SOURCE)||null},e.prototype.getSourceState=function(){var t=this.getSource();return t?t.getState():l.a.UNDEFINED},e.prototype.handleSourceChange_=function(){this.changed()},e.prototype.handleSourcePropertyChange_=function(){this.sourceChangeKey_&&(Object(i.e)(this.sourceChangeKey_),this.sourceChangeKey_=null);var t=this.getSource();t&&(this.sourceChangeKey_=Object(i.a)(t,r.a.CHANGE,this.handleSourceChange_,this)),this.changed()},e.prototype.setMap=function(t){this.mapPrecomposeKey_&&(Object(i.e)(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&(Object(i.e)(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=Object(i.a)(t,c.a.PRECOMPOSE,function(t){var e=this.getLayerState();e.managed=!1,e.zIndex=1/0,t.frameState.layerStatesArray.push(e),t.frameState.layerStates[Object(o.b)(this)]=e},this),this.mapRenderKey_=Object(i.a)(this,r.a.CHANGE,t.render,t),this.changed())},e.prototype.setSource=function(t){this.set(u.a.SOURCE,t)},e}(a.a);function f(t,e){return t.visible&&e>=t.minResolution&&e<t.maxResolution}e.a=p},function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n.d(e,"b",function(){return o}),n.d(e,"e",function(){return s}),n.d(e,"c",function(){return u}),n.d(e,"d",function(){return h});var i=n(7);function r(t,e,n,r,o,s,a){var u=(n-e)/r;if(u<3){for(;e<n;e+=r)s[a++]=t[e],s[a++]=t[e+1];return a}var h=new Array(u);h[0]=1,h[u-1]=1;for(var c=[e,n-r],l=0;c.length>0;){for(var p=c.pop(),f=c.pop(),d=0,g=t[f],y=t[f+1],_=t[p],v=t[p+1],m=f+r;m<p;m+=r){var E=t[m],x=t[m+1],b=Object(i.g)(E,x,g,y,_,v);b>d&&(l=m,d=b)}d>o&&(h[(l-e)/r]=1,f+r<l&&c.push(f,l),l+r<p&&c.push(l,p))}for(var w=0;w<u;++w)h[w]&&(s[a++]=t[e+w*r],s[a++]=t[e+w*r+1]);return a}function o(t,e,n,i,o,s,a,u){for(var h=0,c=n.length;h<c;++h){var l=n[h];a=r(t,e,l,i,o,s,a),u.push(a),e=l}return a}function s(t,e){return e*Math.round(t/e)}function a(t,e,n,i,r,o,a){if(e==n)return a;var u,h,c=s(t[e],r),l=s(t[e+1],r);e+=i,o[a++]=c,o[a++]=l;do{if(u=s(t[e],r),h=s(t[e+1],r),(e+=i)==n)return o[a++]=u,o[a++]=h,a}while(u==c&&h==l);for(;e<n;){var p=s(t[e],r),f=s(t[e+1],r);if(e+=i,p!=u||f!=h){var d=u-c,g=h-l,y=p-c,_=f-l;d*_==g*y&&(d<0&&y<d||d==y||d>0&&y>d)&&(g<0&&_<g||g==_||g>0&&_>g)?(u=p,h=f):(o[a++]=u,o[a++]=h,c=u,l=h,u=p,h=f)}}return o[a++]=u,o[a++]=h,a}function u(t,e,n,i,r,o,s,u){for(var h=0,c=n.length;h<c;++h){var l=n[h];s=a(t,e,l,i,r,o,s),u.push(s),e=l}return s}function h(t,e,n,i,r,o,s,a){for(var h=0,c=n.length;h<c;++h){var l=n[h],p=[];s=u(t,e,l,i,r,o,s,p),a.push(p),e=l[l.length-1]}return s}},function(t,e,n){"use strict";var i=n(76),r=n(1),o=n(9),s=n(29),a=function(t){function e(){t.call(this),this.pendingRemovals_={},this.dispatching_={},this.listeners_={}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.addEventListener=function(t,e){var n=this.listeners_[t];n||(n=this.listeners_[t]=[]),-1===n.indexOf(e)&&n.push(e)},e.prototype.dispatchEvent=function(t){var e="string"==typeof t?new s.a(t):t,n=e.type;e.target=this;var i,r=this.listeners_[n];if(r){n in this.dispatching_||(this.dispatching_[n]=0,this.pendingRemovals_[n]=0),++this.dispatching_[n];for(var a=0,u=r.length;a<u;++a)if(!1===r[a].call(this,e)||e.propagationStopped){i=!1;break}if(--this.dispatching_[n],0===this.dispatching_[n]){var h=this.pendingRemovals_[n];for(delete this.pendingRemovals_[n];h--;)this.removeEventListener(n,o.c);delete this.dispatching_[n]}return i}},e.prototype.disposeInternal=function(){Object(r.d)(this)},e.prototype.getListeners=function(t){return this.listeners_[t]},e.prototype.hasListener=function(t){return t?t in this.listeners_:Object.keys(this.listeners_).length>0},e.prototype.removeEventListener=function(t,e){var n=this.listeners_[t];if(n){var i=n.indexOf(e);t in this.pendingRemovals_?(n[i]=o.c,++this.pendingRemovals_[t]):(n.splice(i,1),0===n.length&&delete this.listeners_[t])}},e}(i.a);e.a=a},function(t,e,n){"use strict";e.a={PROPERTYCHANGE:"propertychange"}},function(t,e,n){"use strict";n.r(e);var i=n(6),r=function(t){var e=t||{};this.color_=void 0!==e.color?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=void 0!==e.lineDash?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width,this.checksum_=void 0};r.prototype.clone=function(){var t=this.getColor();return new r({color:t&&t.slice?t.slice():t||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})},r.prototype.getColor=function(){return this.color_},r.prototype.getLineCap=function(){return this.lineCap_},r.prototype.getLineDash=function(){return this.lineDash_},r.prototype.getLineDashOffset=function(){return this.lineDashOffset_},r.prototype.getLineJoin=function(){return this.lineJoin_},r.prototype.getMiterLimit=function(){return this.miterLimit_},r.prototype.getWidth=function(){return this.width_},r.prototype.setColor=function(t){this.color_=t,this.checksum_=void 0},r.prototype.setLineCap=function(t){this.lineCap_=t,this.checksum_=void 0},r.prototype.setLineDash=function(t){this.lineDash_=t,this.checksum_=void 0},r.prototype.setLineDashOffset=function(t){this.lineDashOffset_=t,this.checksum_=void 0},r.prototype.setLineJoin=function(t){this.lineJoin_=t,this.checksum_=void 0},r.prototype.setMiterLimit=function(t){this.miterLimit_=t,this.checksum_=void 0},r.prototype.setWidth=function(t){this.width_=t,this.checksum_=void 0},r.prototype.getChecksum=function(){return void 0===this.checksum_&&(this.checksum_="s",this.color_?"string"==typeof this.color_?this.checksum_+=this.color_:this.checksum_+=Object(i.b)(this.color_).toString():this.checksum_+="-",this.checksum_+=","+(void 0!==this.lineCap_?this.lineCap_.toString():"-")+","+(this.lineDash_?this.lineDash_.toString():"-")+","+(void 0!==this.lineDashOffset_?this.lineDashOffset_:"-")+","+(void 0!==this.lineJoin_?this.lineJoin_:"-")+","+(void 0!==this.miterLimit_?this.miterLimit_.toString():"-")+","+(void 0!==this.width_?this.width_.toString():"-")),this.checksum_},e.default=r},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var i=function(t,e,n,i){this.minX=t,this.maxX=e,this.minY=n,this.maxY=i};function r(t,e,n,r,o){return void 0!==o?(o.minX=t,o.maxX=e,o.minY=n,o.maxY=r,o):new i(t,e,n,r)}i.prototype.contains=function(t){return this.containsXY(t[1],t[2])},i.prototype.containsTileRange=function(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY},i.prototype.containsXY=function(t,e){return this.minX<=t&&t<=this.maxX&&this.minY<=e&&e<=this.maxY},i.prototype.equals=function(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY},i.prototype.extend=function(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)},i.prototype.getHeight=function(){return this.maxY-this.minY+1},i.prototype.getSize=function(){return[this.getWidth(),this.getHeight()]},i.prototype.getWidth=function(){return this.maxX-this.minX+1},i.prototype.intersects=function(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY},e.b=i},function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return r});var i=1,r="mouse";function o(t){if(!this.isEventSimulatedFromTouch_(t)){i.toString()in this.pointerMap&&this.cancel(t);var e=l(t,this.dispatcher);this.pointerMap[i.toString()]=t,this.dispatcher.down(e,t)}}function s(t){if(!this.isEventSimulatedFromTouch_(t)){var e=l(t,this.dispatcher);this.dispatcher.move(e,t)}}function a(t){if(!this.isEventSimulatedFromTouch_(t)){var e=this.pointerMap[i.toString()];if(e&&e.button===t.button){var n=l(t,this.dispatcher);this.dispatcher.up(n,t),this.cleanupMouse()}}}function u(t){if(!this.isEventSimulatedFromTouch_(t)){var e=l(t,this.dispatcher);this.dispatcher.enterOver(e,t)}}function h(t){if(!this.isEventSimulatedFromTouch_(t)){var e=l(t,this.dispatcher);this.dispatcher.leaveOut(e,t)}}var c=function(t){function e(e){var n={mousedown:o,mousemove:s,mouseup:a,mouseover:u,mouseout:h};t.call(this,e,n),this.pointerMap=e.pointerMap,this.lastTouches=[]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isEventSimulatedFromTouch_=function(t){for(var e=this.lastTouches,n=t.clientX,i=t.clientY,r=0,o=e.length,s=void 0;r<o&&(s=e[r]);r++){var a=Math.abs(n-s[0]),u=Math.abs(i-s[1]);if(a<=25&&u<=25)return!0}return!1},e.prototype.cancel=function(t){var e=l(t,this.dispatcher);this.dispatcher.cancel(e,t),this.cleanupMouse()},e.prototype.cleanupMouse=function(){delete this.pointerMap[i.toString()]},e}(n(67).a);function l(t,e){var n=e.cloneEvent(t,t),o=n.preventDefault;return n.preventDefault=function(){t.preventDefault(),o()},n.pointerId=i,n.isPrimary=!0,n.pointerType=r,n}e.c=c},function(t,e,n){"use strict";e.a={BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",TOP_LEFT:"top-left",TOP_RIGHT:"top-right"}},function(t,e,n){"use strict";n.r(e);var i=n(6),r=n(55),o=function(t){var e=t||{};this.color_=void 0!==e.color?e.color:null,this.checksum_=void 0};o.prototype.clone=function(){var t=this.getColor();return new o({color:t&&t.slice?t.slice():t||void 0})},o.prototype.getColor=function(){return this.color_},o.prototype.setColor=function(t){this.color_=t,this.checksum_=void 0},o.prototype.getChecksum=function(){return void 0===this.checksum_&&(this.color_ instanceof CanvasPattern||this.color_ instanceof CanvasGradient?this.checksum_=Object(i.b)(this.color_).toString():this.checksum_="f"+(this.color_?Object(r.a)(this.color_):"-")),this.checksum_},e.default=o},function(t,e,n){"use strict";var i=function(t,e){this.dispatcher=t,this.mapping_=e};i.prototype.getEvents=function(){return Object.keys(this.mapping_)},i.prototype.getHandlerForEvent=function(t){return this.mapping_[t]},e.a=i},function(t,e,n){"use strict";n.d(e,"a",function(){return o}),n.d(e,"b",function(){return s}),n.d(e,"c",function(){return a});var i=n(12),r=n(7);function o(t,e,n,o,s,a){var u=NaN,h=NaN,c=(n-e)/o;if(1===c)u=t[e],h=t[e+1];else if(2==c)u=(1-s)*t[e]+s*t[e+o],h=(1-s)*t[e+1]+s*t[e+o+1];else if(0!==c){for(var l=t[e],p=t[e+1],f=0,d=[0],g=e+o;g<n;g+=o){var y=t[g],_=t[g+1];f+=Math.sqrt((y-l)*(y-l)+(_-p)*(_-p)),d.push(f),l=y,p=_}var v=s*f,m=Object(i.a)(d,v);if(m<0){var E=(v-d[-m-2])/(d[-m-1]-d[-m-2]),x=e+(-m-2)*o;u=Object(r.c)(t[x],t[x+o],E),h=Object(r.c)(t[x+1],t[x+o+1],E)}else u=t[e+m*o],h=t[e+m*o+1]}return a?(a[0]=u,a[1]=h,a):[u,h]}function s(t,e,n,i,o,s){if(n==e)return null;var a;if(o<t[e+i-1])return s?((a=t.slice(e,e+i))[i-1]=o,a):null;if(t[n-1]<o)return s?((a=t.slice(n-i,n))[i-1]=o,a):null;if(o==t[e+i-1])return t.slice(e,e+i);for(var u=e/i,h=n/i;u<h;){var c=u+h>>1;o<t[(c+1)*i-1]?h=c:u=c+1}var l=t[u*i-1];if(o==l)return t.slice((u-1)*i,(u-1)*i+i);var p=(o-l)/(t[(u+1)*i-1]-l);a=[];for(var f=0;f<i-1;++f)a.push(Object(r.c)(t[(u-1)*i+f],t[u*i+f],p));return a.push(o),a}function a(t,e,n,i,r,o,a){if(a)return s(t,e,n[n.length-1],i,r,o);var u;if(r<t[i-1])return o?((u=t.slice(0,i))[i-1]=r,u):null;if(t[t.length-1]<r)return o?((u=t.slice(t.length-i))[i-1]=r,u):null;for(var h=0,c=n.length;h<c;++h){var l=n[h];if(e!=l){if(r<t[e+i-1])return null;if(r<=t[l-1])return s(t,e,l,i,r,!1);e=l}}return null}},function(t,e,n){"use strict";var i=function(t){function e(e,n,i){t.call(this,e),this.map=n,this.frameState=void 0!==i?i:null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(n(29).a);e.a=i},function(t,e,n){"use strict";e.a={ACTIVE:"active"}},function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return r});var i=42,r=256},function(t,e,n){"use strict";n.d(e,"a",function(){return s}),n.d(e,"b",function(){return a}),n.d(e,"c",function(){return u}),n.d(e,"d",function(){return h});var i=n(0),r=n(49),o=n(89);function s(t,e,n,r,s){var a=Object(i.s)(Object(i.j)(),t,e,n,r);return!!Object(i.F)(s,a)&&(!!Object(i.g)(s,a)||(a[0]>=s[0]&&a[2]<=s[2]||(a[1]>=s[1]&&a[3]<=s[3]||Object(o.a)(t,e,n,r,function(t,e){return Object(i.G)(s,t,e)}))))}function a(t,e,n,i,r){for(var o=0,a=n.length;o<a;++o){if(s(t,e,n[o],i,r))return!0;e=n[o]}return!1}function u(t,e,n,i,o){if(!function(t,e,n,i,o){return!!(s(t,e,n,i,o)||Object(r.b)(t,e,n,i,o[0],o[1])||Object(r.b)(t,e,n,i,o[0],o[3])||Object(r.b)(t,e,n,i,o[2],o[1])||Object(r.b)(t,e,n,i,o[2],o[3]))}(t,e,n[0],i,o))return!1;if(1===n.length)return!0;for(var a=1,u=n.length;a<u;++a)if(Object(r.a)(t,n[a-1],n[a],i,o))return!1;return!0}function h(t,e,n,i,r){for(var o=0,s=n.length;o<s;++o){var a=n[o];if(u(t,e,a,i,r))return!0;e=a[a.length-1]}return!1}},function(t,e,n){"use strict";var i=n(23),r=n(0),o=n(9),s=n(38),a=n(16),u=n(32),h=n(8),c=Object(h.c)(),l=function(t){function e(){t.call(this),this.extent_=Object(r.j)(),this.extentRevision_=-1,this.simplifiedGeometryCache={},this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){},e.prototype.closestPointXY=function(t,e,n,i){},e.prototype.getClosestPoint=function(t,e){var n=e||[NaN,NaN];return this.closestPointXY(t[0],t[1],n,1/0),n},e.prototype.intersectsCoordinate=function(t){return this.containsXY(t[0],t[1])},e.prototype.computeExtent=function(t){},e.prototype.getExtent=function(t){return this.extentRevision_!=this.getRevision()&&(this.extent_=this.computeExtent(this.extent_),this.extentRevision_=this.getRevision()),Object(r.I)(this.extent_,t)},e.prototype.rotate=function(t,e){},e.prototype.scale=function(t,e,n){},e.prototype.translate=function(t,e){},e.prototype.simplify=function(t){return this.getSimplifiedGeometry(t*t)},e.prototype.getSimplifiedGeometry=function(t){},e.prototype.getType=function(){},e.prototype.applyTransform=function(t){},e.prototype.intersectsExtent=function(t){},e.prototype.translate=function(t,e){},e.prototype.transform=function(t,e){var n=(t=Object(a.c)(t)).getUnits()==u.b.TILE_PIXELS?function(n,i,o){var u=t.getExtent(),l=t.getWorldExtent(),p=Object(r.A)(l)/Object(r.A)(u);return Object(h.b)(c,l[0],l[3],p,-p,0,0,0),Object(s.c)(n,0,n.length,o,c,i),Object(a.e)(t,e)(n,i,o)}:Object(a.e)(t,e);return this.applyTransform(n),this},e}(i.a);l.prototype.containsXY=o.a,e.a=l},function(t,e,n){"use strict";var i=n(12),r=n(0),o=n(2),s=n(48),a=n(39),u=n(47),h=n(43),c=n(7),l=function(t){function e(e,n){t.call(this),n&&!Array.isArray(e[0])?this.setFlatCoordinates(n,e):this.setCoordinates(e,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.appendPoint=function(t){this.flatCoordinates?Object(i.c)(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.changed()},e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,e,n,i){if(i<Object(r.e)(this.getExtent(),t,e))return i;for(var o=this.flatCoordinates,s=this.stride,a=0,u=o.length;a<u;a+=s){var h=Object(c.f)(t,e,o[a],o[a+1]);if(h<i){i=h;for(var l=0;l<s;++l)n[l]=o[a+l];n.length=s}}return i},e.prototype.getCoordinates=function(){return Object(h.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getPoint=function(t){var e=this.flatCoordinates?this.flatCoordinates.length/this.stride:0;return t<0||e<=t?null:new s.a(this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride),this.layout)},e.prototype.getPoints=function(){for(var t=this.flatCoordinates,e=this.layout,n=this.stride,i=[],r=0,o=t.length;r<o;r+=n){var a=new s.a(t.slice(r,r+n),e);i.push(a)}return i},e.prototype.getType=function(){return o.a.MULTI_POINT},e.prototype.intersectsExtent=function(t){for(var e=this.flatCoordinates,n=this.stride,i=0,o=e.length;i<o;i+=n){var s=e[i],a=e[i+1];if(Object(r.h)(t,s,a))return!0}return!1},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Object(u.b)(this.flatCoordinates,0,t,this.stride),this.changed()},e}(a.a);e.a=l},function(t,e,n){"use strict";function i(t,e,n,i){for(var r=0,o=t[n-i],s=t[n-i+1];e<n;e+=i){var a=t[e],u=t[e+1];r+=s*a-o*u,o=a,s=u}return r/2}function r(t,e,n,r){for(var o=0,s=0,a=n.length;s<a;++s){var u=n[s];o+=i(t,e,u,r),e=u}return o}function o(t,e,n,i){for(var o=0,s=0,a=n.length;s<a;++s){var u=n[s];o+=r(t,e,u,i),e=u[u.length-1]}return o}n.d(e,"a",function(){return i}),n.d(e,"b",function(){return r}),n.d(e,"c",function(){return o})},function(t,e,n){"use strict";var i=n(9),r=function(){};r.prototype.dispose=function(){this.disposed_||(this.disposed_=!0,this.disposeInternal())},r.prototype.disposed_=!1,r.prototype.disposeInternal=i.c,e.a=r},function(t,e,n){"use strict";n.d(e,"a",function(){return o}),n.d(e,"b",function(){return s});var i=n(7),r=(n(2),6371008.8);function o(t,e,n){var o=n||r,s=Object(i.i)(t[1]),a=Object(i.i)(e[1]),u=(a-s)/2,h=Object(i.i)(e[0]-t[0])/2,c=Math.sin(u)*Math.sin(u)+Math.sin(h)*Math.sin(h)*Math.cos(s)*Math.cos(a);return 2*o*Math.atan2(Math.sqrt(c),Math.sqrt(1-c))}function s(t,e,n,o){var s=o||r,a=Object(i.i)(t[1]),u=Object(i.i)(t[0]),h=e/s,c=Math.asin(Math.sin(a)*Math.cos(h)+Math.cos(a)*Math.sin(h)*Math.cos(n)),l=u+Math.atan2(Math.sin(n)*Math.sin(h)*Math.cos(a),Math.cos(h)-Math.sin(a)*Math.sin(c));return[Object(i.h)(l),Object(i.h)(c)]}},function(t,e,n){"use strict";n.r(e);var i=n(4),r=n(42),o=n(10),s=n(35),a=n(23),u=n(11),h=n(1),c=n(29),l=n(14),p=n(0),f=n(9),d=n(2),g=n(39),y=n(47),_=function(t){function e(e,n,i){if(t.call(this),void 0!==i&&void 0===n)this.setFlatCoordinates(i,e);else{var r=n||0;this.setCenterAndRadius(e,r,i)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),void 0,this.layout)},e.prototype.closestPointXY=function(t,e,n,i){var r=this.flatCoordinates,o=t-r[0],s=e-r[1],a=o*o+s*s;if(a<i){if(0===a)for(var u=0;u<this.stride;++u)n[u]=r[u];else{var h=this.getRadius()/Math.sqrt(a);n[0]=r[0]+h*o,n[1]=r[1]+h*s;for(var c=2;c<this.stride;++c)n[c]=r[c]}return n.length=this.stride,a}return i},e.prototype.containsXY=function(t,e){var n=this.flatCoordinates,i=t-n[0],r=e-n[1];return i*i+r*r<=this.getRadiusSquared_()},e.prototype.getCenter=function(){return this.flatCoordinates.slice(0,this.stride)},e.prototype.computeExtent=function(t){var e=this.flatCoordinates,n=e[this.stride]-e[0];return Object(p.k)(e[0]-n,e[1]-n,e[0]+n,e[1]+n,t)},e.prototype.getRadius=function(){return Math.sqrt(this.getRadiusSquared_())},e.prototype.getRadiusSquared_=function(){var t=this.flatCoordinates[this.stride]-this.flatCoordinates[0],e=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return t*t+e*e},e.prototype.getType=function(){return d.a.CIRCLE},e.prototype.intersectsExtent=function(t){var e=this.getExtent();if(Object(p.F)(t,e)){var n=this.getCenter();return t[0]<=n[0]&&t[2]>=n[0]||(t[1]<=n[1]&&t[3]>=n[1]||Object(p.t)(t,this.intersectsCoordinate,this))}return!1},e.prototype.setCenter=function(t){var e=this.stride,n=this.flatCoordinates[e]-this.flatCoordinates[0],i=t.slice();i[e]=i[0]+n;for(var r=1;r<e;++r)i[e+r]=t[r];this.setFlatCoordinates(this.layout,i),this.changed()},e.prototype.setCenterAndRadius=function(t,e,n){this.setLayout(n,t,0),this.flatCoordinates||(this.flatCoordinates=[]);var i=this.flatCoordinates,r=Object(y.a)(i,0,t,this.stride);i[r++]=i[0]+e;for(var o=1,s=this.stride;o<s;++o)i[r++]=i[o];i.length=r,this.changed()},e.prototype.getCoordinates=function(){},e.prototype.setCoordinates=function(t,e){},e.prototype.setRadius=function(t){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+t,this.changed()},e}(g.a);_.prototype.transform;var v=_,m=n(56),E=n(82),x=n(74),b=n(81),w=n(64),C=n(48),O=n(30),I=n(24),S=n(70),T=n(52),R=n(44),N=n(40);n.d(e,"handleEvent",function(){return F}),n.d(e,"createRegularPolygon",function(){return k}),n.d(e,"createBox",function(){return B});var L={POINT:"Point",LINE_STRING:"LineString",POLYGON:"Polygon",CIRCLE:"Circle"},M="drawstart",P="drawend",A=function(t){function e(e,n){t.call(this,e),this.feature=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(c.a),D=function(t){function e(e){t.call(this,{handleDownEvent:j,handleEvent:F,handleUpEvent:G,stopDown:f.a}),this.shouldHandle_=!1,this.downPx_=null,this.downTimeout_,this.lastDragTime_,this.freehand_=!1,this.source_=e.source?e.source:null,this.features_=e.features?e.features:null,this.snapTolerance_=e.snapTolerance?e.snapTolerance:12,this.type_=e.type,this.mode_=function(t){var e;t===d.a.POINT||t===d.a.MULTI_POINT?e=L.POINT:t===d.a.LINE_STRING||t===d.a.MULTI_LINE_STRING?e=L.LINE_STRING:t===d.a.POLYGON||t===d.a.MULTI_POLYGON?e=L.POLYGON:t===d.a.CIRCLE&&(e=L.CIRCLE);return e}(this.type_),this.stopClick_=!!e.stopClick,this.minPoints_=e.minPoints?e.minPoints:this.mode_===L.POLYGON?3:2,this.maxPoints_=e.maxPoints?e.maxPoints:1/0,this.finishCondition_=e.finishCondition?e.finishCondition:f.b;var n,i=e.geometryFunction;if(!i)if(this.type_===d.a.CIRCLE)i=function(t,e){var n=e||new v([NaN,NaN]),i=Object(u.e)(t[0],t[1]);return n.setCenterAndRadius(t[0],Math.sqrt(i)),n};else{var r,o=this.mode_;o===L.POINT?r=C.a:o===L.LINE_STRING?r=m.a:o===L.POLYGON&&(r=O.a),i=function(t,e){var n=e;return n?o===L.POLYGON?t[0].length?n.setCoordinates([t[0].concat([t[0][0]])]):n.setCoordinates([]):n.setCoordinates(t):n=new r(t),n}}this.geometryFunction_=i,this.dragVertexDelay_=void 0!==e.dragVertexDelay?e.dragVertexDelay:500,this.finishCoordinate_=null,this.sketchFeature_=null,this.sketchPoint_=null,this.sketchCoords_=null,this.sketchLine_=null,this.sketchLineCoords_=null,this.squaredClickTolerance_=e.clickTolerance?e.clickTolerance*e.clickTolerance:36,this.overlay_=new T.default({source:new R.default({useSpatialIndex:!1,wrapX:!!e.wrapX&&e.wrapX}),style:e.style?e.style:(n=Object(N.createEditingStyle)(),function(t,e){return n[t.getGeometry().getType()]}),updateWhileInteracting:!0}),this.geometryName_=e.geometryName,this.condition_=e.condition?e.condition:l.e,this.freehandCondition_,e.freehand?this.freehandCondition_=l.b:this.freehandCondition_=e.freehandCondition?e.freehandCondition:l.f,Object(h.a)(this,Object(a.b)(S.a.ACTIVE),this.updateState_,this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setMap=function(e){t.prototype.setMap.call(this,e),this.updateState_()},e.prototype.handlePointerMove_=function(t){if(this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){var e=this.downPx_,n=t.pixel,i=e[0]-n[0],r=e[1]-n[1],o=i*i+r*r;if(this.shouldHandle_=this.freehand_?o>this.squaredClickTolerance_:o<=this.squaredClickTolerance_,!this.shouldHandle_)return!0}return this.finishCoordinate_?this.modifyDrawing_(t):this.createOrUpdateSketchPoint_(t),!0},e.prototype.atFinish_=function(t){var e=!1;if(this.sketchFeature_){var n=!1,i=[this.finishCoordinate_];if(this.mode_===L.LINE_STRING?n=this.sketchCoords_.length>this.minPoints_:this.mode_===L.POLYGON&&(n=this.sketchCoords_[0].length>this.minPoints_,i=[this.sketchCoords_[0][0],this.sketchCoords_[0][this.sketchCoords_[0].length-2]]),n)for(var r=t.map,o=0,s=i.length;o<s;o++){var a=i[o],u=r.getPixelFromCoordinate(a),h=t.pixel,c=h[0]-u[0],l=h[1]-u[1],p=this.freehand_?1:this.snapTolerance_;if(e=Math.sqrt(c*c+l*l)<=p){this.finishCoordinate_=a;break}}}return e},e.prototype.createOrUpdateSketchPoint_=function(t){var e=t.coordinate.slice();this.sketchPoint_?this.sketchPoint_.getGeometry().setCoordinates(e):(this.sketchPoint_=new r.a(new C.a(e)),this.updateSketchFeatures_())},e.prototype.startDrawing_=function(t){var e=t.coordinate;this.finishCoordinate_=e,this.mode_===L.POINT?this.sketchCoords_=e.slice():this.mode_===L.POLYGON?(this.sketchCoords_=[[e.slice(),e.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[e.slice(),e.slice()],this.sketchLineCoords_&&(this.sketchLine_=new r.a(new m.a(this.sketchLineCoords_)));var n=this.geometryFunction_(this.sketchCoords_);this.sketchFeature_=new r.a,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(n),this.updateSketchFeatures_(),this.dispatchEvent(new A(M,this.sketchFeature_))},e.prototype.modifyDrawing_=function(t){var e,n,i,o=t.coordinate,s=this.sketchFeature_.getGeometry();(this.mode_===L.POINT?n=this.sketchCoords_:this.mode_===L.POLYGON?(n=(e=this.sketchCoords_[0])[e.length-1],this.atFinish_(t)&&(o=this.finishCoordinate_.slice())):n=(e=this.sketchCoords_)[e.length-1],n[0]=o[0],n[1]=o[1],this.geometryFunction_(this.sketchCoords_,s),this.sketchPoint_)&&this.sketchPoint_.getGeometry().setCoordinates(o);if(s instanceof O.a&&this.mode_!==L.POLYGON){this.sketchLine_||(this.sketchLine_=new r.a);var a=s.getLinearRing(0);(i=this.sketchLine_.getGeometry())?(i.setFlatCoordinates(a.getLayout(),a.getFlatCoordinates()),i.changed()):(i=new m.a(a.getFlatCoordinates(),a.getLayout()),this.sketchLine_.setGeometry(i))}else this.sketchLineCoords_&&(i=this.sketchLine_.getGeometry()).setCoordinates(this.sketchLineCoords_);this.updateSketchFeatures_()},e.prototype.addToDrawing_=function(t){var e,n,i=t.coordinate,r=this.sketchFeature_.getGeometry();this.mode_===L.LINE_STRING?(this.finishCoordinate_=i.slice(),(n=this.sketchCoords_).length>=this.maxPoints_&&(this.freehand_?n.pop():e=!0),n.push(i.slice()),this.geometryFunction_(n,r)):this.mode_===L.POLYGON&&((n=this.sketchCoords_[0]).length>=this.maxPoints_&&(this.freehand_?n.pop():e=!0),n.push(i.slice()),e&&(this.finishCoordinate_=n[0]),this.geometryFunction_(this.sketchCoords_,r)),this.updateSketchFeatures_(),e&&this.finishDrawing()},e.prototype.removeLastPoint=function(){if(this.sketchFeature_){var t,e=this.sketchFeature_.getGeometry();this.mode_===L.LINE_STRING?((t=this.sketchCoords_).splice(-2,1),this.geometryFunction_(t,e),t.length>=2&&(this.finishCoordinate_=t[t.length-2].slice())):this.mode_===L.POLYGON&&((t=this.sketchCoords_[0]).splice(-2,1),this.sketchLine_.getGeometry().setCoordinates(t),this.geometryFunction_(this.sketchCoords_,e)),0===t.length&&(this.finishCoordinate_=null),this.updateSketchFeatures_()}},e.prototype.finishDrawing=function(){var t=this.abortDrawing_();if(t){var e=this.sketchCoords_,n=t.getGeometry();this.mode_===L.LINE_STRING?(e.pop(),this.geometryFunction_(e,n)):this.mode_===L.POLYGON&&(e[0].pop(),this.geometryFunction_(e,n),e=n.getCoordinates()),this.type_===d.a.MULTI_POINT?t.setGeometry(new x.a([e])):this.type_===d.a.MULTI_LINE_STRING?t.setGeometry(new E.a([e])):this.type_===d.a.MULTI_POLYGON&&t.setGeometry(new b.a([e])),this.dispatchEvent(new A(P,t)),this.features_&&this.features_.push(t),this.source_&&this.source_.addFeature(t)}},e.prototype.abortDrawing_=function(){this.finishCoordinate_=null;var t=this.sketchFeature_;return t&&(this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0)),t},e.prototype.extend=function(t){var e=t.getGeometry();this.sketchFeature_=t,this.sketchCoords_=e.getCoordinates();var n=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=n.slice(),this.sketchCoords_.push(n.slice()),this.updateSketchFeatures_(),this.dispatchEvent(new A(M,this.sketchFeature_))},e.prototype.updateSketchFeatures_=function(){var t=[];this.sketchFeature_&&t.push(this.sketchFeature_),this.sketchLine_&&t.push(this.sketchLine_),this.sketchPoint_&&t.push(this.sketchPoint_);var e=this.overlay_.getSource();e.clear(!0),e.addFeatures(t)},e.prototype.updateState_=function(){var t=this.getMap(),e=this.getActive();t&&e||this.abortDrawing_(),this.overlay_.setMap(e?t:null)},e}(I.b);function F(t){t.originalEvent.type===i.a.CONTEXTMENU&&t.preventDefault(),this.freehand_=this.mode_!==L.POINT&&this.freehandCondition_(t);var e=t.type===o.a.POINTERMOVE,n=!0;this.lastDragTime_&&t.type===o.a.POINTERDRAG&&(Date.now()-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=t.pixel,this.shouldHandle_=!this.freehand_,e=!0):this.lastDragTime_=void 0,this.shouldHandle_&&this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0));return this.freehand_&&t.type===o.a.POINTERDRAG&&null!==this.sketchFeature_?(this.addToDrawing_(t),n=!1):this.freehand_&&t.type===o.a.POINTERDOWN?n=!1:e?(n=t.type===o.a.POINTERMOVE)&&this.freehand_?n=this.handlePointerMove_(t):(t.pointerEvent.pointerType==w.b||t.type===o.a.POINTERDRAG&&!this.downTimeout_)&&this.handlePointerMove_(t):t.type===o.a.DBLCLICK&&(n=!1),I.c.call(this,t)&&n}function j(t){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=t.pixel,this.finishCoordinate_||this.startDrawing_(t),!0):!!this.condition_(t)&&(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout(function(){this.handlePointerMove_(new s.a(o.a.POINTERMOVE,t.map,t.pointerEvent,t.frameState))}.bind(this),this.dragVertexDelay_),this.downPx_=t.pixel,!0)}function G(t){var e=!0;this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(t);var n=this.mode_===L.CIRCLE;return this.shouldHandle_?(this.finishCoordinate_?this.freehand_||n?this.finishDrawing():this.atFinish_(t)?this.finishCondition_(t)&&this.finishDrawing():this.addToDrawing_(t):(this.startDrawing_(t),this.mode_===L.POINT&&this.finishDrawing()),e=!1):this.freehand_&&(this.finishCoordinate_=null,this.abortDrawing_()),!e&&this.stopClick_&&t.stopPropagation(),e}function k(t,e){return function(n,i){var r=n[0],o=n[1],s=Math.sqrt(Object(u.e)(r,o)),a=i||Object(O.b)(new v(r),t),h=e||Math.atan((o[1]-r[1])/(o[0]-r[0]));return Object(O.d)(a,r,s,h),a}}function B(){return function(t,e){var n=Object(p.b)(t),i=[[Object(p.v)(n),Object(p.w)(n),Object(p.D)(n),Object(p.C)(n),Object(p.v)(n)]],r=e;return r?r.setCoordinates(i):r=new O.a(i),r}}e.default=D},function(t,e,n){"use strict";n.r(e);var i=n(36),r=n(25),o=n(26),s=n(28),a=n(3),u=function(t){this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale,this.snapToPixel_=t.snapToPixel};u.prototype.getOpacity=function(){return this.opacity_},u.prototype.getRotateWithView=function(){return this.rotateWithView_},u.prototype.getRotation=function(){return this.rotation_},u.prototype.getScale=function(){return this.scale_},u.prototype.getSnapToPixel=function(){return this.snapToPixel_},u.prototype.getAnchor=function(){},u.prototype.getImage=function(t){},u.prototype.getHitDetectionImage=function(t){},u.prototype.getImageState=function(){},u.prototype.getImageSize=function(){},u.prototype.getHitDetectionImageSize=function(){},u.prototype.getOrigin=function(){},u.prototype.getSize=function(){},u.prototype.setOpacity=function(t){this.opacity_=t},u.prototype.setRotateWithView=function(t){this.rotateWithView_=t},u.prototype.setRotation=function(t){this.rotation_=t},u.prototype.setScale=function(t){this.scale_=t},u.prototype.setSnapToPixel=function(t){this.snapToPixel_=t},u.prototype.listenImageChange=function(t,e){},u.prototype.load=function(){},u.prototype.unlistenImageChange=function(t,e){};var h=function(t){function e(e){var n=void 0===e.snapToPixel||e.snapToPixel,i=void 0!==e.rotateWithView&&e.rotateWithView;t.call(this,{opacity:1,rotateWithView:i,rotation:void 0!==e.rotation?e.rotation:0,scale:1,snapToPixel:n}),this.checksums_=null,this.canvas_=null,this.hitDetectionCanvas_=null,this.fill_=void 0!==e.fill?e.fill:null,this.origin_=[0,0],this.points_=e.points,this.radius_=void 0!==e.radius?e.radius:e.radius1,this.radius2_=e.radius2,this.angle_=void 0!==e.angle?e.angle:0,this.stroke_=void 0!==e.stroke?e.stroke:null,this.anchor_=null,this.size_=null,this.imageSize_=null,this.hitDetectionImageSize_=null,this.atlasManager_=e.atlasManager,this.render_(this.atlasManager_)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){var t=new e({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),snapToPixel:this.getSnapToPixel(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),atlasManager:this.atlasManager_});return t.setOpacity(this.getOpacity()),t.setScale(this.getScale()),t},e.prototype.getAnchor=function(){return this.anchor_},e.prototype.getAngle=function(){return this.angle_},e.prototype.getFill=function(){return this.fill_},e.prototype.getHitDetectionImage=function(t){return this.hitDetectionCanvas_},e.prototype.getImage=function(t){return this.canvas_},e.prototype.getImageSize=function(){return this.imageSize_},e.prototype.getHitDetectionImageSize=function(){return this.hitDetectionImageSize_},e.prototype.getImageState=function(){return s.a.LOADED},e.prototype.getOrigin=function(){return this.origin_},e.prototype.getPoints=function(){return this.points_},e.prototype.getRadius=function(){return this.radius_},e.prototype.getRadius2=function(){return this.radius2_},e.prototype.getSize=function(){return this.size_},e.prototype.getStroke=function(){return this.stroke_},e.prototype.listenImageChange=function(t,e){},e.prototype.load=function(){},e.prototype.unlistenImageChange=function(t,e){},e.prototype.render_=function(t){var e,n,s="",u="",h=0,c=null,l=0,p=0;this.stroke_&&(null===(n=this.stroke_.getColor())&&(n=a.k),n=Object(i.a)(n),void 0===(p=this.stroke_.getWidth())&&(p=a.h),c=this.stroke_.getLineDash(),l=this.stroke_.getLineDashOffset(),o.a||(c=null,l=0),void 0===(u=this.stroke_.getLineJoin())&&(u=a.g),void 0===(s=this.stroke_.getLineCap())&&(s=a.d),void 0===(h=this.stroke_.getMiterLimit())&&(h=a.i));var f=2*(this.radius_+p)+1,d={strokeStyle:n,strokeWidth:p,size:f,lineCap:s,lineDash:c,lineDashOffset:l,lineJoin:u,miterLimit:h};if(void 0===t){var g=Object(r.a)(f,f);this.canvas_=g.canvas,e=f=this.canvas_.width,this.draw_(d,g,0,0),this.createHitDetectionCanvas_(d)}else{f=Math.round(f);var y,_=!this.fill_;_&&(y=this.drawHitDetectionCanvas_.bind(this,d));var v=this.getChecksum(),m=t.add(v,f,f,this.draw_.bind(this,d),y);this.canvas_=m.image,this.origin_=[m.offsetX,m.offsetY],e=m.image.width,_?(this.hitDetectionCanvas_=m.hitImage,this.hitDetectionImageSize_=[m.hitImage.width,m.hitImage.height]):(this.hitDetectionCanvas_=this.canvas_,this.hitDetectionImageSize_=[e,e])}this.anchor_=[f/2,f/2],this.size_=[f,f],this.imageSize_=[e,e]},e.prototype.draw_=function(t,e,n,r){var o,s,u;e.setTransform(1,0,0,1,0,0),e.translate(n,r),e.beginPath();var h=this.points_;if(h===1/0)e.arc(t.size/2,t.size/2,this.radius_,0,2*Math.PI,!0);else{var c=void 0!==this.radius2_?this.radius2_:this.radius_;for(c!==this.radius_&&(h*=2),o=0;o<=h;o++)s=2*o*Math.PI/h-Math.PI/2+this.angle_,u=o%2==0?this.radius_:c,e.lineTo(t.size/2+u*Math.cos(s),t.size/2+u*Math.sin(s))}if(this.fill_){var l=this.fill_.getColor();null===l&&(l=a.b),e.fillStyle=Object(i.a)(l),e.fill()}this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineCap=t.lineCap,e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke()),e.closePath()},e.prototype.createHitDetectionCanvas_=function(t){if(this.hitDetectionImageSize_=[t.size,t.size],this.fill_)this.hitDetectionCanvas_=this.canvas_;else{var e=Object(r.a)(t.size,t.size);this.hitDetectionCanvas_=e.canvas,this.drawHitDetectionCanvas_(t,e,0,0)}},e.prototype.drawHitDetectionCanvas_=function(t,e,n,i){e.setTransform(1,0,0,1,0,0),e.translate(n,i),e.beginPath();var r=this.points_;if(r===1/0)e.arc(t.size/2,t.size/2,this.radius_,0,2*Math.PI,!0);else{var o,s,u,h=void 0!==this.radius2_?this.radius2_:this.radius_;for(h!==this.radius_&&(r*=2),o=0;o<=r;o++)u=2*o*Math.PI/r-Math.PI/2+this.angle_,s=o%2==0?this.radius_:h,e.lineTo(t.size/2+s*Math.cos(u),t.size/2+s*Math.sin(u))}e.fillStyle=a.b,e.fill(),this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.stroke()),e.closePath()},e.prototype.getChecksum=function(){var t=this.stroke_?this.stroke_.getChecksum():"-",e=this.fill_?this.fill_.getChecksum():"-";if(!this.checksums_||t!=this.checksums_[1]||e!=this.checksums_[2]||this.radius_!=this.checksums_[3]||this.radius2_!=this.checksums_[4]||this.angle_!=this.checksums_[5]||this.points_!=this.checksums_[6]){var n="r"+t+e+(void 0!==this.radius_?this.radius_.toString():"-")+(void 0!==this.radius2_?this.radius2_.toString():"-")+(void 0!==this.angle_?this.angle_.toString():"-")+(void 0!==this.points_?this.points_.toString():"-");this.checksums_=[n,t,e,this.radius_,this.radius2_,this.angle_,this.points_]}return this.checksums_[0]},e}(u);e.default=h},function(t,e,n){"use strict";n.r(e);var i=n(71),r=n(6),o=n(9),s=n(7);function a(t){return t}var u=n(23),h=n(12);var c=n(46),l=n(17),p="center",f="resolution",d="rotation",g=n(15),y=n(11),_=n(33),v=n(0),m=n(2),E=n(30),x=n(39),b=n(13),w=n(32),C=n(16);n.d(e,"createCenterConstraint",function(){return S}),n.d(e,"createResolutionConstraint",function(){return T}),n.d(e,"createRotationConstraint",function(){return R}),n.d(e,"isNoopAnimation",function(){return N});var O=0,I=function(t){function e(e){t.call(this);var n=Object(b.a)({},e);this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.updateAnimations_=this.updateAnimations_.bind(this),this.projection_=Object(C.a)(n.projection,"EPSG:3857"),this.applyOptions_(n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.applyOptions_=function(t){var e={};e[p]=void 0!==t.center?t.center:null;var n=T(t);this.maxResolution_=n.maxResolution,this.minResolution_=n.minResolution,this.zoomFactor_=n.zoomFactor,this.resolutions_=t.resolutions,this.minZoom_=n.minZoom;var i=S(t),r=n.constraint,o=R(t);this.constraints_={center:i,resolution:r,rotation:o},void 0!==t.resolution?e[f]=t.resolution:void 0!==t.zoom&&(e[f]=this.constrainResolution(this.maxResolution_,t.zoom-this.minZoom_),this.resolutions_&&(e[f]=Object(s.a)(Number(this.getResolution()||e[f]),this.minResolution_,this.maxResolution_))),e[d]=void 0!==t.rotation?t.rotation:0,this.setProperties(e),this.options_=t},e.prototype.getUpdatedOptions_=function(t){var e=Object(b.a)({},this.options_);return void 0!==e.resolution?e.resolution=this.getResolution():e.zoom=this.getZoom(),e.center=this.getCenter(),e.rotation=this.getRotation(),Object(b.a)({},e,t)},e.prototype.animate=function(t){var e,n=arguments,i=arguments.length;if(i>1&&"function"==typeof arguments[i-1]&&(e=arguments[i-1],--i),!this.isDef()){var r=arguments[i-1];return r.center&&this.setCenter(r.center),void 0!==r.zoom&&this.setZoom(r.zoom),void 0!==r.rotation&&this.setRotation(r.rotation),void(e&&setTimeout(function(){e(!0)},0))}for(var o=Date.now(),a=this.getCenter().slice(),u=this.getResolution(),h=this.getRotation(),c=[],p=0;p<i;++p){var f=n[p],d={start:o,complete:!1,anchor:f.anchor,duration:void 0!==f.duration?f.duration:1e3,easing:f.easing||_.c};if(f.center&&(d.sourceCenter=a,d.targetCenter=f.center,a=d.targetCenter),void 0!==f.zoom?(d.sourceResolution=u,d.targetResolution=this.constrainResolution(this.maxResolution_,f.zoom-this.minZoom_,0),u=d.targetResolution):f.resolution&&(d.sourceResolution=u,d.targetResolution=f.resolution,u=d.targetResolution),void 0!==f.rotation){d.sourceRotation=h;var g=Object(s.d)(f.rotation-h+Math.PI,2*Math.PI)-Math.PI;d.targetRotation=h+g,h=d.targetRotation}d.callback=e,N(d)?d.complete=!0:o+=d.duration,c.push(d)}this.animations_.push(c),this.setHint(l.a.ANIMATING,1),this.updateAnimations_()},e.prototype.getAnimating=function(){return this.hints_[l.a.ANIMATING]>0},e.prototype.getInteracting=function(){return this.hints_[l.a.INTERACTING]>0},e.prototype.cancelAnimations=function(){this.setHint(l.a.ANIMATING,-this.hints_[l.a.ANIMATING]);for(var t=0,e=this.animations_.length;t<e;++t){var n=this.animations_[t];n[0].callback&&n[0].callback(!1)}this.animations_.length=0},e.prototype.updateAnimations_=function(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),this.getAnimating()){for(var t=Date.now(),e=!1,n=this.animations_.length-1;n>=0;--n){for(var i=this.animations_[n],r=!0,o=0,a=i.length;o<a;++o){var u=i[o];if(!u.complete){var h=t-u.start,c=u.duration>0?h/u.duration:1;c>=1?(u.complete=!0,c=1):r=!1;var g=u.easing(c);if(u.sourceCenter){var y=u.sourceCenter[0],_=u.sourceCenter[1],v=y+g*(u.targetCenter[0]-y),m=_+g*(u.targetCenter[1]-_);this.set(p,[v,m])}if(u.sourceResolution&&u.targetResolution){var E=1===g?u.targetResolution:u.sourceResolution+g*(u.targetResolution-u.sourceResolution);u.anchor&&this.set(p,this.calculateCenterZoom(E,u.anchor)),this.set(f,E)}if(void 0!==u.sourceRotation&&void 0!==u.targetRotation){var x=1===g?Object(s.d)(u.targetRotation+Math.PI,2*Math.PI)-Math.PI:u.sourceRotation+g*(u.targetRotation-u.sourceRotation);u.anchor&&this.set(p,this.calculateCenterRotate(x,u.anchor)),this.set(d,x)}if(e=!0,!u.complete)break}}if(r){this.animations_[n]=null,this.setHint(l.a.ANIMATING,-1);var b=i[0].callback;b&&setTimeout(function(){b(!0)},0)}}this.animations_=this.animations_.filter(Boolean),e&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_))}},e.prototype.calculateCenterRotate=function(t,e){var n,i=this.getCenter();return void 0!==i&&(n=[i[0]-e[0],i[1]-e[1]],Object(y.c)(n,t-this.getRotation()),Object(y.a)(n,e)),n},e.prototype.calculateCenterZoom=function(t,e){var n,i=this.getCenter(),r=this.getResolution();void 0!==i&&void 0!==r&&(n=[e[0]-t*(e[0]-i[0])/r,e[1]-t*(e[1]-i[1])/r]);return n},e.prototype.getSizeFromViewport_=function(){var t=[100,100],e='.ol-viewport[data-view="'+Object(r.b)(this)+'"]',n=document.querySelector(e);if(n){var i=getComputedStyle(n);t[0]=parseInt(i.width,10),t[1]=parseInt(i.height,10)}return t},e.prototype.constrainCenter=function(t){return this.constraints_.center(t)},e.prototype.constrainResolution=function(t,e,n){var i=e||0,r=n||0;return this.constraints_.resolution(t,i,r)},e.prototype.constrainRotation=function(t,e){var n=e||0;return this.constraints_.rotation(t,n)},e.prototype.getCenter=function(){return this.get(p)},e.prototype.getConstraints=function(){return this.constraints_},e.prototype.getHints=function(t){return void 0!==t?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()},e.prototype.calculateExtent=function(t){var e=t||this.getSizeFromViewport_(),n=this.getCenter();Object(g.a)(n,1);var i=this.getResolution();Object(g.a)(void 0!==i,2);var r=this.getRotation();return Object(g.a)(void 0!==r,3),Object(v.z)(n,i,r,e)},e.prototype.getMaxResolution=function(){return this.maxResolution_},e.prototype.getMinResolution=function(){return this.minResolution_},e.prototype.getMaxZoom=function(){return this.getZoomForResolution(this.minResolution_)},e.prototype.setMaxZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))},e.prototype.getMinZoom=function(){return this.getZoomForResolution(this.maxResolution_)},e.prototype.setMinZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))},e.prototype.getProjection=function(){return this.projection_},e.prototype.getResolution=function(){return this.get(f)},e.prototype.getResolutions=function(){return this.resolutions_},e.prototype.getResolutionForExtent=function(t,e){var n=e||this.getSizeFromViewport_(),i=Object(v.E)(t)/n[0],r=Object(v.A)(t)/n[1];return Math.max(i,r)},e.prototype.getResolutionForValueFunction=function(t){var e=t||2,n=this.maxResolution_,i=this.minResolution_,r=Math.log(n/i)/Math.log(e);return function(t){return n/Math.pow(e,t*r)}},e.prototype.getRotation=function(){return this.get(d)},e.prototype.getValueForResolutionFunction=function(t){var e=t||2,n=this.maxResolution_,i=this.minResolution_,r=Math.log(n/i)/Math.log(e);return function(t){return Math.log(n/t)/Math.log(e)/r}},e.prototype.getState=function(){var t=this.getCenter(),e=this.getProjection(),n=this.getResolution(),i=this.getRotation();return{center:t.slice(),projection:void 0!==e?e:null,resolution:n,rotation:i,zoom:this.getZoom()}},e.prototype.getZoom=function(){var t,e=this.getResolution();return void 0!==e&&(t=this.getZoomForResolution(e)),t},e.prototype.getZoomForResolution=function(t){var e,n,i=this.minZoom_||0;if(this.resolutions_){var r=Object(h.f)(this.resolutions_,t,1);i=r,e=this.resolutions_[r],n=r==this.resolutions_.length-1?2:e/this.resolutions_[r+1]}else e=this.maxResolution_,n=this.zoomFactor_;return i+Math.log(e/t)/Math.log(n)},e.prototype.getResolutionForZoom=function(t){return this.constrainResolution(this.maxResolution_,t-this.minZoom_,0)},e.prototype.fit=function(t,e){var n,i=e||{},r=i.size;r||(r=this.getSizeFromViewport_()),t instanceof x.a?t.getType()===m.a.CIRCLE?(t=t.getExtent(),(n=Object(E.c)(t)).rotate(this.getRotation(),Object(v.x)(t))):n=t:(Object(g.a)(Array.isArray(t),24),Object(g.a)(!Object(v.H)(t),25),n=Object(E.c)(t));var s,a=void 0!==i.padding?i.padding:[0,0,0,0],u=void 0===i.constrainResolution||i.constrainResolution,h=void 0!==i.nearest&&i.nearest;s=void 0!==i.minResolution?i.minResolution:void 0!==i.maxZoom?this.constrainResolution(this.maxResolution_,i.maxZoom-this.minZoom_,0):0;for(var c=n.getFlatCoordinates(),l=this.getRotation(),p=Math.cos(-l),f=Math.sin(-l),d=1/0,y=1/0,_=-1/0,b=-1/0,w=n.getStride(),C=0,O=c.length;C<O;C+=w){var I=c[C]*p-c[C+1]*f,S=c[C]*f+c[C+1]*p;d=Math.min(d,I),y=Math.min(y,S),_=Math.max(_,I),b=Math.max(b,S)}var T=this.getResolutionForExtent([d,y,_,b],[r[0]-a[1]-a[3],r[1]-a[0]-a[2]]);if(T=isNaN(T)?s:Math.max(T,s),u){var R=this.constrainResolution(T,0,0);!h&&R<T&&(R=this.constrainResolution(R,-1,0)),T=R}f=-f;var N=(d+_)/2,L=(y+b)/2,M=[(N+=(a[1]-a[3])/2*T)*p-(L+=(a[0]-a[2])/2*T)*f,L*p+N*f],P=i.callback?i.callback:o.c;void 0!==i.duration?this.animate({resolution:T,center:M,duration:i.duration,easing:i.easing},P):(this.setResolution(T),this.setCenter(M),setTimeout(P.bind(void 0,!0),0))},e.prototype.centerOn=function(t,e,n){var i=this.getRotation(),r=Math.cos(-i),o=Math.sin(-i),s=t[0]*r-t[1]*o,a=t[1]*r+t[0]*o,u=this.getResolution(),h=(s+=(e[0]/2-n[0])*u)*r-(a+=(n[1]-e[1]/2)*u)*(o=-o),c=a*r+s*o;this.setCenter([h,c])},e.prototype.isDef=function(){return!!this.getCenter()&&void 0!==this.getResolution()},e.prototype.rotate=function(t,e){if(void 0!==e){var n=this.calculateCenterRotate(t,e);this.setCenter(n)}this.setRotation(t)},e.prototype.setCenter=function(t){this.set(p,t),this.getAnimating()&&this.cancelAnimations()},e.prototype.setHint=function(t,e){return this.hints_[t]+=e,this.changed(),this.hints_[t]},e.prototype.setResolution=function(t){this.set(f,t),this.getAnimating()&&this.cancelAnimations()},e.prototype.setRotation=function(t){this.set(d,t),this.getAnimating()&&this.cancelAnimations()},e.prototype.setZoom=function(t){this.setResolution(this.getResolutionForZoom(t))},e}(u.a);function S(t){return void 0!==t.extent?(e=t.extent,function(t){return t?[Object(s.a)(t[0],e[0],e[2]),Object(s.a)(t[1],e[1],e[3])]:void 0}):a;var e}function T(t){var e,n,r,o=void 0!==t.minZoom?t.minZoom:O,a=void 0!==t.maxZoom?t.maxZoom:28,u=void 0!==t.zoomFactor?t.zoomFactor:2;if(void 0!==t.resolutions){var c=t.resolutions;n=c[o],r=void 0!==c[a]?c[a]:c[c.length-1],e=function(t){return function(e,n,i){if(void 0!==e){var r=Object(h.f)(t,e,i);r=Object(s.a)(r+n,0,t.length-1);var o=Math.floor(r);if(r!=o&&o<t.length-1){var a=t[o]/t[o+1];return t[o]/Math.pow(a,r-o)}return t[o]}}}(c)}else{var l=Object(C.a)(t.projection,"EPSG:3857"),p=l.getExtent(),f=(p?Math.max(Object(v.E)(p),Object(v.A)(p)):360*w.a[w.b.DEGREES]/l.getMetersPerUnit())/i.b/Math.pow(2,O),d=f/Math.pow(2,28-O);void 0!==(n=t.maxResolution)?o=0:n=f/Math.pow(u,o),void 0===(r=t.minResolution)&&(r=void 0!==t.maxZoom?void 0!==t.maxResolution?n/Math.pow(u,a):f/Math.pow(u,a):d),a=o+Math.floor(Math.log(n/r)/Math.log(u)),r=n/Math.pow(u,a-o),e=function(t,e,n){return function(i,r,o){if(void 0!==i){var s=-o/2+.5,a=Math.floor(Math.log(e/i)/Math.log(t)+s),u=Math.max(a+r,0);return void 0!==n&&(u=Math.min(u,n)),e/Math.pow(t,u)}}}(u,n,a-o)}return{constraint:e,maxResolution:n,minResolution:r,minZoom:o,zoomFactor:u}}function R(t){if(void 0===t.enableRotation||t.enableRotation){var e=t.constrainRotation;return void 0===e||!0===e?Object(c.b)():!1===e?c.d:"number"==typeof e?Object(c.a)(e):c.d}return c.c}function N(t){return!(t.sourceCenter&&t.targetCenter&&!Object(y.b)(t.sourceCenter,t.targetCenter))&&(t.sourceResolution===t.targetResolution&&t.sourceRotation===t.targetRotation)}e.default=I},function(t,e,n){"use strict";var i=n(12),r=n(0),o=n(20),s=n(2),a=n(74),u=n(30),h=n(39),c=n(75);var l=n(37),p=n(49),f=n(47),d=n(43),g=n(90),y=n(72),_=n(53),v=n(59),m=function(t){function e(e,n,r){if(t.call(this),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!r&&!Array.isArray(e[0])){for(var o=this.getLayout(),s=[],a=[],u=0,h=e.length;u<h;++u){var c=e[u];0===u&&(o=c.getLayout());for(var l=s.length,p=c.getEnds(),f=0,d=p.length;f<d;++f)p[f]+=l;Object(i.c)(s,c.getFlatCoordinates()),a.push(p)}n=o,e=s,r=a}void 0!==n&&r?(this.setFlatCoordinates(n,e),this.endss_=r):this.setCoordinates(e,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.appendPolygon=function(t){var e;if(this.flatCoordinates){var n=this.flatCoordinates.length;Object(i.c)(this.flatCoordinates,t.getFlatCoordinates());for(var r=0,o=(e=t.getEnds().slice()).length;r<o;++r)e[r]+=n}else this.flatCoordinates=t.getFlatCoordinates().slice(),e=t.getEnds().slice(),this.endss_.push();this.endss_.push(e),this.changed()},e.prototype.clone=function(){for(var t=this.endss_.length,n=new Array(t),i=0;i<t;++i)n[i]=this.endss_[i].slice();return new e(this.flatCoordinates.slice(),this.layout,n)},e.prototype.closestPointXY=function(t,e,n,i){return i<Object(r.e)(this.getExtent(),t,e)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Object(l.f)(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Object(l.c)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,t,e,n,i))},e.prototype.containsXY=function(t,e){return Object(p.d)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t,e)},e.prototype.getArea=function(){return Object(c.c)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)},e.prototype.getCoordinates=function(t){var e;return void 0!==t?(e=this.getOrientedFlatCoordinates().slice(),Object(_.d)(e,0,this.endss_,this.stride,t)):e=this.flatCoordinates,Object(d.c)(e,0,this.endss_,this.stride)},e.prototype.getEndss=function(){return this.endss_},e.prototype.getFlatInteriorPoints=function(){if(this.flatInteriorPointsRevision_!=this.getRevision()){var t=function(t,e,n,i){for(var o=[],s=Object(r.j)(),a=0,u=n.length;a<u;++a){var h=n[a];s=Object(r.o)(t,e,h[0],i),o.push((s[0]+s[2])/2,(s[1]+s[3])/2),e=h[h.length-1]}return o}(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=Object(g.b)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_},e.prototype.getInteriorPoints=function(){return new a.a(this.getFlatInteriorPoints().slice(),o.a.XYM)},e.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;Object(_.b)(t,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=Object(_.d)(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},e.prototype.getSimplifiedGeometryInternal=function(t){var n=[],i=[];return n.length=Object(v.d)(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(t),n,0,i),new e(n,o.a.XY,i)},e.prototype.getPolygon=function(t){if(t<0||this.endss_.length<=t)return null;var e;if(0===t)e=0;else{var n=this.endss_[t-1];e=n[n.length-1]}var i=this.endss_[t].slice(),r=i[i.length-1];if(0!==e)for(var o=0,s=i.length;o<s;++o)i[o]-=e;return new u.a(this.flatCoordinates.slice(e,r),this.layout,i)},e.prototype.getPolygons=function(){for(var t=this.layout,e=this.flatCoordinates,n=this.endss_,i=[],r=0,o=0,s=n.length;o<s;++o){var a=n[o].slice(),h=a[a.length-1];if(0!==r)for(var c=0,l=a.length;c<l;++c)a[c]-=r;var p=new u.a(e.slice(r,h),t,a);i.push(p),r=h}return i},e.prototype.getType=function(){return s.a.MULTI_POLYGON},e.prototype.intersectsExtent=function(t){return Object(y.d)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,3),this.flatCoordinates||(this.flatCoordinates=[]);var n=Object(f.d)(this.flatCoordinates,0,t,this.stride,this.endss_);if(0===n.length)this.flatCoordinates.length=0;else{var i=n[n.length-1];this.flatCoordinates.length=0===i.length?0:i[i.length-1]}this.changed()},e}(h.a);e.a=m},function(t,e,n){"use strict";var i=n(12),r=n(0),o=n(20),s=n(2),a=n(56),u=n(39),h=n(37),c=n(47),l=n(43),p=n(68),f=n(72),d=n(59),g=function(t){function e(e,n,r){if(t.call(this),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(e[0]))this.setCoordinates(e,n);else if(void 0!==n&&r)this.setFlatCoordinates(n,e),this.ends_=r;else{for(var o=this.getLayout(),s=[],a=[],u=0,h=e.length;u<h;++u){var c=e[u];0===u&&(o=c.getLayout()),Object(i.c)(s,c.getFlatCoordinates()),a.push(s.length)}this.setFlatCoordinates(o,s),this.ends_=a}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.appendLineString=function(t){this.flatCoordinates?Object(i.c)(this.flatCoordinates,t.getFlatCoordinates().slice()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout,this.ends_.slice())},e.prototype.closestPointXY=function(t,e,n,i){return i<Object(r.e)(this.getExtent(),t,e)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Object(h.a)(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Object(h.b)(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,t,e,n,i))},e.prototype.getCoordinateAtM=function(t,e,n){if(this.layout!=o.a.XYM&&this.layout!=o.a.XYZM||0===this.flatCoordinates.length)return null;var i=void 0!==e&&e,r=void 0!==n&&n;return Object(p.c)(this.flatCoordinates,0,this.ends_,this.stride,t,i,r)},e.prototype.getCoordinates=function(){return Object(l.b)(this.flatCoordinates,0,this.ends_,this.stride)},e.prototype.getEnds=function(){return this.ends_},e.prototype.getLineString=function(t){return t<0||this.ends_.length<=t?null:new a.a(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)},e.prototype.getLineStrings=function(){for(var t=this.flatCoordinates,e=this.ends_,n=this.layout,i=[],r=0,o=0,s=e.length;o<s;++o){var u=e[o],h=new a.a(t.slice(r,u),n);i.push(h),r=u}return i},e.prototype.getFlatMidpoints=function(){for(var t=[],e=this.flatCoordinates,n=0,r=this.ends_,o=this.stride,s=0,a=r.length;s<a;++s){var u=r[s],h=Object(p.a)(e,n,u,o,.5);Object(i.c)(t,h),n=u}return t},e.prototype.getSimplifiedGeometryInternal=function(t){var n=[],i=[];return n.length=Object(d.b)(this.flatCoordinates,0,this.ends_,this.stride,t,n,0,i),new e(n,o.a.XY,i)},e.prototype.getType=function(){return s.a.MULTI_LINE_STRING},e.prototype.intersectsExtent=function(t){return Object(f.b)(this.flatCoordinates,0,this.ends_,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var n=Object(c.c)(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===n.length?0:n[n.length-1],this.changed()},e}(u.a);e.a=g},function(t,e,n){"use strict";var i=n(9),r=n(23),o=n(16),s=n(57),a=function(t){function e(e){t.call(this),this.projection_=Object(o.c)(e.projection),this.attributions_=this.adaptAttributions_(e.attributions),this.state_=void 0!==e.state?e.state:s.a.READY,this.wrapX_=void 0!==e.wrapX&&e.wrapX}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.adaptAttributions_=function(t){return t?Array.isArray(t)?function(e){return t}:"function"==typeof t?t:function(e){return[t]}:null},e.prototype.getAttributions=function(){return this.attributions_},e.prototype.getProjection=function(){return this.projection_},e.prototype.getResolutions=function(){},e.prototype.getState=function(){return this.state_},e.prototype.getWrapX=function(){return this.wrapX_},e.prototype.refresh=function(){this.changed()},e.prototype.setAttributions=function(t){this.attributions_=this.adaptAttributions_(t),this.changed()},e.prototype.setState=function(t){this.state_=t,this.changed()},e}(r.a);a.prototype.forEachFeatureAtCoordinate=i.c,e.a=a},function(t,e,n){"use strict";var i=n(15),r=n(60),o=n(4),s=function(t){function e(e){t.call(this),this.highWaterMark=void 0!==e?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.canExpireCache=function(){return this.getCount()>this.highWaterMark},e.prototype.clear=function(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null,this.dispatchEvent(o.a.CLEAR)},e.prototype.containsKey=function(t){return this.entries_.hasOwnProperty(t)},e.prototype.forEach=function(t,e){for(var n=this.oldest_;n;)t.call(e,n.value_,n.key_,this),n=n.newer},e.prototype.get=function(t){var e=this.entries_[t];return Object(i.a)(void 0!==e,15),e===this.newest_?e.value_:(e===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(e.newer.older=e.older,e.older.newer=e.newer),e.newer=null,e.older=this.newest_,this.newest_.newer=e,this.newest_=e,e.value_)},e.prototype.remove=function(t){var e=this.entries_[t];return Object(i.a)(void 0!==e,15),e===this.newest_?(this.newest_=e.older,this.newest_&&(this.newest_.newer=null)):e===this.oldest_?(this.oldest_=e.newer,this.oldest_&&(this.oldest_.older=null)):(e.newer.older=e.older,e.older.newer=e.newer),delete this.entries_[t],--this.count_,e.value_},e.prototype.getCount=function(){return this.count_},e.prototype.getKeys=function(){var t,e=new Array(this.count_),n=0;for(t=this.newest_;t;t=t.older)e[n++]=t.key_;return e},e.prototype.getValues=function(){var t,e=new Array(this.count_),n=0;for(t=this.newest_;t;t=t.older)e[n++]=t.value_;return e},e.prototype.peekLast=function(){return this.oldest_.value_},e.prototype.peekLastKey=function(){return this.oldest_.key_},e.prototype.peekFirstKey=function(){return this.newest_.key_},e.prototype.pop=function(){var t=this.oldest_;return delete this.entries_[t.key_],t.newer&&(t.newer.older=null),this.oldest_=t.newer,this.oldest_||(this.newest_=null),--this.count_,t.value_},e.prototype.replace=function(t,e){this.get(t),this.entries_[t].value_=e},e.prototype.set=function(t,e){Object(i.a)(!(t in this.entries_),16);var n={key_:t,newer:null,older:this.newest_,value_:e};this.newest_?this.newest_.newer=n:this.oldest_=n,this.newest_=n,this.entries_[t]=n,++this.count_},e.prototype.setSize=function(t){this.highWaterMark=t},e.prototype.prune=function(){for(;this.canExpireCache();)this.pop()},e}(r.a);e.a=s},function(t,e,n){"use strict";e.a={IMAGE:"image",VECTOR:"vector"}},function(t,e,n){"use strict";function i(t,e,n,i){for(var r=t[e],o=t[e+1],s=0,a=e+i;a<n;a+=i){var u=t[a],h=t[a+1];s+=Math.sqrt((u-r)*(u-r)+(h-o)*(h-o)),r=u,o=h}return s}n.d(e,"a",function(){return i})},function(t,e,n){"use strict";var i=function(t){function e(e,n,i,r,o){t.call(this,e,n,o),this.originalEvent=i,this.pixel=n.getEventPixel(i),this.coordinate=n.getCoordinateFromPixel(this.pixel),this.dragging=void 0!==r&&r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.preventDefault=function(){t.prototype.preventDefault.call(this),this.originalEvent.preventDefault()},e.prototype.stopPropagation=function(){t.prototype.stopPropagation.call(this),this.originalEvent.stopPropagation()},e}(n(69).a);e.a=i},function(t,e,n){"use strict";var i=n(23),r=n(21),o=n(7),s=n(13),a=function(t){function e(e){t.call(this);var n=Object(s.a)({},e);n[r.a.OPACITY]=void 0!==e.opacity?e.opacity:1,n[r.a.VISIBLE]=void 0===e.visible||e.visible,n[r.a.Z_INDEX]=void 0!==e.zIndex?e.zIndex:0,n[r.a.MAX_RESOLUTION]=void 0!==e.maxResolution?e.maxResolution:1/0,n[r.a.MIN_RESOLUTION]=void 0!==e.minResolution?e.minResolution:0,this.setProperties(n),this.state_={layer:this,managed:!0},this.type}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getType=function(){return this.type},e.prototype.getLayerState=function(){return this.state_.opacity=Object(o.a)(this.getOpacity(),0,1),this.state_.sourceState=this.getSourceState(),this.state_.visible=this.getVisible(),this.state_.extent=this.getExtent(),this.state_.zIndex=this.getZIndex(),this.state_.maxResolution=this.getMaxResolution(),this.state_.minResolution=Math.max(this.getMinResolution(),0),this.state_},e.prototype.getLayersArray=function(t){},e.prototype.getLayerStatesArray=function(t){},e.prototype.getExtent=function(){return this.get(r.a.EXTENT)},e.prototype.getMaxResolution=function(){return this.get(r.a.MAX_RESOLUTION)},e.prototype.getMinResolution=function(){return this.get(r.a.MIN_RESOLUTION)},e.prototype.getOpacity=function(){return this.get(r.a.OPACITY)},e.prototype.getSourceState=function(){},e.prototype.getVisible=function(){return this.get(r.a.VISIBLE)},e.prototype.getZIndex=function(){return this.get(r.a.Z_INDEX)},e.prototype.setExtent=function(t){this.set(r.a.EXTENT,t)},e.prototype.setMaxResolution=function(t){this.set(r.a.MAX_RESOLUTION,t)},e.prototype.setMinResolution=function(t){this.set(r.a.MIN_RESOLUTION,t)},e.prototype.setOpacity=function(t){this.set(r.a.OPACITY,t)},e.prototype.setVisible=function(t){this.set(r.a.VISIBLE,t)},e.prototype.setZIndex=function(t){this.set(r.a.Z_INDEX,t)},e}(i.a);e.a=a},function(t,e,n){"use strict";function i(t,e,n,i,r,o){for(var s,a=[t[e],t[e+1]],u=[];e+i<n;e+=i){if(u[0]=t[e+i],u[1]=t[e+i+1],s=r.call(o,a,u))return s;a[0]=u[0],a[1]=u[1]}return!1}n.d(e,"a",function(){return i})},function(t,e,n){"use strict";n.d(e,"a",function(){return o}),n.d(e,"b",function(){return s});var i=n(12),r=n(49);function o(t,e,n,o,s,a,u){for(var h,c,l,p,f,d,g,y=s[a+1],_=[],v=0,m=n.length;v<m;++v){var E=n[v];for(p=t[E-o],d=t[E-o+1],h=e;h<E;h+=o)f=t[h],g=t[h+1],(y<=d&&g<=y||d<=y&&y<=g)&&(l=(y-d)/(g-d)*(f-p)+p,_.push(l)),p=f,d=g}var x=NaN,b=-1/0;for(_.sort(i.g),p=_[0],h=1,c=_.length;h<c;++h){f=_[h];var w=Math.abs(f-p);w>b&&(l=(p+f)/2,Object(r.c)(t,e,n,o,l,y)&&(x=l,b=w)),p=f}return isNaN(x)&&(x=s[a]),u?(u.push(x,y,b),u):[x,y,b]}function s(t,e,n,i,r){for(var s=[],a=0,u=n.length;a<u;++a){var h=n[a];s=o(t,e,h,i,r,2*a,s),e=h[h.length-1]}return s}},function(t,e,n){"use strict";var i=n(1),r=n(60),o=n(4),s=function(t){function e(){t.call(this),this.revision_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.changed=function(){++this.revision_,this.dispatchEvent(o.a.CHANGE)},e.prototype.getRevision=function(){return this.revision_},e.prototype.on=function(t,e){if(Array.isArray(t)){for(var n=t.length,r=new Array(n),o=0;o<n;++o)r[o]=Object(i.a)(this,t[o],e);return r}return Object(i.a)(this,t,e)},e.prototype.once=function(t,e){if(Array.isArray(t)){for(var n=t.length,r=new Array(n),o=0;o<n;++o)r[o]=Object(i.b)(this,t[o],e);return r}return Object(i.b)(this,t,e)},e.prototype.un=function(t,e){if(Array.isArray(t))for(var n=0,r=t.length;n<r;++n)Object(i.c)(this,t[n],e);else Object(i.c)(this,t,e)},e}(r.a);e.a=s},function(t,e,n){"use strict";var i=n(6),r=function(t){function e(e){var n="Assertion failed. See https://openlayers.org/en/"+i.a.split("-")[0]+"/doc/errors/#"+e+" for details.";t.call(this,n),this.code=e,this.name="AssertionError",this.message=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error);e.a=r},function(t,e,n){"use strict";n.r(e);var i=n(45),r=n(58),o="preload",s="useInterimTilesOnError",a=n(13),u=function(t){function e(e){var n=e||{},r=Object(a.a)({},n);delete r.preload,delete r.useInterimTilesOnError,t.call(this,r),this.setPreload(void 0!==n.preload?n.preload:0),this.setUseInterimTilesOnError(void 0===n.useInterimTilesOnError||n.useInterimTilesOnError),this.type=i.a.TILE}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getPreload=function(){return this.get(o)},e.prototype.setPreload=function(t){this.set(o,t)},e.prototype.getUseInterimTilesOnError=function(){return this.get(s)},e.prototype.setUseInterimTilesOnError=function(t){this.set(s,t)},e}(r.a);u.prototype.getSource;e.default=u},function(t,e,n){"use strict";n.r(e);var i=n(15),r=n(42),o=n(73),s=n(13),a=n(16),u=function(){this.dataProjection=null,this.defaultFeatureProjection=null};u.prototype.getReadOptions=function(t,e){var n;return e&&(n={dataProjection:e.dataProjection?e.dataProjection:this.readProjection(t),featureProjection:e.featureProjection}),this.adaptOptions(n)},u.prototype.adaptOptions=function(t){return Object(s.a)({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection},t)},u.prototype.getLastExtent=function(){return null},u.prototype.getType=function(){},u.prototype.readFeature=function(t,e){},u.prototype.readFeatures=function(t,e){},u.prototype.readGeometry=function(t,e){},u.prototype.readProjection=function(t){},u.prototype.writeFeature=function(t,e){},u.prototype.writeFeatures=function(t,e){},u.prototype.writeGeometry=function(t,e){};var h=u;function c(t,e,n){var i,r=n?Object(a.c)(n.featureProjection):null,s=n?Object(a.c)(n.dataProjection):null;if(i=r&&s&&!Object(a.b)(r,s)?t instanceof o.a?(e?t.clone():t).transform(e?r:s,e?s:r):Object(a.g)(t,s,r):t,e&&n&&void 0!==n.decimals){var u=Math.pow(10,n.decimals);i===t&&(i=i.clone()),i.applyTransform(function(t){for(var e=0,n=t.length;e<n;++e)t[e]=Math.round(t[e]*u)/u;return t})}return i}var l=n(54);function p(t){if("string"==typeof t){var e=JSON.parse(t);return e||null}return null!==t?t:null}var f=function(t){function e(){t.call(this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getType=function(){return l.a.JSON},e.prototype.readFeature=function(t,e){return this.readFeatureFromObject(p(t),this.getReadOptions(t,e))},e.prototype.readFeatures=function(t,e){return this.readFeaturesFromObject(p(t),this.getReadOptions(t,e))},e.prototype.readFeatureFromObject=function(t,e){},e.prototype.readFeaturesFromObject=function(t,e){},e.prototype.readGeometry=function(t,e){return this.readGeometryFromObject(p(t),this.getReadOptions(t,e))},e.prototype.readGeometryFromObject=function(t,e){},e.prototype.readProjection=function(t){return this.readProjectionFromObject(p(t))},e.prototype.readProjectionFromObject=function(t){},e.prototype.writeFeature=function(t,e){return JSON.stringify(this.writeFeatureObject(t,e))},e.prototype.writeFeatureObject=function(t,e){},e.prototype.writeFeatures=function(t,e){return JSON.stringify(this.writeFeaturesObject(t,e))},e.prototype.writeFeaturesObject=function(t,e){},e.prototype.writeGeometry=function(t,e){return JSON.stringify(this.writeGeometryObject(t,e))},e.prototype.writeGeometryObject=function(t,e){},e}(h),d=n(1),g=n(4),y=n(0),_=n(2);function v(t){for(var e=[],n=0,i=t.length;n<i;++n)e.push(t[n].clone());return e}var m=function(t){function e(e){t.call(this),this.geometries_=e||null,this.listenGeometriesChange_()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.unlistenGeometriesChange_=function(){if(this.geometries_)for(var t=0,e=this.geometries_.length;t<e;++t)Object(d.c)(this.geometries_[t],g.a.CHANGE,this.changed,this)},e.prototype.listenGeometriesChange_=function(){if(this.geometries_)for(var t=0,e=this.geometries_.length;t<e;++t)Object(d.a)(this.geometries_[t],g.a.CHANGE,this.changed,this)},e.prototype.clone=function(){var t=new e(null);return t.setGeometries(this.geometries_),t},e.prototype.closestPointXY=function(t,e,n,i){if(i<Object(y.e)(this.getExtent(),t,e))return i;for(var r=this.geometries_,o=0,s=r.length;o<s;++o)i=r[o].closestPointXY(t,e,n,i);return i},e.prototype.containsXY=function(t,e){for(var n=this.geometries_,i=0,r=n.length;i<r;++i)if(n[i].containsXY(t,e))return!0;return!1},e.prototype.computeExtent=function(t){Object(y.l)(t);for(var e=this.geometries_,n=0,i=e.length;n<i;++n)Object(y.q)(t,e[n].getExtent());return t},e.prototype.getGeometries=function(){return v(this.geometries_)},e.prototype.getGeometriesArray=function(){return this.geometries_},e.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!=this.getRevision()&&(Object(s.b)(this.simplifiedGeometryCache),this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<this.simplifiedGeometryMaxMinSquaredTolerance)return this;var n=t.toString();if(this.simplifiedGeometryCache.hasOwnProperty(n))return this.simplifiedGeometryCache[n];for(var i=[],r=this.geometries_,o=!1,a=0,u=r.length;a<u;++a){var h=r[a],c=h.getSimplifiedGeometry(t);i.push(c),c!==h&&(o=!0)}if(o){var l=new e(null);return l.setGeometriesArray(i),this.simplifiedGeometryCache[n]=l,l}return this.simplifiedGeometryMaxMinSquaredTolerance=t,this},e.prototype.getType=function(){return _.a.GEOMETRY_COLLECTION},e.prototype.intersectsExtent=function(t){for(var e=this.geometries_,n=0,i=e.length;n<i;++n)if(e[n].intersectsExtent(t))return!0;return!1},e.prototype.isEmpty=function(){return 0===this.geometries_.length},e.prototype.rotate=function(t,e){for(var n=this.geometries_,i=0,r=n.length;i<r;++i)n[i].rotate(t,e);this.changed()},e.prototype.scale=function(t,e,n){var i=n;i||(i=Object(y.x)(this.getExtent()));for(var r=this.geometries_,o=0,s=r.length;o<s;++o)r[o].scale(t,e,i);this.changed()},e.prototype.setGeometries=function(t){this.setGeometriesArray(v(t))},e.prototype.setGeometriesArray=function(t){this.unlistenGeometriesChange_(),this.geometries_=t,this.listenGeometriesChange_(),this.changed()},e.prototype.applyTransform=function(t){for(var e=this.geometries_,n=0,i=e.length;n<i;++n)e[n].applyTransform(t);this.changed()},e.prototype.translate=function(t,e){for(var n=this.geometries_,i=0,r=n.length;i<r;++i)n[i].translate(t,e);this.changed()},e.prototype.disposeInternal=function(){this.unlistenGeometriesChange_(),t.prototype.disposeInternal.call(this)},e}(o.a),E=n(56),x=n(82),b=n(74),w=n(81),C=n(48),O=n(30),I=function(t){function e(e){var n=e||{};t.call(this),this.dataProjection=Object(a.c)(n.dataProjection?n.dataProjection:"EPSG:4326"),n.featureProjection&&(this.defaultFeatureProjection=Object(a.c)(n.featureProjection)),this.geometryName_=n.geometryName,this.extractGeometryName_=n.extractGeometryName}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.readFeatureFromObject=function(t,e){var n=null,i=R((n="Feature"===t.type?t:{type:"Feature",geometry:t}).geometry,e),o=new r.a;return this.geometryName_?o.setGeometryName(this.geometryName_):this.extractGeometryName_&&void 0!==n.geometry_name&&o.setGeometryName(n.geometry_name),o.setGeometry(i),void 0!==n.id&&o.setId(n.id),n.properties&&o.setProperties(n.properties),o},e.prototype.readFeaturesFromObject=function(t,e){var n=null;if("FeatureCollection"===t.type){n=[];for(var i=t.features,r=0,o=i.length;r<o;++r)n.push(this.readFeatureFromObject(i[r],e))}else n=[this.readFeatureFromObject(t,e)];return n},e.prototype.readGeometryFromObject=function(t,e){return R(t,e)},e.prototype.readProjectionFromObject=function(t){var e,n=t.crs;return n?"name"==n.type?e=Object(a.c)(n.properties.name):Object(i.a)(!1,36):e=this.dataProjection,e},e.prototype.writeFeatureObject=function(t,e){e=this.adaptOptions(e);var n={type:"Feature"},i=t.getId();void 0!==i&&(n.id=i);var r=t.getGeometry();n.geometry=r?N(r,e):null;var o=t.getProperties();return delete o[t.getGeometryName()],Object(s.d)(o)?n.properties=null:n.properties=o,n},e.prototype.writeFeaturesObject=function(t,e){e=this.adaptOptions(e);for(var n=[],i=0,r=t.length;i<r;++i)n.push(this.writeFeatureObject(t[i],e));return{type:"FeatureCollection",features:n}},e.prototype.writeGeometryObject=function(t,e){return N(t,this.adaptOptions(e))},e}(f),S={Point:function(t){return new C.a(t.coordinates)},LineString:function(t){return new E.a(t.coordinates)},Polygon:function(t){return new O.a(t.coordinates)},MultiPoint:function(t){return new b.a(t.coordinates)},MultiLineString:function(t){return new x.a(t.coordinates)},MultiPolygon:function(t){return new w.a(t.coordinates)},GeometryCollection:function(t,e){var n=t.geometries.map(function(t){return R(t,e)});return new m(n)}},T={Point:function(t,e){return{type:"Point",coordinates:t.getCoordinates()}},LineString:function(t,e){return{type:"LineString",coordinates:t.getCoordinates()}},Polygon:function(t,e){var n;e&&(n=e.rightHanded);return{type:"Polygon",coordinates:t.getCoordinates(n)}},MultiPoint:function(t,e){return{type:"MultiPoint",coordinates:t.getCoordinates()}},MultiLineString:function(t,e){return{type:"MultiLineString",coordinates:t.getCoordinates()}},MultiPolygon:function(t,e){var n;e&&(n=e.rightHanded);return{type:"MultiPolygon",coordinates:t.getCoordinates(n)}},GeometryCollection:function(t,e){return{type:"GeometryCollection",geometries:t.getGeometriesArray().map(function(t){var n=Object(s.a)({},e);return delete n.featureProjection,N(t,n)})}},Circle:function(t){return{type:"GeometryCollection",geometries:[]}}};function R(t,e){return t?c((0,S[t.type])(t),!1,e):null}function N(t,e){return(0,T[t.getType()])(c(t,!0,e),e)}e.default=I},function(t,e,n){"use strict";n.r(e);var i=n(34),r=n(6),o=n(5),s=n(33),a=n(60),u=n(4),h=function(t){function e(e,n,i){t.call(this);var r=i||{};this.tileCoord=e,this.state=n,this.interimTile=null,this.key="",this.transition_=void 0===r.transition?250:r.transition,this.transitionStarts_={}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.changed=function(){this.dispatchEvent(u.a.CHANGE)},e.prototype.getKey=function(){return this.key+"/"+this.tileCoord},e.prototype.getInterimTile=function(){if(!this.interimTile)return this;var t=this.interimTile;do{if(t.getState()==o.a.LOADED)return t;t=t.interimTile}while(t);return this},e.prototype.refreshInterimChain=function(){if(this.interimTile){var t=this.interimTile,e=this;do{if(t.getState()==o.a.LOADED){t.interimTile=null;break}t.getState()==o.a.LOADING?e=t:t.getState()==o.a.IDLE?e.interimTile=t.interimTile:e=t,t=e.interimTile}while(t)}},e.prototype.getTileCoord=function(){return this.tileCoord},e.prototype.getState=function(){return this.state},e.prototype.setState=function(t){this.state=t,this.changed()},e.prototype.load=function(){},e.prototype.getAlpha=function(t,e){if(!this.transition_)return 1;var n=this.transitionStarts_[t];if(n){if(-1===n)return 1}else n=e,this.transitionStarts_[t]=n;var i=e-n+1e3/60;return i>=this.transition_?1:Object(s.a)(i/this.transition_)},e.prototype.inTransition=function(t){return!!this.transition_&&-1!==this.transitionStarts_[t]},e.prototype.endTransition=function(t){this.transition_&&(this.transitionStarts_[t]=-1)},e}(a.a),c=n(25),l=n(1);function p(){var t=Object(c.a)(1,1);return t.fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,1,1),t.canvas}var f=function(t){function e(e,n,i,r,o,s){t.call(this,e,n,s),this.crossOrigin_=r,this.src_=i,this.image_=new Image,null!==r&&(this.image_.crossOrigin=r),this.imageListenerKeys_=null,this.tileLoadFunction_=o}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.disposeInternal=function(){this.state==o.a.LOADING&&(this.unlistenImage_(),this.image_=p()),this.interimTile&&this.interimTile.dispose(),this.state=o.a.ABORT,this.changed(),t.prototype.disposeInternal.call(this)},e.prototype.getImage=function(){return this.image_},e.prototype.getKey=function(){return this.src_},e.prototype.handleImageError_=function(){this.state=o.a.ERROR,this.unlistenImage_(),this.image_=p(),this.changed()},e.prototype.handleImageLoad_=function(){this.image_.naturalWidth&&this.image_.naturalHeight?this.state=o.a.LOADED:this.state=o.a.EMPTY,this.unlistenImage_(),this.changed()},e.prototype.load=function(){this.state==o.a.ERROR&&(this.state=o.a.IDLE,this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==o.a.IDLE&&(this.state=o.a.LOADING,this.changed(),this.imageListenerKeys_=[Object(l.b)(this.image_,u.a.ERROR,this.handleImageError_,this),Object(l.b)(this.image_,u.a.LOAD,this.handleImageLoad_,this)],this.tileLoadFunction_(this,this.src_))},e.prototype.unlistenImage_=function(){this.imageListenerKeys_.forEach(l.e),this.imageListenerKeys_=null},e}(h);function d(t,e,n,i){return void 0!==i?(i[0]=t,i[1]=e,i[2]=n,i):[t,e,n]}function g(t,e,n){return t+"/"+e+"/"+n}function y(t){return g(t[0],t[1],t[2])}var _=function(t){function e(e){t.call(this,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.expireCache=function(t){for(;this.canExpireCache();){var e=this.peekLast(),n=e.tileCoord[0].toString();if(n in t&&t[n].contains(e.tileCoord))break;this.pop().dispose()}},e.prototype.pruneExceptNewestZ=function(){if(0!==this.getCount()){var t=function(t){return t.split("/").map(Number)}(this.peekFirstKey())[0];this.forEach(function(e){e.tileCoord[0]!==t&&(this.remove(y(e.tileCoord)),e.dispose())},this)}},e}(n(84).a),v=n(16),m=n(0),E=n(7);function x(t,e,n,i){var r=n-t,o=i-e,s=Math.sqrt(r*r+o*o);return[Math.round(n+r/s),Math.round(i+o/s)]}var b=function(t,e,n,i,r){this.sourceProj_=t,this.targetProj_=e;var o={},s=Object(v.e)(this.targetProj_,this.sourceProj_);this.transformInv_=function(t){var e=t[0]+"/"+t[1];return o[e]||(o[e]=s(t)),o[e]},this.maxSourceExtent_=i,this.errorThresholdSquared_=r*r,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!i&&!!this.sourceProj_.getExtent()&&Object(m.E)(i)==Object(m.E)(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?Object(m.E)(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?Object(m.E)(this.targetProj_.getExtent()):null;var a=Object(m.C)(n),u=Object(m.D)(n),h=Object(m.w)(n),c=Object(m.v)(n),l=this.transformInv_(a),p=this.transformInv_(u),f=this.transformInv_(h),d=this.transformInv_(c);if(this.addQuad_(a,u,h,c,l,p,f,d,10),this.wrapsXInSource_){var g=1/0;this.triangles_.forEach(function(t,e,n){g=Math.min(g,t.source[0][0],t.source[1][0],t.source[2][0])}),this.triangles_.forEach(function(t){if(Math.max(t.source[0][0],t.source[1][0],t.source[2][0])-g>this.sourceWorldWidth_/2){var e=[[t.source[0][0],t.source[0][1]],[t.source[1][0],t.source[1][1]],[t.source[2][0],t.source[2][1]]];e[0][0]-g>this.sourceWorldWidth_/2&&(e[0][0]-=this.sourceWorldWidth_),e[1][0]-g>this.sourceWorldWidth_/2&&(e[1][0]-=this.sourceWorldWidth_),e[2][0]-g>this.sourceWorldWidth_/2&&(e[2][0]-=this.sourceWorldWidth_);var n=Math.min(e[0][0],e[1][0],e[2][0]);Math.max(e[0][0],e[1][0],e[2][0])-n<this.sourceWorldWidth_/2&&(t.source=e)}}.bind(this))}o={}};b.prototype.addTriangle_=function(t,e,n,i,r,o){this.triangles_.push({source:[i,r,o],target:[t,e,n]})},b.prototype.addQuad_=function(t,e,n,i,r,o,s,a,u){var h=Object(m.b)([r,o,s,a]),c=this.sourceWorldWidth_?Object(m.E)(h)/this.sourceWorldWidth_:null,l=this.sourceWorldWidth_,p=this.sourceProj_.canWrapX()&&c>.5&&c<1,f=!1;if(u>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){var d=Object(m.b)([t,e,n,i]);f|=Object(m.E)(d)/this.targetWorldWidth_>.25}!p&&this.sourceProj_.isGlobal()&&c&&(f|=c>.25)}if(f||!this.maxSourceExtent_||Object(m.F)(h,this.maxSourceExtent_)){if(!(f||isFinite(r[0])&&isFinite(r[1])&&isFinite(o[0])&&isFinite(o[1])&&isFinite(s[0])&&isFinite(s[1])&&isFinite(a[0])&&isFinite(a[1]))){if(!(u>0))return;f=!0}if(u>0){if(!f){var g,y=[(t[0]+n[0])/2,(t[1]+n[1])/2],_=this.transformInv_(y);if(p)g=(Object(E.d)(r[0],l)+Object(E.d)(s[0],l))/2-Object(E.d)(_[0],l);else g=(r[0]+s[0])/2-_[0];var v=(r[1]+s[1])/2-_[1];f=g*g+v*v>this.errorThresholdSquared_}if(f){if(Math.abs(t[0]-n[0])<=Math.abs(t[1]-n[1])){var x=[(e[0]+n[0])/2,(e[1]+n[1])/2],b=this.transformInv_(x),w=[(i[0]+t[0])/2,(i[1]+t[1])/2],C=this.transformInv_(w);this.addQuad_(t,e,x,w,r,o,b,C,u-1),this.addQuad_(w,x,n,i,C,b,s,a,u-1)}else{var O=[(t[0]+e[0])/2,(t[1]+e[1])/2],I=this.transformInv_(O),S=[(n[0]+i[0])/2,(n[1]+i[1])/2],T=this.transformInv_(S);this.addQuad_(t,O,S,i,r,I,T,a,u-1),this.addQuad_(O,e,n,S,I,o,s,T,u-1)}return}}if(p){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}this.addTriangle_(t,n,i,r,s,a),this.addTriangle_(t,e,n,r,o,s)}},b.prototype.calculateSourceExtent=function(){var t=Object(m.j)();return this.triangles_.forEach(function(e,n,i){var r=e.source;Object(m.r)(t,r[0]),Object(m.r)(t,r[1]),Object(m.r)(t,r[2])}),t},b.prototype.getTriangles=function(){return this.triangles_};var w=b,C=function(t){function e(e,n,r,s,a,u,h,c,l,p,f){t.call(this,a,o.a.IDLE),this.renderEdges_=void 0!==f&&f,this.pixelRatio_=h,this.gutter_=c,this.canvas_=null,this.sourceTileGrid_=n,this.targetTileGrid_=s,this.wrappedTileCoord_=u||a,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;var d=s.getTileCoordExtent(this.wrappedTileCoord_),g=this.targetTileGrid_.getExtent(),y=this.sourceTileGrid_.getExtent(),_=g?Object(m.B)(d,g):d;if(0!==Object(m.u)(_)){var x=e.getExtent();x&&(y=y?Object(m.B)(y,x):x);var b=s.getResolution(this.wrappedTileCoord_[0]),C=function(t,e,n,i){var r=Object(v.f)(n,e,t),o=Object(v.d)(e,i,n),s=e.getMetersPerUnit();void 0!==s&&(o*=s);var a=t.getMetersPerUnit();void 0!==a&&(o/=a);var u=t.getExtent();if(!u||Object(m.f)(u,r)){var h=Object(v.d)(t,o,r)/o;isFinite(h)&&h>0&&(o/=h)}return o}(e,r,Object(m.x)(_),b);if(!isFinite(C)||C<=0)this.state=o.a.EMPTY;else{var O=void 0!==p?p:i.b;if(this.triangulation_=new w(e,r,_,y,C*O),0!==this.triangulation_.getTriangles().length){this.sourceZ_=n.getZForResolution(C);var I=this.triangulation_.calculateSourceExtent();if(y&&(e.canWrapX()?(I[1]=Object(E.a)(I[1],y[1],y[3]),I[3]=Object(E.a)(I[3],y[1],y[3])):I=Object(m.B)(I,y)),Object(m.u)(I)){for(var S=n.getTileRangeForExtentAndZ(I,this.sourceZ_),T=S.minX;T<=S.maxX;T++)for(var R=S.minY;R<=S.maxY;R++){var N=l(this.sourceZ_,T,R,h);N&&this.sourceTiles_.push(N)}0===this.sourceTiles_.length&&(this.state=o.a.EMPTY)}else this.state=o.a.EMPTY}else this.state=o.a.EMPTY}}else this.state=o.a.EMPTY}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.disposeInternal=function(){this.state==o.a.LOADING&&this.unlistenSources_(),t.prototype.disposeInternal.call(this)},e.prototype.getImage=function(){return this.canvas_},e.prototype.reproject_=function(){var t=[];if(this.sourceTiles_.forEach(function(e,n,i){e&&e.getState()==o.a.LOADED&&t.push({extent:this.sourceTileGrid_.getTileCoordExtent(e.tileCoord),image:e.getImage()})}.bind(this)),this.sourceTiles_.length=0,0===t.length)this.state=o.a.ERROR;else{var e=this.wrappedTileCoord_[0],n=this.targetTileGrid_.getTileSize(e),i="number"==typeof n?n:n[0],r="number"==typeof n?n:n[1],s=this.targetTileGrid_.getResolution(e),a=this.sourceTileGrid_.getResolution(this.sourceZ_),u=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=function(t,e,n,i,r,o,s,a,u,h,l){var p=Object(c.a)(Math.round(n*t),Math.round(n*e));if(0===u.length)return p.canvas;p.scale(n,n);var f=Object(m.j)();u.forEach(function(t,e,n){Object(m.q)(f,t.extent)});var d=Object(m.E)(f),g=Object(m.A)(f),y=Object(c.a)(Math.round(n*d/i),Math.round(n*g/i)),_=n/i;u.forEach(function(t,e,n){var i=t.extent[0]-f[0],r=-(t.extent[3]-f[3]),o=Object(m.E)(t.extent),s=Object(m.A)(t.extent);y.drawImage(t.image,h,h,t.image.width-2*h,t.image.height-2*h,i*_,r*_,o*_,s*_)});var v=Object(m.C)(s);return a.getTriangles().forEach(function(t,e,r){var s=t.source,a=t.target,u=s[0][0],h=s[0][1],c=s[1][0],l=s[1][1],d=s[2][0],g=s[2][1],_=(a[0][0]-v[0])/o,m=-(a[0][1]-v[1])/o,b=(a[1][0]-v[0])/o,w=-(a[1][1]-v[1])/o,C=(a[2][0]-v[0])/o,O=-(a[2][1]-v[1])/o,I=u,S=h;u=0,h=0;var T=[[c-=I,l-=S,0,0,b-_],[d-=I,g-=S,0,0,C-_],[0,0,c,l,w-m],[0,0,d,g,O-m]],R=Object(E.e)(T);if(R){p.save(),p.beginPath();var N=(_+b+C)/3,L=(m+w+O)/3,M=x(N,L,_,m),P=x(N,L,b,w),A=x(N,L,C,O);p.moveTo(P[0],P[1]),p.lineTo(M[0],M[1]),p.lineTo(A[0],A[1]),p.clip(),p.transform(R[0],R[2],R[1],R[3],_,m),p.translate(f[0]-I,f[3]-S),p.scale(i/n,-i/n),p.drawImage(y.canvas,0,0),p.restore()}}),l&&(p.save(),p.strokeStyle="black",p.lineWidth=1,a.getTriangles().forEach(function(t,e,n){var i=t.target,r=(i[0][0]-v[0])/o,s=-(i[0][1]-v[1])/o,a=(i[1][0]-v[0])/o,u=-(i[1][1]-v[1])/o,h=(i[2][0]-v[0])/o,c=-(i[2][1]-v[1])/o;p.beginPath(),p.moveTo(a,u),p.lineTo(r,s),p.lineTo(h,c),p.closePath(),p.stroke()}),p.restore()),p.canvas}(i,r,this.pixelRatio_,a,this.sourceTileGrid_.getExtent(),s,u,this.triangulation_,t,this.gutter_,this.renderEdges_),this.state=o.a.LOADED}this.changed()},e.prototype.load=function(){if(this.state==o.a.IDLE){this.state=o.a.LOADING,this.changed();var t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(function(e,n,i){var r=e.getState();if(r==o.a.IDLE||r==o.a.LOADING){t++;var s=Object(l.a)(e,u.a.CHANGE,function(n){var i=e.getState();i!=o.a.LOADED&&i!=o.a.ERROR&&i!=o.a.EMPTY||(Object(l.e)(s),0===--t&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(s)}}.bind(this)),this.sourceTiles_.forEach(function(t,e,n){t.getState()==o.a.IDLE&&t.load()}),0===t&&setTimeout(this.reproject_.bind(this),0)}},e.prototype.unlistenSources_=function(){this.sourcesListenerKeys_.forEach(l.e),this.sourcesListenerKeys_=null},e}(h),O=n(15);function I(t,e){var n=/\{z\}/g,i=/\{x\}/g,r=/\{y\}/g,o=/\{-y\}/g;return function(s,a,u){return s?t.replace(n,s[0].toString()).replace(i,s[1].toString()).replace(r,function(){return(-s[2]-1).toString()}).replace(o,function(){var t=s[0],n=e.getFullTileRange(t);return Object(O.a)(n,55),(n.getHeight()+s[2]).toString()}):void 0}}function S(t,e){for(var n=t.length,i=new Array(n),r=0;r<n;++r)i[r]=I(t[r],e);return function(t){if(1===t.length)return t[0];return function(e,n,i){if(e){var r=function(t){return(t[1]<<t[0])+t[2]}(e),o=Object(E.d)(r,t.length);return t[o](e,n,i)}}}(i)}function T(t,e,n){}var R=n(9),N=n(29),L=n(41),M=n(83),P=n(71),A=n(65),D=n(13),F=n(32),j=n(63),G=n(12),k=[0,0,0],B=function(t){var e;if(this.minZoom=void 0!==t.minZoom?t.minZoom:0,this.resolutions_=t.resolutions,Object(O.a)(Object(G.e)(this.resolutions_,function(t,e){return e-t},!0),17),!t.origins)for(var n=0,i=this.resolutions_.length-1;n<i;++n)if(e){if(this.resolutions_[n]/this.resolutions_[n+1]!==e){e=void 0;break}}else e=this.resolutions_[n]/this.resolutions_[n+1];this.zoomFactor_=e,this.maxZoom=this.resolutions_.length-1,this.origin_=void 0!==t.origin?t.origin:null,this.origins_=null,void 0!==t.origins&&(this.origins_=t.origins,Object(O.a)(this.origins_.length==this.resolutions_.length,20));var r=t.extent;void 0===r||this.origin_||this.origins_||(this.origin_=Object(m.C)(r)),Object(O.a)(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,void 0!==t.tileSizes&&(this.tileSizes_=t.tileSizes,Object(O.a)(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=void 0!==t.tileSize?t.tileSize:this.tileSizes_?null:P.b,Object(O.a)(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=void 0!==r?r:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],void 0!==t.sizes?this.fullTileRanges_=t.sizes.map(function(t,e){return new j.b(Math.min(0,t[0]),Math.max(t[0]-1,-1),Math.min(0,t[1]),Math.max(t[1]-1,-1))},this):r&&this.calculateTileRanges_(r)};B.prototype.forEachTileCoord=function(t,e,n){for(var i=this.getTileRangeForExtentAndZ(t,e),r=i.minX,o=i.maxX;r<=o;++r)for(var s=i.minY,a=i.maxY;s<=a;++s)n([e,r,s])},B.prototype.forEachTileCoordParentTileRange=function(t,e,n,i,r){var o,s,a,u=null,h=t[0]-1;for(2===this.zoomFactor_?(s=t[1],a=t[2]):u=this.getTileCoordExtent(t,r);h>=this.minZoom;){if(2===this.zoomFactor_?(s=Math.floor(s/2),a=Math.floor(a/2),o=Object(j.a)(s,s,a,a,i)):o=this.getTileRangeForExtentAndZ(u,h,i),e.call(n,h,o))return!0;--h}return!1},B.prototype.getExtent=function(){return this.extent_},B.prototype.getMaxZoom=function(){return this.maxZoom},B.prototype.getMinZoom=function(){return this.minZoom},B.prototype.getOrigin=function(t){return this.origin_?this.origin_:this.origins_[t]},B.prototype.getResolution=function(t){return this.resolutions_[t]},B.prototype.getResolutions=function(){return this.resolutions_},B.prototype.getTileCoordChildTileRange=function(t,e,n){if(t[0]<this.maxZoom){if(2===this.zoomFactor_){var i=2*t[1],r=2*t[2];return Object(j.a)(i,i+1,r,r+1,e)}var o=this.getTileCoordExtent(t,n);return this.getTileRangeForExtentAndZ(o,t[0]+1,e)}return null},B.prototype.getTileRangeExtent=function(t,e,n){var i=this.getOrigin(t),r=this.getResolution(t),o=Object(L.c)(this.getTileSize(t),this.tmpSize_),s=i[0]+e.minX*o[0]*r,a=i[0]+(e.maxX+1)*o[0]*r,u=i[1]+e.minY*o[1]*r,h=i[1]+(e.maxY+1)*o[1]*r;return Object(m.k)(s,u,a,h,n)},B.prototype.getTileRangeForExtentAndZ=function(t,e,n){var i=k;this.getTileCoordForXYAndZ_(t[0],t[1],e,!1,i);var r=i[1],o=i[2];return this.getTileCoordForXYAndZ_(t[2],t[3],e,!0,i),Object(j.a)(r,i[1],o,i[2],n)},B.prototype.getTileCoordCenter=function(t){var e=this.getOrigin(t[0]),n=this.getResolution(t[0]),i=Object(L.c)(this.getTileSize(t[0]),this.tmpSize_);return[e[0]+(t[1]+.5)*i[0]*n,e[1]+(t[2]+.5)*i[1]*n]},B.prototype.getTileCoordExtent=function(t,e){var n=this.getOrigin(t[0]),i=this.getResolution(t[0]),r=Object(L.c)(this.getTileSize(t[0]),this.tmpSize_),o=n[0]+t[1]*r[0]*i,s=n[1]+t[2]*r[1]*i,a=o+r[0]*i,u=s+r[1]*i;return Object(m.k)(o,s,a,u,e)},B.prototype.getTileCoordForCoordAndResolution=function(t,e,n){return this.getTileCoordForXYAndResolution_(t[0],t[1],e,!1,n)},B.prototype.getTileCoordForXYAndResolution_=function(t,e,n,i,r){var o=this.getZForResolution(n),s=n/this.getResolution(o),a=this.getOrigin(o),u=Object(L.c)(this.getTileSize(o),this.tmpSize_),h=i?.5:0,c=i?0:.5,l=Math.floor((t-a[0])/n+h),p=Math.floor((e-a[1])/n+c),f=s*l/u[0],g=s*p/u[1];return i?(f=Math.ceil(f)-1,g=Math.ceil(g)-1):(f=Math.floor(f),g=Math.floor(g)),d(o,f,g,r)},B.prototype.getTileCoordForXYAndZ_=function(t,e,n,i,r){var o=this.getOrigin(n),s=this.getResolution(n),a=Object(L.c)(this.getTileSize(n),this.tmpSize_),u=i?.5:0,h=i?0:.5,c=Math.floor((t-o[0])/s+u),l=Math.floor((e-o[1])/s+h),p=c/a[0],f=l/a[1];return i?(p=Math.ceil(p)-1,f=Math.ceil(f)-1):(p=Math.floor(p),f=Math.floor(f)),d(n,p,f,r)},B.prototype.getTileCoordForCoordAndZ=function(t,e,n){return this.getTileCoordForXYAndZ_(t[0],t[1],e,!1,n)},B.prototype.getTileCoordResolution=function(t){return this.resolutions_[t[0]]},B.prototype.getTileSize=function(t){return this.tileSize_?this.tileSize_:this.tileSizes_[t]},B.prototype.getFullTileRange=function(t){return this.fullTileRanges_?this.fullTileRanges_[t]:null},B.prototype.getZForResolution=function(t,e){var n=Object(G.f)(this.resolutions_,t,e||0);return Object(E.a)(n,this.minZoom,this.maxZoom)},B.prototype.calculateTileRanges_=function(t){for(var e=this.resolutions_.length,n=new Array(e),i=this.minZoom;i<e;++i)n[i]=this.getTileRangeForExtentAndZ(t,i);this.fullTileRanges_=n};var Y=B;function X(t){var e=t.getDefaultTileGrid();return e||(e=function(t,e,n,i){return function(t,e,n,i){var r=void 0!==i?i:A.a.TOP_LEFT,o=q(t,e,n);return new Y({extent:t,origin:Object(m.y)(t,r),resolutions:o,tileSize:n})}(U(t),e,n,i)}(t),t.setDefaultTileGrid(e)),e}function q(t,e,n){for(var i=void 0!==e?e:P.a,r=Object(m.A)(t),o=Object(m.E)(t),s=Object(L.c)(void 0!==n?n:P.b),a=Math.max(o/s[0],r/s[1]),u=i+1,h=new Array(u),c=0;c<u;++c)h[c]=a/Math.pow(2,c);return h}function U(t){var e=(t=Object(v.c)(t)).getExtent();if(!e){var n=180*F.a[F.b.DEGREES]/t.getMetersPerUnit();e=Object(m.k)(-n,-n,n,n)}return e}var z=function(t){function e(e){t.call(this,{attributions:e.attributions,extent:e.extent,projection:e.projection,state:e.state,wrapX:e.wrapX}),this.opaque_=void 0!==e.opaque&&e.opaque,this.tilePixelRatio_=void 0!==e.tilePixelRatio?e.tilePixelRatio:1,this.tileGrid=void 0!==e.tileGrid?e.tileGrid:null,this.tileCache=new _(e.cacheSize),this.tmpSize=[0,0],this.key_="",this.tileOptions={transition:e.transition}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.canExpireCache=function(){return this.tileCache.canExpireCache()},e.prototype.expireCache=function(t,e){var n=this.getTileCacheForProjection(t);n&&n.expireCache(e)},e.prototype.forEachLoadedTile=function(t,e,n,i){var r=this.getTileCacheForProjection(t);if(!r)return!1;for(var s,a,u,h=!0,c=n.minX;c<=n.maxX;++c)for(var l=n.minY;l<=n.maxY;++l)a=g(e,c,l),u=!1,r.containsKey(a)&&(u=(s=r.get(a)).getState()===o.a.LOADED)&&(u=!1!==i(s)),u||(h=!1);return h},e.prototype.getGutter=function(t){return 0},e.prototype.getKey=function(){return this.key_},e.prototype.setKey=function(t){this.key_!==t&&(this.key_=t,this.changed())},e.prototype.getOpaque=function(t){return this.opaque_},e.prototype.getResolutions=function(){return this.tileGrid.getResolutions()},e.prototype.getTile=function(t,e,n,i,r){},e.prototype.getTileGrid=function(){return this.tileGrid},e.prototype.getTileGridForProjection=function(t){return this.tileGrid?this.tileGrid:X(t)},e.prototype.getTileCacheForProjection=function(t){var e=this.getProjection();return e&&!Object(v.b)(e,t)?null:this.tileCache},e.prototype.getTilePixelRatio=function(t){return this.tilePixelRatio_},e.prototype.getTilePixelSize=function(t,e,n){var i=this.getTileGridForProjection(n),r=this.getTilePixelRatio(e),o=Object(L.c)(i.getTileSize(t),this.tmpSize);return 1==r?o:Object(L.b)(o,r,this.tmpSize)},e.prototype.getTileCoordForTileUrlFunction=function(t,e){var n=void 0!==e?e:this.getProjection(),i=this.getTileGridForProjection(n);return this.getWrapX()&&n.isGlobal()&&(t=function(t,e,n){var i=e[0],r=t.getTileCoordCenter(e),o=U(n);if(Object(m.f)(o,r))return e;var s=Object(m.E)(o),a=Math.ceil((o[0]-r[0])/s);return r[0]+=s*a,t.getTileCoordForCoordAndZ(r,i)}(i,t,n)),function(t,e){var n=t[0],i=t[1],r=t[2];if(e.getMinZoom()>n||n>e.getMaxZoom())return!1;var o,s=e.getExtent();return!(o=s?e.getTileRangeForExtentAndZ(s,n):e.getFullTileRange(n))||o.containsXY(i,r)}(t,i)?t:null},e.prototype.refresh=function(){this.tileCache.clear(),this.changed()},e}(M.a);z.prototype.useTile=R.c;var V=function(t){function e(e,n){t.call(this,e),this.tile=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(N.a),W="tileloadstart",K="tileloadend",H="tileloaderror",Z=function(t){function e(e){t.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,extent:e.extent,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition}),this.tileLoadFunction=e.tileLoadFunction,this.tileUrlFunction=this.fixedTileUrlFunction?this.fixedTileUrlFunction.bind(this):T,this.urls=null,e.urls?this.setUrls(e.urls):e.url&&this.setUrl(e.url),e.tileUrlFunction&&this.setTileUrlFunction(e.tileUrlFunction),this.tileLoadingKeys_={}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getTileLoadFunction=function(){return this.tileLoadFunction},e.prototype.getTileUrlFunction=function(){return this.tileUrlFunction},e.prototype.getUrls=function(){return this.urls},e.prototype.handleTileChange=function(t){var e,n=t.target,i=Object(r.b)(n),s=n.getState();s==o.a.LOADING?(this.tileLoadingKeys_[i]=!0,e=W):i in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[i],e=s==o.a.ERROR?H:s==o.a.LOADED||s==o.a.ABORT?K:void 0),void 0!=e&&this.dispatchEvent(new V(e,n))},e.prototype.setTileLoadFunction=function(t){this.tileCache.clear(),this.tileLoadFunction=t,this.changed()},e.prototype.setTileUrlFunction=function(t,e){this.tileUrlFunction=t,this.tileCache.pruneExceptNewestZ(),void 0!==e?this.setKey(e):this.changed()},e.prototype.setUrl=function(t){var e=this.urls=function(t){var e=[],n=/\{([a-z])-([a-z])\}/.exec(t);if(n){var i,r=n[1].charCodeAt(0),o=n[2].charCodeAt(0);for(i=r;i<=o;++i)e.push(t.replace(n[0],String.fromCharCode(i)));return e}if(n=n=/\{(\d+)-(\d+)\}/.exec(t)){for(var s=parseInt(n[2],10),a=parseInt(n[1],10);a<=s;a++)e.push(t.replace(n[0],a.toString()));return e}return e.push(t),e}(t);this.setTileUrlFunction(this.fixedTileUrlFunction?this.fixedTileUrlFunction.bind(this):S(e,this.tileGrid),t)},e.prototype.setUrls=function(t){this.urls=t;var e=t.join("\n");this.setTileUrlFunction(this.fixedTileUrlFunction?this.fixedTileUrlFunction.bind(this):S(t,this.tileGrid),e)},e.prototype.useTile=function(t,e,n){var i=g(t,e,n);this.tileCache.containsKey(i)&&this.tileCache.get(i)},e}(z);function J(t,e){t.getImage().src=e}Z.prototype.fixedTileUrlFunction;var Q=function(t){function e(e){var n=e||{},i=void 0!==n.projection?n.projection:"EPSG:3857",r=void 0!==n.tileGrid?n.tileGrid:function(t){var e={};return Object(D.a)(e,void 0!==t?t:{}),void 0===e.extent&&(e.extent=Object(v.c)("EPSG:3857").getExtent()),e.resolutions=q(e.extent,e.maxZoom,e.tileSize),delete e.maxZoom,new Y(e)}({extent:U(i),maxZoom:n.maxZoom,minZoom:n.minZoom,tileSize:n.tileSize});t.call(this,{attributions:n.attributions,cacheSize:n.cacheSize,crossOrigin:n.crossOrigin,opaque:n.opaque,projection:i,reprojectionErrorThreshold:n.reprojectionErrorThreshold,tileGrid:r,tileLoadFunction:n.tileLoadFunction,tilePixelRatio:n.tilePixelRatio,tileUrlFunction:n.tileUrlFunction,url:n.url,urls:n.urls,wrapX:void 0===n.wrapX||n.wrapX,transition:n.transition})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(function(t){function e(e){t.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,extent:e.extent,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:J,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition}),this.crossOrigin=void 0!==e.crossOrigin?e.crossOrigin:null,this.tileClass=void 0!==e.tileClass?e.tileClass:f,this.tileCacheForProjection={},this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.canExpireCache=function(){if(!i.a)return t.prototype.canExpireCache.call(this);if(this.tileCache.canExpireCache())return!0;for(var e in this.tileCacheForProjection)if(this.tileCacheForProjection[e].canExpireCache())return!0;return!1},e.prototype.expireCache=function(e,n){if(i.a){var r=this.getTileCacheForProjection(e);for(var o in this.tileCache.expireCache(this.tileCache==r?n:{}),this.tileCacheForProjection){var s=this.tileCacheForProjection[o];s.expireCache(s==r?n:{})}}else t.prototype.expireCache.call(this,e,n)},e.prototype.getGutter=function(t){return i.a&&this.getProjection()&&t&&!Object(v.b)(this.getProjection(),t)?0:this.getGutterInternal()},e.prototype.getGutterInternal=function(){return 0},e.prototype.getOpaque=function(e){return!(i.a&&this.getProjection()&&e&&!Object(v.b)(this.getProjection(),e))&&t.prototype.getOpaque.call(this,e)},e.prototype.getTileGridForProjection=function(e){if(!i.a)return t.prototype.getTileGridForProjection.call(this,e);var n=this.getProjection();if(!this.tileGrid||n&&!Object(v.b)(n,e)){var o=Object(r.b)(e).toString();return o in this.tileGridForProjection||(this.tileGridForProjection[o]=X(e)),this.tileGridForProjection[o]}return this.tileGrid},e.prototype.getTileCacheForProjection=function(e){if(!i.a)return t.prototype.getTileCacheForProjection.call(this,e);var n=this.getProjection();if(!n||Object(v.b)(n,e))return this.tileCache;var o=Object(r.b)(e).toString();return o in this.tileCacheForProjection||(this.tileCacheForProjection[o]=new _(this.tileCache.highWaterMark)),this.tileCacheForProjection[o]},e.prototype.createTile_=function(t,e,n,i,r,s){var a=[t,e,n],h=this.getTileCoordForTileUrlFunction(a,r),c=h?this.tileUrlFunction(h,i,r):void 0,p=new this.tileClass(a,void 0!==c?o.a.IDLE:o.a.EMPTY,void 0!==c?c:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return p.key=s,Object(l.a)(p,u.a.CHANGE,this.handleTileChange,this),p},e.prototype.getTile=function(t,e,n,r,o){var s=this.getProjection();if(i.a&&s&&o&&!Object(v.b)(s,o)){var a,u=this.getTileCacheForProjection(o),h=[t,e,n],c=y(h);u.containsKey(c)&&(a=u.get(c));var l=this.getKey();if(a&&a.key==l)return a;var p=this.getTileGridForProjection(s),f=this.getTileGridForProjection(o),d=this.getTileCoordForTileUrlFunction(h,o),g=new C(s,p,o,f,h,d,this.getTilePixelRatio(r),this.getGutterInternal(),function(t,e,n,i){return this.getTileInternal(t,e,n,i,s)}.bind(this),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_);return g.key=l,a?(g.interimTile=a,g.refreshInterimChain(),u.replace(c,g)):u.set(c,g),g}return this.getTileInternal(t,e,n,r,s||o)},e.prototype.getTileInternal=function(t,e,n,i,r){var s=null,a=g(t,e,n),u=this.getKey();if(this.tileCache.containsKey(a)){if((s=this.tileCache.get(a)).key!=u){var h=s;s=this.createTile_(t,e,n,i,r,u),h.getState()==o.a.IDLE?s.interimTile=h.interimTile:s.interimTile=h,s.refreshInterimChain(),this.tileCache.replace(a,s)}}else s=this.createTile_(t,e,n,i,r,u),this.tileCache.set(a,s);return s},e.prototype.setRenderReprojectionEdges=function(t){if(i.a&&this.renderReprojectionEdges_!=t){for(var e in this.renderReprojectionEdges_=t,this.tileCacheForProjection)this.tileCacheForProjection[e].clear();this.changed()}},e.prototype.setTileGridForProjection=function(t,e){if(i.a){var n=Object(v.c)(t);if(n){var o=Object(r.b)(n).toString();o in this.tileGridForProjection||(this.tileGridForProjection[o]=e)}}},e}(Z));n.d(e,"ATTRIBUTION",function(){return $});var $='&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors.',tt=function(t){function e(e){var n,i=e||{};n=void 0!==i.attributions?i.attributions:[$];var r=void 0!==i.crossOrigin?i.crossOrigin:"anonymous",o=void 0!==i.url?i.url:"https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png";t.call(this,{attributions:n,cacheSize:i.cacheSize,crossOrigin:r,opaque:void 0===i.opaque||i.opaque,maxZoom:void 0!==i.maxZoom?i.maxZoom:19,reprojectionErrorThreshold:i.reprojectionErrorThreshold,tileLoadFunction:i.tileLoadFunction,url:o,wrapX:i.wrapX})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Q);e.default=tt},function(t,e,n){"use strict";n.r(e);var i=n(6),r=n(19),o=n(22),s=n(87),a=n(26),u=n(10),h=n(35),c=n(1),l=n(60),p={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},f=n(64),d=n(67),g=["","unavailable","touch","pen","mouse"];function y(t){this.pointerMap[t.pointerId.toString()]=t;var e=this.prepareEvent_(t);this.dispatcher.down(e,t)}function _(t){var e=this.prepareEvent_(t);this.dispatcher.move(e,t)}function v(t){var e=this.prepareEvent_(t);this.dispatcher.up(e,t),this.cleanup(t.pointerId)}function m(t){var e=this.prepareEvent_(t);this.dispatcher.leaveOut(e,t)}function E(t){var e=this.prepareEvent_(t);this.dispatcher.enterOver(e,t)}function x(t){var e=this.prepareEvent_(t);this.dispatcher.cancel(e,t),this.cleanup(t.pointerId)}function b(t){var e=this.dispatcher.makeEvent("lostpointercapture",t,t);this.dispatcher.dispatchEvent(e)}function w(t){var e=this.dispatcher.makeEvent("gotpointercapture",t,t);this.dispatcher.dispatchEvent(e)}var C=function(t){function e(e){var n={MSPointerDown:y,MSPointerMove:_,MSPointerUp:v,MSPointerOut:m,MSPointerOver:E,MSPointerCancel:x,MSGotPointerCapture:w,MSLostPointerCapture:b};t.call(this,e,n),this.pointerMap=e.pointerMap}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.prepareEvent_=function(t){var e=t;return"number"==typeof t.pointerType&&((e=this.dispatcher.cloneEvent(t,t)).pointerType=g[t.pointerType]),e},e.prototype.cleanup=function(t){delete this.pointerMap[t.toString()]},e}(d.a);function O(t){this.dispatcher.fireNativeEvent(t)}function I(t){this.dispatcher.fireNativeEvent(t)}function S(t){this.dispatcher.fireNativeEvent(t)}function T(t){this.dispatcher.fireNativeEvent(t)}function R(t){this.dispatcher.fireNativeEvent(t)}function N(t){this.dispatcher.fireNativeEvent(t)}function L(t){this.dispatcher.fireNativeEvent(t)}function M(t){this.dispatcher.fireNativeEvent(t)}var P=function(t){function e(e){var n={pointerdown:O,pointermove:I,pointerup:S,pointerout:T,pointerover:R,pointercancel:N,gotpointercapture:M,lostpointercapture:L};t.call(this,e,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(d.a),A=n(29),D=!1,F=function(t){function e(e,n,i){t.call(this,e),this.originalEvent=n;var r=i||{};this.buttons=this.getButtons_(r),this.pressure=this.getPressure_(r,this.buttons),this.bubbles="bubbles"in r&&r.bubbles,this.cancelable="cancelable"in r&&r.cancelable,this.view="view"in r?r.view:null,this.detail="detail"in r?r.detail:null,this.screenX="screenX"in r?r.screenX:0,this.screenY="screenY"in r?r.screenY:0,this.clientX="clientX"in r?r.clientX:0,this.clientY="clientY"in r?r.clientY:0,this.ctrlKey="ctrlKey"in r&&r.ctrlKey,this.altKey="altKey"in r&&r.altKey,this.shiftKey="shiftKey"in r&&r.shiftKey,this.metaKey="metaKey"in r&&r.metaKey,this.button="button"in r?r.button:0,this.relatedTarget="relatedTarget"in r?r.relatedTarget:null,this.pointerId="pointerId"in r?r.pointerId:0,this.width="width"in r?r.width:0,this.height="height"in r?r.height:0,this.tiltX="tiltX"in r?r.tiltX:0,this.tiltY="tiltY"in r?r.tiltY:0,this.pointerType="pointerType"in r?r.pointerType:"",this.hwTimestamp="hwTimestamp"in r?r.hwTimestamp:0,this.isPrimary="isPrimary"in r&&r.isPrimary,n.preventDefault&&(this.preventDefault=function(){n.preventDefault()})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getButtons_=function(t){var e;if(t.buttons||D)e=t.buttons;else switch(t.which){case 1:e=1;break;case 2:e=4;break;case 3:e=2;break;default:e=0}return e},e.prototype.getPressure_=function(t,e){return t.pressure?t.pressure:e?.5:0},e}(A.a);!function(){try{var t=new MouseEvent("click",{buttons:1});D=1===t.buttons}catch(t){}}();var j=F,G=n(12);function k(t){this.vacuumTouches_(t),this.setPrimaryTouch_(t.changedTouches[0]),this.dedupSynthMouse_(t),this.clickCount_++,this.processTouches_(t,this.overDown_)}function B(t){t.preventDefault(),this.processTouches_(t,this.moveOverOut_)}function Y(t){this.dedupSynthMouse_(t),this.processTouches_(t,this.upOut_)}function X(t){this.processTouches_(t,this.cancelOut_)}var q=function(t){function e(e,n){var i={touchstart:k,touchmove:B,touchend:Y,touchcancel:X};t.call(this,e,i),this.pointerMap=e.pointerMap,this.mouseSource=n,this.firstTouchId_=void 0,this.clickCount_=0,this.resetId_=void 0,this.dedupTimeout_=2500}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isPrimaryTouch_=function(t){return this.firstTouchId_===t.identifier},e.prototype.setPrimaryTouch_=function(t){var e=Object.keys(this.pointerMap).length;(0===e||1===e&&f.a.toString()in this.pointerMap)&&(this.firstTouchId_=t.identifier,this.cancelResetClickCount_())},e.prototype.removePrimaryPointer_=function(t){t.isPrimary&&(this.firstTouchId_=void 0,this.resetClickCount_())},e.prototype.resetClickCount_=function(){this.resetId_=setTimeout(this.resetClickCountHandler_.bind(this),200)},e.prototype.resetClickCountHandler_=function(){this.clickCount_=0,this.resetId_=void 0},e.prototype.cancelResetClickCount_=function(){void 0!==this.resetId_&&clearTimeout(this.resetId_)},e.prototype.touchToPointer_=function(t,e){var n=this.dispatcher.cloneEvent(t,e);return n.pointerId=e.identifier+2,n.bubbles=!0,n.cancelable=!0,n.detail=this.clickCount_,n.button=0,n.buttons=1,n.width=e.webkitRadiusX||e.radiusX||0,n.height=e.webkitRadiusY||e.radiusY||0,n.pressure=e.webkitForce||e.force||.5,n.isPrimary=this.isPrimaryTouch_(e),n.pointerType="touch",n.clientX=e.clientX,n.clientY=e.clientY,n.screenX=e.screenX,n.screenY=e.screenY,n},e.prototype.processTouches_=function(t,e){var n=Array.prototype.slice.call(t.changedTouches),i=n.length;function r(){t.preventDefault()}for(var o=0;o<i;++o){var s=this.touchToPointer_(t,n[o]);s.preventDefault=r,e.call(this,t,s)}},e.prototype.findTouch_=function(t,e){for(var n=t.length,i=0;i<n;i++){if(t[i].identifier===e)return!0}return!1},e.prototype.vacuumTouches_=function(t){var e=t.touches,n=Object.keys(this.pointerMap),i=n.length;if(i>=e.length){for(var r=[],o=0;o<i;++o){var s=n[o],a=this.pointerMap[s];s==f.a||this.findTouch_(e,s-2)||r.push(a.out)}for(var u=0;u<r.length;++u)this.cancelOut_(t,r[u])}},e.prototype.overDown_=function(t,e){this.pointerMap[e.pointerId]={target:e.target,out:e,outTarget:e.target},this.dispatcher.over(e,t),this.dispatcher.enter(e,t),this.dispatcher.down(e,t)},e.prototype.moveOverOut_=function(t,e){var n=e,i=this.pointerMap[n.pointerId];if(i){var r=i.out,o=i.outTarget;this.dispatcher.move(n,t),r&&o!==n.target&&(r.relatedTarget=n.target,n.relatedTarget=o,r.target=o,n.target?(this.dispatcher.leaveOut(r,t),this.dispatcher.enterOver(n,t)):(n.target=o,n.relatedTarget=null,this.cancelOut_(t,n))),i.out=n,i.outTarget=n.target}},e.prototype.upOut_=function(t,e){this.dispatcher.up(e,t),this.dispatcher.out(e,t),this.dispatcher.leave(e,t),this.cleanUpPointer_(e)},e.prototype.cancelOut_=function(t,e){this.dispatcher.cancel(e,t),this.dispatcher.out(e,t),this.dispatcher.leave(e,t),this.cleanUpPointer_(e)},e.prototype.cleanUpPointer_=function(t){delete this.pointerMap[t.pointerId],this.removePrimaryPointer_(t)},e.prototype.dedupSynthMouse_=function(t){var e=this.mouseSource.lastTouches,n=t.changedTouches[0];if(this.isPrimaryTouch_(n)){var i=[n.clientX,n.clientY];e.push(i),setTimeout(function(){Object(G.h)(e,i)},this.dedupTimeout_)}},e}(d.a),U=[["bubbles",!1],["cancelable",!1],["view",null],["detail",null],["screenX",0],["screenY",0],["clientX",0],["clientY",0],["ctrlKey",!1],["altKey",!1],["shiftKey",!1],["metaKey",!1],["button",0],["relatedTarget",null],["buttons",0],["pointerId",0],["width",0],["height",0],["pressure",0],["tiltX",0],["tiltY",0],["pointerType",""],["hwTimestamp",0],["isPrimary",!1],["type",""],["target",null],["currentTarget",null],["which",0]],z=function(t){function e(e){t.call(this),this.element_=e,this.pointerMap={},this.eventMap_={},this.eventSourceList_=[],this.registerSources()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.registerSources=function(){if(a.f)this.registerSource("native",new P(this));else if(a.e)this.registerSource("ms",new C(this));else{var t=new f.c(this);this.registerSource("mouse",t),a.h&&this.registerSource("touch",new q(this,t))}this.register_()},e.prototype.registerSource=function(t,e){var n=e,i=n.getEvents();i&&(i.forEach(function(t){var e=n.getHandlerForEvent(t);e&&(this.eventMap_[t]=e.bind(n))}.bind(this)),this.eventSourceList_.push(n))},e.prototype.register_=function(){for(var t=this.eventSourceList_.length,e=0;e<t;e++){var n=this.eventSourceList_[e];this.addEvents_(n.getEvents())}},e.prototype.unregister_=function(){for(var t=this.eventSourceList_.length,e=0;e<t;e++){var n=this.eventSourceList_[e];this.removeEvents_(n.getEvents())}},e.prototype.eventHandler_=function(t){var e=t.type,n=this.eventMap_[e];n&&n(t)},e.prototype.addEvents_=function(t){t.forEach(function(t){Object(c.a)(this.element_,t,this.eventHandler_,this)}.bind(this))},e.prototype.removeEvents_=function(t){t.forEach(function(t){Object(c.c)(this.element_,t,this.eventHandler_,this)}.bind(this))},e.prototype.cloneEvent=function(t,e){for(var n={},i=0,r=U.length;i<r;i++){var o=U[i][0];n[o]=t[o]||e[o]||U[i][1]}return n},e.prototype.down=function(t,e){this.fireEvent(p.POINTERDOWN,t,e)},e.prototype.move=function(t,e){this.fireEvent(p.POINTERMOVE,t,e)},e.prototype.up=function(t,e){this.fireEvent(p.POINTERUP,t,e)},e.prototype.enter=function(t,e){t.bubbles=!1,this.fireEvent(p.POINTERENTER,t,e)},e.prototype.leave=function(t,e){t.bubbles=!1,this.fireEvent(p.POINTERLEAVE,t,e)},e.prototype.over=function(t,e){t.bubbles=!0,this.fireEvent(p.POINTEROVER,t,e)},e.prototype.out=function(t,e){t.bubbles=!0,this.fireEvent(p.POINTEROUT,t,e)},e.prototype.cancel=function(t,e){this.fireEvent(p.POINTERCANCEL,t,e)},e.prototype.leaveOut=function(t,e){this.out(t,e),this.contains_(t.target,t.relatedTarget)||this.leave(t,e)},e.prototype.enterOver=function(t,e){this.over(t,e),this.contains_(t.target,t.relatedTarget)||this.enter(t,e)},e.prototype.contains_=function(t,e){return!(!t||!e)&&t.contains(e)},e.prototype.makeEvent=function(t,e,n){return new j(t,n,e)},e.prototype.fireEvent=function(t,e,n){var i=this.makeEvent(t,e,n);this.dispatchEvent(i)},e.prototype.fireNativeEvent=function(t){var e=this.makeEvent(t.type,t,t);this.dispatchEvent(e)},e.prototype.wrapMouseEvent=function(t,e){return this.makeEvent(t,f.c.prepareEvent(e,this),e)},e.prototype.disposeInternal=function(){this.unregister_(),t.prototype.disposeInternal.call(this)},e}(l.a),V=function(t){function e(e,n){t.call(this),this.map_=e,this.clickTimeoutId_=0,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=n?n*a.b:a.b,this.down_=null;var i=this.map_.getViewport();this.activePointers_=0,this.trackedTouches_={},this.pointerEventHandler_=new z(i),this.documentPointerEventHandler_=null,this.pointerdownListenerKey_=Object(c.a)(this.pointerEventHandler_,p.POINTERDOWN,this.handlePointerDown_,this),this.relayedListenerKey_=Object(c.a)(this.pointerEventHandler_,p.POINTERMOVE,this.relayEvent_,this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.emulateClick_=function(t){var e=new h.a(u.a.CLICK,this.map_,t);this.dispatchEvent(e),0!==this.clickTimeoutId_?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=0,e=new h.a(u.a.DBLCLICK,this.map_,t),this.dispatchEvent(e)):this.clickTimeoutId_=setTimeout(function(){this.clickTimeoutId_=0;var e=new h.a(u.a.SINGLECLICK,this.map_,t);this.dispatchEvent(e)}.bind(this),250)},e.prototype.updateActivePointers_=function(t){var e=t;e.type==u.a.POINTERUP||e.type==u.a.POINTERCANCEL?delete this.trackedTouches_[e.pointerId]:e.type==u.a.POINTERDOWN&&(this.trackedTouches_[e.pointerId]=!0),this.activePointers_=Object.keys(this.trackedTouches_).length},e.prototype.handlePointerUp_=function(t){this.updateActivePointers_(t);var e=new h.a(u.a.POINTERUP,this.map_,t);this.dispatchEvent(e),e.propagationStopped||this.dragging_||!this.isMouseActionButton_(t)||this.emulateClick_(this.down_),0===this.activePointers_&&(this.dragListenerKeys_.forEach(c.e),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null,this.documentPointerEventHandler_.dispose(),this.documentPointerEventHandler_=null)},e.prototype.isMouseActionButton_=function(t){return 0===t.button},e.prototype.handlePointerDown_=function(t){this.updateActivePointers_(t);var e=new h.a(u.a.POINTERDOWN,this.map_,t);this.dispatchEvent(e),this.down_=t,0===this.dragListenerKeys_.length&&(this.documentPointerEventHandler_=new z(document),this.dragListenerKeys_.push(Object(c.a)(this.documentPointerEventHandler_,u.a.POINTERMOVE,this.handlePointerMove_,this),Object(c.a)(this.documentPointerEventHandler_,u.a.POINTERUP,this.handlePointerUp_,this),Object(c.a)(this.pointerEventHandler_,u.a.POINTERCANCEL,this.handlePointerUp_,this)))},e.prototype.handlePointerMove_=function(t){if(this.isMoving_(t)){this.dragging_=!0;var e=new h.a(u.a.POINTERDRAG,this.map_,t,this.dragging_);this.dispatchEvent(e)}t.preventDefault()},e.prototype.relayEvent_=function(t){var e=!(!this.down_||!this.isMoving_(t));this.dispatchEvent(new h.a(t.type,this.map_,t,e))},e.prototype.isMoving_=function(t){return this.dragging_||Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_},e.prototype.disposeInternal=function(){this.relayedListenerKey_&&(Object(c.e)(this.relayedListenerKey_),this.relayedListenerKey_=null),this.pointerdownListenerKey_&&(Object(c.e)(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(c.e),this.dragListenerKeys_.length=0,this.documentPointerEventHandler_&&(this.documentPointerEventHandler_.dispose(),this.documentPointerEventHandler_=null),this.pointerEventHandler_&&(this.pointerEventHandler_.dispose(),this.pointerEventHandler_=null),t.prototype.disposeInternal.call(this)},e}(l.a),W=n(69),K="postrender",H="movestart",Z="moveend",J={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},Q=n(23),$=n(61),tt=n(5),et=n(4),nt=n(15),it=n(13),rt=function(t,e){this.priorityFunction_=t,this.keyFunction_=e,this.elements_=[],this.priorities_=[],this.queuedElements_={}};rt.prototype.clear=function(){this.elements_.length=0,this.priorities_.length=0,Object(it.b)(this.queuedElements_)},rt.prototype.dequeue=function(){var t=this.elements_,e=this.priorities_,n=t[0];1==t.length?(t.length=0,e.length=0):(t[0]=t.pop(),e[0]=e.pop(),this.siftUp_(0));var i=this.keyFunction_(n);return delete this.queuedElements_[i],n},rt.prototype.enqueue=function(t){Object(nt.a)(!(this.keyFunction_(t)in this.queuedElements_),31);var e=this.priorityFunction_(t);return e!=1/0&&(this.elements_.push(t),this.priorities_.push(e),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0)},rt.prototype.getCount=function(){return this.elements_.length},rt.prototype.getLeftChildIndex_=function(t){return 2*t+1},rt.prototype.getRightChildIndex_=function(t){return 2*t+2},rt.prototype.getParentIndex_=function(t){return t-1>>1},rt.prototype.heapify_=function(){var t;for(t=(this.elements_.length>>1)-1;t>=0;t--)this.siftUp_(t)},rt.prototype.isEmpty=function(){return 0===this.elements_.length},rt.prototype.isKeyQueued=function(t){return t in this.queuedElements_},rt.prototype.isQueued=function(t){return this.isKeyQueued(this.keyFunction_(t))},rt.prototype.siftUp_=function(t){for(var e=this.elements_,n=this.priorities_,i=e.length,r=e[t],o=n[t],s=t;t<i>>1;){var a=this.getLeftChildIndex_(t),u=this.getRightChildIndex_(t),h=u<i&&n[u]<n[a]?u:a;e[t]=e[h],n[t]=n[h],t=h}e[t]=r,n[t]=o,this.siftDown_(s,t)},rt.prototype.siftDown_=function(t,e){for(var n=this.elements_,i=this.priorities_,r=n[e],o=i[e];e>t;){var s=this.getParentIndex_(e);if(!(i[s]>o))break;n[e]=n[s],i[e]=i[s],e=s}n[e]=r,i[e]=o},rt.prototype.reprioritize=function(){var t,e,n,i=this.priorityFunction_,r=this.elements_,o=this.priorities_,s=0,a=r.length;for(e=0;e<a;++e)(n=i(t=r[e]))==1/0?delete this.queuedElements_[this.keyFunction_(t)]:(o[s]=n,r[s++]=t);r.length=s,o.length=s,this.heapify_()};var ot=function(t){function e(e,n){t.call(this,function(t){return e.apply(null,t)},function(t){return t[0].getKey()}),this.tileChangeCallback_=n,this.tilesLoading_=0,this.tilesLoadingKeys_={}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.enqueue=function(e){var n=t.prototype.enqueue.call(this,e);if(n){var i=e[0];Object(c.a)(i,et.a.CHANGE,this.handleTileChange,this)}return n},e.prototype.getTilesLoading=function(){return this.tilesLoading_},e.prototype.handleTileChange=function(t){var e=t.target,n=e.getState();if(n===tt.a.LOADED||n===tt.a.ERROR||n===tt.a.EMPTY||n===tt.a.ABORT){Object(c.c)(e,et.a.CHANGE,this.handleTileChange,this);var i=e.getKey();i in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[i],--this.tilesLoading_),this.tileChangeCallback_()}},e.prototype.loadMoreTiles=function(t,e){for(var n,i,r,o=0,s=!1;this.tilesLoading_<t&&o<e&&this.getCount()>0;)r=(i=this.dequeue()[0]).getKey(),(n=i.getState())===tt.a.ABORT?s=!0:n!==tt.a.IDLE||r in this.tilesLoadingKeys_||(this.tilesLoadingKeys_[r]=!0,++this.tilesLoading_,++o,i.load());0===o&&s&&this.tileChangeCallback_()},e}(rt),st=n(80),at=n(17),ut=n(25),ht=n(0),ct=n(9),lt=n(88),pt=n(57),ft={LAYERS:"layers"},dt=function(t){function e(e){var n=e||{},i=Object(it.a)({},n);delete i.layers;var o=n.layers;t.call(this,i),this.layersListenerKeys_=[],this.listenerKeys_={},Object(c.a)(this,Object(Q.b)(ft.LAYERS),this.handleLayersChanged_,this),o?Array.isArray(o)?o=new r.a(o.slice(),{unique:!0}):(Object(nt.a)(o instanceof r.a,43),o=o):o=new r.a(void 0,{unique:!0}),this.setLayers(o)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.handleLayerChange_=function(){this.changed()},e.prototype.handleLayersChanged_=function(){this.layersListenerKeys_.forEach(c.e),this.layersListenerKeys_.length=0;var t=this.getLayers();for(var e in this.layersListenerKeys_.push(Object(c.a)(t,o.a.ADD,this.handleLayersAdd_,this),Object(c.a)(t,o.a.REMOVE,this.handleLayersRemove_,this)),this.listenerKeys_)this.listenerKeys_[e].forEach(c.e);Object(it.b)(this.listenerKeys_);for(var n=t.getArray(),r=0,s=n.length;r<s;r++){var a=n[r];this.listenerKeys_[Object(i.b)(a).toString()]=[Object(c.a)(a,$.a.PROPERTYCHANGE,this.handleLayerChange_,this),Object(c.a)(a,et.a.CHANGE,this.handleLayerChange_,this)]}this.changed()},e.prototype.handleLayersAdd_=function(t){var e=t.element,n=Object(i.b)(e).toString();this.listenerKeys_[n]=[Object(c.a)(e,$.a.PROPERTYCHANGE,this.handleLayerChange_,this),Object(c.a)(e,et.a.CHANGE,this.handleLayerChange_,this)],this.changed()},e.prototype.handleLayersRemove_=function(t){var e=t.element,n=Object(i.b)(e).toString();this.listenerKeys_[n].forEach(c.e),delete this.listenerKeys_[n],this.changed()},e.prototype.getLayers=function(){return this.get(ft.LAYERS)},e.prototype.setLayers=function(t){this.set(ft.LAYERS,t)},e.prototype.getLayersArray=function(t){var e=void 0!==t?t:[];return this.getLayers().forEach(function(t){t.getLayersArray(e)}),e},e.prototype.getLayerStatesArray=function(t){var e=void 0!==t?t:[],n=e.length;this.getLayers().forEach(function(t){t.getLayerStatesArray(e)});for(var i=this.getLayerState(),r=n,o=e.length;r<o;r++){var s=e[r];s.opacity*=i.opacity,s.visible=s.visible&&i.visible,s.maxResolution=Math.min(s.maxResolution,i.maxResolution),s.minResolution=Math.max(s.minResolution,i.minResolution),void 0!==i.extent&&(void 0!==s.extent?s.extent=Object(ht.B)(s.extent,i.extent):s.extent=i.extent)}return e},e.prototype.getSourceState=function(){return pt.a.READY},e}(lt.a),gt=n(41),yt=n(8);var _t=function(t){function e(e){t.call(this);var n=function(t){var e=null;void 0!==t.keyboardEventTarget&&(e="string"==typeof t.keyboardEventTarget?document.getElementById(t.keyboardEventTarget):t.keyboardEventTarget);var n,i,o,s={},a=t.layers instanceof dt?t.layers:new dt({layers:t.layers});s[J.LAYERGROUP]=a,s[J.TARGET]=t.target,s[J.VIEW]=void 0!==t.view?t.view:new st.default,void 0!==t.controls&&(Array.isArray(t.controls)?n=new r.a(t.controls.slice()):(Object(nt.a)(t.controls instanceof r.a,47),n=t.controls));void 0!==t.interactions&&(Array.isArray(t.interactions)?i=new r.a(t.interactions.slice()):(Object(nt.a)(t.interactions instanceof r.a,48),i=t.interactions));void 0!==t.overlays?Array.isArray(t.overlays)?o=new r.a(t.overlays.slice()):(Object(nt.a)(t.overlays instanceof r.a,49),o=t.overlays):o=new r.a;return{controls:n,interactions:i,keyboardEventTarget:e,overlays:o,values:s}}(e);this.maxTilesLoading_=void 0!==e.maxTilesLoading?e.maxTilesLoading:16,this.loadTilesWhileAnimating_=void 0!==e.loadTilesWhileAnimating&&e.loadTilesWhileAnimating,this.loadTilesWhileInteracting_=void 0!==e.loadTilesWhileInteracting&&e.loadTilesWhileInteracting,this.pixelRatio_=void 0!==e.pixelRatio?e.pixelRatio:a.b,this.animationDelayKey_,this.animationDelay_=function(){this.animationDelayKey_=void 0,this.renderFrame_.call(this,Date.now())}.bind(this),this.coordinateToPixelTransform_=Object(yt.c)(),this.pixelToCoordinateTransform_=Object(yt.c)(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("DIV"),this.viewport_.className="ol-viewport"+(a.h?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.viewport_.style.msTouchAction="none",this.viewport_.style.touchAction="none",this.overlayContainer_=document.createElement("DIV"),this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("DIV"),this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent";for(var i=[et.a.CLICK,et.a.DBLCLICK,et.a.MOUSEDOWN,et.a.TOUCHSTART,et.a.MSPOINTERDOWN,u.a.POINTERDOWN,et.a.MOUSEWHEEL,et.a.WHEEL],s=0,h=i.length;s<h;++s)Object(c.a)(this.overlayContainerStopEvent_,i[s],A.b);for(var l in this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=new V(this,e.moveTolerance),u.a)Object(c.a)(this.mapBrowserEventHandler_,u.a[l],this.handleMapBrowserEvent,this);this.keyboardEventTarget_=n.keyboardEventTarget,this.keyHandlerKeys_=null,Object(c.a)(this.viewport_,et.a.CONTEXTMENU,this.handleBrowserEvent,this),Object(c.a)(this.viewport_,et.a.WHEEL,this.handleBrowserEvent,this),Object(c.a)(this.viewport_,et.a.MOUSEWHEEL,this.handleBrowserEvent,this),this.controls=n.controls||new r.a,this.interactions=n.interactions||new r.a,this.overlays_=n.overlays,this.overlayIdIndex_={},this.renderer_=this.createRenderer(),this.handleResize_,this.focus_=null,this.postRenderFunctions_=[],this.tileQueue_=new ot(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.skippedFeatureUids_={},Object(c.a)(this,Object(Q.b)(J.LAYERGROUP),this.handleLayerGroupChanged_,this),Object(c.a)(this,Object(Q.b)(J.VIEW),this.handleViewChanged_,this),Object(c.a)(this,Object(Q.b)(J.SIZE),this.handleSizeChanged_,this),Object(c.a)(this,Object(Q.b)(J.TARGET),this.handleTargetChanged_,this),this.setProperties(n.values),this.controls.forEach(function(t){t.setMap(this)}.bind(this)),Object(c.a)(this.controls,o.a.ADD,function(t){t.element.setMap(this)},this),Object(c.a)(this.controls,o.a.REMOVE,function(t){t.element.setMap(null)},this),this.interactions.forEach(function(t){t.setMap(this)}.bind(this)),Object(c.a)(this.interactions,o.a.ADD,function(t){t.element.setMap(this)},this),Object(c.a)(this.interactions,o.a.REMOVE,function(t){t.element.setMap(null)},this),this.overlays_.forEach(this.addOverlayInternal_.bind(this)),Object(c.a)(this.overlays_,o.a.ADD,function(t){this.addOverlayInternal_(t.element)},this),Object(c.a)(this.overlays_,o.a.REMOVE,function(t){var e=t.element.getId();void 0!==e&&delete this.overlayIdIndex_[e.toString()],t.element.setMap(null)},this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createRenderer=function(){throw new Error("Use a map type that has a createRenderer method")},e.prototype.addControl=function(t){this.getControls().push(t)},e.prototype.addInteraction=function(t){this.getInteractions().push(t)},e.prototype.addLayer=function(t){this.getLayerGroup().getLayers().push(t)},e.prototype.addOverlay=function(t){this.getOverlays().push(t)},e.prototype.addOverlayInternal_=function(t){var e=t.getId();void 0!==e&&(this.overlayIdIndex_[e.toString()]=t),t.setMap(this)},e.prototype.disposeInternal=function(){this.mapBrowserEventHandler_.dispose(),Object(c.c)(this.viewport_,et.a.CONTEXTMENU,this.handleBrowserEvent,this),Object(c.c)(this.viewport_,et.a.WHEEL,this.handleBrowserEvent,this),Object(c.c)(this.viewport_,et.a.MOUSEWHEEL,this.handleBrowserEvent,this),void 0!==this.handleResize_&&(removeEventListener(et.a.RESIZE,this.handleResize_,!1),this.handleResize_=void 0),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0),this.setTarget(null),t.prototype.disposeInternal.call(this)},e.prototype.forEachFeatureAtPixel=function(t,e,n){if(this.frameState_){var i=this.getCoordinateFromPixel(t),r=void 0!==(n=void 0!==n?n:{}).hitTolerance?n.hitTolerance*this.frameState_.pixelRatio:0,o=void 0!==n.layerFilter?n.layerFilter:ct.b;return this.renderer_.forEachFeatureAtCoordinate(i,this.frameState_,r,e,null,o,null)}},e.prototype.getFeaturesAtPixel=function(t,e){var n=null;return this.forEachFeatureAtPixel(t,function(t){n||(n=[]),n.push(t)},e),n},e.prototype.forEachLayerAtPixel=function(t,e,n){if(this.frameState_){var i=n||{},r=void 0!==i.hitTolerance?n.hitTolerance*this.frameState_.pixelRatio:0,o=i.layerFilter||ct.b;return this.renderer_.forEachLayerAtPixel(t,this.frameState_,r,e,null,o,null)}},e.prototype.hasFeatureAtPixel=function(t,e){if(!this.frameState_)return!1;var n=this.getCoordinateFromPixel(t),i=void 0!==(e=void 0!==e?e:{}).layerFilter?e.layerFilter:ct.b,r=void 0!==e.hitTolerance?e.hitTolerance*this.frameState_.pixelRatio:0;return this.renderer_.hasFeatureAtCoordinate(n,this.frameState_,r,i,null)},e.prototype.getEventCoordinate=function(t){return this.getCoordinateFromPixel(this.getEventPixel(t))},e.prototype.getEventPixel=function(t){var e=this.viewport_.getBoundingClientRect(),n=t.changedTouches?t.changedTouches[0]:t;return[n.clientX-e.left,n.clientY-e.top]},e.prototype.getTarget=function(){return this.get(J.TARGET)},e.prototype.getTargetElement=function(){var t=this.getTarget();return void 0!==t?"string"==typeof t?document.getElementById(t):t:null},e.prototype.getCoordinateFromPixel=function(t){var e=this.frameState_;return e?Object(yt.a)(e.pixelToCoordinateTransform,t.slice()):null},e.prototype.getControls=function(){return this.controls},e.prototype.getOverlays=function(){return this.overlays_},e.prototype.getOverlayById=function(t){var e=this.overlayIdIndex_[t.toString()];return void 0!==e?e:null},e.prototype.getInteractions=function(){return this.interactions},e.prototype.getLayerGroup=function(){return this.get(J.LAYERGROUP)},e.prototype.getLayers=function(){return this.getLayerGroup().getLayers()},e.prototype.getPixelFromCoordinate=function(t){var e=this.frameState_;return e?Object(yt.a)(e.coordinateToPixelTransform,t.slice(0,2)):null},e.prototype.getRenderer=function(){return this.renderer_},e.prototype.getSize=function(){return this.get(J.SIZE)},e.prototype.getView=function(){return this.get(J.VIEW)},e.prototype.getViewport=function(){return this.viewport_},e.prototype.getOverlayContainer=function(){return this.overlayContainer_},e.prototype.getOverlayContainerStopEvent=function(){return this.overlayContainerStopEvent_},e.prototype.getTilePriority=function(t,e,n,i){var r=this.frameState_;if(!(r&&e in r.wantedTiles))return 1/0;if(!r.wantedTiles[e][t.getKey()])return 1/0;var o=n[0]-r.focus[0],s=n[1]-r.focus[1];return 65536*Math.log(i)+Math.sqrt(o*o+s*s)/i},e.prototype.handleBrowserEvent=function(t,e){var n=e||t.type,i=new s.a(n,this,t);this.handleMapBrowserEvent(i)},e.prototype.handleMapBrowserEvent=function(t){if(this.frameState_){this.focus_=t.coordinate,t.frameState=this.frameState_;var e=this.getInteractions().getArray();if(!1!==this.dispatchEvent(t))for(var n=e.length-1;n>=0;n--){var i=e[n];if(i.getActive())if(!i.handleEvent(t))break}}},e.prototype.handlePostRender=function(){var t=this.frameState_,e=this.tileQueue_;if(!e.isEmpty()){var n=this.maxTilesLoading_,i=n;if(t){var r=t.viewHints;r[at.a.ANIMATING]&&(n=this.loadTilesWhileAnimating_?8:0,i=2),r[at.a.INTERACTING]&&(n=this.loadTilesWhileInteracting_?8:0,i=2)}e.getTilesLoading()<n&&(e.reprioritize(),e.loadMoreTiles(n,i))}for(var o=this.postRenderFunctions_,s=0,a=o.length;s<a;++s)o[s](this,t);o.length=0},e.prototype.handleSizeChanged_=function(){this.render()},e.prototype.handleTargetChanged_=function(){var t;if(this.getTarget()&&(t=this.getTargetElement()),this.keyHandlerKeys_){for(var e=0,n=this.keyHandlerKeys_.length;e<n;++e)Object(c.e)(this.keyHandlerKeys_[e]);this.keyHandlerKeys_=null}if(t){t.appendChild(this.viewport_);var i=this.keyboardEventTarget_?this.keyboardEventTarget_:t;this.keyHandlerKeys_=[Object(c.a)(i,et.a.KEYDOWN,this.handleBrowserEvent,this),Object(c.a)(i,et.a.KEYPRESS,this.handleBrowserEvent,this)],this.handleResize_||(this.handleResize_=this.updateSize.bind(this),addEventListener(et.a.RESIZE,this.handleResize_,!1))}else this.renderer_.removeLayerRenderers(),Object(ut.c)(this.viewport_),void 0!==this.handleResize_&&(removeEventListener(et.a.RESIZE,this.handleResize_,!1),this.handleResize_=void 0);this.updateSize()},e.prototype.handleTileChange_=function(){this.render()},e.prototype.handleViewPropertyChanged_=function(){this.render()},e.prototype.handleViewChanged_=function(){this.viewPropertyListenerKey_&&(Object(c.e)(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(Object(c.e)(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);var t=this.getView();t&&(this.viewport_.setAttribute("data-view",Object(i.b)(t)),this.viewPropertyListenerKey_=Object(c.a)(t,$.a.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=Object(c.a)(t,et.a.CHANGE,this.handleViewPropertyChanged_,this)),this.render()},e.prototype.handleLayerGroupChanged_=function(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(c.e),this.layerGroupPropertyListenerKeys_=null);var t=this.getLayerGroup();t&&(this.layerGroupPropertyListenerKeys_=[Object(c.a)(t,$.a.PROPERTYCHANGE,this.render,this),Object(c.a)(t,et.a.CHANGE,this.render,this)]),this.render()},e.prototype.isRendered=function(){return!!this.frameState_},e.prototype.renderSync=function(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()},e.prototype.render=function(){void 0===this.animationDelayKey_&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))},e.prototype.removeControl=function(t){return this.getControls().remove(t)},e.prototype.removeInteraction=function(t){return this.getInteractions().remove(t)},e.prototype.removeLayer=function(t){return this.getLayerGroup().getLayers().remove(t)},e.prototype.removeOverlay=function(t){return this.getOverlays().remove(t)},e.prototype.renderFrame_=function(t){var e,n=this.getSize(),r=this.getView(),o=Object(ht.j)(),s=this.frameState_,a=null;if(void 0!==n&&Object(gt.a)(n)&&r&&r.isDef()){for(var u=r.getHints(this.frameState_?this.frameState_.viewHints:void 0),h=this.getLayerGroup().getLayerStatesArray(),c={},l=0,p=h.length;l<p;++l)c[Object(i.b)(h[l].layer)]=h[l];e=r.getState();var f=this.focus_;if(!f){f=e.center;var d=e.resolution/this.pixelRatio_;f[0]=Math.round(f[0]/d)*d,f[1]=Math.round(f[1]/d)*d}a={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,extent:o,focus:f,index:this.frameIndex_++,layerStates:c,layerStatesArray:h,pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:n,skippedFeatureUids:this.skippedFeatureUids_,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:e,viewHints:u,wantedTiles:{}}}if(a&&(a.extent=Object(ht.z)(e.center,e.resolution,e.rotation,a.size,o)),this.frameState_=a,this.renderer_.renderFrame(a),a){if(a.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,a.postRenderFunctions),s)(!this.previousExtent_||!Object(ht.H)(this.previousExtent_)&&!Object(ht.p)(a.extent,this.previousExtent_))&&(this.dispatchEvent(new W.a(H,this,s)),this.previousExtent_=Object(ht.l)(this.previousExtent_));this.previousExtent_&&!a.viewHints[at.a.ANIMATING]&&!a.viewHints[at.a.INTERACTING]&&!Object(ht.p)(a.extent,this.previousExtent_)&&(this.dispatchEvent(new W.a(Z,this,a)),Object(ht.d)(a.extent,this.previousExtent_))}this.dispatchEvent(new W.a(K,this,a)),setTimeout(this.handlePostRender.bind(this),0)},e.prototype.setLayerGroup=function(t){this.set(J.LAYERGROUP,t)},e.prototype.setSize=function(t){this.set(J.SIZE,t)},e.prototype.setTarget=function(t){this.set(J.TARGET,t)},e.prototype.setView=function(t){this.set(J.VIEW,t)},e.prototype.skipFeature=function(t){var e=Object(i.b)(t).toString();this.skippedFeatureUids_[e]=!0,this.render()},e.prototype.updateSize=function(){var t=this.getTargetElement();if(t){var e=getComputedStyle(t);this.setSize([t.offsetWidth-parseFloat(e.borderLeftWidth)-parseFloat(e.paddingLeft)-parseFloat(e.paddingRight)-parseFloat(e.borderRightWidth),t.offsetHeight-parseFloat(e.borderTopWidth)-parseFloat(e.paddingTop)-parseFloat(e.paddingBottom)-parseFloat(e.borderBottomWidth)])}else this.setSize(void 0)},e.prototype.unskipFeature=function(t){var e=Object(i.b)(t).toString();delete this.skippedFeatureUids_[e],this.render()},e}(Q.a),vt=function(t){function e(e){t.call(this),this.element=e.element?e.element:null,this.target_=null,this.map_=null,this.listenerKeys=[],this.render=e.render?e.render:ct.c,e.target&&this.setTarget(e.target)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.disposeInternal=function(){Object(ut.c)(this.element),t.prototype.disposeInternal.call(this)},e.prototype.getMap=function(){return this.map_},e.prototype.setMap=function(t){this.map_&&Object(ut.c)(this.element);for(var e=0,n=this.listenerKeys.length;e<n;++e)Object(c.e)(this.listenerKeys[e]);(this.listenerKeys.length=0,this.map_=t,this.map_)&&((this.target_?this.target_:t.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==ct.c&&this.listenerKeys.push(Object(c.a)(t,K,this.render,this)),t.render())},e.prototype.setTarget=function(t){this.target_="string"==typeof t?document.getElementById(t):t},e}(Q.a),mt=n(31),Et=n(58);function xt(t){this.updateElement_(t.frameState)}var bt=function(t){function e(e){var n=e||{};t.call(this,{element:document.createElement("div"),render:n.render||xt,target:n.target}),this.ulElement_=document.createElement("UL"),this.collapsed_=void 0===n.collapsed||n.collapsed,this.collapsible_=void 0===n.collapsible||n.collapsible,this.collapsible_||(this.collapsed_=!1);var i=void 0!==n.className?n.className:"ol-attribution",r=void 0!==n.tipLabel?n.tipLabel:"Attributions",o=void 0!==n.collapseLabel?n.collapseLabel:"Â»";"string"==typeof o?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=o):this.collapseLabel_=o;var s=void 0!==n.label?n.label:"i";"string"==typeof s?(this.label_=document.createElement("span"),this.label_.textContent=s):this.label_=s;var a=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_,u=document.createElement("button");u.setAttribute("type","button"),u.title=r,u.appendChild(a),Object(c.a)(u,et.a.CLICK,this.handleClick_,this);var h=i+" "+mt.d+" "+mt.b+(this.collapsed_&&this.collapsible_?" "+mt.a:"")+(this.collapsible_?"":" ol-uncollapsible"),l=this.element;l.className=h,l.appendChild(this.ulElement_),l.appendChild(u),this.renderedAttributions_=[],this.renderedVisible_=!0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getSourceAttributions_=function(t){for(var e={},n=[],i=t.layerStatesArray,r=t.viewState.resolution,o=0,s=i.length;o<s;++o){var a=i[o];if(Object(Et.b)(a,r)){var u=a.layer.getSource();if(u){var h=u.getAttributions();if(h){var c=h(t);if(c)if(Array.isArray(c))for(var l=0,p=c.length;l<p;++l)c[l]in e||(n.push(c[l]),e[c[l]]=!0);else c in e||(n.push(c),e[c]=!0)}}}}return n},e.prototype.updateElement_=function(t){if(t){var e=this.getSourceAttributions_(t),n=e.length>0;if(this.renderedVisible_!=n&&(this.element.style.display=n?"":"none",this.renderedVisible_=n),!Object(G.b)(e,this.renderedAttributions_)){Object(ut.b)(this.ulElement_);for(var i=0,r=e.length;i<r;++i){var o=document.createElement("LI");o.innerHTML=e[i],this.ulElement_.appendChild(o)}this.renderedAttributions_=e}}else this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1)},e.prototype.handleClick_=function(t){t.preventDefault(),this.handleToggle_()},e.prototype.handleToggle_=function(){this.element.classList.toggle(mt.a),this.collapsed_?Object(ut.d)(this.collapseLabel_,this.label_):Object(ut.d)(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_},e.prototype.getCollapsible=function(){return this.collapsible_},e.prototype.setCollapsible=function(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),!t&&this.collapsed_&&this.handleToggle_())},e.prototype.setCollapsed=function(t){this.collapsible_&&this.collapsed_!==t&&this.handleToggle_()},e.prototype.getCollapsed=function(){return this.collapsed_},e}(vt),wt=n(33);function Ct(t){var e=t.frameState;if(e){var n=e.viewState.rotation;if(n!=this.rotation_){var i="rotate("+n+"rad)";if(this.autoHide_){var r=this.element.classList.contains(mt.c);r||0!==n?r&&0!==n&&this.element.classList.remove(mt.c):this.element.classList.add(mt.c)}this.label_.style.msTransform=i,this.label_.style.webkitTransform=i,this.label_.style.transform=i}this.rotation_=n}}var Ot=function(t){function e(e){var n=e||{};t.call(this,{element:document.createElement("div"),render:n.render||Ct,target:n.target});var i=void 0!==n.className?n.className:"ol-rotate",r=void 0!==n.label?n.label:"â‡§";this.label_=null,"string"==typeof r?(this.label_=document.createElement("span"),this.label_.className="ol-compass",this.label_.textContent=r):(this.label_=r,this.label_.classList.add("ol-compass"));var o=n.tipLabel?n.tipLabel:"Reset rotation",s=document.createElement("button");s.className=i+"-reset",s.setAttribute("type","button"),s.title=o,s.appendChild(this.label_),Object(c.a)(s,et.a.CLICK,this.handleClick_,this);var a=i+" "+mt.d+" "+mt.b,u=this.element;u.className=a,u.appendChild(s),this.callResetNorth_=n.resetNorth?n.resetNorth:void 0,this.duration_=void 0!==n.duration?n.duration:250,this.autoHide_=void 0===n.autoHide||n.autoHide,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(mt.c)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.handleClick_=function(t){t.preventDefault(),void 0!==this.callResetNorth_?this.callResetNorth_():this.resetNorth_()},e.prototype.resetNorth_=function(){var t=this.getMap().getView();t&&void 0!==t.getRotation()&&(this.duration_>0?t.animate({rotation:0,duration:this.duration_,easing:wt.b}):t.setRotation(0))},e}(vt),It=function(t){function e(e){var n=e||{};t.call(this,{element:document.createElement("div"),target:n.target});var i=void 0!==n.className?n.className:"ol-zoom",r=void 0!==n.delta?n.delta:1,o=void 0!==n.zoomInLabel?n.zoomInLabel:"+",s=void 0!==n.zoomOutLabel?n.zoomOutLabel:"âˆ’",a=void 0!==n.zoomInTipLabel?n.zoomInTipLabel:"Zoom in",u=void 0!==n.zoomOutTipLabel?n.zoomOutTipLabel:"Zoom out",h=document.createElement("button");h.className=i+"-in",h.setAttribute("type","button"),h.title=a,h.appendChild("string"==typeof o?document.createTextNode(o):o),Object(c.a)(h,et.a.CLICK,this.handleClick_.bind(this,r));var l=document.createElement("button");l.className=i+"-out",l.setAttribute("type","button"),l.title=u,l.appendChild("string"==typeof s?document.createTextNode(s):s),Object(c.a)(l,et.a.CLICK,this.handleClick_.bind(this,-r));var p=i+" "+mt.d+" "+mt.b,f=this.element;f.className=p,f.appendChild(h),f.appendChild(l),this.duration_=void 0!==n.duration?n.duration:250}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.handleClick_=function(t,e){e.preventDefault(),this.zoomByDelta_(t)},e.prototype.zoomByDelta_=function(t){var e=this.getMap().getView();if(e){var n=e.getResolution();if(n){var i=e.constrainResolution(n,t);this.duration_>0?(e.getAnimating()&&e.cancelAnimations(),e.animate({resolution:i,duration:this.duration_,easing:wt.b})):e.setResolution(i)}}},e}(vt);var St=function(t,e,n){this.decay_=t,this.minVelocity_=e,this.delay_=n,this.points_=[],this.angle_=0,this.initialVelocity_=0};St.prototype.begin=function(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0},St.prototype.update=function(t,e){this.points_.push(t,e,Date.now())},St.prototype.end=function(){if(this.points_.length<6)return!1;var t=Date.now()-this.delay_,e=this.points_.length-3;if(this.points_[e+2]<t)return!1;for(var n=e-3;n>0&&this.points_[n+2]>t;)n-=3;var i=this.points_[e+2]-this.points_[n+2];if(i<1e3/60)return!1;var r=this.points_[e]-this.points_[n],o=this.points_[e+1]-this.points_[n+1];return this.angle_=Math.atan2(o,r),this.initialVelocity_=Math.sqrt(r*r+o*o)/i,this.initialVelocity_>this.minVelocity_},St.prototype.getDistance=function(){return(this.minVelocity_-this.initialVelocity_)/this.decay_},St.prototype.getAngle=function(){return this.angle_};var Tt=St,Rt=n(18);function Nt(t){var e=!1,n=t.originalEvent;if(t.type==u.a.DBLCLICK){var i=t.map,r=t.coordinate,o=n.shiftKey?-this.delta_:this.delta_,s=i.getView();Object(Rt.f)(s,o,r,this.duration_),t.preventDefault(),e=!0}return!e}var Lt=function(t){function e(e){t.call(this,{handleEvent:Nt});var n=e||{};this.delta_=n.delta?n.delta:1,this.duration_=void 0!==n.duration?n.duration:250}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Rt.a),Mt=n(11),Pt=n(14),At=n(24);function Dt(t){var e=this.targetPointers,n=Object(At.a)(e);if(e.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(n[0],n[1]),this.lastCentroid){var i=this.lastCentroid[0]-n[0],r=n[1]-this.lastCentroid[1],o=t.map.getView(),s=[i,r];Object(Mt.d)(s,o.getResolution()),Object(Mt.c)(s,o.getRotation()),Object(Mt.a)(s,o.getCenter()),s=o.constrainCenter(s),o.setCenter(s)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=n,this.lastPointersCount_=e.length}function Ft(t){var e=t.map,n=e.getView();if(0===this.targetPointers.length){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){var i=this.kinetic_.getDistance(),r=this.kinetic_.getAngle(),o=n.getCenter(),s=e.getPixelFromCoordinate(o),a=e.getCoordinateFromPixel([s[0]-i*Math.cos(r),s[1]-i*Math.sin(r)]);n.animate({center:n.constrainCenter(a),duration:500,easing:wt.b})}return n.setHint(at.a.INTERACTING,-1),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}function jt(t){if(this.targetPointers.length>0&&this.condition_(t)){var e=t.map.getView();return this.lastCentroid=null,this.handlingDownUpSequence||e.setHint(at.a.INTERACTING,1),e.getAnimating()&&e.setCenter(t.frameState.viewState.center),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}var Gt=function(t){function e(e){t.call(this,{handleDownEvent:jt,handleDragEvent:Dt,handleUpEvent:Ft,stopDown:ct.a});var n=e||{};this.kinetic_=n.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.condition_=n.condition?n.condition:Pt.e,this.noKinetic_=!1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(At.b),kt=n(46);function Bt(t){if(Object(Pt.d)(t)){var e=t.map,n=e.getView();if(n.getConstraints().rotation!==kt.c){var i=e.getSize(),r=t.pixel,o=Math.atan2(i[1]/2-r[1],r[0]-i[0]/2);if(void 0!==this.lastAngle_){var s=o-this.lastAngle_,a=n.getRotation();Object(Rt.d)(n,a-s)}this.lastAngle_=o}}}function Yt(t){if(!Object(Pt.d)(t))return!0;var e=t.map.getView();e.setHint(at.a.INTERACTING,-1);var n=e.getRotation();return Object(Rt.c)(e,n,void 0,this.duration_),!1}function Xt(t){return!!Object(Pt.d)(t)&&(!(!Object(Pt.c)(t)||!this.condition_(t))&&(t.map.getView().setHint(at.a.INTERACTING,1),this.lastAngle_=void 0,!0))}var qt=function(t){function e(e){var n=e||{};t.call(this,{handleDownEvent:Xt,handleDragEvent:Bt,handleUpEvent:Yt,stopDown:ct.a}),this.condition_=n.condition?n.condition:Pt.a,this.lastAngle_=void 0,this.duration_=void 0!==n.duration?n.duration:250}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(At.b),Ut=n(76),zt=n(30),Vt=function(t){function e(e){t.call(this),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.disposeInternal=function(){this.setMap(null)},e.prototype.render_=function(){var t=this.startPixel_,e=this.endPixel_,n=this.element_.style;n.left=Math.min(t[0],e[0])+"px",n.top=Math.min(t[1],e[1])+"px",n.width=Math.abs(e[0]-t[0])+"px",n.height=Math.abs(e[1]-t[1])+"px"},e.prototype.setMap=function(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);var e=this.element_.style;e.left=e.top=e.width=e.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)},e.prototype.setPixels=function(t,e){this.startPixel_=t,this.endPixel_=e,this.createOrUpdateGeometry(),this.render_()},e.prototype.createOrUpdateGeometry=function(){var t=this.startPixel_,e=this.endPixel_,n=[t,[t[0],e[1]],e,[e[0],t[1]]].map(this.map_.getCoordinateFromPixel,this.map_);n[4]=n[0].slice(),this.geometry_?this.geometry_.setCoordinates([n]):this.geometry_=new zt.a([n])},e.prototype.getGeometry=function(){return this.geometry_},e}(Ut.a),Wt={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend"},Kt=function(t){function e(e,n,i){t.call(this,e),this.coordinate=n,this.mapBrowserEvent=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(A.a);function Ht(t,e,n){var i=n[0]-e[0],r=n[1]-e[1];return i*i+r*r>=this.minArea_}function Zt(t){Object(Pt.d)(t)&&(this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new Kt(Wt.BOXDRAG,t.coordinate,t)))}function Jt(t){return!Object(Pt.d)(t)||(this.box_.setMap(null),this.boxEndCondition_(t,this.startPixel_,t.pixel)&&(this.onBoxEnd_(t),this.dispatchEvent(new Kt(Wt.BOXEND,t.coordinate,t))),!1)}function Qt(t){return!!Object(Pt.d)(t)&&(!(!Object(Pt.c)(t)||!this.condition_(t))&&(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new Kt(Wt.BOXSTART,t.coordinate,t)),!0))}function $t(){var t=this.getMap(),e=t.getView(),n=t.getSize(),i=this.getGeometry().getExtent();if(this.out_){var r=e.calculateExtent(n),o=Object(ht.n)([t.getPixelFromCoordinate(Object(ht.v)(i)),t.getPixelFromCoordinate(Object(ht.D)(i))]),s=e.getResolutionForExtent(o,n);Object(ht.J)(r,1/s),i=r}var a=e.constrainResolution(e.getResolutionForExtent(i,n)),u=Object(ht.x)(i);u=e.constrainCenter(u),e.animate({resolution:a,center:u,duration:this.duration_,easing:wt.b})}var te=function(t){function e(e){var n=e||{},i=n.condition?n.condition:Pt.f;t.call(this,{condition:i,className:n.className||"ol-dragzoom",onBoxEnd:$t}),this.duration_=void 0!==n.duration?n.duration:200,this.out_=void 0!==n.out&&n.out}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(function(t){function e(e){t.call(this,{handleDownEvent:Qt,handleDragEvent:Zt,handleUpEvent:Jt});var n=e||{};this.box_=new Vt(n.className||"ol-dragbox"),this.minArea_=void 0!==n.minArea?n.minArea:64,this.onBoxEnd_=n.onBoxEnd?n.onBoxEnd:ct.c,this.startPixel_=null,this.condition_=n.condition?n.condition:Pt.b,this.boxEndCondition_=n.boxEndCondition?n.boxEndCondition:Ht}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getGeometry=function(){return this.box_.getGeometry()},e}(At.b)),ee={LEFT:37,UP:38,RIGHT:39,DOWN:40};function ne(t){var e=!1;if(t.type==et.a.KEYDOWN){var n=t.originalEvent.keyCode;if(this.condition_(t)&&(n==ee.DOWN||n==ee.LEFT||n==ee.RIGHT||n==ee.UP)){var i=t.map.getView(),r=i.getResolution()*this.pixelDelta_,o=0,s=0;n==ee.DOWN?s=-r:n==ee.LEFT?o=-r:n==ee.RIGHT?o=r:s=r;var a=[o,s];Object(Mt.c)(a,i.getRotation()),Object(Rt.b)(i,a,this.duration_),t.preventDefault(),e=!0}}return!e}var ie=function(t){function e(e){t.call(this,{handleEvent:ne});var n=e||{};this.defaultCondition_=function(t){return Object(Pt.e)(t)&&Object(Pt.g)(t)},this.condition_=void 0!==n.condition?n.condition:this.defaultCondition_,this.duration_=void 0!==n.duration?n.duration:100,this.pixelDelta_=void 0!==n.pixelDelta?n.pixelDelta:128}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Rt.a);function re(t){var e=!1;if(t.type==et.a.KEYDOWN||t.type==et.a.KEYPRESS){var n=t.originalEvent.charCode;if(this.condition_(t)&&(n=="+".charCodeAt(0)||n=="-".charCodeAt(0))){var i=t.map,r=n=="+".charCodeAt(0)?this.delta_:-this.delta_,o=i.getView();Object(Rt.f)(o,r,void 0,this.duration_),t.preventDefault(),e=!0}}return!e}var oe=function(t){function e(e){t.call(this,{handleEvent:re});var n=e||{};this.condition_=n.condition?n.condition:Pt.g,this.delta_=n.delta?n.delta:1,this.duration_=void 0!==n.duration?n.duration:100}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Rt.a),se=n(7),ae={TRACKPAD:"trackpad",WHEEL:"wheel"};function ue(t){if(!this.condition_(t))return!0;var e=t.type;if(e!==et.a.WHEEL&&e!==et.a.MOUSEWHEEL)return!0;t.preventDefault();var n,i=t.map,r=t.originalEvent;if(this.useAnchor_&&(this.lastAnchor_=t.coordinate),t.type==et.a.WHEEL?(n=r.deltaY,a.c&&r.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(n/=a.b),r.deltaMode===WheelEvent.DOM_DELTA_LINE&&(n*=40)):t.type==et.a.MOUSEWHEEL&&(n=-r.wheelDeltaY,a.g&&(n/=3)),0===n)return!1;var o=Date.now();if(void 0===this.startTime_&&(this.startTime_=o),(!this.mode_||o-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(n)<4?ae.TRACKPAD:ae.WHEEL),this.mode_===ae.TRACKPAD){var s=i.getView();this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):s.setHint(at.a.INTERACTING,1),this.trackpadTimeoutId_=setTimeout(this.decrementInteractingHint_.bind(this),this.trackpadEventGap_);var u=s.getResolution()*Math.pow(2,n/this.trackpadDeltaPerZoom_),h=s.getMinResolution(),c=s.getMaxResolution(),l=0;if(u<h?(u=Math.max(u,h/this.trackpadZoomBuffer_),l=1):u>c&&(u=Math.min(u,c*this.trackpadZoomBuffer_),l=-1),this.lastAnchor_){var p=s.calculateCenterZoom(u,this.lastAnchor_);s.setCenter(s.constrainCenter(p))}return s.setResolution(u),0===l&&this.constrainResolution_&&s.animate({resolution:s.constrainResolution(u,n>0?-1:1),easing:wt.b,anchor:this.lastAnchor_,duration:this.duration_}),l>0?s.animate({resolution:h,easing:wt.b,anchor:this.lastAnchor_,duration:500}):l<0&&s.animate({resolution:c,easing:wt.b,anchor:this.lastAnchor_,duration:500}),this.startTime_=o,!1}this.delta_+=n;var f=Math.max(this.timeout_-(o-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,i),f),!1}var he=function(t){function e(e){t.call(this,{handleEvent:ue});var n=e||{};this.delta_=0,this.duration_=void 0!==n.duration?n.duration:250,this.timeout_=void 0!==n.timeout?n.timeout:80,this.useAnchor_=void 0===n.useAnchor||n.useAnchor,this.constrainResolution_=n.constrainResolution||!1,this.condition_=n.condition?n.condition:Pt.b,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_=void 0,this.trackpadDeltaPerZoom_=300,this.trackpadZoomBuffer_=1.5}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.decrementInteractingHint_=function(){this.trackpadTimeoutId_=void 0,this.getMap().getView().setHint(at.a.INTERACTING,-1)},e.prototype.handleWheelZoom_=function(t){var e=t.getView();e.getAnimating()&&e.cancelAnimations();var n=Object(se.a)(this.delta_,-1,1);Object(Rt.f)(e,-n,this.lastAnchor_,this.duration_),this.mode_=void 0,this.delta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0},e.prototype.setMouseAnchor=function(t){this.useAnchor_=t,t||(this.lastAnchor_=null)},e}(Rt.a);function ce(t){var e=0,n=this.targetPointers[0],i=this.targetPointers[1],r=Math.atan2(i.clientY-n.clientY,i.clientX-n.clientX);if(void 0!==this.lastAngle_){var o=r-this.lastAngle_;this.rotationDelta_+=o,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),e=o}this.lastAngle_=r;var s=t.map,a=s.getView();if(a.getConstraints().rotation!==kt.c){var u=s.getViewport().getBoundingClientRect(),h=Object(At.a)(this.targetPointers);if(h[0]-=u.left,h[1]-=u.top,this.anchor_=s.getCoordinateFromPixel(h),this.rotating_){var c=a.getRotation();s.render(),Object(Rt.d)(a,c+e,this.anchor_)}}}function le(t){if(this.targetPointers.length<2){var e=t.map.getView();if(e.setHint(at.a.INTERACTING,-1),this.rotating_){var n=e.getRotation();Object(Rt.c)(e,n,this.anchor_,this.duration_)}return!1}return!0}function pe(t){if(this.targetPointers.length>=2){var e=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||e.getView().setHint(at.a.INTERACTING,1),!0}return!1}var fe=function(t){function e(e){t.call(this,{handleDownEvent:pe,handleDragEvent:ce,handleUpEvent:le,stopDown:ct.a});var n=e||{};this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=void 0!==n.threshold?n.threshold:.3,this.duration_=void 0!==n.duration?n.duration:250}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(At.b);function de(t){var e=1,n=this.targetPointers[0],i=this.targetPointers[1],r=n.clientX-i.clientX,o=n.clientY-i.clientY,s=Math.sqrt(r*r+o*o);void 0!==this.lastDistance_&&(e=this.lastDistance_/s),this.lastDistance_=s;var a=t.map,u=a.getView(),h=u.getResolution(),c=u.getMaxResolution(),l=u.getMinResolution(),p=h*e;p>c?(e=c/h,p=c):p<l&&(e=l/h,p=l),1!=e&&(this.lastScaleDelta_=e);var f=a.getViewport().getBoundingClientRect(),d=Object(At.a)(this.targetPointers);d[0]-=f.left,d[1]-=f.top,this.anchor_=a.getCoordinateFromPixel(d),a.render(),Object(Rt.g)(u,p,this.anchor_)}function ge(t){if(this.targetPointers.length<2){var e=t.map.getView();e.setHint(at.a.INTERACTING,-1);var n=e.getResolution();if(this.constrainResolution_||n<e.getMinResolution()||n>e.getMaxResolution()){var i=this.lastScaleDelta_-1;Object(Rt.e)(e,n,this.anchor_,this.duration_,i)}return!1}return!0}function ye(t){if(this.targetPointers.length>=2){var e=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||e.getView().setHint(at.a.INTERACTING,1),!0}return!1}var _e=function(t){function e(e){t.call(this,{handleDownEvent:ye,handleDragEvent:de,handleUpEvent:ge,stopDown:ct.a});var n=e||{};this.constrainResolution_=n.constrainResolution||!1,this.anchor_=null,this.duration_=void 0!==n.duration?n.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(At.b);var ve=n(34),me=function(t){function e(e,n,i,r){t.call(this),this.extent=e,this.pixelRatio_=i,this.resolution=n,this.state=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.changed=function(){this.dispatchEvent(et.a.CHANGE)},e.prototype.getExtent=function(){return this.extent},e.prototype.getImage=function(){},e.prototype.getPixelRatio=function(){return this.pixelRatio_},e.prototype.getResolution=function(){return this.resolution},e.prototype.getState=function(){return this.state},e.prototype.load=function(){},e}(l.a),Ee=n(28),xe=function(t){function e(e,n,i,r,o){var s=void 0!==o?Ee.a.IDLE:Ee.a.LOADED;t.call(this,e,n,i,s),this.loader_=void 0!==o?o:null,this.canvas_=r,this.error_=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getError=function(){return this.error_},e.prototype.handleLoad_=function(t){t?(this.error_=t,this.state=Ee.a.ERROR):this.state=Ee.a.LOADED,this.changed()},e.prototype.load=function(){this.state==Ee.a.IDLE&&(this.state=Ee.a.LOADING,this.changed(),this.loader_(this.handleLoad_.bind(this)))},e.prototype.getImage=function(){return this.canvas_},e}(me),be=n(45),we=n(85),Ce=function(t){function e(e,n,i,r,o){t.call(this,e),this.vectorContext=n,this.frameState=i,this.context=r,this.glContext=o}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(A.a),Oe=n(50),Ie=n(3),Se=n(36),Te=n(2),Re=n(39),Ne=n(38),Le=function(){};Le.prototype.drawCustom=function(t,e,n){},Le.prototype.drawGeometry=function(t){},Le.prototype.setStyle=function(t){},Le.prototype.drawCircle=function(t,e){},Le.prototype.drawFeature=function(t,e){},Le.prototype.drawGeometryCollection=function(t,e){},Le.prototype.drawLineString=function(t,e){},Le.prototype.drawMultiLineString=function(t,e){},Le.prototype.drawMultiPoint=function(t,e){},Le.prototype.drawMultiPolygon=function(t,e){},Le.prototype.drawPoint=function(t,e){},Le.prototype.drawPolygon=function(t,e){},Le.prototype.drawText=function(t,e){},Le.prototype.setFillStrokeStyle=function(t,e){},Le.prototype.setImageStyle=function(t,e){},Le.prototype.setTextStyle=function(t,e){};var Me=Le,Pe=function(t){function e(e,n,i,r,o){t.call(this),this.context_=e,this.pixelRatio_=n,this.extent_=i,this.transform_=r,this.viewRotation_=o,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=0,this.imageSnapToPixel_=!1,this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=0,this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=Object(yt.c)()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.drawImages_=function(t,e,n,i){if(this.image_){var r=Object(Ne.c)(t,e,n,2,this.transform_,this.pixelCoordinates_),o=this.context_,s=this.tmpLocalTransform_,a=o.globalAlpha;1!=this.imageOpacity_&&(o.globalAlpha=a*this.imageOpacity_);var u=this.imageRotation_;this.imageRotateWithView_&&(u+=this.viewRotation_);for(var h=0,c=r.length;h<c;h+=2){var l=r[h]-this.imageAnchorX_,p=r[h+1]-this.imageAnchorY_;if(this.imageSnapToPixel_&&(l=Math.round(l),p=Math.round(p)),0!==u||1!=this.imageScale_){var f=l+this.imageAnchorX_,d=p+this.imageAnchorY_;Object(yt.b)(s,f,d,this.imageScale_,this.imageScale_,u,-f,-d),o.setTransform.apply(o,s)}o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,l,p,this.imageWidth_,this.imageHeight_)}0===u&&1==this.imageScale_||o.setTransform(1,0,0,1,0,0),1!=this.imageOpacity_&&(o.globalAlpha=a)}},e.prototype.drawText_=function(t,e,n,i){if(this.textState_&&""!==this.text_){this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);var r=Object(Ne.c)(t,e,n,i,this.transform_,this.pixelCoordinates_),o=this.context_,s=this.textRotation_;for(this.textRotateWithView_&&(s+=this.viewRotation_);e<n;e+=i){var a=r[e]+this.textOffsetX_,u=r[e+1]+this.textOffsetY_;if(0!==s||1!=this.textScale_){var h=Object(yt.b)(this.tmpLocalTransform_,a,u,this.textScale_,this.textScale_,s,-a,-u);o.setTransform.apply(o,h)}this.textStrokeState_&&o.strokeText(this.text_,a,u),this.textFillState_&&o.fillText(this.text_,a,u)}0===s&&1==this.textScale_||o.setTransform(1,0,0,1,0,0)}},e.prototype.moveToLineTo_=function(t,e,n,i,r){var o=this.context_,s=Object(Ne.c)(t,e,n,i,this.transform_,this.pixelCoordinates_);o.moveTo(s[0],s[1]);var a=s.length;r&&(a-=2);for(var u=2;u<a;u+=2)o.lineTo(s[u],s[u+1]);return r&&o.closePath(),n},e.prototype.drawRings_=function(t,e,n,i){for(var r=0,o=n.length;r<o;++r)e=this.moveToLineTo_(t,e,n[r],i,!0);return e},e.prototype.drawCircle=function(t){if(Object(ht.F)(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=Object(Re.b)(t,this.transform_,this.pixelCoordinates_),n=e[2]-e[0],i=e[3]-e[1],r=Math.sqrt(n*n+i*i),o=this.context_;o.beginPath(),o.arc(e[0],e[1],r,0,2*Math.PI),this.fillState_&&o.fill(),this.strokeState_&&o.stroke()}""!==this.text_&&this.drawText_(t.getCenter(),0,2,2)}},e.prototype.setStyle=function(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())},e.prototype.drawGeometry=function(t){switch(t.getType()){case Te.a.POINT:this.drawPoint(t);break;case Te.a.LINE_STRING:this.drawLineString(t);break;case Te.a.POLYGON:this.drawPolygon(t);break;case Te.a.MULTI_POINT:this.drawMultiPoint(t);break;case Te.a.MULTI_LINE_STRING:this.drawMultiLineString(t);break;case Te.a.MULTI_POLYGON:this.drawMultiPolygon(t);break;case Te.a.GEOMETRY_COLLECTION:this.drawGeometryCollection(t);break;case Te.a.CIRCLE:this.drawCircle(t)}},e.prototype.drawFeature=function(t,e){var n=e.getGeometryFunction()(t);n&&Object(ht.F)(this.extent_,n.getExtent())&&(this.setStyle(e),this.drawGeometry(n))},e.prototype.drawGeometryCollection=function(t){for(var e=t.getGeometriesArray(),n=0,i=e.length;n<i;++n)this.drawGeometry(e[n])},e.prototype.drawPoint=function(t){var e=t.getFlatCoordinates(),n=t.getStride();this.image_&&this.drawImages_(e,0,e.length,n),""!==this.text_&&this.drawText_(e,0,e.length,n)},e.prototype.drawMultiPoint=function(t){var e=t.getFlatCoordinates(),n=t.getStride();this.image_&&this.drawImages_(e,0,e.length,n),""!==this.text_&&this.drawText_(e,0,e.length,n)},e.prototype.drawLineString=function(t){if(Object(ht.F)(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var e=this.context_,n=t.getFlatCoordinates();e.beginPath(),this.moveToLineTo_(n,0,n.length,t.getStride(),!1),e.stroke()}if(""!==this.text_){var i=t.getFlatMidpoint();this.drawText_(i,0,2,2)}}},e.prototype.drawMultiLineString=function(t){var e=t.getExtent();if(Object(ht.F)(this.extent_,e)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var n=this.context_,i=t.getFlatCoordinates(),r=0,o=t.getEnds(),s=t.getStride();n.beginPath();for(var a=0,u=o.length;a<u;++a)r=this.moveToLineTo_(i,r,o[a],s,!1);n.stroke()}if(""!==this.text_){var h=t.getFlatMidpoints();this.drawText_(h,0,h.length,2)}}},e.prototype.drawPolygon=function(t){if(Object(ht.F)(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=this.context_;e.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){var n=t.getFlatInteriorPoint();this.drawText_(n,0,2,2)}}},e.prototype.drawMultiPolygon=function(t){if(Object(ht.F)(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=this.context_,n=t.getOrientedFlatCoordinates(),i=0,r=t.getEndss(),o=t.getStride();e.beginPath();for(var s=0,a=r.length;s<a;++s){var u=r[s];i=this.drawRings_(n,i,u,o)}this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){var h=t.getFlatInteriorPoints();this.drawText_(h,0,h.length,2)}}},e.prototype.setContextFillState_=function(t){var e=this.context_,n=this.contextFillState_;n?n.fillStyle!=t.fillStyle&&(n.fillStyle=e.fillStyle=t.fillStyle):(e.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})},e.prototype.setContextStrokeState_=function(t){var e=this.context_,n=this.contextStrokeState_;n?(n.lineCap!=t.lineCap&&(n.lineCap=e.lineCap=t.lineCap),a.a&&(Object(G.b)(n.lineDash,t.lineDash)||e.setLineDash(n.lineDash=t.lineDash),n.lineDashOffset!=t.lineDashOffset&&(n.lineDashOffset=e.lineDashOffset=t.lineDashOffset)),n.lineJoin!=t.lineJoin&&(n.lineJoin=e.lineJoin=t.lineJoin),n.lineWidth!=t.lineWidth&&(n.lineWidth=e.lineWidth=t.lineWidth),n.miterLimit!=t.miterLimit&&(n.miterLimit=e.miterLimit=t.miterLimit),n.strokeStyle!=t.strokeStyle&&(n.strokeStyle=e.strokeStyle=t.strokeStyle)):(e.lineCap=t.lineCap,a.a&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.lineWidth=t.lineWidth,e.miterLimit=t.miterLimit,e.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})},e.prototype.setContextTextState_=function(t){var e=this.context_,n=this.contextTextState_,i=t.textAlign?t.textAlign:Ie.l;n?(n.font!=t.font&&(n.font=e.font=t.font),n.textAlign!=i&&(n.textAlign=e.textAlign=i),n.textBaseline!=t.textBaseline&&(n.textBaseline=e.textBaseline=t.textBaseline)):(e.font=t.font,e.textAlign=i,e.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:i,textBaseline:t.textBaseline})},e.prototype.setFillStrokeStyle=function(t,e){if(t){var n=t.getColor();this.fillState_={fillStyle:Object(Se.a)(n||Ie.b)}}else this.fillState_=null;if(e){var i=e.getColor(),r=e.getLineCap(),o=e.getLineDash(),s=e.getLineDashOffset(),a=e.getLineJoin(),u=e.getWidth(),h=e.getMiterLimit();this.strokeState_={lineCap:void 0!==r?r:Ie.d,lineDash:o||Ie.e,lineDashOffset:s||Ie.f,lineJoin:void 0!==a?a:Ie.g,lineWidth:this.pixelRatio_*(void 0!==u?u:Ie.h),miterLimit:void 0!==h?h:Ie.i,strokeStyle:Object(Se.a)(i||Ie.k)}}else this.strokeState_=null},e.prototype.setImageStyle=function(t){if(t){var e=t.getAnchor(),n=t.getImage(1),i=t.getOrigin(),r=t.getSize();this.imageAnchorX_=e[0],this.imageAnchorY_=e[1],this.imageHeight_=r[1],this.image_=n,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=i[0],this.imageOriginY_=i[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation(),this.imageScale_=t.getScale()*this.pixelRatio_,this.imageSnapToPixel_=t.getSnapToPixel(),this.imageWidth_=r[0]}else this.image_=null},e.prototype.setTextStyle=function(t){if(t){var e=t.getFill();if(e){var n=e.getColor();this.textFillState_={fillStyle:Object(Se.a)(n||Ie.b)}}else this.textFillState_=null;var i=t.getStroke();if(i){var r=i.getColor(),o=i.getLineCap(),s=i.getLineDash(),a=i.getLineDashOffset(),u=i.getLineJoin(),h=i.getWidth(),c=i.getMiterLimit();this.textStrokeState_={lineCap:void 0!==o?o:Ie.d,lineDash:s||Ie.e,lineDashOffset:a||Ie.f,lineJoin:void 0!==u?u:Ie.g,lineWidth:void 0!==h?h:Ie.h,miterLimit:void 0!==c?c:Ie.i,strokeStyle:Object(Se.a)(r||Ie.k)}}else this.textStrokeState_=null;var l=t.getFont(),p=t.getOffsetX(),f=t.getOffsetY(),d=t.getRotateWithView(),g=t.getRotation(),y=t.getScale(),_=t.getText(),v=t.getTextAlign(),m=t.getTextBaseline();this.textState_={font:void 0!==l?l:Ie.c,textAlign:void 0!==v?v:Ie.l,textBaseline:void 0!==m?m:Ie.m},this.text_=void 0!==_?_:"",this.textOffsetX_=void 0!==p?this.pixelRatio_*p:0,this.textOffsetY_=void 0!==f?this.pixelRatio_*f:0,this.textRotateWithView_=void 0!==d&&d,this.textRotation_=void 0!==g?g:0,this.textScale_=this.pixelRatio_*(void 0!==y?y:1)}else this.text_=""},e}(Me),Ae=n(55),De=function(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32};function Fe(t,e,n){return e+":"+t+":"+(n?Object(Ae.a)(n):"null")}De.prototype.clear=function(){this.cache_={},this.cacheSize_=0},De.prototype.expire=function(){if(this.cacheSize_>this.maxCacheSize_){var t=0;for(var e in this.cache_){var n=this.cache_[e];0!=(3&t++)||n.hasListener()||(delete this.cache_[e],--this.cacheSize_)}}},De.prototype.get=function(t,e,n){var i=Fe(t,e,n);return i in this.cache_?this.cache_[i]:null},De.prototype.set=function(t,e,n,i){var r=Fe(t,e,n);this.cache_[r]=i,++this.cacheSize_},De.prototype.setSize=function(t){this.maxCacheSize_=t,this.expire()};var je=new De,Ge=function(t){function e(e){t.call(this),this.map_=e,this.layerRenderers_={},this.layerRendererListeners_={},this.layerRendererConstructors_=[]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.registerLayerRenderers=function(t){this.layerRendererConstructors_.push.apply(this.layerRendererConstructors_,t)},e.prototype.getLayerRendererConstructors=function(){return this.layerRendererConstructors_},e.prototype.calculateMatrices2D=function(t){var e=t.viewState,n=t.coordinateToPixelTransform,i=t.pixelToCoordinateTransform;Object(yt.b)(n,t.size[0]/2,t.size[1]/2,1/e.resolution,-1/e.resolution,-e.rotation,-e.center[0],-e.center[1]),Object(yt.d)(Object(yt.g)(i,n))},e.prototype.removeLayerRenderers=function(){for(var t in this.layerRenderers_)this.removeLayerRendererByKey_(t).dispose()},e.prototype.forEachFeatureAtCoordinate=function(t,e,n,r,o,s,a){var u,h=e.viewState,c=h.resolution;function l(t,n){var s=Object(i.b)(t).toString(),a=e.layerStates[Object(i.b)(n)].managed;if(!(s in e.skippedFeatureUids)||a)return r.call(o,t,a?n:null)}var p=h.projection,f=t;if(p.canWrapX()){var d=p.getExtent(),g=Object(ht.E)(d),y=t[0];if(y<d[0]||y>d[2])f=[y+g*Math.ceil((d[0]-y)/g),t[1]]}var _,v=e.layerStatesArray;for(_=v.length-1;_>=0;--_){var m=v[_],E=m.layer;if(Object(Et.b)(m,c)&&s.call(a,E)){var x=this.getLayerRenderer(E);if(E.getSource()&&(u=x.forEachFeatureAtCoordinate(E.getSource().getWrapX()?f:t,e,n,l,o)),u)return u}}},e.prototype.forEachLayerAtPixel=function(t,e,n,i,r,o,s){},e.prototype.hasFeatureAtCoordinate=function(t,e,n,i,r){return void 0!==this.forEachFeatureAtCoordinate(t,e,n,ct.b,this,i,r)},e.prototype.getLayerRenderer=function(t){var e=Object(i.b)(t).toString();if(e in this.layerRenderers_)return this.layerRenderers_[e];for(var n,r=0,o=this.layerRendererConstructors_.length;r<o;++r){var s=this.layerRendererConstructors_[r];if(s.handles(t)){n=s.create(this,t);break}}if(!n)throw new Error("Unable to create renderer for layer: "+t.getType());return this.layerRenderers_[e]=n,this.layerRendererListeners_[e]=Object(c.a)(n,et.a.CHANGE,this.handleLayerRendererChange_,this),n},e.prototype.getLayerRendererByKey=function(t){return this.layerRenderers_[t]},e.prototype.getLayerRenderers=function(){return this.layerRenderers_},e.prototype.getMap=function(){return this.map_},e.prototype.handleLayerRendererChange_=function(){this.map_.render()},e.prototype.removeLayerRendererByKey_=function(t){var e=this.layerRenderers_[t];return delete this.layerRenderers_[t],Object(c.e)(this.layerRendererListeners_[t]),delete this.layerRendererListeners_[t],e},e.prototype.removeUnusedLayerRenderers_=function(t,e){for(var n in this.layerRenderers_)e&&n in e.layerStates||this.removeLayerRendererByKey_(n).dispose()},e.prototype.scheduleExpireIconCache=function(t){t.postRenderFunctions.push(ke)},e.prototype.scheduleRemoveUnusedLayerRenderers=function(t){for(var e in this.layerRenderers_)if(!(e in t.layerStates))return void t.postRenderFunctions.push(this.removeUnusedLayerRenderers_.bind(this))},e}(Ut.a);function ke(t,e){je.expire()}function Be(t,e){return t.zIndex-e.zIndex}Ge.prototype.renderFrame=ct.c;var Ye=[],Xe=function(t){function e(e){t.call(this,e);var n=e.getViewport();this.context_=Object(ut.a)(),this.canvas_=this.context_.canvas,this.canvas_.style.width="100%",this.canvas_.style.height="100%",this.canvas_.style.display="block",this.canvas_.className=mt.d,n.insertBefore(this.canvas_,n.childNodes[0]||null),this.renderedVisible_=!0,this.transform_=Object(yt.c)()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.dispatchComposeEvent_=function(t,e){var n=this.getMap(),i=this.context_;if(n.hasListener(t)){var r=e.extent,o=e.pixelRatio,s=e.viewState.rotation,a=this.getTransform(e),u=new Pe(i,o,r,a,s),h=new Ce(t,u,e,i,null);n.dispatchEvent(h)}},e.prototype.getTransform=function(t){var e=t.viewState,n=this.canvas_.width/2,i=this.canvas_.height/2,r=t.pixelRatio/e.resolution,o=-r,s=-e.rotation,a=-e.center[0],u=-e.center[1];return Object(yt.b)(this.transform_,n,i,r,o,s,a,u)},e.prototype.renderFrame=function(t){if(t){var e=this.context_,n=t.pixelRatio,i=Math.round(t.size[0]*n),r=Math.round(t.size[1]*n);this.canvas_.width!=i||this.canvas_.height!=r?(this.canvas_.width=i,this.canvas_.height=r):e.clearRect(0,0,i,r);var o=t.viewState.rotation;this.calculateMatrices2D(t),this.dispatchComposeEvent_(Oe.a.PRECOMPOSE,t);var s=t.layerStatesArray;Object(G.j)(s,Be),o&&(e.save(),Object(Ie.s)(e,o,i/2,r/2));var a,u,h,c,l,p=t.viewState.resolution;for(a=0,u=s.length;a<u;++a)h=(l=s[a]).layer,c=this.getLayerRenderer(h),Object(Et.b)(l,p)&&l.sourceState==pt.a.READY&&c.prepareFrame(t,l)&&c.composeFrame(t,l,e);o&&e.restore(),this.dispatchComposeEvent_(Oe.a.POSTCOMPOSE,t),this.renderedVisible_||(this.canvas_.style.display="",this.renderedVisible_=!0),this.scheduleRemoveUnusedLayerRenderers(t),this.scheduleExpireIconCache(t)}else this.renderedVisible_&&(this.canvas_.style.display="none",this.renderedVisible_=!1)},e.prototype.forEachLayerAtPixel=function(t,e,n,i,r,o,s){var a,u,h=e.viewState.resolution,c=e.layerStatesArray,l=c.length,p=Object(yt.a)(e.pixelToCoordinateTransform,t.slice());for(u=l-1;u>=0;--u){var f=c[u],d=f.layer;if(Object(Et.b)(f,h)&&o.call(s,d))if(a=this.getLayerRenderer(d).forEachLayerAtCoordinate(p,e,n,i,r))return a}},e.prototype.registerLayerRenderers=function(e){t.prototype.registerLayerRenderers.call(this,e);for(var n=0,i=e.length;n<i;++n){var r=e[n];Object(G.d)(Ye,r)||Ye.push(r)}},e}(Ge),qe=function(t){function e(e){t.call(this),this.layer_=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createLoadedTileFinder=function(t,e,n){return function(i,r){return t.forEachLoadedTile(e,i,r,function(t){n[i]||(n[i]={}),n[i][t.tileCoord.toString()]=t})}},e.prototype.getLayer=function(){return this.layer_},e.prototype.handleImageChange_=function(t){t.target.getState()===Ee.a.LOADED&&this.renderIfReadyAndVisible()},e.prototype.loadImage=function(t){var e=t.getState();return e!=Ee.a.LOADED&&e!=Ee.a.ERROR&&Object(c.a)(t,et.a.CHANGE,this.handleImageChange_,this),e==Ee.a.IDLE&&(t.load(),e=t.getState()),e==Ee.a.LOADED},e.prototype.renderIfReadyAndVisible=function(){var t=this.getLayer();t.getVisible()&&t.getSourceState()==pt.a.READY&&this.changed()},e.prototype.scheduleExpireCache=function(t,e){if(e.canExpireCache()){var n=function(t,e,n){var r=Object(i.b)(t).toString();r in n.usedTiles&&t.expireCache(n.viewState.projection,n.usedTiles[r])}.bind(null,e);t.postRenderFunctions.push(n)}},e.prototype.updateUsedTiles=function(t,e,n,r){var o=Object(i.b)(e).toString(),s=n.toString();o in t?s in t[o]?t[o][s].extend(r):t[o][s]=r:(t[o]={},t[o][s]=r)},e.prototype.manageTilePyramid=function(t,e,n,r,o,s,a,u,h,c){var l=Object(i.b)(e).toString();l in t.wantedTiles||(t.wantedTiles[l]={});var p,f,d,g,y,_,v=t.wantedTiles[l],m=t.tileQueue;for(_=n.getMinZoom();_<=a;++_)for(f=n.getTileRangeForExtentAndZ(s,_,f),d=n.getResolution(_),g=f.minX;g<=f.maxX;++g)for(y=f.minY;y<=f.maxY;++y)a-_<=u?((p=e.getTile(_,g,y,r,o)).getState()==tt.a.IDLE&&(v[p.getKey()]=!0,m.isKeyQueued(p.getKey())||m.enqueue([p,l,n.getTileCoordCenter(p.tileCoord),d])),void 0!==h&&h.call(c,p)):e.useTile(_,g,y,o)},e}(n(91).a);qe.prototype.forEachFeatureAtCoordinate=ct.c,qe.prototype.hasFeatureAtCoordinate=ct.a;var Ue=function(t){function e(e){t.call(this,e),this.renderedResolution,this.transform_=Object(yt.c)()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clip=function(t,e,n){var i=e.pixelRatio,r=e.size[0]*i,o=e.size[1]*i,s=e.viewState.rotation,a=Object(ht.C)(n),u=Object(ht.D)(n),h=Object(ht.w)(n),c=Object(ht.v)(n);Object(yt.a)(e.coordinateToPixelTransform,a),Object(yt.a)(e.coordinateToPixelTransform,u),Object(yt.a)(e.coordinateToPixelTransform,h),Object(yt.a)(e.coordinateToPixelTransform,c),t.save(),Object(Ie.s)(t,-s,r/2,o/2),t.beginPath(),t.moveTo(a[0]*i,a[1]*i),t.lineTo(u[0]*i,u[1]*i),t.lineTo(h[0]*i,h[1]*i),t.lineTo(c[0]*i,c[1]*i),t.clip(),Object(Ie.s)(t,s,r/2,o/2)},e.prototype.dispatchComposeEvent_=function(t,e,n,i){var r=this.getLayer();if(r.hasListener(t)){var o=n.size[0]*n.pixelRatio,s=n.size[1]*n.pixelRatio,a=n.viewState.rotation;Object(Ie.s)(e,-a,o/2,s/2);var u=void 0!==i?i:this.getTransform(n,0),h=new Pe(e,n.pixelRatio,n.extent,u,n.viewState.rotation),c=new Ce(t,h,n,e,null);r.dispatchEvent(c),Object(Ie.s)(e,a,o/2,s/2)}},e.prototype.forEachLayerAtCoordinate=function(t,e,n,i,r){return this.forEachFeatureAtCoordinate(t,e,n,ct.b,this)?i.call(r,this.getLayer(),null):void 0},e.prototype.postCompose=function(t,e,n,i){this.dispatchComposeEvent_(Oe.a.POSTCOMPOSE,t,e,i)},e.prototype.preCompose=function(t,e,n){this.dispatchComposeEvent_(Oe.a.PRECOMPOSE,t,e,n)},e.prototype.dispatchRenderEvent=function(t,e,n){this.dispatchComposeEvent_(Oe.a.RENDER,t,e,n)},e.prototype.getTransform=function(t,e){var n=t.viewState,i=t.pixelRatio,r=i*t.size[0]/2,o=i*t.size[1]/2,s=i/n.resolution,a=-s,u=-n.rotation,h=-n.center[0]+e,c=-n.center[1];return Object(yt.b)(this.transform_,r,o,s,a,u,h,c)},e.prototype.composeFrame=function(t,e,n){},e.prototype.prepareFrame=function(t,e){},e}(qe),ze=function(t){function e(e){t.call(this,e),this.coordinateToCanvasPixelTransform=Object(yt.c)(),this.hitCanvasContext_=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.composeFrame=function(t,e,n){this.preCompose(n,t);var i=this.getImage();if(i){var r=e.extent,o=void 0!==r&&!Object(ht.g)(r,t.extent)&&Object(ht.F)(r,t.extent);o&&this.clip(n,t,r);var s=this.getImageTransform(),a=n.globalAlpha;n.globalAlpha=e.opacity;var u=s[4],h=s[5],c=i.width*s[0],l=i.height*s[3];n.drawImage(i,0,0,+i.width,+i.height,Math.round(u),Math.round(h),Math.round(c),Math.round(l)),n.globalAlpha=a,o&&n.restore()}this.postCompose(n,t,e)},e.prototype.getImage=function(){},e.prototype.getImageTransform=function(){},e.prototype.forEachFeatureAtCoordinate=function(t,e,n,i,r){var o=this.getLayer(),s=o.getSource(),a=e.viewState.resolution,u=e.viewState.rotation,h=e.skippedFeatureUids;return s.forEachFeatureAtCoordinate(t,a,u,n,h,function(t){return i.call(r,t,o)})},e.prototype.forEachLayerAtCoordinate=function(e,n,i,r,o){if(this.getImage()){if(this.getLayer().getSource().forEachFeatureAtCoordinate!==ct.c)return t.prototype.forEachLayerAtCoordinate.apply(this,arguments);var s=Object(yt.a)(this.coordinateToCanvasPixelTransform,e.slice());Object(Mt.d)(s,n.viewState.resolution/this.renderedResolution),this.hitCanvasContext_||(this.hitCanvasContext_=Object(ut.a)(1,1)),this.hitCanvasContext_.clearRect(0,0,1,1),this.hitCanvasContext_.drawImage(this.getImage(),s[0],s[1],1,1,0,0,1,1);var a=this.hitCanvasContext_.getImageData(0,0,1,1).data;return a[3]>0?r.call(o,this.getLayer(),a):void 0}},e}(Ue),Ve=function(t){function e(n){if(t.call(this,n),this.image_=null,this.imageTransform_=Object(yt.c)(),this.skippedFeatures_=[],this.vectorRenderer_=null,n.getType()===be.a.VECTOR)for(var i=0,r=Ye.length;i<r;++i){var o=Ye[i];if(o!==e&&o.handles(n)){this.vectorRenderer_=new o(n);break}}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.disposeInternal=function(){this.vectorRenderer_&&this.vectorRenderer_.dispose(),t.prototype.disposeInternal.call(this)},e.prototype.getImage=function(){return this.image_?this.image_.getImage():null},e.prototype.getImageTransform=function(){return this.imageTransform_},e.prototype.prepareFrame=function(t,e){var n,i=t.pixelRatio,r=t.size,o=t.viewState,s=o.center,a=o.resolution,u=this.getLayer().getSource(),h=t.viewHints,c=this.vectorRenderer_,l=t.extent;if(c||void 0===e.extent||(l=Object(ht.B)(l,e.extent)),!h[at.a.ANIMATING]&&!h[at.a.INTERACTING]&&!Object(ht.H)(l)){var p=o.projection;if(!ve.a){var f=u.getProjection();f&&(p=f)}var d=this.skippedFeatures_;if(c){var g=c.context,y=Object(it.a)({},t,{size:[Object(ht.E)(l)/a,Object(ht.A)(l)/a],viewState:Object(it.a)({},t.viewState,{rotation:0})}),_=Object.keys(y.skippedFeatureUids).sort();n=new xe(l,a,i,g.canvas,function(t){!c.prepareFrame(y,e)||!c.replayGroupChanged&&Object(G.b)(d,_)||(g.canvas.width=y.size[0]*i,g.canvas.height=y.size[1]*i,c.compose(g,y,e),d=_,t())})}else n=u.getImage(l,a,i,p);n&&this.loadImage(n)&&(this.image_=n,this.skippedFeatures_=d)}if(this.image_){var v=(n=this.image_).getExtent(),m=n.getResolution(),E=n.getPixelRatio(),x=i*m/(a*E),b=Object(yt.b)(this.imageTransform_,i*r[0]/2,i*r[1]/2,x,x,0,E*(v[0]-s[0])/m,E*(s[1]-v[3])/m);Object(yt.b)(this.coordinateToCanvasPixelTransform,i*r[0]/2-b[4],i*r[1]/2-b[5],i/a,-i/a,0,-s[0],-s[1]),this.renderedResolution=m*i/E}return!!this.image_},e.prototype.forEachFeatureAtCoordinate=function(e,n,i,r,o){return this.vectorRenderer_?this.vectorRenderer_.forEachFeatureAtCoordinate(e,n,i,r,o):t.prototype.forEachFeatureAtCoordinate.call(this,e,n,i,r,o)},e}(ze);Ve.handles=function(t){return t.getType()===be.a.IMAGE||t.getType()===be.a.VECTOR&&t.getRenderMode()===we.a.IMAGE},Ve.create=function(t,e){return new Ve(e)};var We=Ve,Ke=n(63),He=function(t){function e(e,n){t.call(this,e),this.context=n?null:Object(ut.a)(),this.oversampling_,this.renderedExtent_=null,this.renderedRevision,this.renderedTiles=[],this.newTiles_=!1,this.tmpExtent=Object(ht.j)(),this.tmpTileRange_=new Ke.b(0,0,0,0),this.imageTransform_=Object(yt.c)(),this.zDirection=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isDrawableTile_=function(t){var e=t.getState(),n=this.getLayer().getUseInterimTilesOnError();return e==tt.a.LOADED||e==tt.a.EMPTY||e==tt.a.ERROR&&!n},e.prototype.getTile=function(t,e,n,i,r){var o=this.getLayer(),s=o.getSource().getTile(t,e,n,i,r);return s.getState()==tt.a.ERROR&&(o.getUseInterimTilesOnError()?o.getPreload()>0&&(this.newTiles_=!0):s.setState(tt.a.LOADED)),this.isDrawableTile_(s)||(s=s.getInterimTile()),s},e.prototype.prepareFrame=function(t,e){var n=t.pixelRatio,r=t.size,o=t.viewState,s=o.projection,a=o.resolution,u=o.center,h=this.getLayer(),c=h.getSource(),l=c.getRevision(),p=c.getTileGridForProjection(s),f=p.getZForResolution(a,this.zDirection),d=p.getResolution(f),g=Math.round(a/d)||1,y=t.extent;if(void 0!==e.extent&&(y=Object(ht.B)(y,e.extent)),Object(ht.H)(y))return!1;var _=p.getTileRangeForExtentAndZ(y,f),v=p.getTileRangeExtent(f,_),m=c.getTilePixelRatio(n),E={};E[f]={};var x,b,w,C=this.createLoadedTileFinder(c,s,E),O=t.viewHints,I=O[at.a.ANIMATING]||O[at.a.INTERACTING],S=this.tmpExtent,T=this.tmpTileRange_;for(this.newTiles_=!1,b=_.minX;b<=_.maxX;++b)for(w=_.minY;w<=_.maxY;++w)if(!(Date.now()-t.time>16&&I)){if(x=this.getTile(f,b,w,n,s),this.isDrawableTile_(x)){var R=Object(i.b)(this);if(x.getState()==tt.a.LOADED){E[f][x.tileCoord.toString()]=x;var N=x.inTransition(R);this.newTiles_||!N&&-1!==this.renderedTiles.indexOf(x)||(this.newTiles_=!0)}if(1===x.getAlpha(R,t.time))continue}var L=p.getTileCoordChildTileRange(x.tileCoord,T,S),M=!1;L&&(M=C(f+1,L)),M||p.forEachTileCoordParentTileRange(x.tileCoord,C,null,T,S)}var P=d*n/m*g;if(!(this.renderedResolution&&Date.now()-t.time>16&&I)&&(this.newTiles_||!this.renderedExtent_||!Object(ht.g)(this.renderedExtent_,y)||this.renderedRevision!=l||g!=this.oversampling_||!I&&P!=this.renderedResolution)){var A=this.context;if(A){var D=c.getTilePixelSize(f,n,s),F=Math.round(_.getWidth()*D[0]/g),j=Math.round(_.getHeight()*D[1]/g),G=A.canvas;G.width!=F||G.height!=j?(this.oversampling_=g,G.width=F,G.height=j):(this.renderedExtent_&&!Object(ht.p)(v,this.renderedExtent_)&&A.clearRect(0,0,F,j),g=this.oversampling_)}this.renderedTiles.length=0;var k,B,Y,X,q,U,z,V,W,K,H=Object.keys(E).map(Number);for(H.sort(function(t,e){return t===f?1:e===f?-1:t>e?1:t<e?-1:0}),X=0,q=H.length;X<q;++X)for(var Z in Y=H[X],B=c.getTilePixelSize(Y,n,s),k=p.getResolution(Y)/d,z=m*c.getGutter(s),V=E[Y])x=V[Z],b=((U=p.getTileCoordExtent(x.getTileCoord(),S))[0]-v[0])/d*m/g,w=(v[3]-U[3])/d*m/g,W=B[0]*k/g,K=B[1]*k/g,this.drawTileImage(x,t,e,b,w,W,K,z,f===Y),this.renderedTiles.push(x);this.renderedRevision=l,this.renderedResolution=d*n/m*g,this.renderedExtent_=v}var J=this.renderedResolution/a,Q=Object(yt.b)(this.imageTransform_,n*r[0]/2,n*r[1]/2,J,J,0,(this.renderedExtent_[0]-u[0])/this.renderedResolution*n,(u[1]-this.renderedExtent_[3])/this.renderedResolution*n);return Object(yt.b)(this.coordinateToCanvasPixelTransform,n*r[0]/2-Q[4],n*r[1]/2-Q[5],n/a,-n/a,0,-u[0],-u[1]),this.updateUsedTiles(t.usedTiles,c,f,_),this.manageTilePyramid(t,c,p,n,s,y,f,h.getPreload()),this.scheduleExpireCache(t,c),this.renderedTiles.length>0},e.prototype.drawTileImage=function(t,e,n,r,o,s,a,u,h){var c=t.getImage(this.getLayer());if(c){var l=Object(i.b)(this),p=h?t.getAlpha(l,e.time):1;1!==p||this.getLayer().getSource().getOpaque(e.viewState.projection)||this.context.clearRect(r,o,s,a);var f=p!==this.context.globalAlpha;f&&(this.context.save(),this.context.globalAlpha=p),this.context.drawImage(c,u,u,c.width-2*u,c.height-2*u,r,o,s,a),f&&this.context.restore(),1!==p?e.animate=!0:h&&t.endTransition(l)}},e.prototype.getImage=function(){var t=this.context;return t?t.canvas:null},e.prototype.getImageTransform=function(){return this.imageTransform_},e}(ze);He.handles=function(t){return t.getType()===be.a.TILE},He.create=function(t,e){return new He(e)},He.prototype.getLayer;var Ze=He,Je=n(51),Qe=n.n(Je),$e=function(){};$e.prototype.getReplay=function(t,e){},$e.prototype.isEmpty=function(){};var tn=$e,en={CIRCLE:"Circle",DEFAULT:"Default",IMAGE:"Image",LINE_STRING:"LineString",POLYGON:"Polygon",TEXT:"Text"},nn=n(27),rn=n(43),on=n(86);function sn(t,e,n,i,r,o,s,a){for(var u,h,c,l=[],p=t[e]>t[n-i],f=r.length,d=t[e],g=t[e+1],y=t[e+=i],_=t[e+1],v=0,m=Math.sqrt(Math.pow(y-d,2)+Math.pow(_-g,2)),E="",x=0,b=0;b<f;++b){h=p?f-b-1:b;var w=r.charAt(h),C=o(E=p?w+E:E+w)-x;x+=C;for(var O=s+C/2;e<n-i&&v+m<O;)d=y,g=_,y=t[e+=i],_=t[e+1],v+=m,m=Math.sqrt(Math.pow(y-d,2)+Math.pow(_-g,2));var I=O-v,S=Math.atan2(_-g,y-d);if(p&&(S+=S>0?-Math.PI:Math.PI),void 0!==c){var T=S-c;if(T+=T>Math.PI?-2*Math.PI:T<-Math.PI?2*Math.PI:0,Math.abs(T)>a)return null}var R=I/m,N=Object(se.c)(d,y,R),L=Object(se.c)(g,_,R);c==S?(p&&(u[0]=N,u[1]=L,u[2]=C/2),u[4]=E):(x=C,u=[N,L,C/2,S,E=w],p?l.unshift(u):l.push(u),c=S),s+=C}return l}var an={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},un=[an.FILL],hn=[an.STROKE],cn=[an.BEGIN_PATH],ln=[an.CLOSE_PATH],pn=an,fn=[en.POLYGON,en.CIRCLE,en.LINE_STRING,en.IMAGE,en.TEXT,en.DEFAULT],dn={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1},gn=Object(ht.j)(),yn=Object(yt.c)(),_n=function(t){function e(e,n,i,r,o,s){t.call(this),this.declutterTree=s,this.tolerance=e,this.maxExtent=n,this.overlaps=o,this.pixelRatio=r,this.maxLineWidth=0,this.resolution=i,this.alignFill_,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.coordinateCache_={},this.renderedTransform_=Object(yt.c)(),this.hitDetectionInstructions=[],this.pixelCoordinates_=null,this.state={},this.viewRotation_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.replayTextBackground_=function(t,e,n,i,r,o,s){t.beginPath(),t.moveTo.apply(t,e),t.lineTo.apply(t,n),t.lineTo.apply(t,i),t.lineTo.apply(t,r),t.lineTo.apply(t,e),o&&(this.alignFill_=o[2],this.fill_(t)),s&&(this.setStrokeStyle_(t,s),t.stroke())},e.prototype.replayImage_=function(t,e,n,i,r,o,s,a,u,h,c,l,p,f,d,g,y,_){var v=y||_;e-=r*=p,n-=o*=p;var m,E,x,b,w=d+h>i.width?i.width-h:d,C=a+c>i.height?i.height-c:a,O=g[3]+w*p+g[1],I=g[0]+C*p+g[2],S=e-g[3],T=n-g[0];(v||0!==l)&&(m=[S,T],E=[S+O,T],x=[S+O,T+I],b=[S,T+I]);var R=null;if(0!==l){var N=e+r,L=n+o;R=Object(yt.b)(yn,N,L,1,1,l,-N,-L),Object(ht.l)(gn),Object(ht.r)(gn,Object(yt.a)(yn,m)),Object(ht.r)(gn,Object(yt.a)(yn,E)),Object(ht.r)(gn,Object(yt.a)(yn,x)),Object(ht.r)(gn,Object(yt.a)(yn,b))}else Object(ht.k)(S,T,S+O,T+I,gn);var M=t.canvas,P=_?_[2]*p/2:0,A=gn[0]-P<=M.width&&gn[2]+P>=0&&gn[1]-P<=M.height&&gn[3]+P>=0;if(f&&(e=Math.round(e),n=Math.round(n)),s){if(!A&&1==s[4])return;Object(ht.q)(s,gn);var D=A?[t,R?R.slice(0):null,u,i,h,c,w,C,e,n,p]:null;D&&v&&D.push(y,_,m,E,x,b),s.push(D)}else A&&(v&&this.replayTextBackground_(t,m,E,x,b,y,_),Object(Ie.n)(t,R,u,i,h,c,w,C,e,n,p))},e.prototype.applyPixelRatio=function(t){var e=this.pixelRatio;return 1==e?t:t.map(function(t){return t*e})},e.prototype.appendFlatCoordinates=function(t,e,n,i,r,o){var s=this.coordinates.length,a=this.getBufferedMaxExtent();o&&(e+=i);var u,h,c,l=[t[e],t[e+1]],p=[NaN,NaN],f=!0;for(u=e+i;u<n;u+=i)p[0]=t[u],p[1]=t[u+1],(c=Object(ht.i)(a,p))!==h?(f&&(this.coordinates[s++]=l[0],this.coordinates[s++]=l[1]),this.coordinates[s++]=p[0],this.coordinates[s++]=p[1],f=!1):c===nn.a.INTERSECTING?(this.coordinates[s++]=p[0],this.coordinates[s++]=p[1],f=!1):f=!0,l[0]=p[0],l[1]=p[1],h=c;return(r&&f||u===e+i)&&(this.coordinates[s++]=l[0],this.coordinates[s++]=l[1]),s},e.prototype.drawCustomCoordinates_=function(t,e,n,i,r){for(var o=0,s=n.length;o<s;++o){var a=n[o],u=this.appendFlatCoordinates(t,e,a,i,!1,!1);r.push(u),e=a}return e},e.prototype.drawCustom=function(t,e,n){this.beginGeometry(t,e);var i,r,o,s,a,u=t.getType(),h=t.getStride(),c=this.coordinates.length;if(u==Te.a.MULTI_POLYGON){i=(t=t).getOrientedFlatCoordinates(),s=[];var l=t.getEndss();a=0;for(var p=0,f=l.length;p<f;++p){var d=[];a=this.drawCustomCoordinates_(i,a,l[p],h,d),s.push(d)}this.instructions.push([pn.CUSTOM,c,s,t,n,rn.c])}else u==Te.a.POLYGON||u==Te.a.MULTI_LINE_STRING?(o=[],i=u==Te.a.POLYGON?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),a=this.drawCustomCoordinates_(i,0,t.getEnds(),h,o),this.instructions.push([pn.CUSTOM,c,o,t,n,rn.b])):u==Te.a.LINE_STRING||u==Te.a.MULTI_POINT?(i=t.getFlatCoordinates(),r=this.appendFlatCoordinates(i,0,i.length,h,!1,!1),this.instructions.push([pn.CUSTOM,c,r,t,n,rn.a])):u==Te.a.POINT&&(i=t.getFlatCoordinates(),this.coordinates.push(i[0],i[1]),r=this.coordinates.length,this.instructions.push([pn.CUSTOM,c,r,t,n]));this.endGeometry(t,e)},e.prototype.beginGeometry=function(t,e){this.beginGeometryInstruction1_=[pn.BEGIN_GEOMETRY,e,0],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[pn.BEGIN_GEOMETRY,e,0],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)},e.prototype.fill_=function(t){if(this.alignFill_){var e=Object(yt.a)(this.renderedTransform_,[0,0]),n=512*this.pixelRatio;t.translate(e[0]%n,e[1]%n),t.rotate(this.viewRotation_)}t.fill(),this.alignFill_&&t.setTransform.apply(t,Ie.r)},e.prototype.setStrokeStyle_=function(t,e){t.strokeStyle=e[1],t.lineWidth=e[2],t.lineCap=e[3],t.lineJoin=e[4],t.miterLimit=e[5],a.a&&(t.lineDashOffset=e[7],t.setLineDash(e[6]))},e.prototype.renderDeclutter_=function(t,e){if(t&&t.length>5){var n=t[4];if(1==n||n==t.length-5){var i={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};if(!this.declutterTree.collides(i)){this.declutterTree.insert(i);for(var r=5,o=t.length;r<o;++r){var s=t[r];s&&(s.length>11&&this.replayTextBackground_(s[0],s[13],s[14],s[15],s[16],s[11],s[12]),Ie.n.apply(void 0,s))}}t.length=5,Object(ht.l)(t)}}},e.prototype.replay_=function(t,e,n,r,o,s){var a;this.pixelCoordinates_&&Object(G.b)(e,this.renderedTransform_)?a=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),a=Object(Ne.c)(this.coordinates,0,this.coordinates.length,2,e,this.pixelCoordinates_),Object(yt.g)(this.renderedTransform_,e));for(var u,h,c,l,p,f,d,g,y,_,v,m,E=!Object(it.d)(n),x=0,b=r.length,w=0,C=0,O=0,I=null,S=null,T=this.coordinateCache_,R=this.viewRotation_,N={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:R},L=this.instructions!=r||this.overlaps?0:200;x<b;){var M=r[x];switch(M[0]){case pn.BEGIN_GEOMETRY:_=M[1],E&&n[Object(i.b)(_).toString()]||!_.getGeometry()?x=M[2]:void 0===s||Object(ht.F)(s,_.getGeometry().getExtent())?++x:x=M[2]+1;break;case pn.BEGIN_PATH:C>L&&(this.fill_(t),C=0),O>L&&(t.stroke(),O=0),C||O||(t.beginPath(),l=p=NaN),++x;break;case pn.CIRCLE:var P=a[w=M[1]],A=a[w+1],D=a[w+2]-P,F=a[w+3]-A,j=Math.sqrt(D*D+F*F);t.moveTo(P+j,A),t.arc(P,A,j,0,2*Math.PI,!0),++x;break;case pn.CLOSE_PATH:t.closePath(),++x;break;case pn.CUSTOM:w=M[1],u=M[2];var k=M[3],B=M[4],Y=6==M.length?M[5]:void 0;N.geometry=k,N.feature=_,x in T||(T[x]=[]);var X=T[x];Y?Y(a,w,u,2,X):(X[0]=a[w],X[1]=a[w+1],X.length=2),B(X,N),++x;break;case pn.DRAW_IMAGE:w=M[1],u=M[2],y=M[3],h=M[4],c=M[5],g=o?null:M[6];var q=M[7],U=M[8],z=M[9],V=M[10],W=M[11],K=M[12],H=M[13],Z=M[14],J=M[15],Q=void 0,$=void 0,tt=void 0;for(M.length>16?(Q=M[16],$=M[17],tt=M[18]):(Q=Ie.j,$=tt=!1),W&&(K+=R);w<u;w+=2)this.replayImage_(t,a[w],a[w+1],y,h,c,g,q,U,z,V,K,H,Z,J,Q,$?I:null,tt?S:null);this.renderDeclutter_(g,_),++x;break;case pn.DRAW_CHARS:var et=M[1],nt=M[2],rt=M[3];g=o?null:M[4];var ot=M[5],st=M[6],at=M[7],ut=M[8],ct=M[9],lt=M[10],pt=M[11],ft=M[12],dt=M[13],gt=M[14],_t=Object(on.a)(a,et,nt,2),vt=ut(ft);if(ot||vt<=_t){var mt=this.textStates[dt].textAlign,Et=sn(a,et,nt,2,ft,ut,(_t-vt)*dn[mt],at);if(Et){var xt=void 0,bt=void 0,wt=void 0,Ct=void 0,Ot=void 0;if(lt)for(xt=0,bt=Et.length;xt<bt;++xt)wt=(Ot=Et[xt])[4],Ct=this.getImage(wt,dt,"",lt),h=Ot[2]+pt,c=rt*Ct.height+2*(.5-rt)*pt-ct,this.replayImage_(t,Ot[0],Ot[1],Ct,h,c,g,Ct.height,1,0,0,Ot[3],gt,!1,Ct.width,Ie.j,null,null);if(st)for(xt=0,bt=Et.length;xt<bt;++xt)wt=(Ot=Et[xt])[4],Ct=this.getImage(wt,dt,st,""),h=Ot[2],c=rt*Ct.height-ct,this.replayImage_(t,Ot[0],Ot[1],Ct,h,c,g,Ct.height,1,0,0,Ot[3],gt,!1,Ct.width,Ie.j,null,null)}}this.renderDeclutter_(g,_),++x;break;case pn.END_GEOMETRY:if(void 0!==o){var It=o(_=M[1]);if(It)return It}++x;break;case pn.FILL:L?C++:this.fill_(t),++x;break;case pn.MOVE_TO_LINE_TO:for(w=M[1],u=M[2],v=a[w],d=(m=a[w+1])+.5|0,(f=v+.5|0)===l&&d===p||(t.moveTo(v,m),l=f,p=d),w+=2;w<u;w+=2)f=(v=a[w])+.5|0,d=(m=a[w+1])+.5|0,w!=u-2&&f===l&&d===p||(t.lineTo(v,m),l=f,p=d);++x;break;case pn.SET_FILL_STYLE:I=M,this.alignFill_=M[2],C&&(this.fill_(t),C=0,O&&(t.stroke(),O=0)),t.fillStyle=M[1],++x;break;case pn.SET_STROKE_STYLE:S=M,O&&(t.stroke(),O=0),this.setStrokeStyle_(t,M),++x;break;case pn.STROKE:L?O++:t.stroke(),++x;break;default:++x}}C&&this.fill_(t),O&&t.stroke()},e.prototype.replay=function(t,e,n,i){this.viewRotation_=n,this.replay_(t,e,i,this.instructions,void 0,void 0)},e.prototype.replayHitDetection=function(t,e,n,i,r,o){return this.viewRotation_=n,this.replay_(t,e,i,this.hitDetectionInstructions,r,o)},e.prototype.reverseHitDetectionInstructions=function(){var t,e=this.hitDetectionInstructions;e.reverse();var n,i,r=e.length,o=-1;for(t=0;t<r;++t)(i=(n=e[t])[0])==pn.END_GEOMETRY?o=t:i==pn.BEGIN_GEOMETRY&&(n[2]=t,Object(G.i)(this.hitDetectionInstructions,o,t),o=-1)},e.prototype.setFillStrokeStyle=function(t,e){var n=this.state;if(t){var i=t.getColor();n.fillStyle=Object(Se.a)(i||Ie.b)}else n.fillStyle=void 0;if(e){var r=e.getColor();n.strokeStyle=Object(Se.a)(r||Ie.k);var o=e.getLineCap();n.lineCap=void 0!==o?o:Ie.d;var s=e.getLineDash();n.lineDash=s?s.slice():Ie.e;var a=e.getLineDashOffset();n.lineDashOffset=a||Ie.f;var u=e.getLineJoin();n.lineJoin=void 0!==u?u:Ie.g;var h=e.getWidth();n.lineWidth=void 0!==h?h:Ie.h;var c=e.getMiterLimit();n.miterLimit=void 0!==c?c:Ie.i,n.lineWidth>this.maxLineWidth&&(this.maxLineWidth=n.lineWidth,this.bufferedMaxExtent_=null)}else n.strokeStyle=void 0,n.lineCap=void 0,n.lineDash=null,n.lineDashOffset=void 0,n.lineJoin=void 0,n.lineWidth=void 0,n.miterLimit=void 0},e.prototype.createFill=function(t,e){var n=t.fillStyle,i=[pn.SET_FILL_STYLE,n];return"string"!=typeof n&&i.push(!0),i},e.prototype.applyStroke=function(t){this.instructions.push(this.createStroke(t))},e.prototype.createStroke=function(t){return[pn.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]},e.prototype.updateFillStyle=function(t,e,n){var i=t.fillStyle;"string"==typeof i&&t.currentFillStyle==i||(void 0!==i&&this.instructions.push(e.call(this,t,n)),t.currentFillStyle=i)},e.prototype.updateStrokeStyle=function(t,e){var n=t.strokeStyle,i=t.lineCap,r=t.lineDash,o=t.lineDashOffset,s=t.lineJoin,a=t.lineWidth,u=t.miterLimit;(t.currentStrokeStyle!=n||t.currentLineCap!=i||r!=t.currentLineDash&&!Object(G.b)(t.currentLineDash,r)||t.currentLineDashOffset!=o||t.currentLineJoin!=s||t.currentLineWidth!=a||t.currentMiterLimit!=u)&&(void 0!==n&&e.call(this,t),t.currentStrokeStyle=n,t.currentLineCap=i,t.currentLineDash=r,t.currentLineDashOffset=o,t.currentLineJoin=s,t.currentLineWidth=a,t.currentMiterLimit=u)},e.prototype.endGeometry=function(t,e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;var n=[pn.END_GEOMETRY,e];this.instructions.push(n),this.hitDetectionInstructions.push(n)},e.prototype.getBufferedMaxExtent=function(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=Object(ht.d)(this.maxExtent),this.maxLineWidth>0)){var t=this.resolution*(this.maxLineWidth+1)/2;Object(ht.c)(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_},e}(Me);_n.prototype.finish=ct.c;var vn=_n,mn=function(t){function e(e,n,i,r,o,s){t.call(this,e,n,i,r,o,s),this.declutterGroup_=null,this.hitDetectionImage_=null,this.image_=null,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.snapToPixel_=void 0,this.width_=void 0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.drawCoordinates_=function(t,e,n,i){return this.appendFlatCoordinates(t,e,n,i,!1,!1)},e.prototype.drawPoint=function(t,e){if(this.image_){this.beginGeometry(t,e);var n=t.getFlatCoordinates(),i=t.getStride(),r=this.coordinates.length,o=this.drawCoordinates_(n,0,n.length,i);this.instructions.push([pn.DRAW_IMAGE,r,o,this.image_,this.anchorX_,this.anchorY_,this.declutterGroup_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_*this.pixelRatio,this.snapToPixel_,this.width_]),this.hitDetectionInstructions.push([pn.DRAW_IMAGE,r,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.declutterGroup_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.snapToPixel_,this.width_]),this.endGeometry(t,e)}},e.prototype.drawMultiPoint=function(t,e){if(this.image_){this.beginGeometry(t,e);var n=t.getFlatCoordinates(),i=t.getStride(),r=this.coordinates.length,o=this.drawCoordinates_(n,0,n.length,i);this.instructions.push([pn.DRAW_IMAGE,r,o,this.image_,this.anchorX_,this.anchorY_,this.declutterGroup_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_*this.pixelRatio,this.snapToPixel_,this.width_]),this.hitDetectionInstructions.push([pn.DRAW_IMAGE,r,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.declutterGroup_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.snapToPixel_,this.width_]),this.endGeometry(t,e)}},e.prototype.finish=function(){this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.snapToPixel_=void 0,this.width_=void 0},e.prototype.setImageStyle=function(t,e){var n=t.getAnchor(),i=t.getSize(),r=t.getHitDetectionImage(1),o=t.getImage(1),s=t.getOrigin();this.anchorX_=n[0],this.anchorY_=n[1],this.declutterGroup_=e,this.hitDetectionImage_=r,this.image_=o,this.height_=i[1],this.opacity_=t.getOpacity(),this.originX_=s[0],this.originY_=s[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScale(),this.snapToPixel_=t.getSnapToPixel(),this.width_=i[0]},e}(vn),En=function(t){function e(e,n,i,r,o,s){t.call(this,e,n,i,r,o,s)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.drawFlatCoordinates_=function(t,e,n,i){var r=this.coordinates.length,o=this.appendFlatCoordinates(t,e,n,i,!1,!1),s=[pn.MOVE_TO_LINE_TO,r,o];return this.instructions.push(s),this.hitDetectionInstructions.push(s),n},e.prototype.drawLineString=function(t,e){var n=this.state,i=n.strokeStyle,r=n.lineWidth;if(void 0!==i&&void 0!==r){this.updateStrokeStyle(n,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([pn.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset],cn);var o=t.getFlatCoordinates(),s=t.getStride();this.drawFlatCoordinates_(o,0,o.length,s),this.hitDetectionInstructions.push(hn),this.endGeometry(t,e)}},e.prototype.drawMultiLineString=function(t,e){var n=this.state,i=n.strokeStyle,r=n.lineWidth;if(void 0!==i&&void 0!==r){this.updateStrokeStyle(n,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([pn.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset],cn);for(var o=t.getEnds(),s=t.getFlatCoordinates(),a=t.getStride(),u=0,h=0,c=o.length;h<c;++h)u=this.drawFlatCoordinates_(s,u,o[h],a);this.hitDetectionInstructions.push(hn),this.endGeometry(t,e)}},e.prototype.finish=function(){var t=this.state;void 0!=t.lastStroke&&t.lastStroke!=this.coordinates.length&&this.instructions.push(hn),this.reverseHitDetectionInstructions(),this.state=null},e.prototype.applyStroke=function(e){void 0!=e.lastStroke&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(hn),e.lastStroke=this.coordinates.length),e.lastStroke=0,t.prototype.applyStroke.call(this,e),this.instructions.push(cn)},e}(vn),xn=n(59),bn=function(t){function e(e,n,i,r,o,s){t.call(this,e,n,i,r,o,s)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.drawFlatCoordinatess_=function(t,e,n,i){var r=this.state,o=void 0!==r.fillStyle,s=void 0!=r.strokeStyle,a=n.length;this.instructions.push(cn),this.hitDetectionInstructions.push(cn);for(var u=0;u<a;++u){var h=n[u],c=this.coordinates.length,l=this.appendFlatCoordinates(t,e,h,i,!0,!s),p=[pn.MOVE_TO_LINE_TO,c,l];this.instructions.push(p),this.hitDetectionInstructions.push(p),s&&(this.instructions.push(ln),this.hitDetectionInstructions.push(ln)),e=h}return o&&(this.instructions.push(un),this.hitDetectionInstructions.push(un)),s&&(this.instructions.push(hn),this.hitDetectionInstructions.push(hn)),e},e.prototype.drawCircle=function(t,e){var n=this.state,i=n.fillStyle,r=n.strokeStyle;if(void 0!==i||void 0!==r){this.setFillStrokeStyles_(t),this.beginGeometry(t,e),void 0!==n.fillStyle&&this.hitDetectionInstructions.push([pn.SET_FILL_STYLE,Object(Ae.a)(Ie.b)]),void 0!==n.strokeStyle&&this.hitDetectionInstructions.push([pn.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset]);var o=t.getFlatCoordinates(),s=t.getStride(),a=this.coordinates.length;this.appendFlatCoordinates(o,0,o.length,s,!1,!1);var u=[pn.CIRCLE,a];this.instructions.push(cn,u),this.hitDetectionInstructions.push(cn,u),this.hitDetectionInstructions.push(un),void 0!==n.fillStyle&&this.instructions.push(un),void 0!==n.strokeStyle&&(this.instructions.push(hn),this.hitDetectionInstructions.push(hn)),this.endGeometry(t,e)}},e.prototype.drawPolygon=function(t,e){var n=this.state,i=n.fillStyle,r=n.strokeStyle;if(void 0!==i||void 0!==r){this.setFillStrokeStyles_(t),this.beginGeometry(t,e),void 0!==n.fillStyle&&this.hitDetectionInstructions.push([pn.SET_FILL_STYLE,Object(Ae.a)(Ie.b)]),void 0!==n.strokeStyle&&this.hitDetectionInstructions.push([pn.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset]);var o=t.getEnds(),s=t.getOrientedFlatCoordinates(),a=t.getStride();this.drawFlatCoordinatess_(s,0,o,a),this.endGeometry(t,e)}},e.prototype.drawMultiPolygon=function(t,e){var n=this.state,i=n.fillStyle,r=n.strokeStyle;if(void 0!==i||void 0!==r){this.setFillStrokeStyles_(t),this.beginGeometry(t,e),void 0!==n.fillStyle&&this.hitDetectionInstructions.push([pn.SET_FILL_STYLE,Object(Ae.a)(Ie.b)]),void 0!==n.strokeStyle&&this.hitDetectionInstructions.push([pn.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset]);for(var o=t.getEndss(),s=t.getOrientedFlatCoordinates(),a=t.getStride(),u=0,h=0,c=o.length;h<c;++h)u=this.drawFlatCoordinatess_(s,u,o[h],a);this.endGeometry(t,e)}},e.prototype.finish=function(){this.reverseHitDetectionInstructions(),this.state=null;var t=this.tolerance;if(0!==t)for(var e=this.coordinates,n=0,i=e.length;n<i;++n)e[n]=Object(xn.e)(e[n],t)},e.prototype.setFillStrokeStyles_=function(t){var e=this.state;void 0!==e.fillStyle&&this.updateFillStyle(e,this.createFill,t),void 0!==e.strokeStyle&&this.updateStrokeStyle(e,this.applyStroke)},e}(vn);function wn(t,e,n,i,r){var o,s,a,u,h,c,l,p,f,d=n,g=n,y=0,_=0,v=n;for(o=n;o<i;o+=r){var m=e[o],E=e[o+1];void 0!==u&&(p=m-u,f=E-h,a=Math.sqrt(p*p+f*f),void 0!==c&&(_+=s,Math.acos((c*p+l*f)/(s*a))>t&&(_>y&&(y=_,d=v,g=o),_=0,v=o-r)),s=a,c=p,l=f),u=m,h=E}return(_+=a)>y?[v,o]:[d,g]}var Cn="line";var On={Circle:bn,Default:vn,Image:mn,LineString:En,Polygon:bn,Text:function(t){function e(e,n,i,r,o,s){t.call(this,e,n,i,r,o,s),this.declutterGroup_,this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.widths_={},Ie.o.prune()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.drawText=function(t,e){var n=this.textFillState_,i=this.textStrokeState_,r=this.textState_;if(""!==this.text_&&r&&(n||i)){var o,s,a=this.coordinates.length,u=t.getType(),h=null,c=2,l=2;if(r.placement===Cn){if(!Object(ht.F)(this.getBufferedMaxExtent(),t.getExtent()))return;var p;if(h=t.getFlatCoordinates(),l=t.getStride(),u==Te.a.LINE_STRING)p=[h.length];else if(u==Te.a.MULTI_LINE_STRING)p=t.getEnds();else if(u==Te.a.POLYGON)p=t.getEnds().slice(0,1);else if(u==Te.a.MULTI_POLYGON){var f=t.getEndss();for(p=[],o=0,s=f.length;o<s;++o)p.push(f[o][0])}this.beginGeometry(t,e);for(var d,g=r.textAlign,y=0,_=0,v=p.length;_<v;++_){if(void 0==g){var m=wn(r.maxAngle,h,y,p[_],l);y=m[0],d=m[1]}else d=p[_];for(o=y;o<d;o+=l)this.coordinates.push(h[o],h[o+1]);c=this.coordinates.length,y=p[_],this.drawChars_(a,c,this.declutterGroup_),a=c}this.endGeometry(t,e)}else{var E=this.getImage(this.text_,this.textKey_,this.fillKey_,this.strokeKey_),x=E.width/this.pixelRatio;switch(u){case Te.a.POINT:case Te.a.MULTI_POINT:c=(h=t.getFlatCoordinates()).length;break;case Te.a.LINE_STRING:h=t.getFlatMidpoint();break;case Te.a.CIRCLE:h=t.getCenter();break;case Te.a.MULTI_LINE_STRING:c=(h=t.getFlatMidpoints()).length;break;case Te.a.POLYGON:if(h=t.getFlatInteriorPoint(),!r.overflow&&h[2]/this.resolution<x)return;l=3;break;case Te.a.MULTI_POLYGON:var b=t.getFlatInteriorPoints();for(h=[],o=0,s=b.length;o<s;o+=3)(r.overflow||b[o+2]/this.resolution>=x)&&h.push(b[o],b[o+1]);if(0==(c=h.length))return}c=this.appendFlatCoordinates(h,0,c,l,!1,!1),(r.backgroundFill||r.backgroundStroke)&&(this.setFillStrokeStyle(r.backgroundFill,r.backgroundStroke),r.backgroundFill&&(this.updateFillStyle(this.state,this.createFill,t),this.hitDetectionInstructions.push(this.createFill(this.state,t))),r.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,e),this.drawTextImage_(E,a,c),this.endGeometry(t,e)}}},e.prototype.getImage=function(t,e,n,i){var r,o=i+e+t+n+this.pixelRatio;if(!Ie.o.containsKey(o)){var s=i?this.strokeStates[i]||this.textStrokeState_:null,u=n?this.fillStates[n]||this.textFillState_:null,h=this.textStates[e]||this.textState_,c=this.pixelRatio,l=h.scale*c,p=dn[h.textAlign||Ie.l],f=i&&s.lineWidth?s.lineWidth:0,d=t.split("\n"),g=d.length,y=[],_=function(t,e,n){for(var i=e.length,r=0,o=0;o<i;++o){var s=Object(Ie.q)(t,e[o]);r=Math.max(r,s),n.push(s)}return r}(h.font,d,y),v=Object(Ie.p)(h.font),m=v*g,E=_+f,x=Object(ut.a)(Math.ceil(E*l),Math.ceil((m+f)*l));r=x.canvas,Ie.o.set(o,r),1!=l&&x.scale(l,l),x.font=h.font,i&&(x.strokeStyle=s.strokeStyle,x.lineWidth=f,x.lineCap=s.lineCap,x.lineJoin=s.lineJoin,x.miterLimit=s.miterLimit,a.a&&s.lineDash.length&&(x.setLineDash(s.lineDash),x.lineDashOffset=s.lineDashOffset)),n&&(x.fillStyle=u.fillStyle),x.textBaseline="middle",x.textAlign="center";var b,w=.5-p,C=p*r.width/l+w*f;if(i)for(b=0;b<g;++b)x.strokeText(d[b],C+w*y[b],.5*(f+v)+b*v);if(n)for(b=0;b<g;++b)x.fillText(d[b],C+w*y[b],.5*(f+v)+b*v)}return Ie.o.get(o)},e.prototype.drawTextImage_=function(t,e,n){var i=this.textState_,r=this.textStrokeState_,o=this.pixelRatio,s=dn[i.textAlign||Ie.l],a=dn[i.textBaseline],u=r&&r.lineWidth?r.lineWidth:0,h=s*t.width/o+2*(.5-s)*u,c=a*t.height/o+2*(.5-a)*u;this.instructions.push([pn.DRAW_IMAGE,e,n,t,(h-this.textOffsetX_)*o,(c-this.textOffsetY_)*o,this.declutterGroup_,t.height,1,0,0,this.textRotateWithView_,this.textRotation_,1,!0,t.width,i.padding==Ie.j?Ie.j:i.padding.map(function(t){return t*o}),!!i.backgroundFill,!!i.backgroundStroke]),this.hitDetectionInstructions.push([pn.DRAW_IMAGE,e,n,t,(h-this.textOffsetX_)*o,(c-this.textOffsetY_)*o,this.declutterGroup_,t.height,1,0,0,this.textRotateWithView_,this.textRotation_,1/o,!0,t.width,i.padding,!!i.backgroundFill,!!i.backgroundStroke])},e.prototype.drawChars_=function(t,e,n){var i=this.textStrokeState_,r=this.textState_,o=this.textFillState_,s=this.strokeKey_;i&&(s in this.strokeStates||(this.strokeStates[s]={strokeStyle:i.strokeStyle,lineCap:i.lineCap,lineDashOffset:i.lineDashOffset,lineWidth:i.lineWidth,lineJoin:i.lineJoin,miterLimit:i.miterLimit,lineDash:i.lineDash}));var a=this.textKey_;this.textKey_ in this.textStates||(this.textStates[this.textKey_]={font:r.font,textAlign:r.textAlign||Ie.l,scale:r.scale});var u=this.fillKey_;o&&(u in this.fillStates||(this.fillStates[u]={fillStyle:o.fillStyle}));var h=this.pixelRatio,c=dn[r.textBaseline],l=this.textOffsetY_*h,p=this.text_,f=r.font,d=r.scale,g=i?i.lineWidth*d/2:0,y=this.widths_[f];y||(this.widths_[f]=y={}),this.instructions.push([pn.DRAW_CHARS,t,e,c,n,r.overflow,u,r.maxAngle,function(t){var e=y[t];return e||(e=y[t]=Object(Ie.q)(f,t)),e*d*h},l,s,g*h,p,a,1]),this.hitDetectionInstructions.push([pn.DRAW_CHARS,t,e,c,n,r.overflow,u,r.maxAngle,function(t){var e=y[t];return e||(e=y[t]=Object(Ie.q)(f,t)),e*d},l,s,g,p,a,1/h])},e.prototype.setTextStyle=function(t,e){var n,r,o;if(t){this.declutterGroup_=e;var s=t.getFill();s?((r=this.textFillState_)||(r=this.textFillState_={}),r.fillStyle=Object(Se.a)(s.getColor()||Ie.b)):r=this.textFillState_=null;var a=t.getStroke();if(a){(o=this.textStrokeState_)||(o=this.textStrokeState_={});var u=a.getLineDash(),h=a.getLineDashOffset(),c=a.getWidth(),l=a.getMiterLimit();o.lineCap=a.getLineCap()||Ie.d,o.lineDash=u?u.slice():Ie.e,o.lineDashOffset=void 0===h?Ie.f:h,o.lineJoin=a.getLineJoin()||Ie.g,o.lineWidth=void 0===c?Ie.h:c,o.miterLimit=void 0===l?Ie.i:l,o.strokeStyle=Object(Se.a)(a.getColor()||Ie.k)}else o=this.textStrokeState_=null;n=this.textState_;var p=t.getFont()||Ie.c;Object(Ie.a)(p);var f=t.getScale();n.overflow=t.getOverflow(),n.font=p,n.maxAngle=t.getMaxAngle(),n.placement=t.getPlacement(),n.textAlign=t.getTextAlign(),n.textBaseline=t.getTextBaseline()||Ie.m,n.backgroundFill=t.getBackgroundFill(),n.backgroundStroke=t.getBackgroundStroke(),n.padding=t.getPadding()||Ie.j,n.scale=void 0===f?1:f;var d=t.getOffsetX(),g=t.getOffsetY(),y=t.getRotateWithView(),_=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=void 0===d?0:d,this.textOffsetY_=void 0===g?0:g,this.textRotateWithView_=void 0!==y&&y,this.textRotation_=void 0===_?0:_,this.strokeKey_=o?("string"==typeof o.strokeStyle?o.strokeStyle:Object(i.b)(o.strokeStyle))+o.lineCap+o.lineDashOffset+"|"+o.lineWidth+o.lineJoin+o.miterLimit+"["+o.lineDash.join()+"]":"",this.textKey_=n.font+n.scale+(n.textAlign||"?"),this.fillKey_=r?"string"==typeof r.fillStyle?r.fillStyle:"|"+Object(i.b)(r.fillStyle):""}else this.text_=""},e}(vn)},In=function(t){function e(e,n,i,r,o,s,a){t.call(this),this.declutterTree_=s,this.declutterGroup_=null,this.tolerance_=e,this.maxExtent_=n,this.overlaps_=o,this.pixelRatio_=r,this.resolution_=i,this.renderBuffer_=a,this.replaysByZIndex_={},this.hitDetectionContext_=Object(ut.a)(1,1),this.hitDetectionTransform_=Object(yt.c)()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.addDeclutter=function(t){var e=null;return this.declutterTree_&&(t?(e=this.declutterGroup_)[4]++:(e=this.declutterGroup_=Object(ht.j)()).push(1)),e},e.prototype.clip=function(t,e){var n=this.getClipCoords(e);t.beginPath(),t.moveTo(n[0],n[1]),t.lineTo(n[2],n[3]),t.lineTo(n[4],n[5]),t.lineTo(n[6],n[7]),t.clip()},e.prototype.hasReplays=function(t){for(var e in this.replaysByZIndex_)for(var n=this.replaysByZIndex_[e],i=0,r=t.length;i<r;++i)if(t[i]in n)return!0;return!1},e.prototype.finish=function(){for(var t in this.replaysByZIndex_){var e=this.replaysByZIndex_[t];for(var n in e)e[n].finish()}},e.prototype.forEachFeatureAtCoordinate=function(t,e,n,i,r,o,s){var a,u=2*(i=Math.round(i))+1,h=Object(yt.b)(this.hitDetectionTransform_,i+.5,i+.5,1/e,-1/e,-n,-t[0],-t[1]),c=this.hitDetectionContext_;c.canvas.width!==u||c.canvas.height!==u?(c.canvas.width=u,c.canvas.height=u):c.clearRect(0,0,u,u),void 0!==this.renderBuffer_&&(a=Object(ht.j)(),Object(ht.r)(a,t),Object(ht.c)(a,e*(this.renderBuffer_+i),a));var l,p,f=function(t){if(void 0!==Sn[t])return Sn[t];for(var e=2*t+1,n=new Array(e),i=0;i<e;i++)n[i]=new Array(e);var r=t,o=0,s=0;for(;r>=o;)Tn(n,t+r,t+o),Tn(n,t+o,t+r),Tn(n,t-o,t+r),Tn(n,t-r,t+o),Tn(n,t-r,t-o),Tn(n,t-o,t-r),Tn(n,t+o,t-r),Tn(n,t+r,t-o),2*((s+=1+2*++o)-r)+1>0&&(s+=1-2*(r-=1));return Sn[t]=n,n}(i);function d(t){for(var e=c.getImageData(0,0,u,u).data,n=0;n<u;n++)for(var i=0;i<u;i++)if(f[n][i]&&e[4*(i*u+n)+3]>0){var r=void 0;return(!l||p!=en.IMAGE&&p!=en.TEXT||-1!==l.indexOf(t))&&(r=o(t)),r||void c.clearRect(0,0,u,u)}}this.declutterTree_&&(l=this.declutterTree_.all().map(function(t){return t.value}));var g,y,_,v,m,E=Object.keys(this.replaysByZIndex_).map(Number);for(E.sort(G.g),g=E.length-1;g>=0;--g){var x=E[g].toString();for(_=this.replaysByZIndex_[x],y=fn.length-1;y>=0;--y)if(void 0!==(v=_[p=fn[y]]))if(!s||p!=en.IMAGE&&p!=en.TEXT){if(m=v.replayHitDetection(c,h,n,r,d,a))return m}else{var b=s[x];b?b.push(v,h.slice(0)):s[x]=[v,h.slice(0)]}}},e.prototype.getClipCoords=function(t){var e=this.maxExtent_,n=e[0],i=e[1],r=e[2],o=e[3],s=[n,i,n,o,r,o,r,i];return Object(Ne.c)(s,0,8,2,t,s),s},e.prototype.getReplay=function(t,e){var n=void 0!==t?t.toString():"0",i=this.replaysByZIndex_[n];void 0===i&&(i={},this.replaysByZIndex_[n]=i);var r=i[e];void 0===r&&(r=new(0,On[e])(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_,this.overlaps_,this.declutterTree_),i[e]=r);return r},e.prototype.getReplays=function(){return this.replaysByZIndex_},e.prototype.isEmpty=function(){return Object(it.d)(this.replaysByZIndex_)},e.prototype.replay=function(t,e,n,i,r,o){var s=Object.keys(this.replaysByZIndex_).map(Number);s.sort(G.g),t.save(),this.clip(t,e);var a,u,h,c,l,p,f=r||fn;for(a=0,u=s.length;a<u;++a){var d=s[a].toString();for(l=this.replaysByZIndex_[d],h=0,c=f.length;h<c;++h){var g=f[h];if(p=l[g],void 0!==p)if(!o||g!=en.IMAGE&&g!=en.TEXT)p.replay(t,e,n,i);else{var y=o[d];y?y.push(p,e.slice(0)):o[d]=[p,e.slice(0)]}}}t.restore()},e}(tn),Sn={0:[[!0]]};function Tn(t,e,n){var i,r=Math.floor(t.length/2);if(e>=r)for(i=r;i<e;i++)t[i][n]=!0;else if(e<r)for(i=e+1;i<r;i++)t[i][n]=!0}var Rn=In,Nn=.5,Ln={Point:function(t,e,n,i){var r=n.getImage();if(r){if(r.getImageState()!=Ee.a.LOADED)return;var o=t.getReplay(n.getZIndex(),en.IMAGE);o.setImageStyle(r,t.addDeclutter(!1)),o.drawPoint(e,i)}var s=n.getText();if(s){var a=t.getReplay(n.getZIndex(),en.TEXT);a.setTextStyle(s,t.addDeclutter(!!r)),a.drawText(e,i)}},LineString:function(t,e,n,i){var r=n.getStroke();if(r){var o=t.getReplay(n.getZIndex(),en.LINE_STRING);o.setFillStrokeStyle(null,r),o.drawLineString(e,i)}var s=n.getText();if(s){var a=t.getReplay(n.getZIndex(),en.TEXT);a.setTextStyle(s,t.addDeclutter(!1)),a.drawText(e,i)}},Polygon:function(t,e,n,i){var r=n.getFill(),o=n.getStroke();if(r||o){var s=t.getReplay(n.getZIndex(),en.POLYGON);s.setFillStrokeStyle(r,o),s.drawPolygon(e,i)}var a=n.getText();if(a){var u=t.getReplay(n.getZIndex(),en.TEXT);u.setTextStyle(a,t.addDeclutter(!1)),u.drawText(e,i)}},MultiPoint:function(t,e,n,i){var r=n.getImage();if(r){if(r.getImageState()!=Ee.a.LOADED)return;var o=t.getReplay(n.getZIndex(),en.IMAGE);o.setImageStyle(r,t.addDeclutter(!1)),o.drawMultiPoint(e,i)}var s=n.getText();if(s){var a=t.getReplay(n.getZIndex(),en.TEXT);a.setTextStyle(s,t.addDeclutter(!!r)),a.drawText(e,i)}},MultiLineString:function(t,e,n,i){var r=n.getStroke();if(r){var o=t.getReplay(n.getZIndex(),en.LINE_STRING);o.setFillStrokeStyle(null,r),o.drawMultiLineString(e,i)}var s=n.getText();if(s){var a=t.getReplay(n.getZIndex(),en.TEXT);a.setTextStyle(s,t.addDeclutter(!1)),a.drawText(e,i)}},MultiPolygon:function(t,e,n,i){var r=n.getFill(),o=n.getStroke();if(o||r){var s=t.getReplay(n.getZIndex(),en.POLYGON);s.setFillStrokeStyle(r,o),s.drawMultiPolygon(e,i)}var a=n.getText();if(a){var u=t.getReplay(n.getZIndex(),en.TEXT);u.setTextStyle(a,t.addDeclutter(!1)),u.drawText(e,i)}},GeometryCollection:function(t,e,n,i){var r,o,s=e.getGeometriesArray();for(r=0,o=s.length;r<o;++r){var a=Ln[s[r].getType()];a(t,s[r],n,i)}},Circle:function(t,e,n,i){var r=n.getFill(),o=n.getStroke();if(r||o){var s=t.getReplay(n.getZIndex(),en.CIRCLE);s.setFillStrokeStyle(r,o),s.drawCircle(e,i)}var a=n.getText();if(a){var u=t.getReplay(n.getZIndex(),en.TEXT);u.setTextStyle(a,t.addDeclutter(!1)),u.drawText(e,i)}}};function Mn(t,e){return Object(i.b)(t)-Object(i.b)(e)}function Pn(t,e){var n=An(t,e);return n*n}function An(t,e){return Nn*t/e}function Dn(t,e,n,i,r,o){var s=!1,a=n.getImage();if(a){var u=a.getImageState();u==Ee.a.LOADED||u==Ee.a.ERROR?a.unlistenImageChange(r,o):(u==Ee.a.IDLE&&a.load(),u=a.getImageState(),a.listenImageChange(r,o),s=!0)}return function(t,e,n,i){var r=n.getGeometryFunction()(e);if(!r)return;var o=r.getSimplifiedGeometry(i);if(n.getRenderer())!function t(e,n,i,r){if(n.getType()==Te.a.GEOMETRY_COLLECTION){for(var o=n.getGeometries(),s=0,a=o.length;s<a;++s)t(e,o[s],i,r);return}var u=e.getReplay(i.getZIndex(),en.DEFAULT);u.drawCustom(n,r,i.getRenderer())}(t,o,n,e);else{var s=Ln[o.getType()];s(t,o,n,e)}}(t,e,n,i),s}var Fn=function(t){function e(e){t.call(this,e),this.declutterTree_=e.getDeclutter()?Qe()(9,void 0):null,this.dirty_=!1,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=Object(ht.j)(),this.renderedRenderOrder_=null,this.replayGroup_=null,this.replayGroupChanged=!0,this.context=Object(ut.a)(),Object(c.a)(Ie.o,et.a.CLEAR,this.handleFontsChanged_,this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.disposeInternal=function(){Object(c.c)(Ie.o,et.a.CLEAR,this.handleFontsChanged_,this),t.prototype.disposeInternal.call(this)},e.prototype.compose=function(t,e,n){var i=e.extent,r=e.pixelRatio,o=n.managed?e.skippedFeatureUids:{},s=e.viewState,a=s.projection,u=s.rotation,h=a.getExtent(),c=this.getLayer().getSource(),l=this.getTransform(e,0),p=n.extent,f=void 0!==p;f&&this.clip(t,e,p);var d=this.replayGroup_;if(d&&!d.isEmpty()){this.declutterTree_&&this.declutterTree_.clear();var g,y=this.getLayer(),_=0,v=0,m=1!==n.opacity,E=y.hasListener(Oe.a.RENDER);if(m||E){var x=t.canvas.width,b=t.canvas.height;if(u){var w=Math.round(Math.sqrt(x*x+b*b));_=(w-x)/2,v=(w-b)/2,x=b=w}this.context.canvas.width=x,this.context.canvas.height=b,g=this.context}else g=t;var C=g.globalAlpha;m||(g.globalAlpha=n.opacity),g!=t&&g.translate(_,v);var O=e.size[0]*r,I=e.size[1]*r;if(Object(Ie.s)(g,-u,O/2,I/2),d.replay(g,l,u,o),c.getWrapX()&&a.canWrapX()&&!Object(ht.g)(h,i)){for(var S,T=i[0],R=Object(ht.E)(h),N=0;T<h[0];)S=R*--N,l=this.getTransform(e,S),d.replay(g,l,u,o),T+=R;for(N=0,T=i[2];T>h[2];)S=R*++N,l=this.getTransform(e,S),d.replay(g,l,u,o),T-=R}if(Object(Ie.s)(g,u,O/2,I/2),E&&this.dispatchRenderEvent(g,e,l),g!=t){if(m){var L=t.globalAlpha;t.globalAlpha=n.opacity,t.drawImage(g.canvas,-_,-v),t.globalAlpha=L}else t.drawImage(g.canvas,-_,-v);g.translate(-_,-v)}m||(g.globalAlpha=C)}f&&t.restore()},e.prototype.composeFrame=function(t,e,n){var i=this.getTransform(t,0);this.preCompose(n,t,i),this.compose(n,t,e),this.postCompose(n,t,e,i)},e.prototype.forEachFeatureAtCoordinate=function(t,e,n,r,o){if(this.replayGroup_){var s=e.viewState.resolution,a=e.viewState.rotation,u=this.getLayer(),h={};return this.replayGroup_.forEachFeatureAtCoordinate(t,s,a,n,{},function(t){var e=Object(i.b)(t).toString();if(!(e in h))return h[e]=!0,r.call(o,t,u)},null)}},e.prototype.handleFontsChanged_=function(t){var e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()},e.prototype.handleStyleImageChange_=function(t){this.renderIfReadyAndVisible()},e.prototype.prepareFrame=function(t,e){var n=this.getLayer(),i=n.getSource(),r=t.viewHints[at.a.ANIMATING],o=t.viewHints[at.a.INTERACTING],s=n.getUpdateWhileAnimating(),a=n.getUpdateWhileInteracting();if(!this.dirty_&&!s&&r||!a&&o)return!0;var u=t.extent,h=t.viewState,c=h.projection,l=h.resolution,p=t.pixelRatio,f=n.getRevision(),d=n.getRenderBuffer(),g=n.getRenderOrder();void 0===g&&(g=Mn);var y=Object(ht.c)(u,d*l),_=h.projection.getExtent();if(i.getWrapX()&&h.projection.canWrapX()&&!Object(ht.g)(_,t.extent)){var v=Object(ht.E)(_),m=Math.max(Object(ht.E)(y)/2,v);y[0]=_[0]-m,y[2]=_[2]+m}if(!this.dirty_&&this.renderedResolution_==l&&this.renderedRevision_==f&&this.renderedRenderOrder_==g&&Object(ht.g)(this.renderedExtent_,y))return this.replayGroupChanged=!1,!0;this.replayGroup_=null,this.dirty_=!1;var E=new Rn(An(l,p),y,l,p,i.getOverlaps(),this.declutterTree_,n.getRenderBuffer());i.loadFeatures(y,l,c);var x=function(t){var e,i=t.getStyleFunction()||n.getStyleFunction();if(i&&(e=i(t,l)),e){var r=this.renderFeature(t,l,p,e,E);this.dirty_=this.dirty_||r}}.bind(this);if(g){var b=[];i.forEachFeatureInExtent(y,function(t){b.push(t)},this),b.sort(g);for(var w=0,C=b.length;w<C;++w)x(b[w])}else i.forEachFeatureInExtent(y,x,this);return E.finish(),this.renderedResolution_=l,this.renderedRevision_=f,this.renderedRenderOrder_=g,this.renderedExtent_=y,this.replayGroup_=E,this.replayGroupChanged=!0,!0},e.prototype.renderFeature=function(t,e,n,i,r){if(!i)return!1;var o=!1;if(Array.isArray(i))for(var s=0,a=i.length;s<a;++s)o=Dn(r,t,i[s],Pn(e,n),this.handleStyleImageChange_,this)||o;else o=Dn(r,t,i,Pn(e,n),this.handleStyleImageChange_,this);return o},e}(Ue);Fn.handles=function(t){return t.getType()===be.a.VECTOR},Fn.create=function(t,e){return new Fn(e)};var jn=Fn,Gn={IMAGE:"image",HYBRID:"hybrid",VECTOR:"vector"},kn=n(16),Bn=n(32),Yn={image:[en.POLYGON,en.CIRCLE,en.LINE_STRING,en.IMAGE,en.TEXT],hybrid:[en.POLYGON,en.LINE_STRING]},Xn={image:[en.DEFAULT],hybrid:[en.IMAGE,en.TEXT,en.DEFAULT],vector:fn},qn=function(t){function e(e){t.call(this,e,!0),this.declutterTree_=e.getDeclutter()?Qe()(9,void 0):null,this.dirty_=!1,this.renderedLayerRevision_,this.tmpTransform_=Object(yt.c)(),this.zDirection=e.getRenderMode()==Gn.VECTOR?1:0,Object(c.a)(Ie.o,et.a.CLEAR,this.handleFontsChanged_,this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.disposeInternal=function(){Object(c.c)(Ie.o,et.a.CLEAR,this.handleFontsChanged_,this),t.prototype.disposeInternal.call(this)},e.prototype.getTile=function(e,n,i,r,o){var s=t.prototype.getTile.call(this,e,n,i,r,o);return s.getState()===tt.a.LOADED&&(this.createReplayGroup_(s,r,o),this.context&&this.renderTileImage_(s,r,o)),s},e.prototype.prepareFrame=function(e,n){var i=this.getLayer(),r=i.getRevision();if(this.renderedLayerRevision_!=r){this.renderedTiles.length=0;var o=i.getRenderMode();this.context||o==Gn.VECTOR||(this.context=Object(ut.a)()),this.context&&o==Gn.VECTOR&&(this.context=null)}return this.renderedLayerRevision_=r,t.prototype.prepareFrame.apply(this,arguments)},e.prototype.createReplayGroup_=function(t,e,n){var i=this,r=this.getLayer(),o=r.getRevision(),s=r.getRenderOrder()||null,a=t.getReplayState(r);if(a.dirty||a.renderedRevision!=o||a.renderedRenderOrder!=s){for(var u=r.getSource(),h=u.getTileGrid(),c=u.getTileGridForProjection(n).getResolution(t.tileCoord[0]),l=t.extent,p={},f=function(o,f){var d=t.getTile(t.tileKeys[o]);if(d.getState()==tt.a.LOADED){var g=d.tileCoord,y=h.getTileCoordExtent(g),_=Object(ht.B)(l,y),v=Object(ht.p)(y,_)?null:Object(ht.c)(_,r.getRenderBuffer()*c,i.tmpExtent),m=d.getProjection(),E=!1;Object(kn.b)(n,m)||(E=!0,d.setProjection(n)),a.dirty=!1;var x=new Rn(0,_,c,e,u.getOverlaps(),i.declutterTree_,r.getRenderBuffer()),b=Pn(c,e),w=function(t){var e,n=t.getStyleFunction()||r.getStyleFunction();if(n&&(e=n(t,c)),e){var i=this.renderFeature(t,b,e,x);this.dirty_=this.dirty_||i,a.dirty=a.dirty||i}},C=d.getFeatures();s&&s!==a.renderedRenderOrder&&C.sort(s);for(var O=0,I=C.length;O<I;++O){var S=C[O];E&&(m.getUnits()==Bn.b.TILE_PIXELS&&(m.setWorldExtent(y),m.setExtent(d.getExtent())),S.getGeometry().transform(m,n)),v&&!Object(ht.F)(v,S.getGeometry().getExtent())||w.call(i,S)}for(var T in x.finish(),x.getReplays())p[T]=!0;d.setReplayGroup(r,t.tileCoord.toString(),x)}},d=0,g=t.tileKeys.length;d<g;++d)f(d);a.renderedRevision=o,a.renderedRenderOrder=s}},e.prototype.forEachFeatureAtCoordinate=function(t,e,n,r,o){var s=e.viewState.resolution,a=e.viewState.rotation;n=void 0==n?0:n;var u,h,c,l,p,f=this.getLayer(),d={},g=this.renderedTiles;for(c=0,l=g.length;c<l;++c){var y=g[c];if(u=Object(ht.c)(y.extent,n*s,u),Object(ht.f)(u,t))for(var _=0,v=y.tileKeys.length;_<v;++_){var m=y.getTile(y.tileKeys[_]);m.getState()==tt.a.LOADED&&(p=m.getReplayGroup(f,y.tileCoord.toString()),h=h||p.forEachFeatureAtCoordinate(t,s,a,n,{},function(t){var e=Object(i.b)(t).toString();if(!(e in d))return d[e]=!0,r.call(o,t,f)},null))}}return h},e.prototype.getReplayTransform_=function(t,e){var n=this.getLayer().getSource().getTileGrid(),i=t.tileCoord,r=n.getResolution(i[0]),o=e.viewState,s=e.pixelRatio,a=o.resolution/s,u=n.getTileCoordExtent(i,this.tmpExtent),h=o.center,c=Object(ht.C)(u),l=e.size,p=Math.round(s*l[0]/2),f=Math.round(s*l[1]/2);return Object(yt.b)(this.tmpTransform_,p,f,r/a,r/a,o.rotation,(c[0]-h[0])/r,(h[1]-c[1])/r)},e.prototype.handleFontsChanged_=function(t){var e=this.getLayer();e.getVisible()&&void 0!==this.renderedLayerRevision_&&e.changed()},e.prototype.handleStyleImageChange_=function(t){this.renderIfReadyAndVisible()},e.prototype.postCompose=function(e,n,i){var r=this.getLayer(),o=r.getRenderMode();if(o!=Gn.IMAGE){var s,a,u=r.getDeclutter()?{}:null,h=r.getSource(),c=Xn[o],l=n.pixelRatio,p=n.viewState.rotation,f=n.size;p&&(s=Math.round(l*f[0]/2),a=Math.round(l*f[1]/2),Object(Ie.s)(e,-p,s,a)),u&&this.declutterTree_.clear();for(var d=this.renderedTiles,g=h.getTileGridForProjection(n.viewState.projection),y=[],_=[],v=d.length-1;v>=0;--v){var m=d[v];if(m.getState()!=tt.a.ABORT)for(var E=m.tileCoord,x=g.getTileCoordExtent(E,this.tmpExtent)[0]-m.extent[0],b=void 0,w=0,C=m.tileKeys.length;w<C;++w){var O=m.getTile(m.tileKeys[w]);if(O.getState()==tt.a.LOADED){var I=O.getReplayGroup(r,E.toString());if(I&&I.hasReplays(c)){b||(b=this.getTransform(n,x));var S=O.tileCoord[0],T=I.getClipCoords(b);e.save(),e.globalAlpha=i.opacity;for(var R=0,N=y.length;R<N;++R){var L=y[R];S<_[R]&&(e.beginPath(),e.moveTo(T[0],T[1]),e.lineTo(T[2],T[3]),e.lineTo(T[4],T[5]),e.lineTo(T[6],T[7]),e.moveTo(L[6],L[7]),e.lineTo(L[4],L[5]),e.lineTo(L[2],L[3]),e.lineTo(L[0],L[1]),e.clip())}I.replay(e,b,p,{},c,u),e.restore(),y.push(T),_.push(S)}}}}u&&function(t,e,n){for(var i=Object.keys(t).map(Number).sort(G.g),r={},o=0,s=i.length;o<s;++o)for(var a=t[i[o].toString()],u=0,h=a.length;u<h;){var c=a[u++],l=a[u++];c.replay(e,l,n,r)}}(u,e,p),p&&Object(Ie.s)(e,p,s,a)}t.prototype.postCompose.apply(this,arguments)},e.prototype.renderFeature=function(t,e,n,i){if(!n)return!1;var r=!1;if(Array.isArray(n))for(var o=0,s=n.length;o<s;++o)r=Dn(i,t,n[o],e,this.handleStyleImageChange_,this)||r;else r=Dn(i,t,n,e,this.handleStyleImageChange_,this);return r},e.prototype.renderTileImage_=function(t,e,n){var i=this.getLayer(),r=t.getReplayState(i),o=i.getRevision(),s=Yn[i.getRenderMode()];if(s&&r.renderedTileRevision!==o){r.renderedTileRevision=o;var a=t.wrappedTileCoord,u=a[0],h=i.getSource(),c=h.getTileGridForProjection(n),l=c.getResolution(u),p=t.getContext(i),f=h.getTilePixelSize(u,e,n);p.canvas.width=f[0],p.canvas.height=f[1];for(var d=c.getTileCoordExtent(a,this.tmpExtent),g=0,y=t.tileKeys.length;g<y;++g){var _=t.getTile(t.tileKeys[g]);if(_.getState()==tt.a.LOADED){var v=e/l,m=Object(yt.e)(this.tmpTransform_);Object(yt.f)(m,v,-v),Object(yt.h)(m,-d[0],-d[3]),_.getReplayGroup(i,t.tileCoord.toString()).replay(p,m,0,{},s)}}}},e}(Ze);qn.handles=function(t){return t.getType()===be.a.VECTOR_TILE},qn.create=function(t,e){return new qn(e)};var Un=qn,zn=function(t){function e(e){(e=Object(it.a)({},e)).controls||(e.controls=function(t){var e=t||{},n=new r.a;return(void 0===e.zoom||e.zoom)&&n.push(new It(e.zoomOptions)),(void 0===e.rotate||e.rotate)&&n.push(new Ot(e.rotateOptions)),(void 0===e.attribution||e.attribution)&&n.push(new bt(e.attributionOptions)),n}()),e.interactions||(e.interactions=function(t){var e=t||{},n=new r.a,i=new Tt(-.005,.05,100);return(void 0===e.altShiftDragRotate||e.altShiftDragRotate)&&n.push(new qt),(void 0===e.doubleClickZoom||e.doubleClickZoom)&&n.push(new Lt({delta:e.zoomDelta,duration:e.zoomDuration})),(void 0===e.dragPan||e.dragPan)&&n.push(new Gt({kinetic:i})),(void 0===e.pinchRotate||e.pinchRotate)&&n.push(new fe),(void 0===e.pinchZoom||e.pinchZoom)&&n.push(new _e({constrainResolution:e.constrainResolution,duration:e.zoomDuration})),(void 0===e.keyboard||e.keyboard)&&(n.push(new ie),n.push(new oe({delta:e.zoomDelta,duration:e.zoomDuration}))),(void 0===e.mouseWheelZoom||e.mouseWheelZoom)&&n.push(new he({constrainResolution:e.constrainResolution,duration:e.zoomDuration})),(void 0===e.shiftDragZoom||e.shiftDragZoom)&&n.push(new te({duration:e.zoomDuration})),n}()),t.call(this,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createRenderer=function(){var t=new Xe(this);return t.registerLayerRenderers([We,Ze,jn,Un]),t},e}(_t);e.default=zn},function(t,e,n){!function(t){"use strict";function e(t,e,n){if(!C(n=n||{}))throw new Error("options is invalid");var i=n.bbox,r=n.id;if(void 0===t)throw new Error("geometry is required");if(e&&e.constructor!==Object)throw new Error("properties must be an Object");i&&O(i),r&&I(r);var o={type:"Feature"};return r&&(o.id=r),i&&(o.bbox=i),o.properties=e||{},o.geometry=t,o}function n(t,e,n){if(!C(n=n||{}))throw new Error("options is invalid");var r,s=n.bbox;if(!t)throw new Error("type is required");if(!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");switch(s&&O(s),t){case"Point":r=i(e).geometry;break;case"LineString":r=a(e).geometry;break;case"Polygon":r=o(e).geometry;break;case"MultiPoint":r=l(e).geometry;break;case"MultiLineString":r=c(e).geometry;break;case"MultiPolygon":r=p(e).geometry;break;default:throw new Error(t+" is invalid")}return s&&(r.bbox=s),r}function i(t,n,i){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!w(t[0])||!w(t[1]))throw new Error("coordinates must contain numbers");return e({type:"Point",coordinates:t},n,i)}function r(t,e,n){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");return h(t.map(function(t){return i(t,e)}),n)}function o(t,n,i){if(!t)throw new Error("coordinates is required");for(var r=0;r<t.length;r++){var o=t[r];if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var s=0;s<o[o.length-1].length;s++){if(0===r&&0===s&&!w(o[0][0])||!w(o[0][1]))throw new Error("coordinates must contain numbers");if(o[o.length-1][s]!==o[0][s])throw new Error("First and last Position are not equivalent.")}}return e({type:"Polygon",coordinates:t},n,i)}function s(t,e,n){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");return h(t.map(function(t){return o(t,e)}),n)}function a(t,n,i){if(!t)throw new Error("coordinates is required");if(t.length<2)throw new Error("coordinates must be an array of two or more positions");if(!w(t[0][1])||!w(t[0][1]))throw new Error("coordinates must contain numbers");return e({type:"LineString",coordinates:t},n,i)}function u(t,e,n){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");return h(t.map(function(t){return a(t,e)}),n)}function h(t,e){if(!C(e=e||{}))throw new Error("options is invalid");var n=e.bbox,i=e.id;if(!t)throw new Error("No features passed");if(!Array.isArray(t))throw new Error("features must be an Array");n&&O(n),i&&I(i);var r={type:"FeatureCollection"};return i&&(r.id=i),n&&(r.bbox=n),r.features=t,r}function c(t,n,i){if(!t)throw new Error("coordinates is required");return e({type:"MultiLineString",coordinates:t},n,i)}function l(t,n,i){if(!t)throw new Error("coordinates is required");return e({type:"MultiPoint",coordinates:t},n,i)}function p(t,n,i){if(!t)throw new Error("coordinates is required");return e({type:"MultiPolygon",coordinates:t},n,i)}function f(t,n,i){if(!t)throw new Error("geometries is required");if(!Array.isArray(t))throw new Error("geometries must be an Array");return e({type:"GeometryCollection",geometries:t},n,i)}function d(t,e){if(void 0===t||null===t||isNaN(t))throw new Error("num is required");if(e&&!(e>=0))throw new Error("precision must be a positive number");var n=Math.pow(10,e||0);return Math.round(t*n)/n}function g(t,e){if(void 0===t||null===t)throw new Error("radians is required");if(e&&"string"!=typeof e)throw new Error("units must be a string");var n=Eo[e||"kilometers"];if(!n)throw new Error(e+" units is invalid");return t*n}function y(t,e){if(void 0===t||null===t)throw new Error("distance is required");if(e&&"string"!=typeof e)throw new Error("units must be a string");var n=Eo[e||"kilometers"];if(!n)throw new Error(e+" units is invalid");return t/n}function _(t,e){return m(y(t,e))}function v(t){if(null===t||void 0===t)throw new Error("bearing is required");var e=t%360;return e<0&&(e+=360),e}function m(t){if(null===t||void 0===t)throw new Error("radians is required");return t%(2*Math.PI)*180/Math.PI}function E(t){if(null===t||void 0===t)throw new Error("degrees is required");return t%360*Math.PI/180}function x(t,e,n){if(null===t||void 0===t)throw new Error("length is required");if(!(t>=0))throw new Error("length must be a positive number");return g(y(t,e),n||"kilometers")}function b(t,e,n){if(null===t||void 0===t)throw new Error("area is required");if(!(t>=0))throw new Error("area must be a positive number");var i=bo[e||"meters"];if(!i)throw new Error("invalid original units");var r=bo[n||"kilometers"];if(!r)throw new Error("invalid final units");return t/i*r}function w(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function C(t){return!!t&&t.constructor===Object}function O(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach(function(t){if(!w(t))throw new Error("bbox must only contain numbers")})}function I(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}function S(t,e,n){if(null!==t)for(var i,r,o,s,a,u,h,c,l=0,p=0,f=t.type,d="FeatureCollection"===f,g="Feature"===f,y=d?t.features.length:1,_=0;_<y;_++){a=(c=!!(h=d?t.features[_].geometry:g?t.geometry:t)&&"GeometryCollection"===h.type)?h.geometries.length:1;for(var v=0;v<a;v++){var m=0,E=0;if(null!==(s=c?h.geometries[v]:h)){u=s.coordinates;var x=s.type;switch(l=!n||"Polygon"!==x&&"MultiPolygon"!==x?0:1,x){case null:break;case"Point":e(u,p,_,m,E),p++,m++;break;case"LineString":case"MultiPoint":for(i=0;i<u.length;i++)e(u[i],p,_,m,E),p++,"MultiPoint"===x&&m++;"LineString"===x&&m++;break;case"Polygon":case"MultiLineString":for(i=0;i<u.length;i++){for(r=0;r<u[i].length-l;r++)e(u[i][r],p,_,m,E),p++;"MultiLineString"===x&&m++,"Polygon"===x&&E++}"Polygon"===x&&m++;break;case"MultiPolygon":for(i=0;i<u.length;i++){for("MultiPolygon"===x&&(E=0),r=0;r<u[i].length;r++){for(o=0;o<u[i][r].length-l;o++)e(u[i][r][o],p,_,m,E),p++;E++}m++}break;case"GeometryCollection":for(i=0;i<s.geometries.length;i++)S(s.geometries[i],e,n);break;default:throw new Error("Unknown Geometry Type")}}}}}function T(t,e,n,i){var r=n;return S(t,function(t,i,o,s,a){r=0===i&&void 0===n?t:e(r,t,i,o,s,a)},i),r}function R(t,e){var n;switch(t.type){case"FeatureCollection":for(n=0;n<t.features.length;n++)e(t.features[n].properties,n);break;case"Feature":e(t.properties,0)}}function N(t,e,n){var i=n;return R(t,function(t,r){i=0===r&&void 0===n?t:e(i,t,r)}),i}function L(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var n=0;n<t.features.length;n++)e(t.features[n],n)}function M(t,e,n){var i=n;return L(t,function(t,r){i=0===r&&void 0===n?t:e(i,t,r)}),i}function P(t){var e=[];return S(t,function(t){e.push(t)}),e}function A(t,e){var n,i,r,o,s,a,u,h,c,l,p=0,f="FeatureCollection"===t.type,d="Feature"===t.type,g=f?t.features.length:1;for(n=0;n<g;n++){for(a=f?t.features[n].geometry:d?t.geometry:t,h=f?t.features[n].properties:d?t.properties:{},c=f?t.features[n].bbox:d?t.bbox:void 0,l=f?t.features[n].id:d?t.id:void 0,s=(u=!!a&&"GeometryCollection"===a.type)?a.geometries.length:1,r=0;r<s;r++)if(null!==(o=u?a.geometries[r]:a))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":e(o,p,h,c,l);break;case"GeometryCollection":for(i=0;i<o.geometries.length;i++)e(o.geometries[i],p,h,c,l);break;default:throw new Error("Unknown Geometry Type")}else e(null,p,h,c,l);p++}}function D(t,e,n){var i=n;return A(t,function(t,r,o,s,a){i=0===r&&void 0===n?t:e(i,t,r,o,s,a)}),i}function F(t,n){A(t,function(t,i,r,o,s){var a,u=null===t?null:t.type;switch(u){case null:case"Point":case"LineString":case"Polygon":return void n(e(t,r,{bbox:o,id:s}),i,0)}switch(u){case"MultiPoint":a="Point";break;case"MultiLineString":a="LineString";break;case"MultiPolygon":a="Polygon"}t.coordinates.forEach(function(t,o){n(e({type:a,coordinates:t},r),i,o)})})}function j(t,e,n){var i=n;return F(t,function(t,r,o){i=0===r&&0===o&&void 0===n?t:e(i,t,r,o)}),i}function G(t,e){F(t,function(t,n,i){var r=0;if(t.geometry){var o=t.geometry.type;"Point"!==o&&"MultiPoint"!==o&&T(t,function(o,s,u,h,c,l){var p=a([o,s],t.properties);return e(p,n,i,l,r),r++,s})}})}function k(t,e,n){var i=n,r=!1;return G(t,function(t,o,s,a,u){i=!1===r&&void 0===n?t:e(i,t,o,s,a,u),r=!0}),i}function B(t,e){if(!t)throw new Error("geojson is required");F(t,function(t,n,i){if(null!==t.geometry){var r=t.geometry.type,o=t.geometry.coordinates;switch(r){case"LineString":e(t,n,i,0,0);break;case"Polygon":for(var s=0;s<o.length;s++)e(a(o[s],t.properties),n,i,s)}}})}function Y(t,e,n){var i=n;return B(t,function(t,r,o,s){i=0===r&&void 0===n?t:e(i,t,r,o,s)}),i}function X(t){var e=[1/0,1/0,-1/0,-1/0];return S(t,function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])}),e}function q(t){if(!t)throw new Error("obj is required");var e=U(t);if(e.length>1&&w(e[0])&&w(e[1]))return e;throw new Error("Coordinate is not a valid Point")}function U(t){if(!t)throw new Error("obj is required");var e;if(t.length?e=t:t.coordinates?e=t.coordinates:t.geometry&&t.geometry.coordinates&&(e=t.geometry.coordinates),e)return z(e),e;throw new Error("No valid coordinates")}function z(t){if(t.length>1&&w(t[0])&&w(t[1]))return!0;if(Array.isArray(t[0])&&t[0].length)return z(t[0]);throw new Error("coordinates must only contain numbers")}function V(t,e,n){if(!e||!n)throw new Error("type and name required");if(!t||t.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.type)}function W(t,e,n){if(!t)throw new Error("No feature passed");if(!n)throw new Error(".featureOf() requires a name");if(!t||"Feature"!==t.type||!t.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!t.geometry||t.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.geometry.type)}function K(t,e,n){if(!t)throw new Error("No featureCollection passed");if(!n)throw new Error(".collectionOf() requires a name");if(!t||"FeatureCollection"!==t.type)throw new Error("Invalid input to "+n+", FeatureCollection required");for(var i=0;i<t.features.length;i++){var r=t.features[i];if(!r||"Feature"!==r.type||!r.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!r.geometry||r.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+r.geometry.type)}}function H(t){if(!t)throw new Error("geojson is required");if(void 0!==t.geometry)return t.geometry;if(t.coordinates||t.geometries)return t;throw new Error("geojson must be a valid Feature or Geometry Object")}function Z(){throw new Error("invariant.getGeomType has been deprecated in v5.0 in favor of invariant.getType")}function J(t,e){if(!t)throw new Error((e||"geojson")+" is required");if(t.geometry&&t.geometry.type)return t.geometry.type;if(t.type)return t.type;throw new Error((e||"geojson")+" is invalid")}function Q(t,e,n){n=n||{};for(var i=Object.keys(Io),r=0;r<i.length;r++){var o=i[r],s=n[o];s=void 0!==s&&null!==s?s:Io[o],So[o]=s}So.verbose&&console.log("MarchingSquaresJS-isoContours: computing isocontour for "+e);var a=function(t){var e=[],n=0;return t.rows,t.cols,t.cells.forEach(function(i,r){i.forEach(function(i,o){if(void 0!==i&&!function(t){return 5===t.cval||10===t.cval}(i)&&!tt(i)){var s=function(t,e,n){var i,r,o,s=t.length,a=[],u=[0,0,1,1,0,0,0,0,-1,0,1,1,-1,0,-1,0],h=[0,-1,0,0,1,1,1,1,0,-1,0,0,0,-1,0,0],c=["none","bottom","right","right","top","top","top","top","left","bottom","right","right","left","bottom","left","none"],l=(t[e][n],t[e][n]),p=l.cval,f=nt(l,o=["none","left","bottom","left","right","none","bottom","left","top","top","none","top","right","right","bottom","none"][p]);a.push([n+f[0],e+f[1]]),f=nt(l,o=c[p]),a.push([n+f[0],e+f[1]]),et(l);for(var d=n+u[p],g=e+h[p],y=p;d>=0&&g>=0&&g<s&&(d!=n||g!=e)&&void 0!==(l=t[g][d]);){if(0===(p=l.cval)||15===p)return{path:a,info:"mergeable"};o=c[p],i=u[p],r=h[p],5!==p&&10!==p||(5===p?l.flipped?-1===h[y]?(o="left",i=-1,r=0):(o="right",i=1,r=0):-1===u[y]&&(o="bottom",i=0,r=-1):10===p&&(l.flipped?-1===u[y]?(o="top",i=0,r=1):(o="bottom",i=0,r=-1):1===h[y]&&(o="left",i=-1,r=0))),f=nt(l,o),a.push([d+f[0],g+f[1]]),et(l),d+=i,g+=r,y=p}return{path:a,info:"closed"}}(t.cells,r,o),a=!1;if("mergeable"===s.info)for(var u=s.path[s.path.length-1][0],h=s.path[s.path.length-1][1],c=n-1;c>=0;c--)if(Math.abs(e[c][0][0]-u)<=1e-7&&Math.abs(e[c][0][1]-h)<=1e-7){for(var l=s.path.length-2;l>=0;--l)e[c].unshift(s.path[l]);a=!0;break}a||(e[n++]=s.path)}})}),e}(function(t,e){for(var n=t.length-1,i=t[0].length-1,r={rows:n,cols:i,cells:[]},o=0;o<n;++o){r.cells[o]=[];for(var s=0;s<i;++s){var a=0,u=t[o+1][s],h=t[o+1][s+1],c=t[o][s+1],l=t[o][s];if(!(isNaN(u)||isNaN(h)||isNaN(c)||isNaN(l))){a|=u>=e?8:0,a|=h>=e?4:0,a|=c>=e?2:0;var p,f,d,g,y=!1;if(5==(a|=l>=e?1:0)||10===a){var _=(u+h+c+l)/4;5===a&&_<e?(a=10,y=!0):10===a&&_<e&&(a=5,y=!0)}0!==a&&15!==a&&(p=f=d=g=.5,1===a?(d=1-$(e,u,l),f=1-$(e,c,l)):2===a?(f=$(e,l,c),g=1-$(e,h,c)):3===a?(d=1-$(e,u,l),g=1-$(e,h,c)):4===a?(p=$(e,u,h),g=$(e,c,h)):5===a?(p=$(e,u,h),g=$(e,c,h),f=1-$(e,c,l),d=1-$(e,u,l)):6===a?(f=$(e,l,c),p=$(e,u,h)):7===a?(d=1-$(e,u,l),p=$(e,u,h)):8===a?(d=$(e,l,u),p=1-$(e,h,u)):9===a?(f=1-$(e,c,l),p=1-$(e,h,u)):10===a?(p=1-$(e,h,u),g=1-$(e,h,c),f=$(e,l,c),d=$(e,l,u)):11===a?(p=1-$(e,h,u),g=1-$(e,h,c)):12===a?(d=$(e,l,u),g=$(e,c,h)):13===a?(f=1-$(e,c,l),g=$(e,c,h)):14===a?(d=$(e,l,u),f=$(e,l,c)):console.log("MarchingSquaresJS-isoContours: Illegal cval detected: "+a),r.cells[o][s]={cval:a,flipped:y,top:p,right:g,bottom:f,left:d})}}}return r}(t,e));return"function"==typeof So.successCallback&&So.successCallback(a),a}function $(t,e,n){return(t-e)/(n-e)}function tt(t){return 0===t.cval||15===t.cval}function et(t){tt(t)||5===t.cval||10===t.cval||(t.cval=15)}function nt(t,e){return"top"===e?[t.top,1]:"bottom"===e?[t.bottom,0]:"right"===e?[1,t.right]:"left"===e?[0,t.left]:void 0}function it(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}function rt(t,e){if(!(this instanceof rt))return new rt(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),this.clear()}function ot(t,e){st(t,0,t.children.length,e,t)}function st(t,e,n,i,r){r||(r=dt(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(var o,s=e;s<n;s++)o=t.children[s],at(r,t.leaf?i(o):o);return r}function at(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function ut(t,e){return t.minX-e.minX}function ht(t,e){return t.minY-e.minY}function ct(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function lt(t){return t.maxX-t.minX+(t.maxY-t.minY)}function pt(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function ft(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function dt(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function gt(t,e,n,i,r){for(var o,s=[e,n];s.length;)(n=s.pop())-(e=s.pop())<=i||(o=e+Math.ceil((n-e)/i/2)*i,To(t,o,e,n,r),s.push(e,o,o,n))}function yt(t,e){return t(e={exports:{}},e.exports),e.exports}function _t(t,e){if(!(this instanceof _t))return new _t(t,e);if(this.data=t||[],this.length=this.data.length,this.compare=e||function(t,e){return t<e?-1:t>e?1:0},this.length>0)for(var n=(this.length>>1)-1;n>=0;n--)this._down(n)}function vt(t,e,n){e=Math.max(0,void 0===e?2:e),n=n||0;for(var i,r=function(t){for(var e=t[0],n=t[0],i=t[0],r=t[0],o=0;o<t.length;o++){var s=t[o];s[0]<e[0]&&(e=s),s[0]>i[0]&&(i=s),s[1]<n[1]&&(n=s),s[1]>r[1]&&(r=s)}var a=[e,n,i,r],u=a.slice();for(o=0;o<t.length;o++)Yo(t[o],a)||u.push(t[o]);var h=jo(u),c=[];for(o=0;o<h.length;o++)c.push(u[h[o]]);return c}(t),o=Ro(16,["[0]","[1]","[0]","[1]"]).load(t),s=[],a=0;a<r.length;a++){var u=r[a];o.remove(u),i=wt(u,i),s.push(i)}var h=Ro(16);for(a=0;a<s.length;a++)h.insert(bt(s[a]));for(var c=e*e,l=n*n;s.length;){var p=s.shift(),f=p.p,d=p.next.p,g=Ct(f,d);if(!(g<l)){var y=g/c;(u=function(t,e,n,i,r,o,s){for(var a=new ko(null,mt),u=t.data;u;){for(var h=0;h<u.children.length;h++){var c=u.children[h],l=u.leaf?Ot(c,n,i):function(t,e,n){if(Et(t,n)||Et(e,n))return 0;var i=It(t[0],t[1],e[0],e[1],n.minX,n.minY,n.maxX,n.minY);if(0===i)return 0;var r=It(t[0],t[1],e[0],e[1],n.minX,n.minY,n.minX,n.maxY);if(0===r)return 0;var o=It(t[0],t[1],e[0],e[1],n.maxX,n.minY,n.maxX,n.maxY);if(0===o)return 0;var s=It(t[0],t[1],e[0],e[1],n.minX,n.maxY,n.maxX,n.maxY);return 0===s?0:Math.min(i,r,o,s)}(n,i,c);l>o||a.push({node:c,dist:l})}for(;a.length&&!a.peek().node.children;){var p=a.pop(),f=p.node,d=Ot(f,e,n),g=Ot(f,i,r);if(p.dist<d&&p.dist<g&&xt(n,f,s)&&xt(i,f,s))return f}(u=a.pop())&&(u=u.node)}return null}(o,p.prev.p,f,d,p.next.next.p,y,h))&&Math.min(Ct(u,f),Ct(u,d))<=y&&(s.push(p),s.push(wt(u,p)),o.remove(u),h.remove(p),h.insert(bt(p)),h.insert(bt(p.next)))}}p=i;var _=[];do{_.push(p.p),p=p.next}while(p!==i);return _.push(p.p),_}function mt(t,e){return t.dist-e.dist}function Et(t,e){return t[0]>=e.minX&&t[0]<=e.maxX&&t[1]>=e.minY&&t[1]<=e.maxY}function xt(t,e,n){for(var i=Math.min(t[0],e[0]),r=Math.min(t[1],e[1]),o=Math.max(t[0],e[0]),s=Math.max(t[1],e[1]),a=n.search({minX:i,minY:r,maxX:o,maxY:s}),u=0;u<a.length;u++)if(function(t,e,n,i){return t!==i&&e!==n&&Xo(t,e,n)>0!=Xo(t,e,i)>0&&Xo(n,i,t)>0!=Xo(n,i,e)>0}(a[u].p,a[u].next.p,t,e))return!1;return!0}function bt(t){var e=t.p,n=t.next.p;return t.minX=Math.min(e[0],n[0]),t.minY=Math.min(e[1],n[1]),t.maxX=Math.max(e[0],n[0]),t.maxY=Math.max(e[1],n[1]),t}function wt(t,e){var n={p:t,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return e?(n.next=e.next,n.prev=e,e.next.prev=n,e.next=n):(n.prev=n,n.next=n),n}function Ct(t,e){var n=t[0]-e[0],i=t[1]-e[1];return n*n+i*i}function Ot(t,e,n){var i=e[0],r=e[1],o=n[0]-i,s=n[1]-r;if(0!==o||0!==s){var a=((t[0]-i)*o+(t[1]-r)*s)/(o*o+s*s);a>1?(i=n[0],r=n[1]):a>0&&(i+=o*a,r+=s*a)}return o=t[0]-i,s=t[1]-r,o*o+s*s}function It(t,e,n,i,r,o,s,a){var u,h,c,l,p=n-t,f=i-e,d=s-r,g=a-o,y=t-r,_=e-o,v=p*p+f*f,m=p*d+f*g,E=d*d+g*g,x=p*y+f*_,b=d*y+g*_,w=v*E-m*m,C=w,O=w;0===w?(h=0,C=1,l=b,O=E):(l=v*b-m*x,(h=m*b-E*x)<0?(h=0,l=b,O=E):h>C&&(h=C,l=b+m,O=E)),l<0?(l=0,-x<0?h=0:-x>v?h=C:(h=-x,C=v)):l>O&&(l=O,-x+m<0?h=0:-x+m>v?h=C:(h=-x+m,C=v)),u=0===h?0:h/C;var I=(1-(c=0===l?0:l/O))*r+c*s-((1-u)*t+u*n),S=(1-c)*o+c*a-((1-u)*e+u*i);return I*I+S*S}function St(t,e){if(!C(e=e||{}))throw new Error("options is invalid");var n=e.concavity||1/0,i=[];if(S(t,function(t){i.push([t[0],t[1]])}),!i.length)return null;var r=qo(i,n);return r.length>3?o([r]):null}function Tt(t,e,n){if("object"!=typeof(n=n||{}))throw new Error("options is invalid");var i=n.ignoreBoundary;if(!t)throw new Error("point is required");if(!e)throw new Error("polygon is required");var r=q(t),o=U(e),s=e.geometry?e.geometry.type:e.type,a=e.bbox;if(a&&!1===function(t,e){return e[0]<=t[0]&&e[1]<=t[1]&&e[2]>=t[0]&&e[3]>=t[1]}(r,a))return!1;"Polygon"===s&&(o=[o]);for(var u=0,h=!1;u<o.length&&!h;u++)if(Rt(r,o[u][0],i)){for(var c=!1,l=1;l<o[u].length&&!c;)Rt(r,o[u][l],!i)&&(c=!0),l++;c||(h=!0)}return h}function Rt(t,e,n){var i=!1;e[0][0]===e[e.length-1][0]&&e[0][1]===e[e.length-1][1]&&(e=e.slice(0,e.length-1));for(var r=0,o=e.length-1;r<e.length;o=r++){var s=e[r][0],a=e[r][1],u=e[o][0],h=e[o][1];if(t[1]*(s-u)+a*(u-t[0])+h*(t[0]-s)==0&&(s-t[0])*(u-t[0])<=0&&(a-t[1])*(h-t[1])<=0)return!n;a>t[1]!=h>t[1]&&t[0]<(u-s)*(t[1]-a)/(h-a)+s&&(i=!i)}return i}function Nt(t,e){var n=[];return A(e,function(e){L(t,function(t){Tt(t,e)&&n.push(t)})}),h(n)}function Lt(t,e){if("FeatureCollection"!==t.type)throw new Error("points must be a FeatureCollection");var n=!1;return h(function(t){if(t.length<3)return[];t.sort(Pt);for(var e,n,i,r,o,s,a=t.length-1,u=t[a].x,h=t[0].x,c=t[a].y,l=c;a--;)t[a].y<c&&(c=t[a].y),t[a].y>l&&(l=t[a].y);var p,f=h-u,d=l-c,g=f>d?f:d,y=.5*(h+u),_=.5*(l+c),v=[new Mt({x:y-20*g,y:_-g,__sentinel:!0},{x:y,y:_+20*g,__sentinel:!0},{x:y+20*g,y:_-g,__sentinel:!0})],m=[],E=[];for(a=t.length;a--;){for(E.length=0,p=v.length;p--;)(f=t[a].x-v[p].x)>0&&f*f>v[p].r?(m.push(v[p]),v.splice(p,1)):(d=t[a].y-v[p].y,f*f+d*d>v[p].r||(E.push(v[p].a,v[p].b,v[p].b,v[p].c,v[p].c,v[p].a),v.splice(p,1)));for(At(E),p=E.length;p;)n=E[--p],e=E[--p],i=t[a],r=n.x-e.x,o=n.y-e.y,s=2*(r*(i.y-n.y)-o*(i.x-n.x)),Math.abs(s)>1e-12&&v.push(new Mt(e,n,i))}for(Array.prototype.push.apply(m,v),a=m.length;a--;)(m[a].a.__sentinel||m[a].b.__sentinel||m[a].c.__sentinel)&&m.splice(a,1);return m}(t.features.map(function(t){var i={x:t.geometry.coordinates[0],y:t.geometry.coordinates[1]};return e?i.z=t.properties[e]:3===t.geometry.coordinates.length&&(n=!0,i.z=t.geometry.coordinates[2]),i})).map(function(t){var e=[t.a.x,t.a.y],i=[t.b.x,t.b.y],r=[t.c.x,t.c.y],s={};return n?(e.push(t.a.z),i.push(t.b.z),r.push(t.c.z)):s={a:t.a.z,b:t.b.z,c:t.c.z},o([[e,i,r,e]],s)}))}function Mt(t,e,n){this.a=t,this.b=e,this.c=n;var i,r,o=e.x-t.x,s=e.y-t.y,a=n.x-t.x,u=n.y-t.y,h=o*(t.x+e.x)+s*(t.y+e.y),c=a*(t.x+n.x)+u*(t.y+n.y),l=2*(o*(n.y-e.y)-s*(n.x-e.x));this.x=(u*h-s*c)/l,this.y=(o*c-a*h)/l,i=this.x-t.x,r=this.y-t.y,this.r=i*i+r*r}function Pt(t,e){return e.x-t.x}function At(t){var e,n,i,r,o,s=t.length;t:for(;s;)for(n=t[--s],e=t[--s],i=s;i;)if(o=t[--i],r=t[--i],e===r&&n===o||e===o&&n===r){t.splice(s,2),t.splice(i,2),s-=2;continue t}}function Dt(t,e,n){if(!C(n=n||{}))throw new Error("options is invalid");var i=n.units,r=q(t),o=q(e),s=E(o[1]-r[1]),a=E(o[0]-r[0]),u=E(r[1]),h=E(o[1]),c=Math.pow(Math.sin(s/2),2)+Math.pow(Math.sin(a/2),2)*Math.cos(u)*Math.cos(h);return g(2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c)),i)}function Ft(t){if(!t)throw new Error("geojson is required");switch(t.type){case"Feature":return jt(t);case"FeatureCollection":return function(t){var e={type:"FeatureCollection"};return Object.keys(t).forEach(function(n){switch(n){case"type":case"features":return;default:e[n]=t[n]}}),e.features=t.features.map(function(t){return jt(t)}),e}(t);case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return Gt(t);default:throw new Error("unknown GeoJSON type")}}function jt(t){var e={type:"Feature"};return Object.keys(t).forEach(function(n){switch(n){case"type":case"properties":case"geometry":return;default:e[n]=t[n]}}),e.properties=function t(e){var n={};return e?(Object.keys(e).forEach(function(i){var r=e[i];"object"==typeof r?null===r?n[i]=null:r.length?n[i]=r.map(function(t){return t}):n[i]=t(r):n[i]=r}),n):n}(t.properties),e.geometry=Gt(t.geometry),e}function Gt(t){var e={type:t.type};return t.bbox&&(e.bbox=t.bbox),"GeometryCollection"===t.type?(e.geometries=t.geometries.map(function(t){return Gt(t)}),e):(e.coordinates=function t(e){return"object"!=typeof e[0]?e.slice():e.map(function(e){return t(e)})}(t.coordinates),e)}function kt(t,e){function n(t,e){e.length&&e.pop();for(var n=u[t<0?~t:t],i=0,r=n.length;i<r;++i)e.push(a(n[i],i));t<0&&Wo(e,r)}function i(t){return a(t)}function r(t){for(var e=[],i=0,r=t.length;i<r;++i)n(t[i],e);return e.length<2&&e.push(e[0]),e}function o(t){for(var e=r(t);e.length<4;)e.push(e[0]);return e}function s(t){return t.map(o)}var a=Vo(t.transform),u=t.arcs;return function t(e){var n,o=e.type;switch(o){case"GeometryCollection":return{type:o,geometries:e.geometries.map(t)};case"Point":n=i(e.coordinates);break;case"MultiPoint":n=e.coordinates.map(i);break;case"LineString":n=r(e.arcs);break;case"MultiLineString":n=e.arcs.map(r);break;case"Polygon":n=s(e.arcs);break;case"MultiPolygon":n=e.arcs.map(s);break;default:return null}return{type:o,coordinates:n}}(e)}function Bt(t,e,n){for(var i,r=e+(n---e>>1);e<r;++e,--n)i=t[e],t[e]=t[n],t[n]=i}function Yt(t){return null==t?{type:null}:("FeatureCollection"===t.type?function(t){var e={type:"GeometryCollection",geometries:t.features.map(Xt)};return null!=t.bbox&&(e.bbox=t.bbox),e}:"Feature"===t.type?Xt:qt)(t)}function Xt(t){var e,n=qt(t.geometry);for(e in null!=t.id&&(n.id=t.id),null!=t.bbox&&(n.bbox=t.bbox),t.properties){n.properties=t.properties;break}return n}function qt(t){if(null==t)return{type:null};var e="GeometryCollection"===t.type?{type:"GeometryCollection",geometries:t.geometries.map(qt)}:"Point"===t.type||"MultiPoint"===t.type?{type:t.type,coordinates:t.coordinates}:{type:t.type,arcs:t.coordinates};return null!=t.bbox&&(e.bbox=t.bbox),e}function Ut(t){var e,n=t[0],i=t[1];return i<n&&(e=n,n=i,i=e),n+31*i}function zt(t,e){var n,i=t[0],r=t[1],o=e[0],s=e[1];return r<i&&(n=i,i=r,r=n),s<o&&(n=o,o=s,s=n),i===o&&r===s}function Vt(t){return t[0].toString()+","+t[1].toString()}function Wt(t,e){if(!C(e=e||{}))throw new Error("options is invalid");var n=e.mutate;if("FeatureCollection"!==J(t))throw new Error("geojson must be a FeatureCollection");if(!t.features.length)throw new Error("geojson is empty");!1!==n&&void 0!==n||(t=Ft(t));var i=function(t){var e={};F(t,function(t){e[t.geometry.type]=!0});var n=Object.keys(e);return 1===n.length?n[0]:null}(t);if(!i)throw new Error("geojson must be homogenous");switch(i){case"LineString":return function(t,e){if(!C(e=e||{}))throw new Error("options is invalid");var n=e.mutate;if("FeatureCollection"!==J(t))throw new Error("geojson must be a FeatureCollection");if(!t.features.length)throw new Error("geojson is empty");!1!==n&&void 0!==n||(t=Ft(t));var i=[],r=Y(t,function(t,e){var n=function(t,e){var n,i=t.geometry.coordinates,r=e.geometry.coordinates,o=Vt(i[0]),s=Vt(i[i.length-1]),u=Vt(r[0]),h=Vt(r[r.length-1]);if(o===h)n=r.concat(i.slice(1));else if(u===s)n=i.concat(r.slice(1));else if(o===u)n=i.slice(1).reverse().concat(r);else{if(s!==h)return null;n=i.concat(r.reverse().slice(1))}return a(n)}(t,e);return n||(i.push(t),e)});return r&&i.push(r),i.length?1===i.length?i[0]:c(i.map(function(t){return t.coordinates})):null}(t,e);case"Polygon":return function(t,e){if(!C(e=e||{}))throw new Error("options is invalid");var n=e.mutate;if("FeatureCollection"!==J(t))throw new Error("geojson must be a FeatureCollection");if(!t.features.length)throw new Error("geojson is empty");!1!==n&&void 0!==n||(t=Ft(t));var i=[];F(t,function(t){i.push(t.geometry)});var r=is({geoms:f(i).geometry});return Ho(r,r.objects.geoms.geometries)}(t,e);default:throw new Error(i+" is not supported")}}function Kt(t,n){var i="object"==typeof n?n.mutate:n;if(!t)throw new Error("geojson is required");var r=J(t),o=[];switch(r){case"LineString":o=Ht(t);break;case"MultiLineString":case"Polygon":U(t).forEach(function(t){o.push(Ht(t))});break;case"MultiPolygon":U(t).forEach(function(t){var e=[];t.forEach(function(t){e.push(Ht(t))}),o.push(e)});break;case"Point":return t;case"MultiPoint":var s={};U(t).forEach(function(t){var e=t.join("-");s.hasOwnProperty(e)||(o.push(t),s[e]=!0)});break;default:throw new Error(r+" geometry not supported")}return t.coordinates?!0===i?(t.coordinates=o,t):{type:r,coordinates:o}:!0===i?(t.geometry.coordinates=o,t):e({type:r,coordinates:o},t.properties,t.bbox,t.id)}function Ht(t){var e=U(t);if(2===e.length&&!function(t,e){return t[0]===e[0]&&t[1]===e[1]}(e[0],e[1]))return e;var n,i,r,o=[],s=e.length-1;o.push(e[0]);for(var a=1;a<s;a++)n=e[a-1],i=e[a],function(t,e,n){var i=n[0],r=n[1],o=t[0],s=t[1],a=e[0],u=e[1],h=a-o,c=u-s;return(i-o)*c-(r-s)*h==0&&(Math.abs(h)>=Math.abs(c)?h>0?o<=i&&i<=a:a<=i&&i<=o:c>0?s<=r&&r<=u:u<=r&&r<=s)}(n,r=e[a+1],i)||o.push(i);return o.push(r),o}function Zt(t,e){var n=t.x-e.x,i=t.y-e.y;return n*n+i*i}function Jt(t,e,n){var i=e.x,r=e.y,o=n.x-i,s=n.y-r;if(0!==o||0!==s){var a=((t.x-i)*o+(t.y-r)*s)/(o*o+s*s);a>1?(i=n.x,r=n.y):a>0&&(i+=o*a,r+=s*a)}return o=t.x-i,s=t.y-r,o*o+s*s}function Qt(t,e,n){if(t.length<=2)return t;var i=void 0!==e?e*e:1;return t=function(t,e){var n=t.length-1,i=[t[0]];return function t(e,n,i,r,o){for(var s,a=r,u=n+1;u<i;u++){var h=Jt(e[u],e[n],e[i]);h>a&&(s=u,a=h)}a>r&&(s-n>1&&t(e,n,s,r,o),o.push(e[s]),i-s>1&&t(e,s,i,r,o))}(t,0,n,e,i),i.push(t[n]),i}(t=n?t:function(t,e){for(var n,i=t[0],r=[i],o=1,s=t.length;o<s;o++)Zt(n=t[o],i)>e&&(r.push(n),i=n);return i!==n&&r.push(n),r}(t,i),i)}function $t(t,e,n){return Qt(t.map(function(t){return{x:t[0],y:t[1],z:t[2]}}),e,n).map(function(t){return t.z?[t.x,t.y,t.z]:[t.x,t.y]})}function te(t,e,n){return t.map(function(t){var i=t.map(function(t){return{x:t[0],y:t[1]}});if(i.length<4)throw new Error("invalid polygon");for(var r=Qt(i,e,n).map(function(t){return[t.x,t.y]});!function(t){return!(t.length<3||3===t.length&&t[2][0]===t[0][0]&&t[2][1]===t[0][1])}(r);)r=Qt(i,e-=.01*e,n).map(function(t){return[t.x,t.y]});return r[r.length-1][0]===r[0][0]&&r[r.length-1][1]===r[0][1]||r.push(r[0]),r})}function ee(t,e){if(!C(e=e||{}))throw new Error("options is invalid");var n=e.resolution||1e4,i=e.sharpness||.85;if(!t)throw new Error("line is required");if(!w(n))throw new Error("resolution must be an number");if(!w(i))throw new Error("sharpness must be an number");for(var r=[],o=new rs({points:H(t).coordinates.map(function(t){return{x:t[0],y:t[1]}}),duration:n,sharpness:i}),s=0;s<o.duration;s+=10){var u=o.pos(s);Math.floor(s/100)%2==0&&r.push([u.x,u.y])}return a(r,t.properties)}function ne(t){O(t);var e=Number(t[0]),n=Number(t[1]),i=Number(t[2]),r=Number(t[3]);if(6===t.length)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var s=[e,n];return o([[s,[i,n],[i,r],[e,r],s]])}function ie(t){return ne(X(t))}function re(t){var e=t[0],n=t[1],i=t[2],r=t[3];if(Dt(t.slice(0,2),[i,n])>=Dt(t.slice(0,2),[e,r])){var o=(n+r)/2;return[e,o-(i-e)/2,i,o+(i-e)/2]}var s=(e+i)/2;return[s-(r-n)/2,n,s+(r-n)/2,r]}function oe(t,e,n,r){if(!C(r=r||{}))throw new Error("options is invalid");var o=r.units,s=r.properties,a=q(t),u=E(a[0]),h=E(a[1]),c=E(n),l=y(e,o),p=Math.asin(Math.sin(h)*Math.cos(l)+Math.cos(h)*Math.sin(l)*Math.cos(c));return i([m(u+Math.atan2(Math.sin(c)*Math.sin(l)*Math.cos(h),Math.cos(l)-Math.sin(h)*Math.sin(p))),m(p)],s)}function se(t,e,n){var i=(n=n||{}).steps||64,r=n.properties;if(!t)throw new Error("center is required");if(!e)throw new Error("radius is required");if("object"!=typeof n)throw new Error("options must be an object");if("number"!=typeof i)throw new Error("steps must be a number");i=i||64,r=r||t.properties||{};for(var s=[],a=0;a<i;a++)s.push(oe(t,e,-360*a/i,n).geometry.coordinates);return s.push(s[0]),o([s],r)}function ae(t,e,n){if(!C(n=n||{}))throw new Error("options is invalid");if(!0===n.final)return function(t,e){var n=ae(e,t);return n=(n+180)%360}(t,e);var i=q(t),r=q(e),o=E(i[0]),s=E(r[0]),a=E(i[1]),u=E(r[1]),h=Math.sin(s-o)*Math.cos(u),c=Math.cos(a)*Math.sin(u)-Math.sin(a)*Math.cos(u)*Math.cos(s-o);return m(Math.atan2(h,c))}function ue(t,e){if(!C(e=e||{}))throw new Error("options is invalid");var n=e.properties;if(!t)throw new Error("geojson is required");var r=X(t);return i([(r[0]+r[2])/2,(r[1]+r[3])/2],n)}function he(t,e){var n=0,r=0,o=0;return S(t,function(t){n+=t[0],r+=t[1],o++},!0),i([n/o,r/o],e)}function ce(t){var e=[];return"FeatureCollection"===t.type?L(t,function(t){S(t,function(n){e.push(i(n,t.properties))})}):S(t,function(n){e.push(i(n,t.properties))}),h(e)}function le(t,e,n){n=n||2;var i,r,o,s,a,u,h,c=e&&e.length,l=c?e[0]*n:t.length,p=pe(t,0,l,n,!0),f=[];if(!p)return f;if(c&&(p=function(t,e,n,i){var r,o,s,a,u,h=[];for(r=0,o=e.length;r<o;r++)s=e[r]*i,a=r<o-1?e[r+1]*i:t.length,(u=pe(t,s,a,i,!1))===u.next&&(u.steiner=!0),h.push(function(t){var e=t,n=t;do{e.x<n.x&&(n=e),e=e.next}while(e!==t);return n}(u));for(h.sort(de),r=0;r<h.length;r++)!function(t,e){if(e=function(t,e){var n,i=e,r=t.x,o=t.y,s=-1/0;do{if(o<=i.y&&o>=i.next.y&&i.next.y!==i.y){var a=i.x+(o-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(a<=r&&a>s){if(s=a,a===r){if(o===i.y)return i;if(o===i.next.y)return i.next}n=i.x<i.next.x?i:i.next}}i=i.next}while(i!==e);if(!n)return null;if(r===s)return n.prev;var u,h=n,c=n.x,l=n.y,p=1/0;for(i=n.next;i!==h;)r>=i.x&&i.x>=c&&r!==i.x&&ye(o<l?r:s,o,c,l,o<l?s:r,o,i.x,i.y)&&((u=Math.abs(o-i.y)/(r-i.x))<p||u===p&&i.x>n.x)&&Ee(i,t)&&(n=i,p=u),i=i.next;return n}(t,e)){var n=xe(e,t);fe(n,n.next)}}(h[r],n),n=fe(n,n.next);return n}(t,e,p,n)),t.length>80*n){i=o=t[0],r=s=t[1];for(var d=n;d<l;d+=n)a=t[d],u=t[d+1],a<i&&(i=a),u<r&&(r=u),a>o&&(o=a),u>s&&(s=u);h=0!==(h=Math.max(o-i,s-r))?1/h:0}return function t(e,n,i,r,o,s,a){if(e){!a&&s&&function(t,e,n,i){var r=t;do{null===r.z&&(r.z=ge(r.x,r.y,e,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,function(t){var e,n,i,r,o,s,a,u,h=1;do{for(n=t,t=null,o=null,s=0;n;){for(s++,i=n,a=0,e=0;e<h&&(a++,i=i.nextZ);e++);for(u=h;a>0||u>0&&i;)0!==a&&(0===u||!i||n.z<=i.z)?(r=n,n=n.nextZ,a--):(r=i,i=i.nextZ,u--),o?o.nextZ=r:t=r,r.prevZ=o,o=r;n=i}o.nextZ=null,h*=2}while(s>1)}(r)}(e,r,o,s);for(var u,h,c=e;e.prev!==e.next;)if(u=e.prev,h=e.next,s?function(t,e,n,i){var r=t.prev,o=t,s=t.next;if(_e(r,o,s)>=0)return!1;for(var a=r.x<o.x?r.x<s.x?r.x:s.x:o.x<s.x?o.x:s.x,u=r.y<o.y?r.y<s.y?r.y:s.y:o.y<s.y?o.y:s.y,h=r.x>o.x?r.x>s.x?r.x:s.x:o.x>s.x?o.x:s.x,c=r.y>o.y?r.y>s.y?r.y:s.y:o.y>s.y?o.y:s.y,l=ge(a,u,e,n,i),p=ge(h,c,e,n,i),f=t.nextZ;f&&f.z<=p;){if(f!==t.prev&&f!==t.next&&ye(r.x,r.y,o.x,o.y,s.x,s.y,f.x,f.y)&&_e(f.prev,f,f.next)>=0)return!1;f=f.nextZ}for(f=t.prevZ;f&&f.z>=l;){if(f!==t.prev&&f!==t.next&&ye(r.x,r.y,o.x,o.y,s.x,s.y,f.x,f.y)&&_e(f.prev,f,f.next)>=0)return!1;f=f.prevZ}return!0}(e,r,o,s):function(t){var e=t.prev,n=t,i=t.next;if(_e(e,n,i)>=0)return!1;for(var r=t.next.next;r!==t.prev;){if(ye(e.x,e.y,n.x,n.y,i.x,i.y,r.x,r.y)&&_e(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}(e))n.push(u.i/i),n.push(e.i/i),n.push(h.i/i),we(e),e=h.next,c=h.next;else if((e=h)===c){a?1===a?t(e=function(t,e,n){var i=t;do{var r=i.prev,o=i.next.next;!ve(r,o)&&me(r,i,i.next,o)&&Ee(r,o)&&Ee(o,r)&&(e.push(r.i/n),e.push(i.i/n),e.push(o.i/n),we(i),we(i.next),i=t=o),i=i.next}while(i!==t);return i}(e,n,i),n,i,r,o,s,2):2===a&&function(e,n,i,r,o,s){var a=e;do{for(var u=a.next.next;u!==a.prev;){if(a.i!==u.i&&function(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&me(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&Ee(t,e)&&Ee(e,t)&&function(t,e){var n=t,i=!1,r=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&r<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==t);return i}(t,e)}(a,u)){var h=xe(a,u);return a=fe(a,a.next),h=fe(h,h.next),t(a,n,i,r,o,s),void t(h,n,i,r,o,s)}u=u.next}a=a.next}while(a!==e)}(e,n,i,r,o,s):t(fe(e),n,i,r,o,s,1);break}}}(p,f,n,i,r,h),f}function pe(t,e,n,i,r){var o,s;if(r===Oe(t,e,n,i)>0)for(o=e;o<n;o+=i)s=be(o,t[o],t[o+1],s);else for(o=n-i;o>=e;o-=i)s=be(o,t[o],t[o+1],s);return s&&ve(s,s.next)&&(we(s),s=s.next),s}function fe(t,e){if(!t)return t;e||(e=t);var n,i=t;do{if(n=!1,i.steiner||!ve(i,i.next)&&0!==_e(i.prev,i,i.next))i=i.next;else{if(we(i),(i=e=i.prev)===i.next)break;n=!0}}while(n||i!==e);return e}function de(t,e){return t.x-e.x}function ge(t,e,n,i,r){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*r)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*r)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function ye(t,e,n,i,r,o,s,a){return(r-s)*(e-a)-(t-s)*(o-a)>=0&&(t-s)*(i-a)-(n-s)*(e-a)>=0&&(n-s)*(o-a)-(r-s)*(i-a)>=0}function _e(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function ve(t,e){return t.x===e.x&&t.y===e.y}function me(t,e,n,i){return!!(ve(t,e)&&ve(n,i)||ve(t,i)&&ve(n,e))||_e(t,e,n)>0!=_e(t,e,i)>0&&_e(n,i,t)>0!=_e(n,i,e)>0}function Ee(t,e){return _e(t.prev,t,t.next)<0?_e(t,e,t.next)>=0&&_e(t,t.prev,e)>=0:_e(t,e,t.prev)<0||_e(t,t.next,e)<0}function xe(t,e){var n=new Ce(t.i,t.x,t.y),i=new Ce(e.i,e.x,e.y),r=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=r,r.prev=n,i.next=n,n.prev=i,o.next=i,i.prev=o,i}function be(t,e,n,i){var r=new Ce(t,e,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function we(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Ce(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Oe(t,e,n,i){for(var r=0,o=e,s=n-i;o<n;o+=i)r+=(t[s]-t[o])*(t[o+1]+t[s+1]),s=o;return r}function Ie(t){var e=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},i=0,r=0;r<t.length;r++){for(var o=0;o<t[r].length;o++)for(var s=0;s<e;s++)n.vertices.push(t[r][o][s]);r>0&&(i+=t[r-1].length,n.holes.push(i))}return n}(t),n=os(e.vertices,e.holes,2),i=[],r=[];n.forEach(function(t,i){var o=n[i];r.push([e.vertices[2*o],e.vertices[2*o+1]])});for(var s=0;s<r.length;s+=3){var a=r.slice(s,s+3);a.push(r[s]),i.push(o([a]))}return i}function Se(t,e){if(!t)throw new Error("targetPoint is required");if(!e)throw new Error("points is required");var n,i=1/0;return L(e,function(e,r){var o=Dt(t,e);o<i&&((n=Ft(e)).properties.featureIndex=r,n.properties.distanceToPoint=o,i=o)}),n}function Te(t,e,n,i,r){!function t(e,n,i,r,o){for(;r>i;){if(r-i>600){var s=r-i+1,a=n-i+1,u=Math.log(s),h=.5*Math.exp(2*u/3),c=.5*Math.sqrt(u*h*(s-h)/s)*(a-s/2<0?-1:1);t(e,n,Math.max(i,Math.floor(n-a*h/s+c)),Math.min(r,Math.floor(n+(s-a)*h/s+c)),o)}var l=e[n],p=i,f=r;for(Re(e,i,n),o(e[r],l)>0&&Re(e,i,r);p<f;){for(Re(e,p,f),p++,f--;o(e[p],l)<0;)p++;for(;o(e[f],l)>0;)f--}0===o(e[i],l)?Re(e,i,f):Re(e,++f,r),f<=n&&(i=f+1),n<=f&&(r=f-1)}}(t,e,n||0,i||t.length-1,r||function(t,e){return t<e?-1:t>e?1:0})}function Re(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}function Ne(t,e){if(!(this instanceof Ne))return new Ne(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),this.clear()}function Le(t,e){Me(t,0,t.children.length,e,t)}function Me(t,e,n,i,r){r||(r=Be(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(var o,s=e;s<n;s++)o=t.children[s],Pe(r,t.leaf?i(o):o);return r}function Pe(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function Ae(t,e){return t.minX-e.minX}function De(t,e){return t.minY-e.minY}function Fe(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function je(t){return t.maxX-t.minX+(t.maxY-t.minY)}function Ge(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function ke(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function Be(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Ye(t,e,n,i,r){for(var o,s=[e,n];s.length;)(n=s.pop())-(e=s.pop())<=i||(Te(t,o=e+Math.ceil((n-e)/i/2)*i,e,n,r),s.push(e,o,o,n))}function Xe(t){var e=Ne(t);return e.insert=function(t){if(Array.isArray(t)){var e=t;(t=qe(e)).bbox=e}else t.bbox=t.bbox?t.bbox:Ue(t);return Ne.prototype.insert.call(this,t)},e.load=function(t){var e=[];return Array.isArray(t)?t.forEach(function(t){var n=qe(t);n.bbox=t,e.push(n)}):L(t,function(t){t.bbox=t.bbox?t.bbox:Ue(t),e.push(t)}),Ne.prototype.load.call(this,e)},e.remove=function(t){if(Array.isArray(t)){var e=t;(t=qe(e)).bbox=e}return Ne.prototype.remove.call(this,t)},e.clear=function(){return Ne.prototype.clear.call(this)},e.search=function(t){return{type:"FeatureCollection",features:Ne.prototype.search.call(this,this.toBBox(t))}},e.collides=function(t){return Ne.prototype.collides.call(this,this.toBBox(t))},e.all=function(){return{type:"FeatureCollection",features:Ne.prototype.all.call(this)}},e.toJSON=function(){return Ne.prototype.toJSON.call(this)},e.fromJSON=function(t){return Ne.prototype.fromJSON.call(this,t)},e.toBBox=function(t){var e;return{minX:(e=t.bbox?t.bbox:Array.isArray(t)&&4===t.length?t:Ue(t))[0],minY:e[1],maxX:e[2],maxY:e[3]}},e}function qe(t){var e=[t[0],t[1]],n=[t[0],t[3]],i=[t[2],t[3]];return{type:"Feature",bbox:t,properties:{},geometry:{type:"Polygon",coordinates:[[e,[t[2],t[1]],i,n,e]]}}}function Ue(t){var e=[1/0,1/0,-1/0,-1/0];return S(t,function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])}),e}function ze(t){if(!t)throw new Error("geojson is required");var e=[];return F(t,function(t){!function(t,e){var n=[],i=t.geometry;switch(i.type){case"Polygon":n=U(i);break;case"LineString":n=[U(i)]}n.forEach(function(n){var i=function(t,e){var n=[];return t.reduce(function(t,i){var r=a([t,i],e);return r.bbox=function(t,e){var n=t[0],i=t[1],r=e[0],o=e[1];return[n<r?n:r,i<o?i:o,n>r?n:r,i>o?i:o]}(t,i),n.push(r),i}),n}(n,t.properties);i.forEach(function(t){t.id=e.length,e.push(t)})})}(t,e)}),h(e)}function Ve(t,n){var i={},r=[];if("LineString"===t.type&&(t=e(t)),"LineString"===n.type&&(n=e(n)),"Feature"===t.type&&"Feature"===n.type&&"LineString"===t.geometry.type&&"LineString"===n.geometry.type&&2===t.geometry.coordinates.length&&2===n.geometry.coordinates.length){var o=We(t,n);return o&&r.push(o),h(r)}var s=Xe();return s.load(ze(n)),L(ze(t),function(t){L(s.search(t),function(e){var n=We(t,e);if(n){var o=U(n).join(",");i[o]||(i[o]=!0,r.push(n))}})}),h(r)}function We(t,e){var n=U(t),r=U(e);if(2!==n.length)throw new Error("<intersects> line1 must only contain 2 coordinates");if(2!==r.length)throw new Error("<intersects> line2 must only contain 2 coordinates");var o=n[0][0],s=n[0][1],a=n[1][0],u=n[1][1],h=r[0][0],c=r[0][1],l=r[1][0],p=r[1][1],f=(p-c)*(a-o)-(l-h)*(u-s),d=(l-h)*(s-c)-(p-c)*(o-h),g=(a-o)*(s-c)-(u-s)*(o-h);if(0===f)return null;var y=d/f,_=g/f;return y>=0&&y<=1&&_>=0&&_<=1?i([o+y*(a-o),s+y*(u-s)]):null}function Ke(t,e,n){if(!C(n=n||{}))throw new Error("options is invalid");var r=t.geometry?t.geometry.type:t.type;if("LineString"!==r&&"MultiLineString"!==r)throw new Error("lines must be LineString or MultiLineString");var o=i([1/0,1/0],{dist:1/0}),s=0;return F(t,function(t){for(var r=U(t),u=0;u<r.length-1;u++){var h=i(r[u]);h.properties.dist=Dt(e,h,n);var c=i(r[u+1]);c.properties.dist=Dt(e,c,n);var l=Dt(h,c,n),p=Math.max(h.properties.dist,c.properties.dist),f=ae(h,c),d=oe(e,p,f+90,n),g=oe(e,p,f-90,n),y=Ve(a([d.geometry.coordinates,g.geometry.coordinates]),a([h.geometry.coordinates,c.geometry.coordinates])),_=null;y.features.length>0&&((_=y.features[0]).properties.dist=Dt(e,_,n),_.properties.location=s+Dt(h,_,n)),h.properties.dist<o.properties.dist&&((o=h).properties.index=u,o.properties.location=s),c.properties.dist<o.properties.dist&&((o=c).properties.index=u+1,o.properties.location=s+l),_&&_.properties.dist<o.properties.dist&&((o=_).properties.index=u),s+=l}}),o}function He(t,e,n){if(!C(n=n||{}))throw new Error("options is invalid");var i,r=n.final;if(!t)throw new Error("start point is required");if(!e)throw new Error("end point is required");return(i=r?Ze(q(e),q(t)):Ze(q(t),q(e)))>180?-(360-i):i}function Ze(t,e){var n=E(t[1]),i=E(e[1]),r=E(e[0]-t[0]);r>Math.PI&&(r-=2*Math.PI),r<-Math.PI&&(r+=2*Math.PI);var o=Math.log(Math.tan(i/2+Math.PI/4)/Math.tan(n/2+Math.PI/4));return(m(Math.atan2(r,o))+360)%360}function Je(t,e,n){if(!C(n=n||{}))throw new Error("options is invalid");var i=n.units;if(!t)throw new Error("from point is required");if(!e)throw new Error("to point is required");var r=q(t),o=q(e);return o[0]+=o[0]-r[0]>180?-360:r[0]-o[0]>180?360:0,x(function(t,e,n){var i=n=void 0===n?mo:Number(n),r=t[1]*Math.PI/180,o=e[1]*Math.PI/180,s=o-r,a=Math.abs(e[0]-t[0])*Math.PI/180;a>Math.PI&&(a-=2*Math.PI);var u=Math.log(Math.tan(o/2+Math.PI/4)/Math.tan(r/2+Math.PI/4)),h=Math.abs(u)>1e-11?s/u:Math.cos(r);return Math.sqrt(s*s+h*h*a*a)*i}(r,o),"meters",i)}function Qe(t,e){return tn(t,"mercator",e)}function $e(t,e){return tn(t,"wgs84",e)}function tn(t,e,n){if(!C(n=n||{}))throw new Error("options is invalid");var i=n.mutate;if(!t)throw new Error("geojson is required");return Array.isArray(t)&&w(t[0])?t="mercator"===e?en(t):nn(t):(!0!==i&&(t=Ft(t)),S(t,function(t){var n="mercator"===e?en(t):nn(t);t[0]=n[0],t[1]=n[1]})),t}function en(t){var e=Math.PI/180,n=20037508.342789244,i=[6378137*(Math.abs(t[0])<=180?t[0]:t[0]-360*function(t){return t<0?-1:t>0?1:0}(t[0]))*e,6378137*Math.log(Math.tan(.25*Math.PI+.5*t[1]*e))];return i[0]>n&&(i[0]=n),i[0]<-n&&(i[0]=-n),i[1]>n&&(i[1]=n),i[1]<-n&&(i[1]=-n),i}function nn(t){var e=180/Math.PI;return[t[0]*e/6378137,(.5*Math.PI-2*Math.atan(Math.exp(-t[1]/6378137)))*e]}function rn(t,n,r){if(!C(r=r||{}))throw new Error("options is invalid");if(!t)throw new Error("pt is required");if(Array.isArray(t)?t=i(t):"Point"===t.type?t=e(t):W(t,"Point","point"),!n)throw new Error("line is required");Array.isArray(n)?n=a(n):"LineString"===n.type?n=e(n):W(n,"LineString","line");var o=1/0,s=t.geometry.coordinates;return G(n,function(t){var e=t.geometry.coordinates[0],n=t.geometry.coordinates[1],a=function(t,e,n,r){var o=r.mercator,s=!0!==o?Dt(e,t,r):on(e,t,r),a=v(!0!==o?ae(e,t):He(e,t)),u=v(!0!==o?ae(e,n):He(e,n)),h=Math.abs(a-u);if(h>90)return s;var c=(u+180)%360,l=v(!0!==o?ae(n,t):He(n,t)),p=Math.abs(l-c);return p>180&&(p=Math.abs(p-360)),p>90?!0!==o?Dt(t,n,r):on(t,n,r):!0!==o?s*Math.sin(E(h)):function(t,e,n,r){var o=0;(Math.abs(t[0])>=180||Math.abs(e[0])>=180||Math.abs(n[0])>=180)&&(o=t[0]>0||e[0]>0||n[0]>0?-180:180);var s=i(n),a=Qe([t[0]+o,t[1]]),u=Qe([e[0]+o,e[1]]),h=Qe([n[0]+o,n[1]]),c=$e(function(t,e,n){var i=t[0],r=t[1],o=e[0],s=e[1],a=n[0],u=n[1],h=o-i,c=s-r,l=((a-i)*h+(u-r)*c)/(h*h+c*c);return[i+l*h,r+l*c]}(a,u,h));return 0!==o&&(c[0]-=o),Je(s,c,r)}(e,n,t,r)}(s,e,n,r);o>a&&(o=a)}),o}function on(t,e,n){var i=n.units,r=0;Math.abs(t[0])>=180&&(r=t[0]>0?-180:180),Math.abs(e[0])>=180&&(r=e[0]>0?-180:180);var o=Qe([t[0]+r,t[1]]),s=Qe([e[0]+r,e[1]]),a=function(t){return t*t},u=a(o[0]-s[0])+a(o[1]-s[1]);return x(Math.sqrt(u),"meters",i)}function sn(t){for(var n=function(t){return"FeatureCollection"!==t.type?"Feature"!==t.type?h([e(t)]):h([t]):t}(t),r=ue(n),o=!1,s=0;!o&&s<n.features.length;){var a,u=n.features[s].geometry,c=!1;if("Point"===u.type)r.geometry.coordinates[0]===u.coordinates[0]&&r.geometry.coordinates[1]===u.coordinates[1]&&(o=!0);else if("MultiPoint"===u.type){var l=!1;for(a=0;!l&&a<u.coordinates.length;)r.geometry.coordinates[0]===u.coordinates[a][0]&&r.geometry.coordinates[1]===u.coordinates[a][1]&&(o=!0,l=!0),a++}else if("LineString"===u.type)for(a=0;!c&&a<u.coordinates.length-1;)an(r.geometry.coordinates[0],r.geometry.coordinates[1],u.coordinates[a][0],u.coordinates[a][1],u.coordinates[a+1][0],u.coordinates[a+1][1])&&(c=!0,o=!0),a++;else if("MultiLineString"===u.type)for(var p=0;p<u.coordinates.length;){c=!1,a=0;for(var f=u.coordinates[p];!c&&a<f.length-1;)an(r.geometry.coordinates[0],r.geometry.coordinates[1],f[a][0],f[a][1],f[a+1][0],f[a+1][1])&&(c=!0,o=!0),a++;p++}else"Polygon"!==u.type&&"MultiPolygon"!==u.type||Tt(r,u)&&(o=!0);s++}if(o)return r;var d=h([]);for(s=0;s<n.features.length;s++)d.features=d.features.concat(ce(n.features[s]).features);return i(Se(r,d).geometry.coordinates)}function an(t,e,n,i,r,o){return Math.sqrt((r-n)*(r-n)+(o-i)*(o-i))===Math.sqrt((t-n)*(t-n)+(e-i)*(e-i))+Math.sqrt((r-t)*(r-t)+(o-e)*(o-e))}function un(t){return D(t,function(t,e){return t+function t(e){var n,i=0;switch(e.type){case"Polygon":return hn(e.coordinates);case"MultiPolygon":for(n=0;n<e.coordinates.length;n++)i+=hn(e.coordinates[n]);return i;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(n=0;n<e.geometries.length;n++)i+=t(e.geometries[n]);return i}}(e)},0)}function hn(t){var e=0;if(t&&t.length>0){e+=Math.abs(cn(t[0]));for(var n=1;n<t.length;n++)e-=Math.abs(cn(t[n]))}return e}function cn(t){var e,n,i,r,o,s,a=0,u=t.length;if(u>2){for(s=0;s<u;s++)s===u-2?(i=u-2,r=u-1,o=0):s===u-1?(i=u-1,r=0,o=1):(i=s,r=s+1,o=s+2),e=t[i],n=t[r],a+=(ln(t[o][0])-ln(e[0]))*Math.sin(ln(n[1]));a=a*us*us/2}return a}function ln(t){return t*Math.PI/180}function pn(t,e){if(!C(e=e||{}))throw new Error("options is invalid");if(!t)throw new Error("geojson is required");return k(t,function(t,n){var i=n.geometry.coordinates;return t+Dt(i[0],i[1],e)},0)}function fn(t,e,n,i){if(!C(i=i||{}))throw new Error("options is invalid");var r,o=[];if("Feature"===t.type)r=t.geometry.coordinates;else{if("LineString"!==t.type)throw new Error("input must be a LineString Feature or Geometry");r=t.coordinates}for(var s,u,h,c=0,l=0;l<r.length&&!(e>=c&&l===r.length-1);l++){if(c>e&&0===o.length){if(!(s=e-c))return o.push(r[l]),a(o);u=ae(r[l],r[l-1])-180,h=oe(r[l],s,u,i),o.push(h.geometry.coordinates)}if(c>=n)return(s=n-c)?(u=ae(r[l],r[l-1])-180,h=oe(r[l],s,u,i),o.push(h.geometry.coordinates),a(o)):(o.push(r[l]),a(o));if(c>=e&&o.push(r[l]),l===r.length-1)return a(o);c+=Dt(r[l],r[l+1],i)}return a(r[r.length-1])}function dn(t,e,n){var i=(n=n||{}).ignoreEndVertices;if(!C(n))throw new Error("invalid options");if(!t)throw new Error("pt is required");if(!e)throw new Error("line is required");for(var r=q(t),o=U(e),s=0;s<o.length-1;s++){var a=!1;if(i&&(0===s&&(a="start"),s===o.length-2&&(a="end"),0===s&&s+1===o.length-1&&(a="both")),function(t,e,n,i){var r=n[0],o=n[1],s=t[0],a=t[1],u=e[0],h=e[1],c=n[0]-s,l=n[1]-a,p=u-s,f=h-a;return c*f-l*p==0&&(i?"start"===i?Math.abs(p)>=Math.abs(f)?p>0?s<r&&r<=u:u<=r&&r<s:f>0?a<o&&o<=h:h<=o&&o<a:"end"===i?Math.abs(p)>=Math.abs(f)?p>0?s<=r&&r<u:u<r&&r<=s:f>0?a<=o&&o<h:h<o&&o<=a:"both"===i?Math.abs(p)>=Math.abs(f)?p>0?s<r&&r<u:u<r&&r<s:f>0?a<o&&o<h:h<o&&o<a:void 0:Math.abs(p)>=Math.abs(f)?p>0?s<=r&&r<=u:u<=r&&r<=s:f>0?a<=o&&o<=h:h<=o&&o<=a)}(o[s],o[s+1],r,a))return!0}return!1}function gn(t,e){var n=J(t),i=J(e),r=H(t),o=H(e);switch(n){case"Point":switch(i){case"MultiPoint":return function(t,e){var n,i=!1;for(n=0;n<e.coordinates.length;n++)if(_n(e.coordinates[n],t.coordinates)){i=!0;break}return i}(r,o);case"LineString":return dn(r,o,{ignoreEndVertices:!0});case"Polygon":return Tt(r,o,{ignoreBoundary:!0});default:throw new Error("feature2 "+i+" geometry not supported")}case"MultiPoint":switch(i){case"MultiPoint":return function(t,e){for(var n=0;n<t.coordinates.length;n++){for(var i=!1,r=0;r<e.coordinates.length;r++)_n(t.coordinates[n],e.coordinates[r])&&(i=!0);if(!i)return!1}return!0}(r,o);case"LineString":return function(t,e){for(var n=!1,i=0;i<t.coordinates.length;i++){if(!dn(t.coordinates[i],e))return!1;n||(n=dn(t.coordinates[i],e,{ignoreEndVertices:!0}))}return n}(r,o);case"Polygon":return function(t,e){for(var n=!0,i=0;i<t.coordinates.length;i++){var r=Tt(t.coordinates[1],e);if(!r){n=!1;break}r=Tt(t.coordinates[1],e,{ignoreBoundary:!0})}return n&&r}(r,o);default:throw new Error("feature2 "+i+" geometry not supported")}case"LineString":switch(i){case"LineString":return function(t,e){for(var n=0;n<t.coordinates.length;n++)if(!dn(t.coordinates[n],e))return!1;return!0}(r,o);case"Polygon":return function(t,e){var n=X(e),i=X(t);if(!yn(n,i))return!1;for(var r=!1,o=0;o<t.coordinates.length-1;o++){if(!Tt(t.coordinates[o],e))return!1;if(r||(r=Tt(t.coordinates[o],e,{ignoreBoundary:!0})),!r){var s=function(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]}(t.coordinates[o],t.coordinates[o+1]);r=Tt(s,e,{ignoreBoundary:!0})}}return r}(r,o);default:throw new Error("feature2 "+i+" geometry not supported")}case"Polygon":switch(i){case"Polygon":return function(t,e){var n=X(t);if(!yn(X(e),n))return!1;for(var i=0;i<t.coordinates[0].length;i++)if(!Tt(t.coordinates[0][i],e))return!1;return!0}(r,o);default:throw new Error("feature2 "+i+" geometry not supported")}default:throw new Error("feature1 "+n+" geometry not supported")}}function yn(t,e){return!(t[0]>e[0]||t[2]<e[2]||t[1]>e[1]||t[3]<e[3])}function _n(t,e){return t[0]===e[0]&&t[1]===e[1]}function vn(t,e,n){if(!C(n=n||{}))throw new Error("options is invalid");var r=n.mask,o=n.properties,s=[];if(null===e||void 0===e)throw new Error("cellSide is required");if(!w(e))throw new Error("cellSide is invalid");if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be array");if(4!==t.length)throw new Error("bbox must contain 4 numbers");if(r&&-1===["Polygon","MultiPolygon"].indexOf(J(r)))throw new Error("options.mask must be a (Multi)Polygon");for(var a=t[0],u=t[1],c=t[2],l=t[3],p=e/Dt([a,u],[c,u],n)*(c-a),f=e/Dt([a,u],[a,l],n)*(l-u),d=c-a,g=l-u,y=Math.floor(d/p),_=(g-Math.floor(g/f)*f)/2,v=a+(d-y*p)/2;v<=c;){for(var m=u+_;m<=l;){var E=i([v,m],o);r?gn(E,r)&&s.push(E):s.push(E),m+=f}v+=p}return h(s)}function mn(t,e){if(!C(e=e||{}))throw new Error("options is invalid");var n=e.precision,i=e.coordinates,r=e.mutate;if(n=void 0===n||null===n||isNaN(n)?6:n,i=void 0===i||null===i||isNaN(i)?3:i,!t)throw new Error("<geojson> is required");if("number"!=typeof n)throw new Error("<precision> must be a number");if("number"!=typeof i)throw new Error("<coordinates> must be a number");!1!==r&&void 0!==r||(t=JSON.parse(JSON.stringify(t)));var o=Math.pow(10,n);return S(t,function(t){!function(t,e,n){t.length>n&&t.splice(n,t.length);for(var i=0;i<t.length;i++)t[i]=Math.round(t[i]*e)/e}(t,o,i)}),t}function En(t,e){if(!t||!e)return!1;if(t.length!==e.length)return!1;for(var n=0,i=t.length;n<i;n++)if(t[n]instanceof Array&&e[n]instanceof Array){if(!En(t[n],e[n]))return!1}else if(t[n]!==e[n])return!1;return!0}function xn(t,e){if(void 0===e&&(e=!0),3!=t.length)throw new Error("This function requires an array of three points [x,y]");return(t[1][0]-t[0][0])*(t[2][1]-t[0][1])-(t[1][1]-t[0][1])*(t[2][0]-t[0][0])>=0==e}function bn(t,e){if(!t||!e)return!1;if(t.length!=e.length)return!1;for(var n=0,i=t.length;n<i;n++)if(t[n]instanceof Array&&e[n]instanceof Array){if(!bn(t[n],e[n]))return!1}else if(t[n]!=e[n])return!1;return!0}function wn(t,e){var n=[],i=Xe();return F(e,function(e){if(n.forEach(function(t,e){t.id=e}),n.length){var r=i.search(e);if(r.features.length){var o=On(e,r);n=n.filter(function(t){return t.id!==o.id}),i.remove(o),L(Cn(o,e),function(t){n.push(t),i.insert(t)})}}else(n=Cn(t,e).features).forEach(function(t){t.bbox||(t.bbox=re(X(t)))}),i.load(h(n))}),h(n)}function Cn(t,e){var n=[],i=U(t)[0],r=U(t)[t.geometry.coordinates.length-1];if(In(i,q(e))||In(r,q(e)))return h([t]);var o=Xe(),s=ze(t);o.load(s);var u=o.search(e);if(!u.features.length)return h([t]);var c=On(e,u),l=M(s,function(t,i,r){var o=U(i)[1],s=q(e);return r===c.id?(t.push(s),n.push(a(t)),In(s,o)?[s]:[s,o]):(t.push(o),t)},[i]);return l.length>1&&n.push(a(l)),h(n)}function On(t,e){if(!e.features.length)throw new Error("lines must contain features");if(1===e.features.length)return e.features[0];var n,i=1/0;return L(e,function(e){var r=Ke(e,t).properties.dist;r<i&&(n=e,i=r)}),n}function In(t,e){return t[0]===e[0]&&t[1]===e[1]}function Sn(t,e,n,i,r){if(!C(r=r||{}))throw new Error("options is invalid");var o=r.steps,s=r.units;if(!t)throw new Error("center is required");if(!e)throw new Error("radius is required");if(void 0===n||null===n)throw new Error("bearing1 is required");if(void 0===i||null===i)throw new Error("bearing2 is required");if("object"!=typeof r)throw new Error("options must be an object");o=o||64;var u=Tn(n),h=Tn(i),c=t.properties;if(u===h)return a(se(t,e,r).geometry.coordinates[0],c);for(var l=u,p=u<h?h:h+360,f=l,d=[],g=0;f<p;)d.push(oe(t,e,f,s).geometry.coordinates),f=l+360*++g/o;return f>p&&d.push(oe(t,e,p,s).geometry.coordinates),a(d,c)}function Tn(t){var e=t%360;return e<0&&(e+=360),e}function Rn(t,e){if(!C(e=e||{}))throw new Error("options is invalid");var n=e.properties,i=J(t),r=U(t);if(n=n||t.properties||{},!r.length)throw new Error("polygon must contain coordinates");switch(i){case"Polygon":return Nn(r,n);case"MultiPolygon":var o=[];return r.forEach(function(t){o.push(Nn(t,n))}),h(o);default:throw new Error("geom "+i+" not supported")}}function Nn(t,e){return t.length>1?c(t,e):a(t[0],e)}function Ln(t,e){if(!C(e=e||{}))throw new Error("options is invalid");var n=e.properties,i=e.autoComplete,r=e.orderCoords;if(!t)throw new Error("lines is required");switch(i=void 0===i||i,r=void 0===r||r,J(t)){case"FeatureCollection":case"GeometryCollection":var o=[];return(t.features?t.features:t.geometries).forEach(function(t){o.push(U(Mn(t,{},i,r)))}),p(o,n)}return Mn(t,n,i,r)}function Mn(t,e,n,i){e=e||t.properties||{};var r=U(t),s=J(t);if(!r.length)throw new Error("line must contain coordinates");switch(s){case"LineString":return n&&(r=Pn(r)),o([r],e);case"MultiLineString":var u=[],h=0;return r.forEach(function(t){if(n&&(t=Pn(t)),i){var e=function(t){var e=t[0],n=t[1],i=t[2],r=t[3];return Math.abs(e-i)*Math.abs(n-r)}(X(a(t)));e>h?(u.unshift(t),h=e):u.push(t)}else u.push(t)}),o(u,e);default:throw new Error("geometry type "+s+" is not supported")}}function Pn(t){var e=t[0],n=e[0],i=e[1],r=t[t.length-1],o=r[0],s=r[1];return n===o&&i===s||t.push(e),t}function An(t,e,n){var i,r,o,s,a,u=t.length,h=Fn(t[0],e),c=[];for(n||(n=[]),i=1;i<u;i++){for(r=t[i-1],s=a=Fn(o=t[i],e);;){if(!(h|s)){c.push(r),s!==a?(c.push(o),i<u-1&&(n.push(c),c=[])):i===u-1&&c.push(o);break}if(h&s)break;h?h=Fn(r=Dn(r,o,h,e),e):s=Fn(o=Dn(r,o,s,e),e)}h=a}return c.length&&n.push(c),n}function Dn(t,e,n,i){return 8&n?[t[0]+(e[0]-t[0])*(i[3]-t[1])/(e[1]-t[1]),i[3]]:4&n?[t[0]+(e[0]-t[0])*(i[1]-t[1])/(e[1]-t[1]),i[1]]:2&n?[i[2],t[1]+(e[1]-t[1])*(i[2]-t[0])/(e[0]-t[0])]:1&n?[i[0],t[1]+(e[1]-t[1])*(i[0]-t[0])/(e[0]-t[0])]:null}function Fn(t,e){var n=0;return t[0]<e[0]?n|=1:t[0]>e[2]&&(n|=2),t[1]<e[1]?n|=4:t[1]>e[3]&&(n|=8),n}function jn(t,e){for(var n=[],i=0;i<t.length;i++){var r=vs.polygon(t[i],e);r.length>0&&(r[0][0]===r[r.length-1][0]&&r[0][1]===r[r.length-1][1]||r.push(r[0]),r.length>=4&&n.push(r))}return n}function Gn(t){return"[object Arguments]"===Object.prototype.toString.call(t)}function kn(t,e,n){return n||(n={}),t===e||(t instanceof Date&&e instanceof Date?t.getTime()===e.getTime():!t||!e||"object"!=typeof t&&"object"!=typeof e?(n.strict,t===e):function(t,e,n){var i,r;if(Bn(t)||Bn(e))return!1;if(t.prototype!==e.prototype)return!1;if(Gn(t))return!!Gn(e)&&(t=ms.call(t),e=ms.call(e),kn(t,e,n));if(Yn(t)){if(!Yn(e))return!1;if(t.length!==e.length)return!1;for(i=0;i<t.length;i++)if(t[i]!==e[i])return!1;return!0}try{var o=Object.keys(t),s=Object.keys(e)}catch(t){return!1}if(o.length!==s.length)return!1;for(o.sort(),s.sort(),i=o.length-1;i>=0;i--)if(o[i]!==s[i])return!1;for(i=o.length-1;i>=0;i--)if(r=o[i],!kn(t[r],e[r],n))return!1;return typeof t==typeof e}(t,e,n))}function Bn(t){return null===t||void 0===t}function Yn(t){return!(!t||"object"!=typeof t||"number"!=typeof t.length||"function"!=typeof t.copy||"function"!=typeof t.slice||t.length>0&&"number"!=typeof t[0])}function Xn(t,e,n){if(!C(n=n||{}))throw new Error("options is invalid");var i,r=n.tolerance||0,o=[],s=Xe();return s.load(ze(t)),G(e,function(t){var e=!1;L(s.search(t),function(n){if(!1===e){var o=U(t).sort(),s=U(n).sort();kn(o,s)?(e=!0,i=i?qn(i,t):t):(0===r?dn(o[0],n)&&dn(o[1],n):Ke(n,o[0]).properties.dist<=r&&Ke(n,o[1]).properties.dist<=r)?(e=!0,i=i?qn(i,t):t):(0===r?dn(s[0],t)&&dn(s[1],t):Ke(t,s[0]).properties.dist<=r&&Ke(t,s[1]).properties.dist<=r)&&(i=i?qn(i,n):n)}}),!1===e&&i&&(o.push(i),i=void 0)}),i&&o.push(i),h(o)}function qn(t,e){var n=U(e),i=U(t),r=i[0],o=i[i.length-1],s=t.geometry.coordinates;return kn(n[0],r)?s.unshift(n[1]):kn(n[0],o)?s.push(n[1]):kn(n[1],r)?s.unshift(n[0]):kn(n[1],o)&&s.push(n[0]),t}function Un(t){var e=t%360;return e<0&&(e+=360),e}function zn(t,e,n,r){if(!C(r=r||{}))throw new Error("options is invalid");var o=r.units,s=r.properties;if(!t)throw new Error("origin is required");if(void 0===e||null===e)throw new Error("distance is required");if(void 0===n||null===n)throw new Error("bearing is required");if(!(e>=0))throw new Error("distance must be greater than 0");var a=x(e,o,"meters"),u=q(t),h=function(t,e,n,i){i=void 0===i?mo:Number(i);var r=e/i,o=t[0]*Math.PI/180,s=E(t[1]),a=E(n),u=r*Math.cos(a),h=s+u;Math.abs(h)>Math.PI/2&&(h=h>0?Math.PI-h:-Math.PI-h);var c=Math.log(Math.tan(h/2+Math.PI/4)/Math.tan(s/2+Math.PI/4)),l=Math.abs(c)>1e-11?u/c:Math.cos(s),p=r*Math.sin(a)/l;return[(180*(o+p)/Math.PI+540)%360-180,180*h/Math.PI]}(u,a,n);return h[0]+=h[0]-u[0]>180?-360:u[0]-h[0]>180?360:0,i(h,s)}function Vn(t,e,n,i,r,o){for(var s=0;s<t.length;s++){var a=t[s],u=t[s+1];s===t.length-1&&(u=t[0]),i=Wn(a,u,e),n<=0&&i>0?function(t,e,n){return Wn(t,e,n)<0}(e,a,r)||(r=a):n>0&&i<=0&&(function(t,e,n){return Wn(t,e,n)>0}(e,a,o)||(o=a)),n=i}return[r,o]}function Wn(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(n[0]-t[0])*(e[1]-t[1])}function Kn(t){if(!t)throw new Error("line is required");var e=t.geometry?t.geometry.type:t.type;if(!Array.isArray(t)&&"LineString"!==e)throw new Error("geometry must be a LineString");for(var n,i,r=U(t),o=0,s=1;s<r.length;)n=i||r[0],o+=((i=r[s])[0]-n[0])*(i[1]+n[1]),s++;return o>0}function Hn(t,e){switch("Feature"===t.type?t.geometry.type:t.type){case"GeometryCollection":return A(t,function(t){Hn(t,e)}),t;case"LineString":return Zn(U(t),e),t;case"Polygon":return Jn(U(t),e),t;case"MultiLineString":return U(t).forEach(function(t){Zn(t,e)}),t;case"MultiPolygon":return U(t).forEach(function(t){Jn(t,e)}),t;case"Point":case"MultiPoint":return t}}function Zn(t,e){Kn(t)===e&&t.reverse()}function Jn(t,e){Kn(t[0])!==e&&t[0].reverse();for(var n=1;n<t.length;n++)Kn(t[n])===e&&t[n].reverse()}function Qn(t,e,n,i){i=i||{};for(var r=Object.keys(Es),o=0;o<r.length;o++){var s=r[o],a=i[s];a=void 0!==a&&null!==a?a:Es[s],xs[s]=a}xs.verbose&&console.log("MarchingSquaresJS-isoBands: computing isobands for ["+e+":"+(e+n)+"]");var u,h=function(t,e,n){for(var i=t.length-1,r=t[0].length-1,o={rows:i,cols:r,cells:[]},s=e+Math.abs(n),a=0;a<i;++a){o.cells[a]=[];for(var u=0;u<r;++u){var h=0,c=t[a+1][u],l=t[a+1][u+1],p=t[a][u+1],f=t[a][u];if(!(isNaN(c)||isNaN(l)||isNaN(p)||isNaN(f))){h|=c<e?0:c>s?128:64,h|=l<e?0:l>s?32:16,h|=p<e?0:p>s?8:4;var d=+(h|=f<e?0:f>s?2:1),g=0;if(17===h||18===h||33===h||34===h||38===h||68===h||72===h||98===h||102===h||132===h||136===h||137===h||152===h||153===h){var y=(c+l+p+f)/4;g=y>s?2:y<e?0:1,34===h?1===g?h=35:0===g&&(h=136):136===h?1===g?(h=35,g=4):0===g&&(h=34):17===h?1===g?(h=155,g=4):0===g&&(h=153):68===h?1===g?(h=103,g=4):0===g&&(h=102):153===h?1===g&&(h=155):102===h?1===g&&(h=103):152===h?g<2&&(h=156,g=1):137===h?g<2&&(h=139,g=1):98===h?g<2&&(h=99,g=1):38===h?g<2&&(h=39,g=1):18===h?g>0?(h=156,g=4):h=152:33===h?g>0?(h=139,g=4):h=137:72===h?g>0?(h=99,g=4):h=98:132===h&&(g>0?(h=39,g=4):h=38)}if(0!=h&&170!=h){var _,v,m,E,x,b,w,C;_=v=m=E=x=b=w=C=.5;var O=[];1===h?(m=1-$n(e,p,f),C=1-$n(e,c,f),O.push(aa[h])):169===h?(m=$n(s,f,p),C=$n(s,f,c),O.push(aa[h])):4===h?(b=1-$n(e,l,p),E=$n(e,f,p),O.push(oa[h])):166===h?(b=$n(s,p,l),E=1-$n(s,p,f),O.push(oa[h])):16===h?(x=$n(e,p,l),v=$n(e,c,l),O.push(ra[h])):154===h?(x=1-$n(s,l,p),v=1-$n(s,l,c),O.push(ra[h])):64===h?(w=$n(e,f,c),_=1-$n(e,l,c),O.push(ha[h])):106===h?(w=1-$n(s,c,f),_=$n(s,c,l),O.push(ha[h])):168===h?(E=$n(s,f,p),m=$n(e,f,p),C=$n(e,f,c),w=$n(s,f,c),O.push(sa[h]),O.push(aa[h])):2===h?(E=1-$n(e,p,f),m=1-$n(s,p,f),C=1-$n(s,c,f),w=1-$n(e,c,f),O.push(sa[h]),O.push(aa[h])):162===h?(x=$n(s,p,l),b=$n(e,p,l),E=1-$n(e,p,f),m=1-$n(s,p,f),O.push(sa[h]),O.push(aa[h])):8===h?(x=1-$n(e,l,p),b=1-$n(s,l,p),E=$n(s,f,p),m=$n(e,f,p),O.push(ra[h]),O.push(oa[h])):138===h?(x=1-$n(e,l,p),b=1-$n(s,l,p),_=1-$n(s,l,c),v=1-$n(e,l,c),O.push(ra[h]),O.push(oa[h])):32===h?(x=$n(s,p,l),b=$n(e,p,l),_=$n(e,c,l),v=$n(s,c,l),O.push(ra[h]),O.push(oa[h])):42===h?(C=1-$n(s,c,f),w=1-$n(e,c,f),_=$n(e,c,l),v=$n(s,c,l),O.push(ua[h]),O.push(ha[h])):128===h&&(C=$n(e,f,c),w=$n(s,f,c),_=1-$n(s,l,c),v=1-$n(e,l,c),O.push(ua[h]),O.push(ha[h])),5===h?(b=1-$n(e,l,p),C=1-$n(e,c,f),O.push(oa[h])):165===h?(b=$n(s,p,l),C=$n(s,f,c),O.push(oa[h])):20===h?(E=$n(e,f,p),v=$n(e,c,l),O.push(sa[h])):150===h?(E=1-$n(s,p,f),v=1-$n(s,l,c),O.push(sa[h])):80===h?(x=$n(e,p,l),w=$n(e,f,c),O.push(ra[h])):90===h?(x=1-$n(s,l,p),w=1-$n(s,c,f),O.push(ra[h])):65===h?(m=1-$n(e,p,f),_=1-$n(e,l,c),O.push(aa[h])):105===h?(m=$n(s,f,p),_=$n(s,c,l),O.push(aa[h])):160===h?(x=$n(s,p,l),b=$n(e,p,l),C=$n(e,f,c),w=$n(s,f,c),O.push(ra[h]),O.push(oa[h])):10===h?(x=1-$n(e,l,p),b=1-$n(s,l,p),C=1-$n(s,c,f),w=1-$n(e,c,f),O.push(ra[h]),O.push(oa[h])):130===h?(E=1-$n(e,p,f),m=1-$n(s,p,f),_=1-$n(s,l,c),v=1-$n(e,l,c),O.push(sa[h]),O.push(aa[h])):40===h?(E=$n(s,f,p),m=$n(e,f,p),_=$n(e,c,l),v=$n(s,c,l),O.push(sa[h]),O.push(aa[h])):101===h?(b=$n(s,p,l),_=$n(s,c,l),O.push(oa[h])):69===h?(b=1-$n(e,l,p),_=1-$n(e,l,c),O.push(oa[h])):149===h?(C=$n(s,f,c),v=1-$n(s,l,c),O.push(ua[h])):21===h?(C=1-$n(e,c,f),v=$n(e,c,l),O.push(ua[h])):86===h?(E=1-$n(s,p,f),w=1-$n(s,c,f),O.push(sa[h])):84===h?(E=$n(e,f,p),w=$n(e,f,c),O.push(sa[h])):89===h?(x=1-$n(s,l,p),m=$n(s,f,p),O.push(aa[h])):81===h?(x=$n(e,p,l),m=1-$n(e,p,f),O.push(aa[h])):96===h?(x=$n(s,p,l),b=$n(e,p,l),w=$n(e,f,c),_=$n(s,c,l),O.push(ra[h]),O.push(oa[h])):74===h?(x=1-$n(e,l,p),b=1-$n(s,l,p),w=1-$n(s,c,f),_=1-$n(e,l,c),O.push(ra[h]),O.push(oa[h])):24===h?(x=1-$n(s,l,p),E=$n(s,f,p),m=$n(e,f,p),v=$n(e,c,l),O.push(ra[h]),O.push(aa[h])):146===h?(x=$n(e,p,l),E=1-$n(e,p,f),m=1-$n(s,p,f),v=1-$n(s,l,c),O.push(ra[h]),O.push(aa[h])):6===h?(b=1-$n(e,l,p),E=1-$n(s,p,f),C=1-$n(s,c,f),w=1-$n(e,c,f),O.push(oa[h]),O.push(sa[h])):164===h?(b=$n(s,p,l),E=$n(e,f,p),C=$n(e,f,c),w=$n(s,f,c),O.push(oa[h]),O.push(sa[h])):129===h?(m=1-$n(e,p,f),C=$n(s,f,c),_=1-$n(s,l,c),v=1-$n(e,l,c),O.push(aa[h]),O.push(ua[h])):41===h?(m=$n(s,f,p),C=1-$n(e,c,f),_=$n(e,c,l),v=$n(s,c,l),O.push(aa[h]),O.push(ua[h])):66===h?(E=1-$n(e,p,f),m=1-$n(s,p,f),w=1-$n(s,c,f),_=1-$n(e,l,c),O.push(sa[h]),O.push(aa[h])):104===h?(E=$n(s,f,p),m=$n(e,f,p),w=$n(e,f,c),_=$n(s,c,l),O.push(aa[h]),O.push(ca[h])):144===h?(x=$n(e,p,l),C=$n(e,f,c),w=$n(s,f,c),v=1-$n(s,l,c),O.push(ra[h]),O.push(ha[h])):26===h?(x=1-$n(s,l,p),C=1-$n(s,c,f),w=1-$n(e,c,f),v=$n(e,c,l),O.push(ra[h]),O.push(ha[h])):36===h?(b=$n(s,p,l),E=$n(e,f,p),_=$n(e,c,l),v=$n(s,c,l),O.push(oa[h]),O.push(sa[h])):134===h?(b=1-$n(e,l,p),E=1-$n(s,p,f),_=1-$n(s,l,c),v=1-$n(e,l,c),O.push(oa[h]),O.push(sa[h])):9===h?(x=1-$n(e,l,p),b=1-$n(s,l,p),m=$n(s,f,p),C=1-$n(e,c,f),O.push(ra[h]),O.push(oa[h])):161===h?(x=$n(s,p,l),b=$n(e,p,l),m=1-$n(e,p,f),C=$n(s,f,c),O.push(ra[h]),O.push(oa[h])):37===h?(b=$n(s,p,l),C=1-$n(e,c,f),_=$n(e,c,l),v=$n(s,c,l),O.push(oa[h]),O.push(ua[h])):133===h?(b=1-$n(e,l,p),C=$n(s,f,c),_=1-$n(s,l,c),v=1-$n(e,l,c),O.push(oa[h]),O.push(ua[h])):148===h?(E=$n(e,f,p),C=$n(e,f,c),w=$n(s,f,c),v=1-$n(s,l,c),O.push(sa[h]),O.push(ha[h])):22===h?(E=1-$n(s,p,f),C=1-$n(s,c,f),w=1-$n(e,c,f),v=$n(e,c,l),O.push(sa[h]),O.push(ha[h])):82===h?(x=$n(e,p,l),E=1-$n(e,p,f),m=1-$n(s,p,f),w=1-$n(s,c,f),O.push(ra[h]),O.push(aa[h])):88===h?(x=1-$n(s,l,p),E=$n(s,f,p),m=$n(e,f,p),w=$n(e,f,c),O.push(ra[h]),O.push(aa[h])):73===h?(x=1-$n(e,l,p),b=1-$n(s,l,p),m=$n(s,f,p),_=1-$n(e,l,c),O.push(ra[h]),O.push(oa[h])):97===h?(x=$n(s,p,l),b=$n(e,p,l),m=1-$n(e,p,f),_=$n(s,c,l),O.push(ra[h]),O.push(oa[h])):145===h?(x=$n(e,p,l),m=1-$n(e,p,f),C=$n(s,f,c),v=1-$n(s,l,c),O.push(ra[h]),O.push(ua[h])):25===h?(x=1-$n(s,l,p),m=$n(s,f,p),C=1-$n(e,c,f),v=$n(e,c,l),O.push(ra[h]),O.push(ua[h])):70===h?(b=1-$n(e,l,p),E=1-$n(s,p,f),w=1-$n(s,c,f),_=1-$n(e,l,c),O.push(oa[h]),O.push(sa[h])):100===h?(b=$n(s,p,l),E=$n(e,f,p),w=$n(e,f,c),_=$n(s,c,l),O.push(oa[h]),O.push(sa[h])):34===h?(0===g?(x=1-$n(e,l,p),b=1-$n(s,l,p),E=$n(s,f,p),m=$n(e,f,p),C=$n(e,f,c),w=$n(s,f,c),_=1-$n(s,l,c),v=1-$n(e,l,c)):(x=$n(s,p,l),b=$n(e,p,l),E=1-$n(e,p,f),m=1-$n(s,p,f),C=1-$n(s,c,f),w=1-$n(e,c,f),_=$n(e,c,l),v=$n(s,c,l)),O.push(ra[h]),O.push(oa[h]),O.push(ua[h]),O.push(ha[h])):35===h?(4===g?(x=1-$n(e,l,p),b=1-$n(s,l,p),E=$n(s,f,p),m=$n(e,f,p),C=$n(e,f,c),w=$n(s,f,c),_=1-$n(s,l,c),v=1-$n(e,l,c)):(x=$n(s,p,l),b=$n(e,p,l),E=1-$n(e,p,f),m=1-$n(s,p,f),C=1-$n(s,c,f),w=1-$n(e,c,f),_=$n(e,c,l),v=$n(s,c,l)),O.push(ra[h]),O.push(oa[h]),O.push(aa[h]),O.push(ha[h])):136===h?(0===g?(x=$n(s,p,l),b=$n(e,p,l),E=1-$n(e,p,f),m=1-$n(s,p,f),C=1-$n(s,c,f),w=1-$n(e,c,f),_=$n(e,c,l),v=$n(s,c,l)):(x=1-$n(e,l,p),b=1-$n(s,l,p),E=$n(s,f,p),m=$n(e,f,p),C=$n(e,f,c),w=$n(s,f,c),_=1-$n(s,l,c),v=1-$n(e,l,c)),O.push(ra[h]),O.push(oa[h]),O.push(ua[h]),O.push(ha[h])):153===h?(0===g?(x=$n(e,p,l),m=1-$n(e,p,f),C=1-$n(e,c,f),v=$n(e,c,l)):(x=1-$n(s,l,p),m=$n(s,f,p),C=$n(s,f,c),v=1-$n(s,l,c)),O.push(ra[h]),O.push(aa[h])):102===h?(0===g?(b=1-$n(e,l,p),E=$n(e,f,p),w=$n(e,f,c),_=1-$n(e,l,c)):(b=$n(s,p,l),E=1-$n(s,p,f),w=1-$n(s,c,f),_=$n(s,c,l)),O.push(oa[h]),O.push(ha[h])):155===h?(4===g?(x=$n(e,p,l),m=1-$n(e,p,f),C=1-$n(e,c,f),v=$n(e,c,l)):(x=1-$n(s,l,p),m=$n(s,f,p),C=$n(s,f,c),v=1-$n(s,l,c)),O.push(ra[h]),O.push(ua[h])):103===h?(4===g?(b=1-$n(e,l,p),E=$n(e,f,p),w=$n(e,f,c),_=1-$n(e,l,c)):(b=$n(s,p,l),E=1-$n(s,p,f),w=1-$n(s,c,f),_=$n(s,c,l)),O.push(oa[h]),O.push(sa[h])):152===h?(0===g?(x=$n(e,p,l),E=1-$n(e,p,f),m=1-$n(s,p,f),C=1-$n(s,c,f),w=1-$n(e,c,f),v=$n(e,c,l)):(x=1-$n(s,l,p),E=$n(s,f,p),m=$n(e,f,p),C=$n(e,f,c),w=$n(s,f,c),v=1-$n(s,l,c)),O.push(ra[h]),O.push(sa[h]),O.push(aa[h])):156===h?(4===g?(x=$n(e,p,l),E=1-$n(e,p,f),m=1-$n(s,p,f),C=1-$n(s,c,f),w=1-$n(e,c,f),v=$n(e,c,l)):(x=1-$n(s,l,p),E=$n(s,f,p),m=$n(e,f,p),C=$n(e,f,c),w=$n(s,f,c),v=1-$n(s,l,c)),O.push(ra[h]),O.push(aa[h]),O.push(ha[h])):137===h?(0===g?(x=$n(s,p,l),b=$n(e,p,l),m=1-$n(e,p,f),C=1-$n(e,c,f),_=$n(e,c,l),v=$n(s,c,l)):(x=1-$n(e,l,p),b=1-$n(s,l,p),m=$n(s,f,p),C=$n(s,f,c),_=1-$n(s,l,c),v=1-$n(e,l,c)),O.push(ra[h]),O.push(oa[h]),O.push(aa[h])):139===h?(4===g?(x=$n(s,p,l),b=$n(e,p,l),m=1-$n(e,p,f),C=1-$n(e,c,f),_=$n(e,c,l),v=$n(s,c,l)):(x=1-$n(e,l,p),b=1-$n(s,l,p),m=$n(s,f,p),C=$n(s,f,c),_=1-$n(s,l,c),v=1-$n(e,l,c)),O.push(ra[h]),O.push(oa[h]),O.push(ua[h])):98===h?(0===g?(x=1-$n(e,l,p),b=1-$n(s,l,p),E=$n(s,f,p),m=$n(e,f,p),w=$n(e,f,c),_=1-$n(e,l,c)):(x=$n(s,p,l),b=$n(e,p,l),E=1-$n(e,p,f),m=1-$n(s,p,f),w=1-$n(s,c,f),_=$n(s,c,l)),O.push(ra[h]),O.push(oa[h]),O.push(ha[h])):99===h?(4===g?(x=1-$n(e,l,p),b=1-$n(s,l,p),E=$n(s,f,p),m=$n(e,f,p),w=$n(e,f,c),_=1-$n(e,l,c)):(x=$n(s,p,l),b=$n(e,p,l),E=1-$n(e,p,f),m=1-$n(s,p,f),w=1-$n(s,c,f),_=$n(s,c,l)),O.push(ra[h]),O.push(oa[h]),O.push(aa[h])):38===h?(0===g?(b=1-$n(e,l,p),E=$n(e,f,p),C=$n(e,f,c),w=$n(s,f,c),_=1-$n(s,l,c),v=1-$n(e,l,c)):(b=$n(s,p,l),E=1-$n(s,p,f),C=1-$n(s,c,f),w=1-$n(e,c,f),_=$n(e,c,l),v=$n(s,c,l)),O.push(oa[h]),O.push(ua[h]),O.push(ha[h])):39===h?(4===g?(b=1-$n(e,l,p),E=$n(e,f,p),C=$n(e,f,c),w=$n(s,f,c),_=1-$n(s,l,c),v=1-$n(e,l,c)):(b=$n(s,p,l),E=1-$n(s,p,f),C=1-$n(s,c,f),w=1-$n(e,c,f),_=$n(e,c,l),v=$n(s,c,l)),O.push(oa[h]),O.push(sa[h]),O.push(ha[h])):85===h&&(x=1,b=0,E=1,m=0,C=0,w=1,_=0,v=1),(_<0||_>1||v<0||v>1||x<0||x>1||E<0||E>1||C<0||C>1||w<0||w>1)&&console.log("MarchingSquaresJS-isoBands: "+h+" "+d+" "+c+","+l+","+p+","+f+" "+g+" "+_+" "+v+" "+x+" "+b+" "+E+" "+m+" "+C+" "+w),o.cells[a][u]={cval:h,cval_real:d,flipped:g,topleft:_,topright:v,righttop:x,rightbottom:b,bottomright:E,bottomleft:m,leftbottom:C,lefttop:w,edges:O}}}}}return o}(t,e,n);return xs.polygons?(xs.verbose&&console.log("MarchingSquaresJS-isoBands: returning single polygons for each grid cell"),u=function(t){var e=[],n=0;return t.cells.forEach(function(t,i){t.forEach(function(t,r){if(void 0!==t){var o=pa[t.cval](t);"object"==typeof o&&ti(o)?"object"==typeof o[0]&&ti(o[0])?"object"==typeof o[0][0]&&ti(o[0][0])?o.forEach(function(t){t.forEach(function(t){t[0]+=r,t[1]+=i}),e[n++]=t}):(o.forEach(function(t){t[0]+=r,t[1]+=i}),e[n++]=o):console.log("MarchingSquaresJS-isoBands: bandcell polygon with malformed coordinates"):console.log("MarchingSquaresJS-isoBands: bandcell polygon with null coordinates")}})}),e}(h)):(xs.verbose&&console.log("MarchingSquaresJS-isoBands: returning polygon paths for entire data grid"),u=function(t){for(var e=[],n=t.rows,i=t.cols,r=[],o=0;o<n;o++)for(var s=0;s<i;s++)if(void 0!==t.cells[o][s]&&t.cells[o][s].edges.length>0){var a=t.cells[o][s],u=function(t){if(t.edges.length>0){var e=t.edges[t.edges.length-1],n=t.cval_real;switch(e){case 0:return n&ws?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[t.topleft,1],x:0,y:-1,o:0};case 1:return n&Cs?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 2:return n&Cs?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[t.topleft,1],x:0,y:-1,o:0};case 3:return n&Os?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 4:return n&ws?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[t.topright,1],x:0,y:-1,o:1};case 5:return n&Cs?{p:[t.topright,1],x:0,y:-1,o:1}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 6:return n&Cs?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[t.topright,1],x:0,y:-1,o:1};case 7:return n&Os?{p:[t.topright,1],x:0,y:-1,o:1}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 8:return n&Cs?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[1,t.righttop],x:-1,y:0,o:1};case 9:return n&Os?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 10:return n&Os?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[1,t.righttop],x:-1,y:0,o:1};case 11:return n&bs?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[0,t.lefttop],x:1,y:0,o:1};case 12:return n&Cs?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 13:return n&Os?{p:[1,t.rightbottom],x:-1,y:0,o:0}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 14:return n&Os?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 15:return n&bs?{p:[1,t.rightbottom],x:-1,y:0,o:0}:{p:[0,t.lefttop],x:1,y:0,o:1};case 16:return n&Cs?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[0,t.leftbottom],x:1,y:0,o:0};case 17:return n&bs?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[0,t.lefttop],x:1,y:0,o:1};case 18:return n&Os?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 19:return n&bs?{p:[t.bottomleft,0],x:0,y:1,o:0}:{p:[0,t.lefttop],x:1,y:0,o:1};case 20:return n&bs?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[0,t.leftbottom],x:1,y:0,o:0};case 21:return n&ws?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[t.topright,1],x:0,y:-1,o:1};case 22:return n&bs?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[0,t.lefttop],x:1,y:0,o:1};case 23:return n&ws?{p:[0,t.lefttop],x:1,y:0,o:1}:{p:[t.topright,1],x:0,y:-1,o:1};default:console.log("MarchingSquaresJS-isoBands: edge index out of range!"),console.log(t)}}return null}(a),h=null,c=s,l=o;null!==u&&r.push([u.p[0]+c,u.p[1]+l]);do{if(null===(h=function(t,e,n,i){var r,o,s,a,u,h=t.cval;switch(e){case-1:switch(i){case 0:r=oa[h],s=Ds[h],a=Fs[h],u=js[h];break;default:r=ra[h],s=Ms[h],a=Ps[h],u=As[h]}break;case 1:switch(i){case 0:r=ua[h],s=Ws[h],a=Ks[h],u=Hs[h];break;default:r=ha[h],s=Us[h],a=zs[h],u=Vs[h]}break;default:switch(n){case-1:switch(i){case 0:r=ca[h],s=Is[h],a=Ss[h],u=Ts[h];break;default:r=la[h],s=Rs[h],a=Ns[h],u=Ls[h]}break;case 1:switch(i){case 0:r=aa[h],s=Gs[h],a=ks[h],u=Bs[h];break;default:r=sa[h],s=Ys[h],a=Xs[h],u=qs[h]}}}if(o=t.edges.indexOf(r),void 0===t.edges[o])return null;switch(function(t,e){delete t.edges[e];for(var n=e+1;n<t.edges.length;n++)t.edges[n-1]=t.edges[n];t.edges.pop()}(t,o),h=t.cval_real,r){case 0:h&ws?(e=t.topleft,n=1):(e=1,n=t.righttop);break;case 1:h&Cs?(e=1,n=t.rightbottom):(e=t.topleft,n=1);break;case 2:h&Cs?(e=t.topleft,n=1):(e=t.bottomright,n=0);break;case 3:h&Os?(e=t.bottomleft,n=0):(e=t.topleft,n=1);break;case 4:h&ws?(e=t.topright,n=1):(e=1,n=t.righttop);break;case 5:h&Cs?(e=1,n=t.rightbottom):(e=t.topright,n=1);break;case 6:h&Cs?(e=t.topright,n=1):(e=t.bottomright,n=0);break;case 7:h&Os?(e=t.bottomleft,n=0):(e=t.topright,n=1);break;case 8:h&Cs?(e=1,n=t.righttop):(e=t.bottomright,n=0);break;case 9:h&Os?(e=t.bottomleft,n=0):(e=1,n=t.righttop);break;case 10:h&Os?(e=1,n=t.righttop):(e=0,n=t.leftbottom);break;case 11:h&bs?(e=0,n=t.lefttop):(e=1,n=t.righttop);break;case 12:h&Cs?(e=1,n=t.rightbottom):(e=t.bottomright,n=0);break;case 13:h&Os?(e=t.bottomleft,n=0):(e=1,n=t.rightbottom);break;case 14:h&Os?(e=1,n=t.rightbottom):(e=0,n=t.leftbottom);break;case 15:h&bs?(e=0,n=t.lefttop):(e=1,n=t.rightbottom);break;case 16:h&Cs?(e=0,n=t.leftbottom):(e=t.bottomright,n=0);break;case 17:h&bs?(e=0,n=t.lefttop):(e=t.bottomright,n=0);break;case 18:h&Os?(e=t.bottomleft,n=0):(e=0,n=t.leftbottom);break;case 19:h&bs?(e=0,n=t.lefttop):(e=t.bottomleft,n=0);break;case 20:h&bs?(e=0,n=t.leftbottom):(e=t.topleft,n=1);break;case 21:h&ws?(e=t.topright,n=1):(e=0,n=t.leftbottom);break;case 22:h&bs?(e=0,n=t.lefttop):(e=t.topleft,n=1);break;case 23:h&ws?(e=t.topright,n=1):(e=0,n=t.lefttop);break;default:return console.log("MarchingSquaresJS-isoBands: edge index out of range!"),console.log(t),null}return void 0!==e&&void 0!==n&&void 0!==s&&void 0!==a&&void 0!==u||(console.log("MarchingSquaresJS-isoBands: undefined value!"),console.log(t),console.log(e+" "+n+" "+s+" "+a+" "+u)),{p:[e,n],x:s,y:a,o:u}}(t.cells[l][c],u.x,u.y,u.o)))break;if(r.push([h.p[0]+c,h.p[1]+l]),c+=h.x,l+=h.y,u=h,l<0||l>=n||c<0||c>=i||void 0===t.cells[l][c]){c-=h.x,l-=h.y;var p=function(t,e,n,i,r,o){for(var s=t.cells[n][e],a=s.cval_real,u=e+i,h=n+r,c=[],l=!1;!l;){if(void 0===t.cells[h]||void 0===t.cells[h][u])if(h-=r,u-=i,s=t.cells[h][u],a=s.cval_real,-1===r)if(0===o)if(a&Os)c.push([u,h]),i=-1,r=0,o=0;else{if(!(a&Cs)){c.push([u+s.bottomright,h]),i=0,r=1,o=1,l=!0;break}c.push([u+1,h]),i=1,r=0,o=0}else{if(!(a&Os)){if(a&Cs){c.push([u+s.bottomright,h]),i=0,r=1,o=1,l=!0;break}c.push([u+s.bottomleft,h]),i=0,r=1,o=0,l=!0;break}c.push([u,h]),i=-1,r=0,o=0}else if(1===r)if(0===o){if(!(a&ws)){if(a&bs){c.push([u+s.topleft,h+1]),i=0,r=-1,o=0,l=!0;break}c.push([u+s.topright,h+1]),i=0,r=-1,o=1,l=!0;break}c.push([u+1,h+1]),i=1,r=0,o=1}else c.push([u+1,h+1]),i=1,r=0,o=1;else if(-1===i)if(0===o){if(!(a&bs)){if(a&Os){c.push([u,h+s.leftbottom]),i=1,r=0,o=0,l=!0;break}c.push([u,h+s.lefttop]),i=1,r=0,o=1,l=!0;break}c.push([u,h+1]),i=0,r=1,o=0}else{if(!(a&bs)){console.log("MarchingSquaresJS-isoBands: wtf");break}c.push([u,h+1]),i=0,r=1,o=0}else{if(1!==i){console.log("MarchingSquaresJS-isoBands: we came from nowhere!");break}if(0===o){if(!(a&Cs)){c.push([u+1,h+s.rightbottom]),i=-1,r=0,o=0,l=!0;break}c.push([u+1,h]),i=0,r=-1,o=1}else{if(!(a&Cs)){if(a&ws){c.push([u+1,h+s.righttop]),i=-1,r=0,o=1;break}c.push([u+1,h+s.rightbottom]),i=-1,r=0,o=0,l=!0;break}c.push([u+1,h]),i=0,r=-1,o=1}}else if(s=t.cells[h][u],a=s.cval_real,-1===i)if(0===o)if(void 0!==t.cells[h-1]&&void 0!==t.cells[h-1][u])i=0,r=-1,o=1;else{if(!(a&Os)){c.push([u+s.bottomright,h]),i=0,r=1,o=1,l=!0;break}c.push([u,h])}else{if(!(a&bs)){console.log("MarchingSquaresJS-isoBands: found entry from top at "+u+","+h);break}console.log("MarchingSquaresJS-isoBands: proceeding in x-direction!")}else if(1===i){if(0===o){console.log("MarchingSquaresJS-isoBands: wtf");break}if(void 0!==t.cells[h+1]&&void 0!==t.cells[h+1][u])i=0,r=1,o=0;else{if(!(a&ws)){c.push([u+s.topleft,h+1]),i=0,r=-1,o=0,l=!0;break}c.push([u+1,h+1]),i=1,r=0,o=1}}else if(-1===r){if(1!==o){console.log("MarchingSquaresJS-isoBands: wtf");break}if(void 0!==t.cells[h][u+1])i=1,r=0,o=1;else{if(!(a&Cs)){c.push([u+1,h+s.righttop]),i=-1,r=0,o=1,l=!0;break}c.push([u+1,h]),i=0,r=-1,o=1}}else{if(1!==r){console.log("MarchingSquaresJS-isoBands: where did we came from???");break}if(0!==o){console.log("MarchingSquaresJS-isoBands: wtf");break}if(void 0!==t.cells[h][u-1])i=-1,r=0,o=0;else{if(!(a&bs)){c.push([u,h+s.leftbottom]),i=1,r=0,o=0,l=!0;break}c.push([u,h+1]),i=0,r=1,o=0}}if(h+=r,(u+=i)===e&&h===n)break}return{path:c,i:u,j:h,x:i,y:r,o:o}}(t,c,l,h.x,h.y,h.o);if(null===p)break;p.path.forEach(function(t){r.push(t)}),c=p.i,l=p.j,u=p}}while(void 0!==t.cells[l][c]&&t.cells[l][c].edges.length>0);e.push(r),r=[],t.cells[o][s].edges.length>0&&s--}return e}(h)),"function"==typeof xs.successCallback&&xs.successCallback(u),u}function $n(t,e,n){return(t-e)/(n-e)}function ti(t){return t.constructor.toString().indexOf("Array")>-1}function ei(t,e,n){if(!C(n=n||{}))throw new Error("options is invalid");var i=n.pivot,r=n.mutate;if(!t)throw new Error("geojson is required");if(void 0===e||null===e||isNaN(e))throw new Error("angle is required");return 0===e?t:(i||(i=he(t)),!1!==r&&void 0!==r||(t=Ft(t)),S(t,function(t){var n=He(i,t)+e,r=Je(i,t),o=U(zn(i,r,n));t[0]=o[0],t[1]=o[1]}),t)}function ni(t,e,n){if(!C(n=n||{}))throw new Error("options is invalid");var i=n.origin,r=n.mutate;if(!t)throw new Error("geojson required");if("number"!=typeof e||0===e)throw new Error("invalid factor");var o=Array.isArray(i)||"object"==typeof i;return!0!==r&&(t=Ft(t)),"FeatureCollection"!==t.type||o?ii(t,e,i):(L(t,function(n,r){t.features[r]=ii(n,e,i)}),t)}function ii(t,e,n){var r="Point"===J(t);return n=function(t,e){if(void 0!==e&&null!==e||(e="centroid"),Array.isArray(e)||"object"==typeof e)return q(e);var n=t.bbox?t.bbox:X(t),r=n[0],o=n[1],s=n[2],a=n[3];switch(e){case"sw":case"southwest":case"westsouth":case"bottomleft":return i([r,o]);case"se":case"southeast":case"eastsouth":case"bottomright":return i([s,o]);case"nw":case"northwest":case"westnorth":case"topleft":return i([r,a]);case"ne":case"northeast":case"eastnorth":case"topright":return i([s,a]);case"center":return ue(t);case void 0:case null:case"centroid":return he(t);default:throw new Error("invalid origin")}}(t,n),1===e||r?t:(S(t,function(t){var i=Je(n,t),r=He(n,t),o=U(zn(n,i*e,r));t[0]=o[0],t[1]=o[1],3===t.length&&(t[2]*=e)}),t)}function ri(t){var e=t[0],n=t[1];return[n[0]-e[0],n[1]-e[1]]}function oi(t,e){return t[0]*e[1]-e[0]*t[1]}function si(t,e,n){var i=[],r=_(e,n),o=U(t),s=[];return o.forEach(function(t,e){if(e!==o.length-1){var n=function(t,e,n){var i=Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1])),r=t[0]+n*(e[1]-t[1])/i,o=e[0]+n*(e[1]-t[1])/i,s=t[1]+n*(t[0]-e[0])/i,a=e[1]+n*(t[0]-e[0])/i;return[[r,s],[o,a]]}(t,o[e+1],r);if(i.push(n),e>0){var a=i[e-1],u=function(t,e){return!function(t,e){return 0===oi(ri(t),ri(e))}(t,e)&&function(t,e){var n=t[0],i=ri(t),r=e[0],o=ri(e),s=oi(i,o);return function(t,e){return[t[0]+e[0],t[1]+e[1]]}(n,function(t,e){return[t*e[0],t*e[1]]}(oi(function(t,e){return[t[0]-e[0],t[1]-e[1]]}(r,n),o)/s,i))}(t,e)}(n,a);!1!==u&&(a[1]=u,n[0]=u),s.push(a[0]),e===o.length-2&&(s.push(n[0]),s.push(n[1]))}2===o.length&&(s.push(n[0]),s.push(n[1]))}}),a(s,t.properties)}function ai(t,e,n){var i=e[0]-t[0],r=e[1]-t[1],o=n[0]-e[0],s=n[1]-e[1];return Math.sign(i*s-o*r)}function ui(t,e){return e.geometry.coordinates[0].every(function(e){return Tt(i(e),t)})}function hi(t,e){for(var n=0;n<t.coordinates.length-1;n++)if(function(t,e,n){var i=n[0]-t[0],r=n[1]-t[1],o=e[0]-t[0],s=e[1]-t[1];return i*s-r*o==0&&(Math.abs(o)>=Math.abs(s)?o>0?t[0]<=n[0]&&n[0]<=e[0]:e[0]<=n[0]&&n[0]<=t[0]:s>0?t[1]<=n[1]&&n[1]<=e[1]:e[1]<=n[1]&&n[1]<=t[1])}(t.coordinates[n],t.coordinates[n+1],e.coordinates))return!0;return!1}function ci(t,e){return Ve(e,Rn(t)).features.length>0}function li(t,e){return!(t[0]>e[0]||t[2]<e[2]||t[1]>e[1]||t[3]<e[3])}function pi(t,e){return t[0]===e[0]&&t[1]===e[1]}function fi(t,e){for(var n=!1,i=!1,r=t.coordinates.length,o=0;o<r&&!n&&!i;){for(var s=0;s<e.coordinates.length-1;s++){var a=!0;0!==s&&s!==e.coordinates.length-2||(a=!1),yi(e.coordinates[s],e.coordinates[s+1],t.coordinates[o],a)?n=!0:i=!0}o++}return n&&i}function di(t,e){return Ve(t,Rn(e)).features.length>0}function gi(t,e){for(var n=!1,r=!1,o=t.coordinates[0].length,s=0;s<o&&n&&r;)Tt(i(t.coordinates[0][s]),e)?n=!0:r=!0,s++;return r&&r}function yi(t,e,n,i){var r=n[0]-t[0],o=n[1]-t[1],s=e[0]-t[0],a=e[1]-t[1];return 0==r*a-o*s&&(i?Math.abs(s)>=Math.abs(a)?s>0?t[0]<=n[0]&&n[0]<=e[0]:e[0]<=n[0]&&n[0]<=t[0]:a>0?t[1]<=n[1]&&n[1]<=e[1]:e[1]<=n[1]&&n[1]<=t[1]:Math.abs(s)>=Math.abs(a)?s>0?t[0]<n[0]&&n[0]<e[0]:e[0]<n[0]&&n[0]<t[0]:a>0?t[1]<n[1]&&n[1]<e[1]:e[1]<n[1]&&n[1]<t[1])}function _i(t){return t.coordinates.map(function(e){return{type:t.type.replace("Multi",""),coordinates:e}})}function vi(t,e){return t.hasOwnProperty("coordinates")?t.coordinates.length===e.coordinates.length:t.length===e.length}function mi(t,e){return Ea(t,e,{strict:!0})}function Ei(t,e){if(!t)throw new Error("feature1 is required");if(!e)throw new Error("feature2 is required");var n=J(t);if(n!==J(e))throw new Error("features must be of the same type");if("Point"===n)throw new Error("Point geometry not supported");if(new ba({precision:6}).compare(t,e))return!1;var i=0;switch(n){case"MultiPoint":var r=P(t),o=P(e);r.forEach(function(t){o.forEach(function(e){t[0]===e[0]&&t[1]===e[1]&&i++})});break;case"LineString":case"MultiLineString":G(t,function(t){G(e,function(e){Xn(t,e).features.length&&i++})});break;case"Polygon":case"MultiPolygon":G(t,function(t){G(e,function(e){Ve(t,e).features.length&&i++})})}return i>0}function xi(t,e,n){n=n||[];for(var i=0;i<t;i++)n[i]=e;return n}function bi(t,e){if(t.geometry&&t.geometry.type)return t.geometry.type;if(t.type)return t.type;throw new Error("Invalid GeoJSON object for "+e)}function wi(t){for(var e=t,n=[];e.parent;)n.unshift(e),e=e.parent;return n}function Ci(t,e){e=e||{},this.nodes=[],this.diagonal=!!e.diagonal,this.grid=[];for(var n=0;n<t.length;n++){this.grid[n]=[];for(var i=0,r=t[n];i<r.length;i++){var o=new Oi(n,i,r[i]);this.grid[n][i]=o,this.nodes.push(o)}}this.init()}function Oi(t,e,n){this.x=t,this.y=e,this.weight=n}function Ii(t){this.content=[],this.scoreFunction=t}function Si(t){return t[0]}function Ti(t){return t[1]}function Ri(){this._=null}function Ni(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function Li(t,e){var n=e,i=e.R,r=n.U;r?r.L===n?r.L=i:r.R=i:t._=i,i.U=r,n.U=i,n.R=i.L,n.R&&(n.R.U=n),i.L=n}function Mi(t,e){var n=e,i=e.L,r=n.U;r?r.L===n?r.L=i:r.R=i:t._=i,i.U=r,n.U=i,n.L=i.R,n.L&&(n.L.U=n),i.R=n}function Pi(t){for(;t.L;)t=t.L;return t}function Ai(t,e,n,i){var r=[null,null],o=ka.push(r)-1;return r.left=t,r.right=e,n&&Fi(r,t,e,n),i&&Fi(r,e,t,i),ja[t.index].halfedges.push(o),ja[e.index].halfedges.push(o),r}function Di(t,e,n){var i=[e,n];return i.left=t,i}function Fi(t,e,n,i){t[0]||t[1]?t.left===n?t[1]=i:t[0]=i:(t[0]=i,t.left=e,t.right=n)}function ji(t,e,n,i,r){var o,s=t[0],a=t[1],u=s[0],h=s[1],c=0,l=1,p=a[0]-u,f=a[1]-h;if(o=e-u,p||!(o>0)){if(o/=p,p<0){if(o<c)return;o<l&&(l=o)}else if(p>0){if(o>l)return;o>c&&(c=o)}if(o=i-u,p||!(o<0)){if(o/=p,p<0){if(o>l)return;o>c&&(c=o)}else if(p>0){if(o<c)return;o<l&&(l=o)}if(o=n-h,f||!(o>0)){if(o/=f,f<0){if(o<c)return;o<l&&(l=o)}else if(f>0){if(o>l)return;o>c&&(c=o)}if(o=r-h,f||!(o<0)){if(o/=f,f<0){if(o>l)return;o>c&&(c=o)}else if(f>0){if(o<c)return;o<l&&(l=o)}return!(c>0||l<1)||(c>0&&(t[0]=[u+c*p,h+c*f]),l<1&&(t[1]=[u+l*p,h+l*f]),!0)}}}}}function Gi(t,e,n,i,r){var o=t[1];if(o)return!0;var s,a,u=t[0],h=t.left,c=t.right,l=h[0],p=h[1],f=c[0],d=c[1],g=(l+f)/2,y=(p+d)/2;if(d===p){if(g<e||g>=i)return;if(l>f){if(u){if(u[1]>=r)return}else u=[g,n];o=[g,r]}else{if(u){if(u[1]<n)return}else u=[g,r];o=[g,n]}}else if(a=y-(s=(l-f)/(d-p))*g,s<-1||s>1)if(l>f){if(u){if(u[1]>=r)return}else u=[(n-a)/s,n];o=[(r-a)/s,r]}else{if(u){if(u[1]<n)return}else u=[(r-a)/s,r];o=[(n-a)/s,n]}else if(p<d){if(u){if(u[0]>=i)return}else u=[e,s*e+a];o=[i,s*i+a]}else{if(u){if(u[0]<e)return}else u=[i,s*i+a];o=[e,s*e+a]}return t[0]=u,t[1]=o,!0}function ki(t,e){var n=t.site,i=e.left,r=e.right;return n===r&&(r=i,i=n),r?Math.atan2(r[1]-i[1],r[0]-i[0]):(n===i?(i=e[1],r=e[0]):(i=e[0],r=e[1]),Math.atan2(i[0]-r[0],r[1]-i[1]))}function Bi(t,e){return e[+(e.left!==t.site)]}function Yi(t,e){return e[+(e.left===t.site)]}function Xi(t){var e=t.P,n=t.N;if(e&&n){var i=e.site,r=t.site,o=n.site;if(i!==o){var s=r[0],a=r[1],u=i[0]-s,h=i[1]-a,c=o[0]-s,l=o[1]-a,p=2*(u*l-h*c);if(!(p>=-qa)){var f=u*u+h*h,d=c*c+l*l,g=(l*f-h*d)/p,y=(u*d-c*f)/p,_=Ba.pop()||new function(){Ni(this),this.x=this.y=this.arc=this.site=this.cy=null};_.arc=t,_.site=r,_.x=g+s,_.y=(_.cy=y+a)+Math.sqrt(g*g+y*y),t.circle=_;for(var v=null,m=Ga._;m;)if(_.y<m.y||_.y===m.y&&_.x<=m.x){if(!m.L){v=m.P;break}m=m.L}else{if(!m.R){v=m;break}m=m.R}Ga.insert(v,_),v||(Da=_)}}}}function qi(t){var e=t.circle;e&&(e.P||(Da=e.N),Ga.remove(e),Ba.push(e),Ni(e),t.circle=null)}function Ui(t){var e=Ya.pop()||new function(){Ni(this),this.edge=this.site=this.circle=null};return e.site=t,e}function zi(t){qi(t),Fa.remove(t),Ya.push(t),Ni(t)}function Vi(t){var e=t.circle,n=e.x,i=e.cy,r=[n,i],o=t.P,s=t.N,a=[t];zi(t);for(var u=o;u.circle&&Math.abs(n-u.circle.x)<Xa&&Math.abs(i-u.circle.cy)<Xa;)o=u.P,a.unshift(u),zi(u),u=o;a.unshift(u),qi(u);for(var h=s;h.circle&&Math.abs(n-h.circle.x)<Xa&&Math.abs(i-h.circle.cy)<Xa;)s=h.N,a.push(h),zi(h),h=s;a.push(h),qi(h);var c,l=a.length;for(c=1;c<l;++c)h=a[c],u=a[c-1],Fi(h.edge,u.site,h.site,r);u=a[0],(h=a[l-1]).edge=Ai(u.site,h.site,null,r),Xi(u),Xi(h)}function Wi(t){for(var e,n,i,r,o=t[0],s=t[1],a=Fa._;a;)if((i=Ki(a,s)-o)>Xa)a=a.L;else{if(!((r=o-function(t,e){var n=t.N;if(n)return Ki(n,e);var i=t.site;return i[1]===e?i[0]:1/0}(a,s))>Xa)){i>-Xa?(e=a.P,n=a):r>-Xa?(e=a,n=a.N):e=n=a;break}if(!a.R){e=a;break}a=a.R}!function(t){ja[t.index]={site:t,halfedges:[]}}(t);var u=Ui(t);if(Fa.insert(e,u),e||n){if(e===n)return qi(e),n=Ui(e.site),Fa.insert(u,n),u.edge=n.edge=Ai(e.site,u.site),Xi(e),void Xi(n);if(n){qi(e),qi(n);var h=e.site,c=h[0],l=h[1],p=t[0]-c,f=t[1]-l,d=n.site,g=d[0]-c,y=d[1]-l,_=2*(p*y-f*g),v=p*p+f*f,m=g*g+y*y,E=[(y*v-f*m)/_+c,(p*m-g*v)/_+l];Fi(n.edge,h,d,E),u.edge=Ai(h,t,null,E),n.edge=Ai(t,d,null,E),Xi(e),Xi(n)}else u.edge=Ai(e.site,u.site)}}function Ki(t,e){var n=t.site,i=n[0],r=n[1],o=r-e;if(!o)return i;var s=t.P;if(!s)return-1/0;var a=(n=s.site)[0],u=n[1],h=u-e;if(!h)return a;var c=a-i,l=1/o-1/h,p=c/h;return l?(-p+Math.sqrt(p*p-2*l*(c*c/(-2*h)-u+h/2+r-o/2)))/l+i:(i+a)/2}function Hi(t,e,n){return(t[0]-n[0])*(e[1]-t[1])-(t[0]-e[0])*(n[1]-t[1])}function Zi(t,e){return e[1]-t[1]||e[0]-t[0]}function Ji(t,e){var n,i,r,o=t.sort(Zi).pop();for(ka=[],ja=new Array(t.length),Fa=new Ri,Ga=new Ri;;)if(r=Da,o&&(!r||o[1]<r.y||o[1]===r.y&&o[0]<r.x))o[0]===n&&o[1]===i||(Wi(o),n=o[0],i=o[1]),o=t.pop();else{if(!r)break;Vi(r.arc)}if(function(){for(var t,e,n,i,r=0,o=ja.length;r<o;++r)if((t=ja[r])&&(i=(e=t.halfedges).length)){var s=new Array(i),a=new Array(i);for(n=0;n<i;++n)s[n]=n,a[n]=ki(t,ka[e[n]]);for(s.sort(function(t,e){return a[e]-a[t]}),n=0;n<i;++n)a[n]=e[s[n]];for(n=0;n<i;++n)e[n]=a[n]}}(),e){var s=+e[0][0],a=+e[0][1],u=+e[1][0],h=+e[1][1];!function(t,e,n,i){for(var r,o=ka.length;o--;)Gi(r=ka[o],t,e,n,i)&&ji(r,t,e,n,i)&&(Math.abs(r[0][0]-r[1][0])>Xa||Math.abs(r[0][1]-r[1][1])>Xa)||delete ka[o]}(s,a,u,h),function(t,e,n,i){var r,o,s,a,u,h,c,l,p,f,d,g,y=ja.length,_=!0;for(r=0;r<y;++r)if(o=ja[r]){for(s=o.site,a=(u=o.halfedges).length;a--;)ka[u[a]]||u.splice(a,1);for(a=0,h=u.length;a<h;)d=(f=Yi(o,ka[u[a]]))[0],g=f[1],l=(c=Bi(o,ka[u[++a%h]]))[0],p=c[1],(Math.abs(d-l)>Xa||Math.abs(g-p)>Xa)&&(u.splice(a,0,ka.push(Di(s,f,Math.abs(d-t)<Xa&&i-g>Xa?[t,Math.abs(l-t)<Xa?p:i]:Math.abs(g-i)<Xa&&n-d>Xa?[Math.abs(p-i)<Xa?l:n,i]:Math.abs(d-n)<Xa&&g-e>Xa?[n,Math.abs(l-n)<Xa?p:e]:Math.abs(g-e)<Xa&&d-t>Xa?[Math.abs(p-e)<Xa?l:t,e]:null))-1),++h);h&&(_=!1)}if(_){var v,m,E,x=1/0;for(r=0,_=null;r<y;++r)(o=ja[r])&&(E=(v=(s=o.site)[0]-t)*v+(m=s[1]-e)*m)<x&&(x=E,_=o);if(_){var b=[t,e],w=[t,i],C=[n,i],O=[n,e];_.halfedges.push(ka.push(Di(s=_.site,b,w))-1,ka.push(Di(s,w,C))-1,ka.push(Di(s,C,O))-1,ka.push(Di(s,O,b))-1)}}for(r=0;r<y;++r)(o=ja[r])&&(o.halfedges.length||delete ja[r])}(s,a,u,h)}this.edges=ka,this.cells=ja,Fa=Ga=ka=ja=null}function Qi(t){return(t=t.slice()).push(t[0]),o([t])}function $i(t,e,n,i){var r=(i=i||{}).steps||64,s=i.units||"kilometers",a=i.angle||0,u=i.pivot||t,h=i.properties||t.properties||{};if(!t)throw new Error("center is required");if(!e)throw new Error("xSemiAxis is required");if(!n)throw new Error("ySemiAxis is required");if(!C(i))throw new Error("options must be an object");if(!w(r))throw new Error("steps must be a number");if(!w(a))throw new Error("angle must be a number");var c=q(t);if("degrees"===s)var l=E(a);else e=zn(t,e,90,{units:s}),n=zn(t,n,0,{units:s}),e=q(e)[0]-c[0],n=q(n)[1]-c[1];for(var p=[],f=0;f<r;f+=1){var d=-360*f/r,g=e*n/Math.sqrt(Math.pow(n,2)+Math.pow(e,2)*Math.pow(tr(d),2)),y=e*n/Math.sqrt(Math.pow(e,2)+Math.pow(n,2)/Math.pow(tr(d),2));if(d<-90&&d>=-270&&(g=-g),d<-180&&d>=-360&&(y=-y),"degrees"===s){var _=g*Math.cos(l)+y*Math.sin(l),v=y*Math.cos(l)-g*Math.sin(l);g=_,y=v}p.push([g+c[0],y+c[1]])}return p.push(p[0]),"degrees"===s?o([p],h):ei(o([p],h),a,{pivot:u})}function tr(t){var e=t*Math.PI/180;return Math.tan(e)}function er(t,e){if(!C(e=e||{}))throw new Error("options is invalid");var n=e.properties,r=e.weight;if(!t)throw new Error("geojson is required");var o=0,s=0,a=0;return A(t,function(t,e,n){var i=n[r];if(!w(i=void 0===i||null===i?1:i))throw new Error("weight value must be a number for feature index "+e);(i=Number(i))>0&&S(t,function(t){o+=t[0]*i,s+=t[1]*i,a+=i})}),i([o/a,s/a],n)}function nr(t,e,n,r){var o=n.properties.tolerance||.001,s=0,a=0,u=0,h=0;if(L(n,function(e){var n=e.properties.weight,i=void 0===n||null===n?1:n;if(!w(i=Number(i)))throw new Error("weight value must be a number");if(i>0){h+=1;var r=i*Dt(e,t);0===r&&(r=1);var o=i/r;s+=e.geometry.coordinates[0]*o,a+=e.geometry.coordinates[1]*o,u+=o}}),h<1)throw new Error("no features to measure");var c=s/u,l=a/u;return 1===h||0===r||Math.abs(c-e[0])<o&&Math.abs(l-e[1])<o?i([c,l],{medianCandidates:n.properties.medianCandidates}):(n.properties.medianCandidates.push([c,l]),nr([c,l],t,n,r-1))}function ir(t,e){return{x:t[0]-e[0],y:t[1]-e[1]}}function rr(t){if(C(t)&&(t=t.bbox),t&&!Array.isArray(t))throw new Error("bbox is invalid");return t?function(t){return[Math.random()*(t[2]-t[0])+t[0],Math.random()*(t[3]-t[1])+t[1]]}(t):[360*ur(),180*ur()]}function or(t,e){if(!C(e=e||{}))throw new Error("options is invalid");var n=e.bbox;void 0!==t&&null!==t||(t=1);for(var r=[],o=0;o<t;o++)r.push(i(rr(n)));return h(r)}function sr(t,e){if(!C(e=e||{}))throw new Error("options is invalid");var n=e.bbox,i=e.num_vertices,r=e.max_radial_length;void 0!==t&&null!==t||(t=1),w(i)||(i=10),w(r)||(r=10);for(var s=[],a=0;a<t;a++){var u=[],c=Array.apply(null,new Array(i+1)).map(Math.random);c.forEach(function(t,e,n){n[e]=e>0?t+n[e-1]:t}),c.forEach(function(t){t=2*t*Math.PI/c[c.length-1];var e=Math.random();u.push([e*r*Math.sin(t),e*r*Math.cos(t)])}),u[u.length-1]=u[0],u=u.map(function(t){return function(e){return[e[0]+t[0],e[1]+t[1]]}}(rr(n))),s.push(o([u]))}return h(s)}function ar(t,e){if(!C(e=e||{}))throw new Error("options is invalid");var n=e.bbox,i=e.num_vertices,r=e.max_length,o=e.max_rotation;void 0!==t&&null!==t||(t=1),(!w(i)||i<2)&&(i=10),w(r)||(r=1e-4),w(o)||(o=Math.PI/8);for(var s=[],u=0;u<t;u++){for(var c=[rr(n)],l=0;l<i-1;l++){var p=(0===l?2*Math.random()*Math.PI:Math.tan((c[l][1]-c[l-1][1])/(c[l][0]-c[l-1][0])))+(Math.random()-.5)*o*2,f=Math.random()*r;c.push([c[l][0]+f*Math.cos(p),c[l][1]+f*Math.sin(p)])}s.push(a(c))}return h(s)}function ur(){return Math.random()-.5}function hr(t,e){if(!t)throw new Error("geojson is required");if("FeatureCollection"!==t.type)throw new Error("geojson must be a FeatureCollection");if(void 0===e||null===e)throw new Error("filter is required");var n=[];return L(t,function(t){fr(t.properties,e)&&n.push(t)}),h(n)}function cr(t,e,n){if(!t)throw new Error("geojson is required");if("FeatureCollection"!==t.type)throw new Error("geojson must be a FeatureCollection");if(void 0===e||null===e)throw new Error("property is required");for(var i=pr(t,e),r=Object.keys(i),o=0;o<r.length;o++){for(var s=r[o],a=i[s],u=[],c=0;c<a.length;c++)u.push(t.features[a[c]]);n(h(u),s,o)}}function lr(t,e,n,i){var r=i;return cr(t,e,function(t,e,o){r=0===o&&void 0===i?t:n(r,t,e,o)}),r}function pr(t,e){var n={};return L(t,function(t,i){var r=t.properties||{};if(r.hasOwnProperty(e)){var o=r[e];n.hasOwnProperty(o)?n[o].push(i):n[o]=[i]}}),n}function fr(t,e){if(void 0===t)return!1;var n=typeof e;if("number"===n||"string"===n)return t.hasOwnProperty(e);if(Array.isArray(e)){for(var i=0;i<e.length;i++)if(!fr(t,e[i]))return!1;return!0}return dr(t,e)}function dr(t,e){for(var n=Object.keys(e),i=0;i<n.length;i++){var r=n[i];if(t[r]!==e[r])return!1}return!0}function gr(t,e){if(!e)return{};if(!e.length)return{};for(var n={},i=0;i<e.length;i++){var r=e[i];t.hasOwnProperty(r)&&(n[r]=t[r])}return n}function yr(){}function _r(t){this.message=t||""}function vr(t){this.message=t||""}function mr(){}function Er(t){return null===t?ch:t.color}function xr(t){return null===t?null:t.parent}function br(t,e){null!==t&&(t.color=e)}function wr(t){return null===t?null:t.left}function Cr(t){return null===t?null:t.right}function Or(){this.root_=null,this.size_=0}function Ir(){}function Sr(){this.array_=[],arguments[0]instanceof Hu&&this.addAll(arguments[0])}function Tr(){}function Rr(t){this.message=t||""}function Nr(){this.array_=[]}function Lr(t){switch(t.type){case"Polygon":return un(t)>1?t:null;case"MultiPolygon":var e=[];if(F(t,function(t){un(t)>1&&e.push(t.geometry.coordinates)}),e.length)return{type:"MultiPolygon",coordinates:e}}}function Mr(){this.reset()}function Pr(t,e,n){var i=t.s=e+n,r=i-e,o=i-r;t.t=e-o+(n-r)}function Ar(t){return t>1?yf:t<-1?-yf:Math.asin(t)}function Dr(){}function Fr(t,e){t&&Lf.hasOwnProperty(t.type)&&Lf[t.type](t,e)}function jr(t,e,n){var i,r=-1,o=t.length-n;for(e.lineStart();++r<o;)i=t[r],e.point(i[0],i[1],i[2]);e.lineEnd()}function Gr(t,e){var n=-1,i=t.length;for(e.polygonStart();++n<i;)jr(t[n],e,1);e.polygonEnd()}function kr(t){return[wf(t[1],t[0]),Ar(t[2])]}function Br(t){var e=t[0],n=t[1],i=Cf(n);return[i*Cf(e),i*Sf(e),Sf(n)]}function Yr(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Xr(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function qr(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function Ur(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function zr(t){var e=Tf(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function Vr(t,e){return[t>gf?t-vf:t<-gf?t+vf:t,e]}function Wr(t,e,n){return(t%=vf)?e||n?Pf(Hr(t),Zr(e,n)):Hr(t):e||n?Zr(e,n):Vr}function Kr(t){return function(e,n){return[(e+=t)>gf?e-vf:e<-gf?e+vf:e,n]}}function Hr(t){var e=Kr(t);return e.invert=Kr(-t),e}function Zr(t,e){function n(t,e){var n=Cf(e),a=Cf(t)*n,u=Sf(t)*n,h=Sf(e),c=h*i+a*r;return[wf(u*o-c*s,a*i-h*r),Ar(c*o+u*s)]}var i=Cf(t),r=Sf(t),o=Cf(e),s=Sf(e);return n.invert=function(t,e){var n=Cf(e),a=Cf(t)*n,u=Sf(t)*n,h=Sf(e),c=h*o-u*s;return[wf(u*o+h*s,a*i+c*r),Ar(c*i-a*r)]},n}function Jr(t,e){(e=Br(e))[0]-=t,zr(e);var n=function(t){return t>1?0:t<-1?gf:Math.acos(t)}(-e[1]);return((-e[2]<0?-n:n)+vf-df)%vf}function Qr(t,e,n,i){this.x=t,this.z=e,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function $r(t){if(e=t.length){for(var e,n,i=0,r=t[0];++i<e;)r.n=n=t[i],n.p=r,r=n;r.n=n=t[0],n.p=r}}function to(t){return t.length>1}function eo(t,e){return((t=t.x)[0]<0?t[1]-yf-df:yf-t[1])-((e=e.x)[0]<0?e[1]-yf-df:yf-e[1])}function no(t){return function(e){var n=new io;for(var i in t)n[i]=t[i];return n.stream=e,n}}function io(){}function ro(t,e,n){var i=e[1][0]-e[0][0],r=e[1][1]-e[0][1],o=t.clipExtent&&t.clipExtent();t.scale(150).translate([0,0]),null!=o&&t.clipExtent(null),Mf(n,t.stream(Hf));var s=Hf.result(),a=Math.min(i/(s[1][0]-s[0][0]),r/(s[1][1]-s[0][1])),u=+e[0][0]+(i-a*(s[1][0]+s[0][0]))/2,h=+e[0][1]+(r-a*(s[1][1]+s[0][1]))/2;return null!=o&&t.clipExtent(o),t.scale(150*a).translate([u,h])}function oo(t){return function(t){function e(t){return[(t=h(t[0]*Ef,t[1]*Ef))[0]*g+s,a-t[1]*g]}function n(t,e){return[(t=o(t,e))[0]*g+s,a-t[1]*g]}function i(){h=Pf(u=Wr(E,x,b),o);var t=o(v,m);return s=y-t[0]*g,a=_+t[1]*g,r()}function r(){return f=d=null,e}var o,s,a,u,h,c,l,p,f,d,g=150,y=480,_=250,v=0,m=0,E=0,x=0,b=0,w=null,C=Jf,O=null,I=Uf,S=.5,T=ed(n,S);return e.stream=function(t){return f&&d===t?f:f=nd(C(u,T(I(d=t))))},e.clipAngle=function(t){return arguments.length?(C=+t?Qf(w=t*Ef,6*Ef):(w=null,Jf),r()):w*mf},e.clipExtent=function(t){return arguments.length?(I=null==t?(O=c=l=p=null,Uf):function(t,e,n,i){function r(r,o){return t<=r&&r<=n&&e<=o&&o<=i}function o(r,o,a,h){var c=0,l=0;if(null==r||(c=s(r,a))!==(l=s(o,a))||u(r,o)<0^a>0)do{h.point(0===c||3===c?t:n,c>1?i:e)}while((c=(c+a+4)%4)!==l);else h.point(o[0],o[1])}function s(i,r){return xf(i[0]-t)<df?r>0?0:3:xf(i[0]-n)<df?r>0?2:1:xf(i[1]-e)<df?r>0?1:0:r>0?3:2}function a(t,e){return u(t.x,e.x)}function u(t,e){var n=s(t,1),i=s(e,1);return n!==i?n-i:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(s){function u(t,e){r(t,e)&&x.point(t,e)}function h(o,s){var a=r(o,s);if(l&&p.push([o,s]),m)f=o,d=s,g=a,m=!1,a&&(x.lineStart(),x.point(o,s));else if(a&&v)x.point(o,s);else{var u=[y=Math.max(Xf,Math.min(Yf,y)),_=Math.max(Xf,Math.min(Yf,_))],h=[o=Math.max(Xf,Math.min(Yf,o)),s=Math.max(Xf,Math.min(Yf,s))];Ff(u,h,t,e,n,i)?(v||(x.lineStart(),x.point(u[0],u[1])),x.point(h[0],h[1]),a||x.lineEnd(),E=!1):a&&(x.lineStart(),x.point(o,s),E=!1)}y=o,_=s,v=a}var c,l,p,f,d,g,y,_,v,m,E,x=s,b=Df(),w={point:u,lineStart:function(){w.point=h,l&&l.push(p=[]),m=!0,v=!1,y=_=NaN},lineEnd:function(){c&&(h(f,d),g&&v&&b.rejoin(),c.push(b.result())),w.point=u,v&&x.lineEnd()},polygonStart:function(){x=b,c=[],l=[],E=!0},polygonEnd:function(){var e=function(){for(var e=0,n=0,r=l.length;n<r;++n)for(var o,s,a=l[n],u=1,h=a.length,c=a[0],p=c[0],f=c[1];u<h;++u)o=p,s=f,p=(c=a[u])[0],f=c[1],s<=i?f>i&&(p-o)*(i-s)>(f-s)*(t-o)&&++e:f<=i&&(p-o)*(i-s)<(f-s)*(t-o)&&--e;return e}(),n=E&&e,r=(c=Bf(c)).length;(n||r)&&(s.polygonStart(),n&&(s.lineStart(),o(null,null,1,s),s.lineEnd()),r&&Gf(c,a,e,o,s),s.polygonEnd()),x=s,c=l=p=null}};return w}}(O=+t[0][0],c=+t[0][1],l=+t[1][0],p=+t[1][1]),r()):null==O?null:[[O,c],[l,p]]},e.scale=function(t){return arguments.length?(g=+t,i()):g},e.translate=function(t){return arguments.length?(y=+t[0],_=+t[1],i()):[y,_]},e.center=function(t){return arguments.length?(v=t[0]%360*Ef,m=t[1]%360*Ef,i()):[v*mf,m*mf]},e.rotate=function(t){return arguments.length?(E=t[0]%360*Ef,x=t[1]%360*Ef,b=t.length>2?t[2]%360*Ef:0,i()):[E*mf,x*mf,b*mf]},e.precision=function(t){return arguments.length?(T=ed(n,S=t*t),r()):Tf(S)},e.fitExtent=function(t,n){return ro(e,t,n)},e.fitSize=function(t,n){return function(t,e,n){return ro(t,[[0,0],e],n)}(e,t,n)},function(){return o=t.apply(this,arguments),e.invert=o.invert&&function(t){return(t=h.invert((t[0]-s)/g,(a-t[1])/g))&&[t[0]*mf,t[1]*mf]},i()}}(function(){return t})()}function so(t,e){return[t,If(Rf((yf+e)/2))]}function ao(t,e){return[If(Rf((yf+e)/2)),-t]}function uo(t,n,i,r){var o=t.properties||{},s="Feature"===t.type?t.geometry:t;if("GeometryCollection"===s.type){var a=[];return A(t,function(t){var e=uo(t,n,i,r);e&&a.push(e)}),h(a)}var u,c=X(t),l=c[1]>50&&c[3]>50;u=l?{type:s.type,coordinates:function t(e,n){return"object"!=typeof e[0]?n(e):e.map(function(e){return t(e,n)})}(s.coordinates,ho(s))}:Qe(s);var p,f=(new $h).read(u),d=g(y(n,i),"meters"),_=Ul.bufferOp(f,d);if(!function t(e){return Array.isArray(e[0])?t(e[0]):isNaN(e[0])}((_=(new tc).write(_)).coordinates))return(p=l?{type:_.type,coordinates:function t(e,n){return"object"!=typeof e[0]?n.invert(e):e.map(function(e){return t(e,n)})}(_.coordinates,ho(s))}:$e(_)).geometry?p:e(p,o)}function ho(t){var e=ue(t).geometry.coordinates.reverse(),n=e.map(function(t){return-t});return id().center(e).rotate(n).scale(mo)}function co(){for(var t=new $h,e=t.read(JSON.stringify(arguments[0].geometry)),n=1;n<arguments.length;n++)e=lf.union(e,t.read(JSON.stringify(arguments[n].geometry)));return{type:"Feature",geometry:e=(new tc).write(e),properties:arguments[0].properties}}function lo(t,n){var i=H(t),r=H(n);if(Kt(mn(r,{precision:4})).coordinates[0].length<4)return null;if(Kt(mn(i,{precision:4})).coordinates[0].length<4)return null;var o=new $h,s=o.read(mn(i)),a=o.read(mn(r)),u=ef.intersection(s,a);return u.isEmpty()?null:e((new tc).write(u))}function po(t,e){return function(t,e,n){var i,r;if(!Array.isArray(e))throw new Error("Get closest expects an array as second argument");return e.forEach(function(e,n){var o=function(t,e){return t-e}(e,t);o>=0&&(void 0===r||o<r)&&(r=o,i=n)}),i}(t,e)}function fo(t,e,n){if(!C(n=n||{}))throw new Error("options is invalid");var i=n.properties||{},r=n.triangles,s=n.mask;if(null===e||void 0===e)throw new Error("cellSide is required");if(!w(e))throw new Error("cellSide is invalid");if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be array");if(4!==t.length)throw new Error("bbox must contain 4 numbers");if(s&&-1===["Polygon","MultiPolygon"].indexOf(J(s)))throw new Error("options.mask must be a (Multi)Polygon");var a=t[0],u=t[1],c=t[2],l=t[3],p=(u+l)/2,f=(a+c)/2,d=2*e/Dt([a,p],[c,p],n)*(c-a),g=2*e/Dt([f,u],[f,l],n)*(l-u),y=d/2,_=2*y,v=Math.sqrt(3)/2*g,m=c-a,E=l-u,x=.75*_,b=v,O=(m-_)/(_-y/2),I=Math.floor(O),S=(I*x-y/2-m)/2-y/2+x/2,T=Math.floor((E-v)/v),R=(E-T*v)/2,N=T*v-E>v/2;N&&(R-=v/4);for(var L=[],M=[],P=0;P<6;P++){var A=2*Math.PI/6*P;L.push(Math.cos(A)),M.push(Math.sin(A))}for(var D=[],F=0;F<=I;F++)for(var j=0;j<=T;j++){var G=F%2==1;if(!(0===j&&G||0===j&&N)){var k=F*x+a-S,B=j*b+u+R;if(G&&(B-=v/2),!0===r)(function(t,e,n,i,r,s){for(var a=[],u=0;u<6;u++){var h=[];h.push(t),h.push([t[0]+e*r[u],t[1]+n*s[u]]),h.push([t[0]+e*r[(u+1)%6],t[1]+n*s[(u+1)%6]]),h.push(t),a.push(o([h],i))}return a})([k,B],d/2,g/2,i,L,M).forEach(function(t){s?lo(s,t)&&D.push(t):D.push(t)});else{var Y=function(t,e,n,i,r,s){for(var a=[],u=0;u<6;u++){var h=t[0]+e*r[u],c=t[1]+n*s[u];a.push([h,c])}return a.push(a[0].slice()),o([a],i)}([k,B],d/2,g/2,i,L,M);s?lo(s,Y)&&D.push(Y):D.push(Y)}}}return h(D)}function go(t){if(t.features.length<=1)return t;var e=function(t){var e=Ro(),n=[];return F(t,function(t,e){var i=X(t);n.push({minX:i[0],minY:i[1],maxX:i[2],maxY:i[3],geojson:t,index:e})}),e.load(n),e}(t),n=[],i={};return F(t,function(t,r){if(i[r])return!0;for(e.remove({index:r},yo),i[r]=!0;;){var o=X(t),s=e.search({minX:o[0],minY:o[1],maxX:o[2],maxY:o[3]});if(s.length>0){var a=s.map(function(t){return i[t.index]=!0,e.remove({index:t.index},yo),t.geojson});a.push(t),t=co.apply(this,a)}if(0===s.length)break}n.push(t)}),h(n)}function yo(t,e){return t.index===e.index}function _o(t,e,n){if(!C(n=n||{}))throw new Error("options is invalid");var i=n.properties,r=n.mask,s=[];if(null===e||void 0===e)throw new Error("cellSide is required");if(!w(e))throw new Error("cellSide is invalid");if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be array");if(4!==t.length)throw new Error("bbox must contain 4 numbers");if(r&&-1===["Polygon","MultiPolygon"].indexOf(J(r)))throw new Error("options.mask must be a (Multi)Polygon");for(var a=t[0],u=t[1],c=t[2],l=t[3],p=e/Dt([a,u],[c,u],n)*(c-a),f=e/Dt([a,u],[a,l],n)*(l-u),d=c-a,g=l-u,y=Math.floor(d/p),_=Math.floor(g/f),v=(g-_*f)/2,m=a+(d-y*p)/2,E=0;E<y;E++){for(var x=u+v,b=0;b<_;b++){var O=o([[[m,x],[m,x+f],[m+p,x+f],[m+p,x],[m,x]]],i);r?lo(r,O)&&s.push(O):s.push(O),x+=f}m+=p}return h(s)}function vo(t,e,n){if(!C(n=n||{}))throw new Error("options is invalid");var i=n.properties,r=n.mask,s=[];if(null===e||void 0===e)throw new Error("cellSide is required");if(!w(e))throw new Error("cellSide is invalid");if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be array");if(4!==t.length)throw new Error("bbox must contain 4 numbers");if(r&&-1===["Polygon","MultiPolygon"].indexOf(J(r)))throw new Error("options.mask must be a (Multi)Polygon");for(var a=e/Dt([t[0],t[1]],[t[2],t[1]],n)*(t[2]-t[0]),u=e/Dt([t[0],t[1]],[t[0],t[3]],n)*(t[3]-t[1]),c=0,l=t[0];l<=t[2];){for(var p=0,f=t[1];f<=t[3];){var d=null,g=null;c%2==0&&p%2==0?(d=o([[[l,f],[l,f+u],[l+a,f],[l,f]]],i),g=o([[[l,f+u],[l+a,f+u],[l+a,f],[l,f+u]]],i)):c%2==0&&p%2==1?(d=o([[[l,f],[l+a,f+u],[l+a,f],[l,f]]],i),g=o([[[l,f],[l,f+u],[l+a,f+u],[l,f]]],i)):p%2==0&&c%2==1?(d=o([[[l,f],[l,f+u],[l+a,f+u],[l,f]]],i),g=o([[[l,f],[l+a,f+u],[l+a,f],[l,f]]],i)):p%2==1&&c%2==1&&(d=o([[[l,f],[l,f+u],[l+a,f],[l,f]]],i),g=o([[[l,f+u],[l+a,f+u],[l+a,f],[l,f+u]]],i)),r?(lo(r,d)&&s.push(d),lo(r,g)&&s.push(g)):(s.push(d),s.push(g)),f+=u,p++}c++,l+=a}return h(s)}var mo=6371008.8,Eo={meters:mo,metres:mo,millimeters:1e3*mo,millimetres:1e3*mo,centimeters:100*mo,centimetres:100*mo,kilometers:mo/1e3,kilometres:mo/1e3,miles:mo/1609.344,nauticalmiles:mo/1852,inches:39.37*mo,yards:mo/1.0936,feet:3.28084*mo,radians:1,degrees:mo/111325},xo={meters:1,metres:1,millimeters:1e3,millimetres:1e3,centimeters:100,centimetres:100,kilometers:.001,kilometres:.001,miles:1/1609.344,nauticalmiles:1/1852,inches:39.37,yards:1/1.0936,feet:3.28084,radians:1/mo,degrees:1/111325},bo={meters:1,metres:1,millimeters:1e6,millimetres:1e6,centimeters:1e4,centimetres:1e4,kilometers:1e-6,kilometres:1e-6,acres:247105e-9,miles:3.86e-7,yards:1.195990046,feet:10.763910417,inches:1550.003100006},wo=Object.freeze({earthRadius:mo,factors:Eo,unitsFactors:xo,areaFactors:bo,feature:e,geometry:n,point:i,points:r,polygon:o,polygons:s,lineString:a,lineStrings:u,featureCollection:h,multiLineString:c,multiPoint:l,multiPolygon:p,geometryCollection:f,round:d,radiansToLength:g,lengthToRadians:y,lengthToDegrees:_,bearingToAzimuth:v,radiansToDegrees:m,degreesToRadians:E,convertLength:x,convertArea:b,isNumber:w,isObject:C,validateBBox:O,validateId:I,radians2degrees:function(){throw new Error("method has been renamed to `radiansToDegrees`")},degrees2radians:function(){throw new Error("method has been renamed to `degreesToRadians`")},distanceToDegrees:function(){throw new Error("method has been renamed to `lengthToDegrees`")},distanceToRadians:function(){throw new Error("method has been renamed to `lengthToRadians`")},radiansToDistance:function(){throw new Error("method has been renamed to `radiansToLength`")},bearingToAngle:function(){throw new Error("method has been renamed to `bearingToAzimuth`")},convertDistance:function(){throw new Error("method has been renamed to `convertLength`")}}),Co=Object.freeze({coordEach:S,coordReduce:T,propEach:R,propReduce:N,featureEach:L,featureReduce:M,coordAll:P,geomEach:A,geomReduce:D,flattenEach:F,flattenReduce:j,segmentEach:G,segmentReduce:k,lineEach:B,lineReduce:Y}),Oo=Object.freeze({getCoord:q,getCoords:U,containsNumber:z,geojsonType:V,featureOf:W,collectionOf:K,getGeom:H,getGeomType:Z,getType:J}),Io={successCallback:null,verbose:!1},So={},To=function t(e,n,i,r,o){for(i=i||0,r=r||e.length-1,o=o||function(t,e){return t<e?-1:t>e?1:0};r>i;){if(r-i>600){var s=r-i+1,a=n-i+1,u=Math.log(s),h=.5*Math.exp(2*u/3),c=.5*Math.sqrt(u*h*(s-h)/s)*(a-s/2<0?-1:1);t(e,n,Math.max(i,Math.floor(n-a*h/s+c)),Math.min(r,Math.floor(n+(s-a)*h/s+c)),o)}var l=e[n],p=i,f=r;for(it(e,i,n),o(e[r],l)>0&&it(e,i,r);p<f;){for(it(e,p,f),p++,f--;o(e[p],l)<0;)p++;for(;o(e[f],l)>0;)f--}0===o(e[i],l)?it(e,i,f):it(e,++f,r),f<=n&&(i=f+1),n<=f&&(r=f-1)}},Ro=rt;rt.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,n=[],i=this.toBBox;if(!ft(t,e))return n;for(var r,o,s,a,u=[];e;){for(r=0,o=e.children.length;r<o;r++)s=e.children[r],ft(t,a=e.leaf?i(s):s)&&(e.leaf?n.push(s):pt(t,a)?this._all(s,n):u.push(s));e=u.pop()}return n},collides:function(t){var e=this.data,n=this.toBBox;if(!ft(t,e))return!1;for(var i,r,o,s,a=[];e;){for(i=0,r=e.children.length;i<r;i++)if(o=e.children[i],s=e.leaf?n(o):o,ft(t,s)){if(e.leaf||pt(t,s))return!0;a.push(o)}e=a.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,n=t.length;e<n;e++)this.insert(t[e]);return this}var i=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===i.height)this._splitRoot(this.data,i);else{if(this.data.height<i.height){var r=this.data;this.data=i,i=r}this._insert(i,this.data.height-i.height-1,!0)}else this.data=i;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=dt([]),this},remove:function(t,e){if(!t)return this;for(var n,i,r,o,s=this.data,a=this.toBBox(t),u=[],h=[];s||u.length;){if(s||(s=u.pop(),i=u[u.length-1],n=h.pop(),o=!0),s.leaf&&-1!==(r=function(t,e,n){if(!n)return e.indexOf(t);for(var i=0;i<e.length;i++)if(n(t,e[i]))return i;return-1}(t,s.children,e)))return s.children.splice(r,1),u.push(s),this._condense(u),this;o||s.leaf||!pt(s,a)?i?(n++,s=i.children[n],o=!1):s=null:(u.push(s),h.push(n),n=0,i=s,s=s.children[0])}return this},toBBox:function(t){return t},compareMinX:ut,compareMinY:ht,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},_build:function(t,e,n,i){var r,o=n-e+1,s=this._maxEntries;if(o<=s)return ot(r=dt(t.slice(e,n+1)),this.toBBox),r;i||(i=Math.ceil(Math.log(o)/Math.log(s)),s=Math.ceil(o/Math.pow(s,i-1))),(r=dt([])).leaf=!1,r.height=i;var a,u,h,c,l=Math.ceil(o/s),p=l*Math.ceil(Math.sqrt(s));for(gt(t,e,n,p,this.compareMinX),a=e;a<=n;a+=p)for(gt(t,a,h=Math.min(a+p-1,n),l,this.compareMinY),u=a;u<=h;u+=l)c=Math.min(u+l-1,h),r.children.push(this._build(t,u,c,i-1));return ot(r,this.toBBox),r},_chooseSubtree:function(t,e,n,i){for(var r,o,s,a,u,h,c,l;i.push(e),!e.leaf&&i.length-1!==n;){for(c=l=1/0,r=0,o=e.children.length;r<o;r++)u=ct(s=e.children[r]),(h=function(t,e){return(Math.max(e.maxX,t.maxX)-Math.min(e.minX,t.minX))*(Math.max(e.maxY,t.maxY)-Math.min(e.minY,t.minY))}(t,s)-u)<l?(l=h,c=u<c?u:c,a=s):h===l&&u<c&&(c=u,a=s);e=a||e.children[0]}return e},_insert:function(t,e,n){var i=this.toBBox,r=n?t:i(t),o=[],s=this._chooseSubtree(r,this.data,e,o);for(s.children.push(t),at(s,r);e>=0&&o[e].children.length>this._maxEntries;)this._split(o,e),e--;this._adjustParentBBoxes(r,o,e)},_split:function(t,e){var n=t[e],i=n.children.length,r=this._minEntries;this._chooseSplitAxis(n,r,i);var o=this._chooseSplitIndex(n,r,i),s=dt(n.children.splice(o,n.children.length-o));s.height=n.height,s.leaf=n.leaf,ot(n,this.toBBox),ot(s,this.toBBox),e?t[e-1].children.push(s):this._splitRoot(n,s)},_splitRoot:function(t,e){this.data=dt([t,e]),this.data.height=t.height+1,this.data.leaf=!1,ot(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,n){var i,r,o,s,a,u,h,c;for(u=h=1/0,i=e;i<=n-e;i++)s=function(t,e){var n=Math.max(t.minX,e.minX),i=Math.max(t.minY,e.minY),r=Math.min(t.maxX,e.maxX),o=Math.min(t.maxY,e.maxY);return Math.max(0,r-n)*Math.max(0,o-i)}(r=st(t,0,i,this.toBBox),o=st(t,i,n,this.toBBox)),a=ct(r)+ct(o),s<u?(u=s,c=i,h=a<h?a:h):s===u&&a<h&&(h=a,c=i);return c},_chooseSplitAxis:function(t,e,n){var i=t.leaf?this.compareMinX:ut,r=t.leaf?this.compareMinY:ht;this._allDistMargin(t,e,n,i)<this._allDistMargin(t,e,n,r)&&t.children.sort(i)},_allDistMargin:function(t,e,n,i){t.children.sort(i);var r,o,s=this.toBBox,a=st(t,0,e,s),u=st(t,n-e,n,s),h=lt(a)+lt(u);for(r=e;r<n-e;r++)o=t.children[r],at(a,t.leaf?s(o):o),h+=lt(a);for(r=n-e-1;r>=e;r--)o=t.children[r],at(u,t.leaf?s(o):o),h+=lt(u);return h},_adjustParentBBoxes:function(t,e,n){for(var i=n;i>=0;i--)at(e[i],t)},_condense:function(t){for(var e,n=t.length-1;n>=0;n--)0===t[n].children.length?n>0?(e=t[n-1].children).splice(e.indexOf(t[n]),1):this.clear():ot(t[n],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}};var No=function(t,e,n){var i=t*e,r=Lo*t,o=r-(r-t),s=t-o,a=Lo*e,u=a-(a-e),h=e-u,c=s*h-(i-o*u-s*u-o*h);return n?(n[0]=c,n[1]=i,n):[c,i]},Lo=+(Math.pow(2,27)+1),Mo=function(t,e){var n=0|t.length,i=0|e.length;if(1===n&&1===i)return function(t,e){var n=t+e,i=n-t,r=t-(n-i)+(e-i);return r?[r,n]:[n]}(t[0],e[0]);var r,o,s=n+i,a=new Array(s),u=0,h=0,c=0,l=Math.abs,p=t[h],f=l(p),d=e[c],g=l(d);f<g?(o=p,(h+=1)<n&&(f=l(p=t[h]))):(o=d,(c+=1)<i&&(g=l(d=e[c]))),h<n&&f<g||c>=i?(r=p,(h+=1)<n&&(f=l(p=t[h]))):(r=d,(c+=1)<i&&(g=l(d=e[c])));for(var y,_,v=r+o,m=v-r,E=o-m,x=E,b=v;h<n&&c<i;)f<g?(r=p,(h+=1)<n&&(f=l(p=t[h]))):(r=d,(c+=1)<i&&(g=l(d=e[c]))),(E=(o=x)-(m=(v=r+o)-r))&&(a[u++]=E),x=b-((y=b+v)-(_=y-b))+(v-_),b=y;for(;h<n;)(E=(o=x)-(m=(v=(r=p)+o)-r))&&(a[u++]=E),x=b-((y=b+v)-(_=y-b))+(v-_),b=y,(h+=1)<n&&(p=t[h]);for(;c<i;)(E=(o=x)-(m=(v=(r=d)+o)-r))&&(a[u++]=E),x=b-((y=b+v)-(_=y-b))+(v-_),b=y,(c+=1)<i&&(d=e[c]);return x&&(a[u++]=x),b&&(a[u++]=b),u||(a[u++]=0),a.length=u,a},Po=function(t,e,n){var i=t+e,r=i-t,o=e-r,s=t-(i-r);return n?(n[0]=s+o,n[1]=i,n):[s+o,i]},Ao=function(t,e){var n=t.length;if(1===n){var i=No(t[0],e);return i[0]?i:[i[1]]}var r=new Array(2*n),o=[.1,.1],s=[.1,.1],a=0;No(t[0],e,o),o[0]&&(r[a++]=o[0]);for(var u=1;u<n;++u){No(t[u],e,s);var h=o[1];Po(h,s[0],o),o[0]&&(r[a++]=o[0]);var c=s[1],l=o[1],p=c+l,f=l-(p-c);o[1]=p,f&&(r[a++]=f)}return o[1]&&(r[a++]=o[1]),0===a&&(r[a++]=0),r.length=a,r},Do=function(t,e){var n=0|t.length,i=0|e.length;if(1===n&&1===i)return function(t,e){var n=t+e,i=n-t,r=t-(n-i)+(e-i);return r?[r,n]:[n]}(t[0],-e[0]);var r,o,s=n+i,a=new Array(s),u=0,h=0,c=0,l=Math.abs,p=t[h],f=l(p),d=-e[c],g=l(d);f<g?(o=p,(h+=1)<n&&(f=l(p=t[h]))):(o=d,(c+=1)<i&&(g=l(d=-e[c]))),h<n&&f<g||c>=i?(r=p,(h+=1)<n&&(f=l(p=t[h]))):(r=d,(c+=1)<i&&(g=l(d=-e[c])));for(var y,_,v=r+o,m=v-r,E=o-m,x=E,b=v;h<n&&c<i;)f<g?(r=p,(h+=1)<n&&(f=l(p=t[h]))):(r=d,(c+=1)<i&&(g=l(d=-e[c]))),(E=(o=x)-(m=(v=r+o)-r))&&(a[u++]=E),x=b-((y=b+v)-(_=y-b))+(v-_),b=y;for(;h<n;)(E=(o=x)-(m=(v=(r=p)+o)-r))&&(a[u++]=E),x=b-((y=b+v)-(_=y-b))+(v-_),b=y,(h+=1)<n&&(p=t[h]);for(;c<i;)(E=(o=x)-(m=(v=(r=d)+o)-r))&&(a[u++]=E),x=b-((y=b+v)-(_=y-b))+(v-_),b=y,(c+=1)<i&&(d=-e[c]);return x&&(a[u++]=x),b&&(a[u++]=b),u||(a[u++]=0),a.length=u,a},Fo=yt(function(t){function e(t,e){for(var n=new Array(t.length-1),i=1;i<t.length;++i)for(var r=n[i-1]=new Array(t.length-1),o=0,s=0;o<t.length;++o)o!==e&&(r[s++]=t[i][o]);return n}function n(t){return 1&t?"-":""}function i(t){if(1===t.length)return t[0];if(2===t.length)return["sum(",t[0],",",t[1],")"].join("");var e=t.length>>1;return["sum(",i(t.slice(0,e)),",",i(t.slice(e)),")"].join("")}function r(t){if(2===t.length)return[["sum(prod(",t[0][0],",",t[1][1],"),prod(-",t[0][1],",",t[1][0],"))"].join("")];for(var o=[],s=0;s<t.length;++s)o.push(["scale(",i(r(e(t,s))),",",n(s),t[0][s],")"].join(""));return o}function o(t){for(var n=[],o=[],s=function(t){for(var e=new Array(t),n=0;n<t;++n){e[n]=new Array(t);for(var i=0;i<t;++i)e[n][i]=["m",i,"[",t-n-1,"]"].join("")}return e}(t),a=[],u=0;u<t;++u)0==(1&u)?n.push.apply(n,r(e(s,u))):o.push.apply(o,r(e(s,u))),a.push("m"+u);var h=i(n),c=i(o),l="orientation"+t+"Exact",p=["function ",l,"(",a.join(),"){var p=",h,",n=",c,",d=sub(p,n);return d[d.length-1];};return ",l].join("");return new Function("sum","prod","scale","sub",p)(Mo,No,Ao,Do)}var s=o(3),a=o(4),u=[function(){return 0},function(){return 0},function(t,e){return e[0]-t[0]},function(t,e,n){var i,r=(t[1]-n[1])*(e[0]-n[0]),o=(t[0]-n[0])*(e[1]-n[1]),a=r-o;if(r>0){if(o<=0)return a;i=r+o}else{if(!(r<0))return a;if(o>=0)return a;i=-(r+o)}var u=3.3306690738754716e-16*i;return a>=u||a<=-u?a:s(t,e,n)},function(t,e,n,i){var r=t[0]-i[0],o=e[0]-i[0],s=n[0]-i[0],u=t[1]-i[1],h=e[1]-i[1],c=n[1]-i[1],l=t[2]-i[2],p=e[2]-i[2],f=n[2]-i[2],d=o*c,g=s*h,y=s*u,_=r*c,v=r*h,m=o*u,E=l*(d-g)+p*(y-_)+f*(v-m),x=7.771561172376103e-16*((Math.abs(d)+Math.abs(g))*Math.abs(l)+(Math.abs(y)+Math.abs(_))*Math.abs(p)+(Math.abs(v)+Math.abs(m))*Math.abs(f));return E>x||-E>x?E:a(t,e,n,i)}];!function(){for(;u.length<=5;)u.push(o(u.length));for(var e=[],n=["slow"],i=0;i<=5;++i)e.push("a"+i),n.push("o"+i);var r=["function getOrientation(",e.join(),"){switch(arguments.length){case 0:case 1:return 0;"];for(i=2;i<=5;++i)r.push("case ",i,":return o",i,"(",e.slice(0,i).join(),");");r.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation"),n.push(r.join(""));var s=Function.apply(void 0,n);for(t.exports=s.apply(void 0,[function(t){var e=u[t.length];return e||(e=u[t.length]=o(t.length)),e.apply(void 0,t)}].concat(u)),i=0;i<=5;++i)t.exports[i]=u[i]}()}),jo=function(t){var e=t.length;if(e<3){for(var n=new Array(e),i=0;i<e;++i)n[i]=i;return 2===e&&t[0][0]===t[1][0]&&t[0][1]===t[1][1]?[0]:n}var r=new Array(e);for(i=0;i<e;++i)r[i]=i;r.sort(function(e,n){var i=t[e][0]-t[n][0];return i||t[e][1]-t[n][1]});var o=[r[0],r[1]],s=[r[0],r[1]];for(i=2;i<e;++i){for(var a=r[i],u=t[a],h=o.length;h>1&&Go(t[o[h-2]],t[o[h-1]],u)<=0;)h-=1,o.pop();for(o.push(a),h=s.length;h>1&&Go(t[s[h-2]],t[s[h-1]],u)>=0;)h-=1,s.pop();s.push(a)}n=new Array(s.length+o.length-2);for(var c=0,l=(i=0,o.length);i<l;++i)n[c++]=o[i];for(var p=s.length-2;p>0;--p)n[c++]=s[p];return n},Go=Fo[3],ko=_t,Bo=_t;_t.prototype={push:function(t){this.data.push(t),this.length++,this._up(this.length-1)},pop:function(){if(0!==this.length){var t=this.data[0];return this.length--,this.length>0&&(this.data[0]=this.data[this.length],this._down(0)),this.data.pop(),t}},peek:function(){return this.data[0]},_up:function(t){for(var e=this.data,n=this.compare,i=e[t];t>0;){var r=t-1>>1,o=e[r];if(n(i,o)>=0)break;e[t]=o,t=r}e[t]=i},_down:function(t){for(var e=this.data,n=this.compare,i=this.length>>1,r=e[t];t<i;){var o=1+(t<<1),s=o+1,a=e[o];if(s<this.length&&n(e[s],a)<0&&(o=s,a=e[s]),n(a,r)>=0)break;e[t]=a,t=o}e[t]=r}},ko.default=Bo;var Yo=function(t,e){for(var n=t[0],i=t[1],r=!1,o=0,s=e.length-1;o<e.length;s=o++){var a=e[o][0],u=e[o][1],h=e[s][0],c=e[s][1];u>i!=c>i&&n<(h-a)*(i-u)/(c-u)+a&&(r=!r)}return r},Xo=Fo[3],qo=vt,Uo=vt;qo.default=Uo;var zo=function(t){return t},Vo=function(t){if(null==t)return zo;var e,n,i=t.scale[0],r=t.scale[1],o=t.translate[0],s=t.translate[1];return function(t,a){a||(e=n=0);var u=2,h=t.length,c=new Array(h);for(c[0]=(e+=t[0])*i+o,c[1]=(n+=t[1])*r+s;u<h;)c[u]=t[u],++u;return c}},Wo=function(t,e){for(var n,i=t.length,r=i-e;r<--i;)n=t[r],t[r++]=t[i],t[i]=n},Ko=function(t,e){function n(t,e){for(var n in t){var r=t[n];delete e[r.start],delete r.start,delete r.end,r.forEach(function(t){i[t<0?~t:t]=1}),s.push(r)}}var i={},r={},o={},s=[],a=-1;return e.forEach(function(n,i){var r,o=t.arcs[n<0?~n:n];o.length<3&&!o[1][0]&&!o[1][1]&&(r=e[++a],e[a]=n,e[i]=r)}),e.forEach(function(e){var n,i,s=function(e){var n,i=t.arcs[e<0?~e:e],r=i[0];return t.transform?(n=[0,0],i.forEach(function(t){n[0]+=t[0],n[1]+=t[1]})):n=i[i.length-1],e<0?[n,r]:[r,n]}(e),a=s[0],u=s[1];if(n=o[a])if(delete o[n.end],n.push(e),n.end=u,i=r[u]){delete r[i.start];var h=i===n?n:n.concat(i);r[h.start=n.start]=o[h.end=i.end]=h}else r[n.start]=o[n.end]=n;else if(n=r[u])if(delete r[n.start],n.unshift(e),n.start=a,i=o[a]){delete o[i.end];var c=i===n?n:i.concat(n);r[c.start=i.start]=o[c.end=n.end]=c}else r[n.start]=o[n.end]=n;else r[(n=[e]).start=a]=o[n.end=u]=n}),n(o,r),n(r,o),e.forEach(function(t){i[t<0?~t:t]||s.push([t])}),s},Ho=function(t){return kt(t,function(t,e){function n(t){t.forEach(function(e){e.forEach(function(e){(r[e=e<0?~e:e]||(r[e]=[])).push(t)})}),o.push(t)}function i(e){return function(t){for(var e,n=-1,i=t.length,r=t[i-1],o=0;++n<i;)e=r,r=t[n],o+=e[0]*r[1]-e[1]*r[0];return Math.abs(o)}(kt(t,{type:"Polygon",arcs:[e]}).coordinates[0])}var r={},o=[],s=[];return e.forEach(function t(e){switch(e.type){case"GeometryCollection":e.geometries.forEach(t);break;case"Polygon":n(e.arcs);break;case"MultiPolygon":e.arcs.forEach(n)}}),o.forEach(function(t){if(!t._){var e=[],n=[t];for(t._=1,s.push(e);t=n.pop();)e.push(t),t.forEach(function(t){t.forEach(function(t){r[t<0?~t:t].forEach(function(t){t._||(t._=1,n.push(t))})})})}}),o.forEach(function(t){delete t._}),{type:"MultiPolygon",arcs:s.map(function(e){var n,o=[];if(e.forEach(function(t){t.forEach(function(t){t.forEach(function(t){r[t<0?~t:t].length<2&&o.push(t)})})}),o=Ko(t,o),(n=o.length)>1)for(var s,a,u=1,h=i(o[0]);u<n;++u)(s=i(o[u]))>h&&(a=o[0],o[0]=o[u],o[u]=a,h=s);return o})}}.apply(this,arguments))},Zo=function(t,e,n,i,r,o){3===arguments.length&&(i=o=Array,r=null);for(var s=new i(t=1<<Math.max(4,Math.ceil(Math.log(t)/Math.LN2))),a=new o(t),u=t-1,h=0;h<t;++h)s[h]=r;return{set:function(i,o){for(var h=e(i)&u,c=s[h],l=0;c!=r;){if(n(c,i))return a[h]=o;if(++l>=t)throw new Error("full hashmap");c=s[h=h+1&u]}return s[h]=i,a[h]=o,o},maybeSet:function(i,o){for(var h=e(i)&u,c=s[h],l=0;c!=r;){if(n(c,i))return a[h];if(++l>=t)throw new Error("full hashmap");c=s[h=h+1&u]}return s[h]=i,a[h]=o,o},get:function(i,o){for(var h=e(i)&u,c=s[h],l=0;c!=r;){if(n(c,i))return a[h];if(++l>=t)break;c=s[h=h+1&u]}return o},keys:function(){for(var t=[],e=0,n=s.length;e<n;++e){var i=s[e];i!=r&&t.push(i)}return t}}},Jo=function(t,e){return t[0]===e[0]&&t[1]===e[1]},Qo=new ArrayBuffer(16),$o=new Float64Array(Qo),ts=new Uint32Array(Qo),es=function(t){$o[0]=t[0],$o[1]=t[1];var e=ts[0]^ts[1];return 2147483647&(e=e<<5^e>>7^ts[2]^ts[3])},ns=function(t){var e,n,i,r=function(t){function e(t,e,n,i){if(p[n]!==t){p[n]=t;var r=f[n];if(r>=0){var o=d[n];r===e&&o===i||r===i&&o===e||(++y,g[n]=1)}else f[n]=e,d[n]=i}}function n(t){return es(u[t])}function i(t,e){return Jo(u[t],u[e])}var r,o,s,a,u=t.coordinates,h=t.lines,c=t.rings,l=function(){for(var t=Zo(1.4*u.length,n,i,Int32Array,-1,Int32Array),e=new Int32Array(u.length),r=0,o=u.length;r<o;++r)e[r]=t.maybeSet(r,r);return e}(),p=new Int32Array(u.length),f=new Int32Array(u.length),d=new Int32Array(u.length),g=new Int8Array(u.length),y=0;for(r=0,o=u.length;r<o;++r)p[r]=f[r]=d[r]=-1;for(r=0,o=h.length;r<o;++r){var _=h[r],v=_[0],m=_[1];for(s=l[v],a=l[++v],++y,g[s]=1;++v<=m;)e(r,s,s=a,a=l[v]);++y,g[a]=1}for(r=0,o=u.length;r<o;++r)p[r]=-1;for(r=0,o=c.length;r<o;++r){var E=c[r],x=E[0]+1,b=E[1];for(e(r,l[b-1],s=l[x-1],a=l[x]);++x<=b;)e(r,s,s=a,a=l[x])}p=f=d=null;var w,C=function(t,e,n,i,r){3===arguments.length&&(i=Array,r=null);for(var o=new i(t=1<<Math.max(4,Math.ceil(Math.log(t)/Math.LN2))),s=t-1,a=0;a<t;++a)o[a]=r;return{add:function(i){for(var a=e(i)&s,u=o[a],h=0;u!=r;){if(n(u,i))return!0;if(++h>=t)throw new Error("full hashset");u=o[a=a+1&s]}return o[a]=i,!0},has:function(i){for(var a=e(i)&s,u=o[a],h=0;u!=r;){if(n(u,i))return!0;if(++h>=t)break;u=o[a=a+1&s]}return!1},values:function(){for(var t=[],e=0,n=o.length;e<n;++e){var i=o[e];i!=r&&t.push(i)}return t}}}(1.4*y,es,Jo);for(r=0,o=u.length;r<o;++r)g[w=l[r]]&&C.add(u[w]);return C}(t),o=t.coordinates,s=t.lines,a=t.rings;for(n=0,i=s.length;n<i;++n)for(var u=s[n],h=u[0],c=u[1];++h<c;)r.has(o[h])&&(e={0:h,1:u[1]},u[1]=h,u=u.next=e);for(n=0,i=a.length;n<i;++n)for(var l=a[n],p=l[0],f=p,d=l[1],g=r.has(o[p]);++f<d;)r.has(o[f])&&(g?(e={0:f,1:l[1]},l[1]=f,l=l.next=e):(function(t,e,n,i){Bt(t,e,n),Bt(t,e,e+i),Bt(t,e+i,n)}(o,p,d,d-f),o[d]=o[p],g=!0,f=p));return t},is=function(t,e){function n(t){t&&c.hasOwnProperty(t.type)&&c[t.type](t)}function i(t){var e=[];do{var n=h.get(t);e.push(t[0]<t[1]?n:~n)}while(t=t.next);return e}function r(t){return t.map(i)}var o=function(t){function e(t){null!=t&&h.hasOwnProperty(t.type)&&h[t.type](t)}function n(t){var e=t[0],n=t[1];e<o&&(o=e),e>a&&(a=e),n<s&&(s=n),n>u&&(u=n)}function i(t){t.forEach(n)}function r(t){t.forEach(i)}var o=1/0,s=1/0,a=-1/0,u=-1/0,h={GeometryCollection:function(t){t.geometries.forEach(e)},Point:function(t){n(t.coordinates)},MultiPoint:function(t){t.coordinates.forEach(n)},LineString:function(t){i(t.arcs)},MultiLineString:function(t){t.arcs.forEach(i)},Polygon:function(t){t.arcs.forEach(i)},MultiPolygon:function(t){t.arcs.forEach(r)}};for(var c in t)e(t[c]);return a>=o&&u>=s?[o,s,a,u]:void 0}(t=function(t){var e,n={};for(e in t)n[e]=Yt(t[e]);return n}(t)),s=e>0&&o&&function(t,e,n){function i(t){return[Math.round((t[0]-h)*f),Math.round((t[1]-c)*d)]}function r(t,e){for(var n,i,r,o,s,a=-1,u=0,l=t.length,p=new Array(l);++a<l;)n=t[a],o=Math.round((n[0]-h)*f),s=Math.round((n[1]-c)*d),o===i&&s===r||(p[u++]=[i=o,r=s]);for(p.length=u;u<e;)u=p.push([p[0][0],p[0][1]]);return p}function o(t){return r(t,2)}function s(t){return r(t,4)}function a(t){return t.map(s)}function u(t){null!=t&&g.hasOwnProperty(t.type)&&g[t.type](t)}var h=e[0],c=e[1],l=e[2],p=e[3],f=l-h?(n-1)/(l-h):1,d=p-c?(n-1)/(p-c):1,g={GeometryCollection:function(t){t.geometries.forEach(u)},Point:function(t){t.coordinates=i(t.coordinates)},MultiPoint:function(t){t.coordinates=t.coordinates.map(i)},LineString:function(t){t.arcs=o(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(o)},Polygon:function(t){t.arcs=a(t.arcs)},MultiPolygon:function(t){t.arcs=t.arcs.map(a)}};for(var y in t)u(t[y]);return{scale:[1/f,1/d],translate:[h,c]}}(t,o,e),a=function(t){function e(t){var e,n,i,r,o,s,a,u;if(i=f.get(e=h[t[0]]))for(a=0,u=i.length;a<u;++a)if(function(t,e){var n=t[0],i=e[0],r=t[1],o=e[1];if(n-r!=i-o)return!1;for(;n<=r;++n,++i)if(!Jo(h[n],h[i]))return!1;return!0}(r=i[a],t))return t[0]=r[0],void(t[1]=r[1]);if(o=f.get(n=h[t[1]]))for(a=0,u=o.length;a<u;++a)if(function(t,e){var n=t[0],i=e[0],r=t[1],o=e[1];if(n-r!=i-o)return!1;for(;n<=r;++n,--o)if(!Jo(h[n],h[o]))return!1;return!0}(s=o[a],t))return t[1]=s[0],void(t[0]=s[1]);i?i.push(t):f.set(e,[t]),o?o.push(t):f.set(n,[t]),d.push(t)}function n(t,e){var n=t[0],i=e[0],o=t[1]-n;if(o!==e[1]-i)return!1;for(var s=r(t),a=r(e),u=0;u<o;++u)if(!Jo(h[n+(u+s)%o],h[i+(u+a)%o]))return!1;return!0}function i(t,e){var n=t[0],i=e[0],o=t[1],s=e[1],a=o-n;if(a!==s-i)return!1;for(var u=r(t),c=a-r(e),l=0;l<a;++l)if(!Jo(h[n+(l+u)%a],h[s-(l+c)%a]))return!1;return!0}function r(t){for(var e=t[0],n=t[1],i=e,r=i,o=h[i];++i<n;){var s=h[i];(s[0]<o[0]||s[0]===o[0]&&s[1]<o[1])&&(r=i,o=s)}return r-e}var o,s,a,u,h=t.coordinates,c=t.lines,l=t.rings,p=c.length+l.length;for(delete t.lines,delete t.rings,a=0,u=c.length;a<u;++a)for(o=c[a];o=o.next;)++p;for(a=0,u=l.length;a<u;++a)for(s=l[a];s=s.next;)++p;var f=Zo(2*p*1.4,es,Jo),d=t.arcs=[];for(a=0,u=c.length;a<u;++a){o=c[a];do{e(o)}while(o=o.next)}for(a=0,u=l.length;a<u;++a)if((s=l[a]).next)do{e(s)}while(s=s.next);else!function(t){var e,o,s,a,u;if(o=f.get(e=h[t[0]]))for(a=0,u=o.length;a<u;++a){if(n(s=o[a],t))return t[0]=s[0],void(t[1]=s[1]);if(i(s,t))return t[0]=s[1],void(t[1]=s[0])}if(o=f.get(e=h[t[0]+r(t)]))for(a=0,u=o.length;a<u;++a){if(n(s=o[a],t))return t[0]=s[0],void(t[1]=s[1]);if(i(s,t))return t[0]=s[1],void(t[1]=s[0])}o?o.push(t):f.set(e,[t]),d.push(t)}(s);return t}(ns(function(t){function e(t){t&&h.hasOwnProperty(t.type)&&h[t.type](t)}function n(t){for(var e=0,n=t.length;e<n;++e)u[++o]=t[e];var i={0:o-n+1,1:o};return s.push(i),i}function i(t){for(var e=0,n=t.length;e<n;++e)u[++o]=t[e];var i={0:o-n+1,1:o};return a.push(i),i}function r(t){return t.map(i)}var o=-1,s=[],a=[],u=[],h={GeometryCollection:function(t){t.geometries.forEach(e)},LineString:function(t){t.arcs=n(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(n)},Polygon:function(t){t.arcs=t.arcs.map(i)},MultiPolygon:function(t){t.arcs=t.arcs.map(r)}};for(var c in t)e(t[c]);return{type:"Topology",coordinates:u,lines:s,rings:a,objects:t}}(t))),u=a.coordinates,h=Zo(1.4*a.arcs.length,Ut,zt);t=a.objects,a.bbox=o,a.arcs=a.arcs.map(function(t,e){return h.set(t,e),u.slice(t[0],t[1]+1)}),delete a.coordinates,u=null;var c={GeometryCollection:function(t){t.geometries.forEach(n)},LineString:function(t){t.arcs=i(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(i)},Polygon:function(t){t.arcs=t.arcs.map(i)},MultiPolygon:function(t){t.arcs=t.arcs.map(r)}};for(var l in t)n(t[l]);return s&&(a.transform=s,a.arcs=function(t){for(var e=-1,n=t.length;++e<n;){for(var i,r,o=t[e],s=0,a=1,u=o.length,h=o[0],c=h[0],l=h[1];++s<u;)i=(h=o[s])[0],r=h[1],i===c&&r===l||(o[a++]=[i-c,r-l],c=i,l=r);1===a&&(o[a++]=[0,0]),o.length=a}return t}(a.arcs)),a},rs=function(t){this.points=t.points||[],this.duration=t.duration||1e4,this.sharpness=t.sharpness||.85,this.centers=[],this.controls=[],this.stepLength=t.stepLength||60,this.length=this.points.length,this.delay=0;for(var e=0;e<this.length;e++)this.points[e].z=this.points[e].z||0;for(e=0;e<this.length-1;e++){var n=this.points[e],i=this.points[e+1];this.centers.push({x:(n.x+i.x)/2,y:(n.y+i.y)/2,z:(n.z+i.z)/2})}for(this.controls.push([this.points[0],this.points[0]]),e=0;e<this.centers.length-1;e++){n=this.centers[e],i=this.centers[e+1];var r=this.points[e+1].x-(this.centers[e].x+this.centers[e+1].x)/2,o=this.points[e+1].y-(this.centers[e].y+this.centers[e+1].y)/2,s=this.points[e+1].z-(this.centers[e].y+this.centers[e+1].z)/2;this.controls.push([{x:(1-this.sharpness)*this.points[e+1].x+this.sharpness*(this.centers[e].x+r),y:(1-this.sharpness)*this.points[e+1].y+this.sharpness*(this.centers[e].y+o),z:(1-this.sharpness)*this.points[e+1].z+this.sharpness*(this.centers[e].z+s)},{x:(1-this.sharpness)*this.points[e+1].x+this.sharpness*(this.centers[e+1].x+r),y:(1-this.sharpness)*this.points[e+1].y+this.sharpness*(this.centers[e+1].y+o),z:(1-this.sharpness)*this.points[e+1].z+this.sharpness*(this.centers[e+1].z+s)}])}return this.controls.push([this.points[this.length-1],this.points[this.length-1]]),this.steps=this.cacheSteps(this.stepLength),this};rs.prototype.cacheSteps=function(t){var e=[],n=this.pos(0);e.push(0);for(var i=0;i<this.duration;i+=10){var r=this.pos(i);Math.sqrt((r.x-n.x)*(r.x-n.x)+(r.y-n.y)*(r.y-n.y)+(r.z-n.z)*(r.z-n.z))>t&&(e.push(i),n=r)}return e},rs.prototype.vector=function(t){var e=this.pos(t+10),n=this.pos(t-10);return{angle:180*Math.atan2(e.y-n.y,e.x-n.x)/3.14,speed:Math.sqrt((n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y)+(n.z-e.z)*(n.z-e.z))}},rs.prototype.pos=function(t){var e=t-this.delay;e<0&&(e=0),e>this.duration&&(e=this.duration-1);var n=e/this.duration;if(n>=1)return this.points[this.length-1];var i=Math.floor((this.points.length-1)*n);return function(t,e,n,i,r){var o=function(t){var e=t*t;return[e*t,3*e*(1-t),3*t*(1-t)*(1-t),(1-t)*(1-t)*(1-t)]}(t);return{x:r.x*o[0]+i.x*o[1]+n.x*o[2]+e.x*o[3],y:r.y*o[0]+i.y*o[1]+n.y*o[2]+e.y*o[3],z:r.z*o[0]+i.z*o[1]+n.z*o[2]+e.z*o[3]}}((this.length-1)*n-i,this.points[i],this.controls[i][1],this.controls[i+1][0],this.points[i+1])};var os=le,ss=le;le.deviation=function(t,e,n,i){var r=e&&e.length,o=r?e[0]*n:t.length,s=Math.abs(Oe(t,0,o,n));if(r)for(var a=0,u=e.length;a<u;a++){var h=e[a]*n,c=a<u-1?e[a+1]*n:t.length;s-=Math.abs(Oe(t,h,c,n))}var l=0;for(a=0;a<i.length;a+=3){var p=i[a]*n,f=i[a+1]*n,d=i[a+2]*n;l+=Math.abs((t[p]-t[d])*(t[f+1]-t[p+1])-(t[p]-t[f])*(t[d+1]-t[p+1]))}return 0===s&&0===l?0:Math.abs((l-s)/s)},le.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},i=0,r=0;r<t.length;r++){for(var o=0;o<t[r].length;o++)for(var s=0;s<e;s++)n.vertices.push(t[r][o][s]);r>0&&(i+=t[r-1].length,n.holes.push(i))}return n},os.default=ss,Ne.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,n=[],i=this.toBBox;if(!ke(t,e))return n;for(var r,o,s,a,u=[];e;){for(r=0,o=e.children.length;r<o;r++)s=e.children[r],ke(t,a=e.leaf?i(s):s)&&(e.leaf?n.push(s):Ge(t,a)?this._all(s,n):u.push(s));e=u.pop()}return n},collides:function(t){var e=this.data,n=this.toBBox;if(!ke(t,e))return!1;for(var i,r,o,s,a=[];e;){for(i=0,r=e.children.length;i<r;i++)if(o=e.children[i],s=e.leaf?n(o):o,ke(t,s)){if(e.leaf||Ge(t,s))return!0;a.push(o)}e=a.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,n=t.length;e<n;e++)this.insert(t[e]);return this}var i=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===i.height)this._splitRoot(this.data,i);else{if(this.data.height<i.height){var r=this.data;this.data=i,i=r}this._insert(i,this.data.height-i.height-1,!0)}else this.data=i;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=Be([]),this},remove:function(t,e){if(!t)return this;for(var n,i,r,o,s=this.data,a=this.toBBox(t),u=[],h=[];s||u.length;){if(s||(s=u.pop(),i=u[u.length-1],n=h.pop(),o=!0),s.leaf&&-1!==(r=function(t,e,n){if(!n)return e.indexOf(t);for(var i=0;i<e.length;i++)if(n(t,e[i]))return i;return-1}(t,s.children,e)))return s.children.splice(r,1),u.push(s),this._condense(u),this;o||s.leaf||!Ge(s,a)?i?(n++,s=i.children[n],o=!1):s=null:(u.push(s),h.push(n),n=0,i=s,s=s.children[0])}return this},toBBox:function(t){return t},compareMinX:Ae,compareMinY:De,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},_build:function(t,e,n,i){var r,o=n-e+1,s=this._maxEntries;if(o<=s)return Le(r=Be(t.slice(e,n+1)),this.toBBox),r;i||(i=Math.ceil(Math.log(o)/Math.log(s)),s=Math.ceil(o/Math.pow(s,i-1))),(r=Be([])).leaf=!1,r.height=i;var a,u,h,c,l=Math.ceil(o/s),p=l*Math.ceil(Math.sqrt(s));for(Ye(t,e,n,p,this.compareMinX),a=e;a<=n;a+=p)for(Ye(t,a,h=Math.min(a+p-1,n),l,this.compareMinY),u=a;u<=h;u+=l)c=Math.min(u+l-1,h),r.children.push(this._build(t,u,c,i-1));return Le(r,this.toBBox),r},_chooseSubtree:function(t,e,n,i){for(var r,o,s,a,u,h,c,l;i.push(e),!e.leaf&&i.length-1!==n;){for(c=l=1/0,r=0,o=e.children.length;r<o;r++)u=Fe(s=e.children[r]),(h=function(t,e){return(Math.max(e.maxX,t.maxX)-Math.min(e.minX,t.minX))*(Math.max(e.maxY,t.maxY)-Math.min(e.minY,t.minY))}(t,s)-u)<l?(l=h,c=u<c?u:c,a=s):h===l&&u<c&&(c=u,a=s);e=a||e.children[0]}return e},_insert:function(t,e,n){var i=this.toBBox,r=n?t:i(t),o=[],s=this._chooseSubtree(r,this.data,e,o);for(s.children.push(t),Pe(s,r);e>=0&&o[e].children.length>this._maxEntries;)this._split(o,e),e--;this._adjustParentBBoxes(r,o,e)},_split:function(t,e){var n=t[e],i=n.children.length,r=this._minEntries;this._chooseSplitAxis(n,r,i);var o=this._chooseSplitIndex(n,r,i),s=Be(n.children.splice(o,n.children.length-o));s.height=n.height,s.leaf=n.leaf,Le(n,this.toBBox),Le(s,this.toBBox),e?t[e-1].children.push(s):this._splitRoot(n,s)},_splitRoot:function(t,e){this.data=Be([t,e]),this.data.height=t.height+1,this.data.leaf=!1,Le(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,n){var i,r,o,s,a,u,h,c;for(u=h=1/0,i=e;i<=n-e;i++)s=function(t,e){var n=Math.max(t.minX,e.minX),i=Math.max(t.minY,e.minY),r=Math.min(t.maxX,e.maxX),o=Math.min(t.maxY,e.maxY);return Math.max(0,r-n)*Math.max(0,o-i)}(r=Me(t,0,i,this.toBBox),o=Me(t,i,n,this.toBBox)),a=Fe(r)+Fe(o),s<u?(u=s,c=i,h=a<h?a:h):s===u&&a<h&&(h=a,c=i);return c},_chooseSplitAxis:function(t,e,n){var i=t.leaf?this.compareMinX:Ae,r=t.leaf?this.compareMinY:De;this._allDistMargin(t,e,n,i)<this._allDistMargin(t,e,n,r)&&t.children.sort(i)},_allDistMargin:function(t,e,n,i){t.children.sort(i);var r,o,s=this.toBBox,a=Me(t,0,e,s),u=Me(t,n-e,n,s),h=je(a)+je(u);for(r=e;r<n-e;r++)o=t.children[r],Pe(a,t.leaf?s(o):o),h+=je(a);for(r=n-e-1;r>=e;r--)o=t.children[r],Pe(u,t.leaf?s(o):o),h+=je(u);return h},_adjustParentBBoxes:function(t,e,n){for(var i=n;i>=0;i--)Pe(e[i],t)},_condense:function(t){for(var e,n=t.length-1;n>=0;n--)0===t[n].children.length?n>0?(e=t[n-1].children).splice(e.indexOf(t[n]),1):this.clear():Le(t[n],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}};var as=Object.freeze({toMercator:Qe,toWgs84:$e}),us=6378137,hs=function(t){function e(){for(var t=[],e=0;e<d.features.length;e++)-1==d.features[e].properties.parent&&t.push(e);if(t.length>1)for(e=0;e<t.length;e++){for(var n=-1,i=0;i<d.features.length;i++)t[e]!=i&&Tt(d.features[t[e]].geometry.coordinates[0][0],d.features[i],{ignoreBoundary:!0})&&un(d.features[i])<1/0&&(n=i);d.features[t[e]].properties.parent=n}}function n(){for(var t=0;t<d.features.length;t++)if(-1==d.features[t].properties.parent){var e=d.features[t].properties.winding;d.features[t].properties.netWinding=e,i(t,e)}}function i(t,e){for(var n=0;n<d.features.length;n++)if(d.features[n].properties.parent==t){var r=e+d.features[n].properties.winding;d.features[n].properties.netWinding=r,i(n,r)}}if("Feature"!=t.type)throw new Error("The input must a geojson object of type Feature");if(void 0===t.geometry||null==t.geometry)throw new Error("The input must a geojson object with a non-empty geometry");if("Polygon"!=t.geometry.type)throw new Error("The input must be a geojson Polygon");for(var r=t.geometry.coordinates.length,s=[],a=0;a<r;a++){var u=t.geometry.coordinates[a];bn(u[0],u[u.length-1])||u.push(u[0]),s.push.apply(s,u.slice(0,u.length-1))}if(!function(t){for(var e={},n=1,i=0,r=t.length;i<r;++i){if(e.hasOwnProperty(t[i])){n=0;break}e[t[i]]=1}return n}(s))throw new Error("The input polygon may not have duplicate vertices (except for the first and last vertex of each ring)");var c=s.length,l=function(t,e,n){function i(t,n,i,r){var u,h,c=o[t][n],l=o[t][n+1],p=o[i][r],f=o[i][r+1],d=function(t,e,n,i){if(En(t,n)||En(t,i)||En(e,n)||En(i,n))return null;var r=t[0],o=t[1],s=e[0],a=e[1],u=n[0],h=n[1],c=i[0],l=i[1],p=(r-s)*(h-l)-(o-a)*(u-c);return 0===p?null:[((r*a-o*s)*(u-c)-(r-s)*(u*l-h*c))/p,((r*a-o*s)*(h-l)-(o-a)*(u*l-h*c))/p]}(c,l,p,f);if(null!==d&&(u=l[0]!==c[0]?(d[0]-c[0])/(l[0]-c[0]):(d[1]-c[1])/(l[1]-c[1]),h=f[0]!==p[0]?(d[0]-p[0])/(f[0]-p[0]):(d[1]-p[1])/(f[1]-p[1]),!(u>=1||u<=0||h>=1||h<=0))){var g=d,y=!a[g];y&&(a[g]=!0),e?s.push(e(d,t,n,c,l,u,i,r,p,f,h,y)):s.push(d)}}function r(t,e){var n,i,r,s,a=o[t][e],u=o[t][e+1];return a[0]<u[0]?(n=a[0],i=u[0]):(n=u[0],i=a[0]),a[1]<u[1]?(r=a[1],s=u[1]):(r=u[1],s=a[1]),{minX:n,minY:r,maxX:i,maxY:s,ring:t,edge:e}}if("Polygon"!==t.geometry.type)throw new Error("The input feature must be a Polygon");void 0===n&&(n=1);var o=t.geometry.coordinates,s=[],a={};if(n){for(var u=[],h=0;h<o.length;h++)for(var c=0;c<o[h].length-1;c++)u.push(r(h,c));var l=Ro();l.load(u)}for(var p=0;p<o.length;p++)for(var f=0;f<o[p].length-1;f++)if(n)l.search(r(p,f)).forEach(function(t){var e=t.ring,n=t.edge;i(p,f,e,n)});else for(var d=0;d<o.length;d++)for(var g=0;g<o[d].length-1;g++)i(p,f,d,g);return e||(s={type:"Feature",geometry:{type:"MultiPoint",coordinates:s}}),s}(t,function(t,e,n,i,r,o,s,a,u,h,c,l){return[t,e,n,i,r,o,s,a,u,h,c,l]}),p=l.length;if(0==p){var f=[];for(a=0;a<r;a++)f.push(o([t.geometry.coordinates[a]],{parent:-1,winding:function(t){for(var e=0,n=0;n<t.length-1;n++)t[n][0]<t[e][0]&&(e=n);if(xn([t[(e-1).modulo(t.length-1)],t[e],t[(e+1).modulo(t.length-1)]],!0))var i=1;else i=-1;return i}(t.geometry.coordinates[a])}));var d=h(f);return e(),n(),d}var g=[],y=[];for(a=0;a<r;a++){g.push([]);for(var _=0;_<t.geometry.coordinates[a].length-1;_++)g[a].push([new cs(t.geometry.coordinates[a][(_+1).modulo(t.geometry.coordinates[a].length-1)],1,[a,_],[a,(_+1).modulo(t.geometry.coordinates[a].length-1)],void 0)]),y.push(new ls(t.geometry.coordinates[a][_],[a,(_-1).modulo(t.geometry.coordinates[a].length-1)],[a,_],void 0,void 0,!1,!0))}for(a=0;a<p;a++)g[l[a][1]][l[a][2]].push(new cs(l[a][0],l[a][5],[l[a][1],l[a][2]],[l[a][6],l[a][7]],void 0)),l[a][11]&&y.push(new ls(l[a][0],[l[a][1],l[a][2]],[l[a][6],l[a][7]],void 0,void 0,!0,!0));var v=y.length;for(a=0;a<g.length;a++)for(_=0;_<g[a].length;_++)g[a][_].sort(function(t,e){return t.param<e.param?-1:1});var m=[];for(a=0;a<v;a++)m.push({minX:y[a].coord[0],minY:y[a].coord[1],maxX:y[a].coord[0],maxY:y[a].coord[1],index:a});var E=Ro();for(E.load(m),a=0;a<g.length;a++)for(_=0;_<g[a].length;_++)for(var x=0;x<g[a][_].length;x++){w=x==g[a][_].length-1?g[a][(_+1).modulo(t.geometry.coordinates[a].length-1)][0].coord:g[a][_][x+1].coord;var b=E.search({minX:w[0],minY:w[1],maxX:w[0],maxY:w[1]})[0];g[a][_][x].nxtIsectAlongEdgeIn=b.index}for(a=0;a<g.length;a++)for(_=0;_<g[a].length;_++)for(x=0;x<g[a][_].length;x++){var w=g[a][_][x].coord,C=(b=E.search({minX:w[0],minY:w[1],maxX:w[0],maxY:w[1]})[0]).index;C<c?y[C].nxtIsectAlongRingAndEdge2=g[a][_][x].nxtIsectAlongEdgeIn:bn(y[C].ringAndEdge1,g[a][_][x].ringAndEdgeIn)?y[C].nxtIsectAlongRingAndEdge1=g[a][_][x].nxtIsectAlongEdgeIn:y[C].nxtIsectAlongRingAndEdge2=g[a][_][x].nxtIsectAlongEdgeIn}var O=[];for(a=0,_=0;_<r;_++){var I=a;for(x=0;x<t.geometry.coordinates[_].length-1;x++)y[a].coord[0]<y[I].coord[0]&&(I=a),a++;var S=y[I].nxtIsectAlongRingAndEdge2;for(x=0;x<y.length;x++)if(y[x].nxtIsectAlongRingAndEdge1==I||y[x].nxtIsectAlongRingAndEdge2==I){var T=x;break}var R=xn([y[T].coord,y[I].coord,y[S].coord],!0)?1:-1;O.push({isect:I,parent:-1,winding:R})}for(O.sort(function(t,e){return y[t.isect].coord>y[e.isect].coord?-1:1}),f=[];O.length>0;){var N=O.pop(),L=N.isect,M=N.parent,P=N.winding,A=f.length,D=[y[L].coord],F=L;if(y[L].ringAndEdge1Walkable)var j=y[L].ringAndEdge1,G=y[L].nxtIsectAlongRingAndEdge1;else j=y[L].ringAndEdge2,G=y[L].nxtIsectAlongRingAndEdge2;for(;!bn(y[L].coord,y[G].coord);){D.push(y[G].coord);var k=void 0;for(a=0;a<O.length;a++)if(O[a].isect==G){k=a;break}if(void 0!=k&&O.splice(k,1),bn(j,y[G].ringAndEdge1)){if(j=y[G].ringAndEdge2,y[G].ringAndEdge2Walkable=!1,y[G].ringAndEdge1Walkable){var B={isect:G};xn([y[F].coord,y[G].coord,y[y[G].nxtIsectAlongRingAndEdge2].coord],1==P)?(B.parent=M,B.winding=-P):(B.parent=A,B.winding=P),O.push(B)}F=G,G=y[G].nxtIsectAlongRingAndEdge2}else j=y[G].ringAndEdge1,y[G].ringAndEdge1Walkable=!1,y[G].ringAndEdge2Walkable&&(B={isect:G},xn([y[F].coord,y[G].coord,y[y[G].nxtIsectAlongRingAndEdge1].coord],1==P)?(B.parent=M,B.winding=-P):(B.parent=A,B.winding=P),O.push(B)),F=G,G=y[G].nxtIsectAlongRingAndEdge1}D.push(y[G].coord),f.push(o([D],{index:A,parent:M,winding:P,netWinding:void 0}))}return d=h(f),e(),n(),d},cs=function(t,e,n,i,r){this.coord=t,this.param=e,this.ringAndEdgeIn=n,this.ringAndEdgeOut=i,this.nxtIsectAlongEdgeIn=r},ls=function(t,e,n,i,r,o,s){this.coord=t,this.ringAndEdge1=e,this.ringAndEdge2=n,this.nxtIsectAlongRingAndEdge1=i,this.nxtIsectAlongRingAndEdge2=r,this.ringAndEdge1Walkable=o,this.ringAndEdge2Walkable=s};Number.prototype.modulo=function(t){return(this%t+t)%t};var ps=Math.PI/180,fs=180/Math.PI,ds=function(t,e){this.lon=t,this.lat=e,this.x=ps*t,this.y=ps*e};ds.prototype.view=function(){return String(this.lon).slice(0,4)+","+String(this.lat).slice(0,4)},ds.prototype.antipode=function(){var t=-1*this.lat,e=this.lon<0?180+this.lon:-1*(180-this.lon);return new ds(e,t)};var gs=function(){this.coords=[],this.length=0};gs.prototype.move_to=function(t){this.length++,this.coords.push(t)};var ys=function(t){this.properties=t||{},this.geometries=[]};ys.prototype.json=function(){if(this.geometries.length<=0)return{geometry:{type:"LineString",coordinates:null},type:"Feature",properties:this.properties};if(1===this.geometries.length)return{geometry:{type:"LineString",coordinates:this.geometries[0].coords},type:"Feature",properties:this.properties};for(var t=[],e=0;e<this.geometries.length;e++)t.push(this.geometries[e].coords);return{geometry:{type:"MultiLineString",coordinates:t},type:"Feature",properties:this.properties}},ys.prototype.wkt=function(){for(var t="",e="LINESTRING(",n=function(t){e+=t[0]+" "+t[1]+","},i=0;i<this.geometries.length;i++){if(0===this.geometries[i].coords.length)return"LINESTRING(empty)";this.geometries[i].coords.forEach(n),t+=e.substring(0,e.length-1)+")"}return t};var _s=function(t,e,n){if(!t||void 0===t.x||void 0===t.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");if(!e||void 0===e.x||void 0===e.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");this.start=new ds(t.x,t.y),this.end=new ds(e.x,e.y),this.properties=n||{};var i=this.start.x-this.end.x,r=this.start.y-this.end.y,o=Math.pow(Math.sin(r/2),2)+Math.cos(this.start.y)*Math.cos(this.end.y)*Math.pow(Math.sin(i/2),2);if(this.g=2*Math.asin(Math.sqrt(o)),this.g===Math.PI)throw new Error("it appears "+t.view()+" and "+e.view()+" are 'antipodal', e.g diametrically opposite, thus there is no single route but rather infinite");if(isNaN(this.g))throw new Error("could not calculate great circle between "+t+" and "+e)};_s.prototype.interpolate=function(t){var e=Math.sin((1-t)*this.g)/Math.sin(this.g),n=Math.sin(t*this.g)/Math.sin(this.g),i=e*Math.cos(this.start.y)*Math.cos(this.start.x)+n*Math.cos(this.end.y)*Math.cos(this.end.x),r=e*Math.cos(this.start.y)*Math.sin(this.start.x)+n*Math.cos(this.end.y)*Math.sin(this.end.x),o=e*Math.sin(this.start.y)+n*Math.sin(this.end.y),s=fs*Math.atan2(o,Math.sqrt(Math.pow(i,2)+Math.pow(r,2)));return[fs*Math.atan2(r,i),s]},_s.prototype.Arc=function(t,e){var n=[];if(!t||t<=2)n.push([this.start.lon,this.start.lat]),n.push([this.end.lon,this.end.lat]);else for(var i=1/(t-1),r=0;r<t;++r){var o=i*r,s=this.interpolate(o);n.push(s)}for(var a=!1,u=0,h=e&&e.offset?e.offset:10,c=180-h,l=-180+h,p=360-h,f=1;f<n.length;++f){var d=n[f-1][0],g=n[f][0],y=Math.abs(g-d);y>p&&(g>c&&d<l||d>c&&g<l)?a=!0:y>u&&(u=y)}var _=[];if(a&&u<h){var v=[];_.push(v);for(var m=0;m<n.length;++m){var E=parseFloat(n[m][0]);if(m>0&&Math.abs(E-n[m-1][0])>p){var x=parseFloat(n[m-1][0]),b=parseFloat(n[m-1][1]),w=parseFloat(n[m][0]),C=parseFloat(n[m][1]);if(x>-180&&x<l&&180===w&&m+1<n.length&&n[m-1][0]>-180&&n[m-1][0]<l){v.push([-180,n[m][1]]),m++,v.push([n[m][0],n[m][1]]);continue}if(x>c&&x<180&&-180===w&&m+1<n.length&&n[m-1][0]>c&&n[m-1][0]<180){v.push([180,n[m][1]]),m++,v.push([n[m][0],n[m][1]]);continue}if(x<l&&w>c){var O=x;x=w,w=O;var I=b;b=C,C=I}if(x>c&&w<l&&(w+=360),x<=180&&w>=180&&x<w){var S=(180-x)/(w-x),T=S*C+(1-S)*b;v.push([n[m-1][0]>c?180:-180,T]),(v=[]).push([n[m-1][0]>c?-180:180,T]),_.push(v)}else v=[],_.push(v);v.push([E,n[m][1]])}else v.push([n[m][0],n[m][1]])}}else{var R=[];_.push(R);for(var N=0;N<n.length;++N)R.push([n[N][0],n[N][1]])}for(var L=new ys(this.properties),M=0;M<_.length;++M){var P=new gs;L.geometries.push(P);for(var A=_[M],D=0;D<A.length;++D)P.move_to(A[D])}return L};var vs=An;An.polyline=An,An.polygon=function(t,e){var n,i,r,o,s,a,u;for(i=1;i<=8;i*=2){for(n=[],o=!(Fn(r=t[t.length-1],e)&i),s=0;s<t.length;s++)(u=!(Fn(a=t[s],e)&i))!==o&&n.push(Dn(r,a,i,e)),u&&n.push(a),r=a,o=u;if(!(t=n).length)break}return n};var ms=Array.prototype.slice,Es={successCallback:null,verbose:!1,polygons:!1},xs={},bs=64,ws=16,Cs=4,Os=1,Is=[],Ss=[],Ts=[],Rs=[],Ns=[],Ls=[],Ms=[],Ps=[],As=[],Ds=[],Fs=[],js=[],Gs=[],ks=[],Bs=[],Ys=[],Xs=[],qs=[],Us=[],zs=[],Vs=[],Ws=[],Ks=[],Hs=[];Ms[85]=Ds[85]=-1,Ps[85]=Fs[85]=0,As[85]=js[85]=1,Us[85]=Ws[85]=1,zs[85]=Ks[85]=0,Vs[85]=Hs[85]=1,Is[85]=Rs[85]=0,Ss[85]=Ns[85]=-1,Ts[85]=Bs[85]=0,Ys[85]=Gs[85]=0,Xs[85]=ks[85]=1,Ls[85]=qs[85]=1,Ws[1]=Ws[169]=0,Ks[1]=Ks[169]=-1,Hs[1]=Hs[169]=0,Gs[1]=Gs[169]=-1,ks[1]=ks[169]=0,Bs[1]=Bs[169]=0,Ds[4]=Ds[166]=0,Fs[4]=Fs[166]=-1,js[4]=js[166]=1,Ys[4]=Ys[166]=1,Xs[4]=Xs[166]=0,qs[4]=qs[166]=0,Ms[16]=Ms[154]=0,Ps[16]=Ps[154]=1,As[16]=As[154]=1,Rs[16]=Rs[154]=1,Ns[16]=Ns[154]=0,Ls[16]=Ls[154]=1,Us[64]=Us[106]=0,zs[64]=zs[106]=1,Vs[64]=Vs[106]=0,Is[64]=Is[106]=-1,Ss[64]=Ss[106]=0,Ts[64]=Ts[106]=1,Us[2]=Us[168]=0,zs[2]=zs[168]=-1,Vs[2]=Vs[168]=1,Ws[2]=Ws[168]=0,Ks[2]=Ks[168]=-1,Hs[2]=Hs[168]=0,Gs[2]=Gs[168]=-1,ks[2]=ks[168]=0,Bs[2]=Bs[168]=0,Ys[2]=Ys[168]=-1,Xs[2]=Xs[168]=0,qs[2]=qs[168]=1,Ms[8]=Ms[162]=0,Ps[8]=Ps[162]=-1,As[8]=As[162]=0,Ds[8]=Ds[162]=0,Fs[8]=Fs[162]=-1,js[8]=js[162]=1,Gs[8]=Gs[162]=1,ks[8]=ks[162]=0,Bs[8]=Bs[162]=1,Ys[8]=Ys[162]=1,Xs[8]=Xs[162]=0,qs[8]=qs[162]=0,Ms[32]=Ms[138]=0,Ps[32]=Ps[138]=1,As[32]=As[138]=1,Ds[32]=Ds[138]=0,Fs[32]=Fs[138]=1,js[32]=js[138]=0,Is[32]=Is[138]=1,Ss[32]=Ss[138]=0,Ts[32]=Ts[138]=0,Rs[32]=Rs[138]=1,Ns[32]=Ns[138]=0,Ls[32]=Ls[138]=1,Ws[128]=Ws[42]=0,Ks[128]=Ks[42]=1,Hs[128]=Hs[42]=1,Us[128]=Us[42]=0,zs[128]=zs[42]=1,Vs[128]=Vs[42]=0,Is[128]=Is[42]=-1,Ss[128]=Ss[42]=0,Ts[128]=Ts[42]=1,Rs[128]=Rs[42]=-1,Ns[128]=Ns[42]=0,Ls[128]=Ls[42]=0,Ds[5]=Ds[165]=-1,Fs[5]=Fs[165]=0,js[5]=js[165]=0,Ws[5]=Ws[165]=1,Ks[5]=Ks[165]=0,Hs[5]=Hs[165]=0,Ys[20]=Ys[150]=0,Xs[20]=Xs[150]=1,qs[20]=qs[150]=1,Rs[20]=Rs[150]=0,Ns[20]=Ns[150]=-1,Ls[20]=Ls[150]=1,Ms[80]=Ms[90]=-1,Ps[80]=Ps[90]=0,As[80]=As[90]=1,Us[80]=Us[90]=1,zs[80]=zs[90]=0,Vs[80]=Vs[90]=1,Gs[65]=Gs[105]=0,ks[65]=ks[105]=1,Bs[65]=Bs[105]=0,Is[65]=Is[105]=0,Ss[65]=Ss[105]=-1,Ts[65]=Ts[105]=0,Ms[160]=Ms[10]=-1,Ps[160]=Ps[10]=0,As[160]=As[10]=1,Ds[160]=Ds[10]=-1,Fs[160]=Fs[10]=0,js[160]=js[10]=0,Ws[160]=Ws[10]=1,Ks[160]=Ks[10]=0,Hs[160]=Hs[10]=0,Us[160]=Us[10]=1,zs[160]=zs[10]=0,Vs[160]=Vs[10]=1,Ys[130]=Ys[40]=0,Xs[130]=Xs[40]=1,qs[130]=qs[40]=1,Gs[130]=Gs[40]=0,ks[130]=ks[40]=1,Bs[130]=Bs[40]=0,Is[130]=Is[40]=0,Ss[130]=Ss[40]=-1,Ts[130]=Ts[40]=0,Rs[130]=Rs[40]=0,Ns[130]=Ns[40]=-1,Ls[130]=Ls[40]=1,Ds[37]=Ds[133]=0,Fs[37]=Fs[133]=1,js[37]=js[133]=1,Ws[37]=Ws[133]=0,Ks[37]=Ks[133]=1,Hs[37]=Hs[133]=0,Is[37]=Is[133]=-1,Ss[37]=Ss[133]=0,Ts[37]=Ts[133]=0,Rs[37]=Rs[133]=1,Ns[37]=Ns[133]=0,Ls[37]=Ls[133]=0,Ys[148]=Ys[22]=-1,Xs[148]=Xs[22]=0,qs[148]=qs[22]=0,Ws[148]=Ws[22]=0,Ks[148]=Ks[22]=-1,Hs[148]=Hs[22]=1,Us[148]=Us[22]=0,zs[148]=zs[22]=1,Vs[148]=Vs[22]=1,Rs[148]=Rs[22]=-1,Ns[148]=Ns[22]=0,Ls[148]=Ls[22]=1,Ms[82]=Ms[88]=0,Ps[82]=Ps[88]=-1,As[82]=As[88]=1,Ys[82]=Ys[88]=1,Xs[82]=Xs[88]=0,qs[82]=qs[88]=1,Gs[82]=Gs[88]=-1,ks[82]=ks[88]=0,Bs[82]=Bs[88]=1,Us[82]=Us[88]=0,zs[82]=zs[88]=-1,Vs[82]=Vs[88]=0,Ms[73]=Ms[97]=0,Ps[73]=Ps[97]=1,As[73]=As[97]=0,Ds[73]=Ds[97]=0,Fs[73]=Fs[97]=-1,js[73]=js[97]=0,Gs[73]=Gs[97]=1,ks[73]=ks[97]=0,Bs[73]=Bs[97]=0,Is[73]=Is[97]=1,Ss[73]=Ss[97]=0,Ts[73]=Ts[97]=1,Ms[145]=Ms[25]=0,Ps[145]=Ps[25]=-1,As[145]=As[25]=0,Gs[145]=Gs[25]=1,ks[145]=ks[25]=0,Bs[145]=Bs[25]=1,Ws[145]=Ws[25]=0,Ks[145]=Ks[25]=1,Hs[145]=Hs[25]=1,Rs[145]=Rs[25]=-1,Ns[145]=Ns[25]=0,Ls[145]=Ls[25]=0,Ds[70]=Ds[100]=0,Fs[70]=Fs[100]=1,js[70]=js[100]=0,Ys[70]=Ys[100]=-1,Xs[70]=Xs[100]=0,qs[70]=qs[100]=1,Us[70]=Us[100]=0,zs[70]=zs[100]=-1,Vs[70]=Vs[100]=1,Is[70]=Is[100]=1,Ss[70]=Ss[100]=0,Ts[70]=Ts[100]=0,Ds[101]=Ds[69]=0,Fs[101]=Fs[69]=1,js[101]=js[69]=0,Is[101]=Is[69]=1,Ss[101]=Ss[69]=0,Ts[101]=Ts[69]=0,Ws[149]=Ws[21]=0,Ks[149]=Ks[21]=1,Hs[149]=Hs[21]=1,Rs[149]=Rs[21]=-1,Ns[149]=Ns[21]=0,Ls[149]=Ls[21]=0,Ys[86]=Ys[84]=-1,Xs[86]=Xs[84]=0,qs[86]=qs[84]=1,Us[86]=Us[84]=0,zs[86]=zs[84]=-1,Vs[86]=Vs[84]=1,Ms[89]=Ms[81]=0,Ps[89]=Ps[81]=-1,As[89]=As[81]=0,Gs[89]=Gs[81]=1,ks[89]=ks[81]=0,Bs[89]=Bs[81]=1,Ms[96]=Ms[74]=0,Ps[96]=Ps[74]=1,As[96]=As[74]=0,Ds[96]=Ds[74]=-1,Fs[96]=Fs[74]=0,js[96]=js[74]=1,Us[96]=Us[74]=1,zs[96]=zs[74]=0,Vs[96]=Vs[74]=0,Is[96]=Is[74]=1,Ss[96]=Ss[74]=0,Ts[96]=Ts[74]=1,Ms[24]=Ms[146]=0,Ps[24]=Ps[146]=-1,As[24]=As[146]=1,Ys[24]=Ys[146]=1,Xs[24]=Xs[146]=0,qs[24]=qs[146]=1,Gs[24]=Gs[146]=0,ks[24]=ks[146]=1,Bs[24]=Bs[146]=1,Rs[24]=Rs[146]=0,Ns[24]=Ns[146]=-1,Ls[24]=Ls[146]=0,Ds[6]=Ds[164]=-1,Fs[6]=Fs[164]=0,js[6]=js[164]=1,Ys[6]=Ys[164]=-1,Xs[6]=Xs[164]=0,qs[6]=qs[164]=0,Ws[6]=Ws[164]=0,Ks[6]=Ks[164]=-1,Hs[6]=Hs[164]=1,Us[6]=Us[164]=1,zs[6]=zs[164]=0,Vs[6]=Vs[164]=0,Gs[129]=Gs[41]=0,ks[129]=ks[41]=1,Bs[129]=Bs[41]=1,Ws[129]=Ws[41]=0,Ks[129]=Ks[41]=1,Hs[129]=Hs[41]=0,Is[129]=Is[41]=-1,Ss[129]=Ss[41]=0,Ts[129]=Ts[41]=0,Rs[129]=Rs[41]=0,Ns[129]=Ns[41]=-1,Ls[129]=Ls[41]=0,Ys[66]=Ys[104]=0,Xs[66]=Xs[104]=1,qs[66]=qs[104]=0,Gs[66]=Gs[104]=-1,ks[66]=ks[104]=0,Bs[66]=Bs[104]=1,Us[66]=Us[104]=0,zs[66]=zs[104]=-1,Vs[66]=Vs[104]=0,Is[66]=Is[104]=0,Ss[66]=Ss[104]=-1,Ts[66]=Ts[104]=1,Ms[144]=Ms[26]=-1,Ps[144]=Ps[26]=0,As[144]=As[26]=0,Ws[144]=Ws[26]=1,Ks[144]=Ks[26]=0,Hs[144]=Hs[26]=1,Us[144]=Us[26]=0,zs[144]=zs[26]=1,Vs[144]=Vs[26]=1,Rs[144]=Rs[26]=-1,Ns[144]=Ns[26]=0,Ls[144]=Ls[26]=1,Ds[36]=Ds[134]=0,Fs[36]=Fs[134]=1,js[36]=js[134]=1,Ys[36]=Ys[134]=0,Xs[36]=Xs[134]=1,qs[36]=qs[134]=0,Is[36]=Is[134]=0,Ss[36]=Ss[134]=-1,Ts[36]=Ts[134]=1,Rs[36]=Rs[134]=1,Ns[36]=Ns[134]=0,Ls[36]=Ls[134]=0,Ms[9]=Ms[161]=-1,Ps[9]=Ps[161]=0,As[9]=As[161]=0,Ds[9]=Ds[161]=0,Fs[9]=Fs[161]=-1,js[9]=js[161]=0,Gs[9]=Gs[161]=1,ks[9]=ks[161]=0,Bs[9]=Bs[161]=0,Ws[9]=Ws[161]=1,Ks[9]=Ks[161]=0,Hs[9]=Hs[161]=1,Ms[136]=0,Ps[136]=1,As[136]=1,Ds[136]=0,Fs[136]=1,js[136]=0,Ys[136]=-1,Xs[136]=0,qs[136]=1,Gs[136]=-1,ks[136]=0,Bs[136]=0,Ws[136]=0,Ks[136]=-1,Hs[136]=0,Us[136]=0,zs[136]=-1,Vs[136]=1,Is[136]=1,Ss[136]=0,Ts[136]=0,Rs[136]=1,Ns[136]=0,Ls[136]=1,Ms[34]=0,Ps[34]=-1,As[34]=0,Ds[34]=0,Fs[34]=-1,js[34]=1,Ys[34]=1,Xs[34]=0,qs[34]=0,Gs[34]=1,ks[34]=0,Bs[34]=1,Ws[34]=0,Ks[34]=1,Hs[34]=1,Us[34]=0,zs[34]=1,Vs[34]=0,Is[34]=-1,Ss[34]=0,Ts[34]=1,Rs[34]=-1,Ns[34]=0,Ls[34]=0,Ms[35]=0,Ps[35]=1,As[35]=1,Ds[35]=0,Fs[35]=-1,js[35]=1,Ys[35]=1,Xs[35]=0,qs[35]=0,Gs[35]=-1,ks[35]=0,Bs[35]=0,Ws[35]=0,Ks[35]=-1,Hs[35]=0,Us[35]=0,zs[35]=1,Vs[35]=0,Is[35]=-1,Ss[35]=0,Ts[35]=1,Rs[35]=1,Ns[35]=0,Ls[35]=1,Ms[153]=0,Ps[153]=1,As[153]=1,Gs[153]=-1,ks[153]=0,Bs[153]=0,Ws[153]=0,Ks[153]=-1,Hs[153]=0,Rs[153]=1,Ns[153]=0,Ls[153]=1,Ds[102]=0,Fs[102]=-1,js[102]=1,Ys[102]=1,Xs[102]=0,qs[102]=0,Us[102]=0,zs[102]=1,Vs[102]=0,Is[102]=-1,Ss[102]=0,Ts[102]=1,Ms[155]=0,Ps[155]=-1,As[155]=0,Gs[155]=1,ks[155]=0,Bs[155]=1,Ws[155]=0,Ks[155]=1,Hs[155]=1,Rs[155]=-1,Ns[155]=0,Ls[155]=0,Ds[103]=0,Fs[103]=1,js[103]=0,Ys[103]=-1,Xs[103]=0,qs[103]=1,Us[103]=0,zs[103]=-1,Vs[103]=1,Is[103]=1,Ss[103]=0,Ts[103]=0,Ms[152]=0,Ps[152]=1,As[152]=1,Ys[152]=-1,Xs[152]=0,qs[152]=1,Gs[152]=-1,ks[152]=0,Bs[152]=0,Ws[152]=0,Ks[152]=-1,Hs[152]=0,Us[152]=0,zs[152]=-1,Vs[152]=1,Rs[152]=1,Ns[152]=0,Ls[152]=1,Ms[156]=0,Ps[156]=-1,As[156]=1,Ys[156]=1,Xs[156]=0,qs[156]=1,Gs[156]=-1,ks[156]=0,Bs[156]=0,Ws[156]=0,Ks[156]=-1,Hs[156]=0,Us[156]=0,zs[156]=1,Vs[156]=1,Rs[156]=-1,Ns[156]=0,Ls[156]=1,Ms[137]=0,Ps[137]=1,As[137]=1,Ds[137]=0,Fs[137]=1,js[137]=0,Gs[137]=-1,ks[137]=0,Bs[137]=0,Ws[137]=0,Ks[137]=-1,Hs[137]=0,Is[137]=1,Ss[137]=0,Ts[137]=0,Rs[137]=1,Ns[137]=0,Ls[137]=1,Ms[139]=0,Ps[139]=1,As[139]=1,Ds[139]=0,Fs[139]=-1,js[139]=0,Gs[139]=1,ks[139]=0,Bs[139]=0,Ws[139]=0,Ks[139]=1,Hs[139]=0,Is[139]=-1,Ss[139]=0,Ts[139]=0,Rs[139]=1,Ns[139]=0,Ls[139]=1,Ms[98]=0,Ps[98]=-1,As[98]=0,Ds[98]=0,Fs[98]=-1,js[98]=1,Ys[98]=1,Xs[98]=0,qs[98]=0,Gs[98]=1,ks[98]=0,Bs[98]=1,Us[98]=0,zs[98]=1,Vs[98]=0,Is[98]=-1,Ss[98]=0,Ts[98]=1,Ms[99]=0,Ps[99]=1,As[99]=0,Ds[99]=0,Fs[99]=-1,js[99]=1,Ys[99]=1,Xs[99]=0,qs[99]=0,Gs[99]=-1,ks[99]=0,Bs[99]=1,Us[99]=0,zs[99]=-1,Vs[99]=0,Is[99]=1,Ss[99]=0,Ts[99]=1,Ds[38]=0,Fs[38]=-1,js[38]=1,Ys[38]=1,Xs[38]=0,qs[38]=0,Ws[38]=0,Ks[38]=1,Hs[38]=1,Us[38]=0,zs[38]=1,Vs[38]=0,Is[38]=-1,Ss[38]=0,Ts[38]=1,Rs[38]=-1,Ns[38]=0,Ls[38]=0,Ds[39]=0,Fs[39]=1,js[39]=1,Ys[39]=-1,Xs[39]=0,qs[39]=0,Ws[39]=0,Ks[39]=-1,Hs[39]=1,Us[39]=0,zs[39]=1,Vs[39]=0,Is[39]=-1,Ss[39]=0,Ts[39]=1,Rs[39]=1,Ns[39]=0,Ls[39]=0;var Zs=function(t){return[[t.bottomleft,0],[0,0],[0,t.leftbottom]]},Js=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0]]},Qs=function(t){return[[t.topright,1],[1,1],[1,t.righttop]]},$s=function(t){return[[0,t.lefttop],[0,1],[t.topleft,1]]},ta=function(t){return[[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop]]},ea=function(t){return[[t.bottomright,0],[t.bottomleft,0],[1,t.righttop],[1,t.rightbottom]]},na=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.topleft,1],[t.topright,1]]},ia=function(t){return[[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]},ra=[],oa=[],sa=[],aa=[],ua=[],ha=[],ca=[],la=[];aa[1]=ua[1]=18,aa[169]=ua[169]=18,sa[4]=oa[4]=12,sa[166]=oa[166]=12,ra[16]=la[16]=4,ra[154]=la[154]=4,ha[64]=ca[64]=22,ha[106]=ca[106]=22,sa[2]=ha[2]=17,aa[2]=ua[2]=18,sa[168]=ha[168]=17,aa[168]=ua[168]=18,ra[8]=aa[8]=9,oa[8]=sa[8]=12,ra[162]=aa[162]=9,oa[162]=sa[162]=12,ra[32]=la[32]=4,oa[32]=ca[32]=1,ra[138]=la[138]=4,oa[138]=ca[138]=1,ua[128]=la[128]=21,ha[128]=ca[128]=22,ua[42]=la[42]=21,ha[42]=ca[42]=22,oa[5]=ua[5]=14,oa[165]=ua[165]=14,sa[20]=la[20]=6,sa[150]=la[150]=6,ra[80]=ha[80]=11,ra[90]=ha[90]=11,aa[65]=ca[65]=3,aa[105]=ca[105]=3,ra[160]=ha[160]=11,oa[160]=ua[160]=14,ra[10]=ha[10]=11,oa[10]=ua[10]=14,sa[130]=la[130]=6,aa[130]=ca[130]=3,sa[40]=la[40]=6,aa[40]=ca[40]=3,oa[101]=ca[101]=1,oa[69]=ca[69]=1,ua[149]=la[149]=21,ua[21]=la[21]=21,sa[86]=ha[86]=17,sa[84]=ha[84]=17,ra[89]=aa[89]=9,ra[81]=aa[81]=9,ra[96]=ca[96]=0,oa[96]=ha[96]=15,ra[74]=ca[74]=0,oa[74]=ha[74]=15,ra[24]=sa[24]=8,aa[24]=la[24]=7,ra[146]=sa[146]=8,aa[146]=la[146]=7,oa[6]=ha[6]=15,sa[6]=ua[6]=16,oa[164]=ha[164]=15,sa[164]=ua[164]=16,aa[129]=la[129]=7,ua[129]=ca[129]=20,aa[41]=la[41]=7,ua[41]=ca[41]=20,sa[66]=ca[66]=2,aa[66]=ha[66]=19,sa[104]=ca[104]=2,aa[104]=ha[104]=19,ra[144]=ua[144]=10,ha[144]=la[144]=23,ra[26]=ua[26]=10,ha[26]=la[26]=23,oa[36]=la[36]=5,sa[36]=ca[36]=2,oa[134]=la[134]=5,sa[134]=ca[134]=2,ra[9]=ua[9]=10,oa[9]=aa[9]=13,ra[161]=ua[161]=10,oa[161]=aa[161]=13,oa[37]=la[37]=5,ua[37]=ca[37]=20,oa[133]=la[133]=5,ua[133]=ca[133]=20,sa[148]=ua[148]=16,ha[148]=la[148]=23,sa[22]=ua[22]=16,ha[22]=la[22]=23,ra[82]=sa[82]=8,aa[82]=ha[82]=19,ra[88]=sa[88]=8,aa[88]=ha[88]=19,ra[73]=ca[73]=0,oa[73]=aa[73]=13,ra[97]=ca[97]=0,oa[97]=aa[97]=13,ra[145]=aa[145]=9,ua[145]=la[145]=21,ra[25]=aa[25]=9,ua[25]=la[25]=21,oa[70]=ca[70]=1,sa[70]=ha[70]=17,oa[100]=ca[100]=1,sa[100]=ha[100]=17,ra[34]=aa[34]=9,oa[34]=sa[34]=12,ua[34]=la[34]=21,ha[34]=ca[34]=22,ra[136]=la[136]=4,oa[136]=ca[136]=1,sa[136]=ha[136]=17,aa[136]=ua[136]=18,ra[35]=la[35]=4,oa[35]=sa[35]=12,aa[35]=ua[35]=18,ha[35]=ca[35]=22,ra[153]=la[153]=4,aa[153]=ua[153]=18,oa[102]=sa[102]=12,ha[102]=ca[102]=22,ra[155]=aa[155]=9,ua[155]=la[155]=23,oa[103]=ca[103]=1,sa[103]=ha[103]=17,ra[152]=la[152]=4,sa[152]=ha[152]=17,aa[152]=ua[152]=18,ra[156]=sa[156]=8,aa[156]=ua[156]=18,ha[156]=la[156]=23,ra[137]=la[137]=4,oa[137]=ca[137]=1,aa[137]=ua[137]=18,ra[139]=la[139]=4,oa[139]=aa[139]=13,ua[139]=ca[139]=20,ra[98]=aa[98]=9,oa[98]=sa[98]=12,ha[98]=ca[98]=22,ra[99]=ca[99]=0,oa[99]=sa[99]=12,aa[99]=ha[99]=19,oa[38]=sa[38]=12,ua[38]=la[38]=21,ha[38]=ca[38]=22,oa[39]=la[39]=5,sa[39]=ua[39]=16,ha[39]=ca[39]=22;var pa=[];pa[1]=pa[169]=Zs,pa[4]=pa[166]=Js,pa[16]=pa[154]=Qs,pa[64]=pa[106]=$s,pa[168]=pa[2]=ta,pa[162]=pa[8]=ea,pa[138]=pa[32]=na,pa[42]=pa[128]=ia,pa[5]=pa[165]=function(t){return[[0,0],[0,t.leftbottom],[1,t.rightbottom],[1,0]]},pa[20]=pa[150]=function(t){return[[1,0],[t.bottomright,0],[t.topright,1],[1,1]]},pa[80]=pa[90]=function(t){return[[1,1],[1,t.righttop],[0,t.lefttop],[0,1]]},pa[65]=pa[105]=function(t){return[[t.bottomleft,0],[0,0],[0,1],[t.topleft,1]]},pa[160]=pa[10]=function(t){return[[1,t.righttop],[1,t.rightbottom],[0,t.leftbottom],[0,t.lefttop]]},pa[130]=pa[40]=function(t){return[[t.topleft,1],[t.topright,1],[t.bottomright,0],[t.bottomleft,0]]},pa[85]=function(){return[[0,0],[0,1],[1,1],[1,0]]},pa[101]=pa[69]=function(t){return[[1,t.rightbottom],[1,0],[0,0],[0,1],[t.topleft,1]]},pa[149]=pa[21]=function(t){return[[t.topright,1],[1,1],[1,0],[0,0],[0,t.leftbottom]]},pa[86]=pa[84]=function(t){return[[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[1,1]]},pa[89]=pa[81]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,1]]},pa[96]=pa[74]=function(t){return[[1,t.righttop],[1,t.rightbottom],[0,t.lefttop],[0,1],[t.topleft,1]]},pa[24]=pa[146]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[t.topright,1]]},pa[6]=pa[164]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop]]},pa[129]=pa[41]=function(t){return[[t.topright,1],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topleft,1]]},pa[66]=pa[104]=function(t){return[[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1],[t.topleft,1]]},pa[144]=pa[26]=function(t){return[[1,1],[1,t.righttop],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},pa[36]=pa[134]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[t.topleft,1],[t.topright,1]]},pa[9]=pa[161]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,t.leftbottom]]},pa[37]=pa[133]=function(t){return[[1,t.rightbottom],[1,0],[0,0],[0,t.leftbottom],[t.topleft,1],[t.topright,1]]},pa[148]=pa[22]=function(t){return[[1,1],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},pa[82]=pa[88]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1]]},pa[73]=pa[97]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,1],[t.topleft,1]]},pa[145]=pa[25]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topright,1]]},pa[70]=pa[100]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[t.topleft,1]]},pa[34]=function(t){return[ia(t),ea(t)]},pa[35]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]},pa[136]=function(t){return[na(t),ta(t)]},pa[153]=function(t){return[Qs(t),Zs(t)]},pa[102]=function(t){return[Js(t),$s(t)]},pa[155]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topright,1]]},pa[103]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[t.topleft,1]]},pa[152]=function(t){return[Qs(t),ta(t)]},pa[156]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},pa[137]=function(t){return[na(t),Zs(t)]},pa[139]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topleft,1],[t.topright,1]]},pa[98]=function(t){return[ea(t),$s(t)]},pa[99]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1],[t.topleft,1]]},pa[38]=function(t){return[Js(t),ia(t)]},pa[39]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]};var fa=function t(e){this.id=t.buildId(e),this.coordinates=e,this.innerEdges=[],this.outerEdges=[],this.outerEdgesSorted=!1};fa.buildId=function(t){return t.join(",")},fa.prototype.removeInnerEdge=function(t){this.innerEdges=this.innerEdges.filter(function(e){return e.from.id!==t.from.id})},fa.prototype.removeOuterEdge=function(t){this.outerEdges=this.outerEdges.filter(function(e){return e.to.id!==t.to.id})},fa.prototype.addOuterEdge=function(t){this.outerEdges.push(t),this.outerEdgesSorted=!1},fa.prototype.sortOuterEdges=function(){var t=this;this.outerEdgesSorted||(this.outerEdges.sort(function(e,n){var i=e.to,r=n.to;if(i.coordinates[0]-t.coordinates[0]>=0&&r.coordinates[0]-t.coordinates[0]<0)return 1;if(i.coordinates[0]-t.coordinates[0]<0&&r.coordinates[0]-t.coordinates[0]>=0)return-1;if(i.coordinates[0]-t.coordinates[0]==0&&r.coordinates[0]-t.coordinates[0]==0)return i.coordinates[1]-t.coordinates[1]>=0||r.coordinates[1]-t.coordinates[1]>=0?i.coordinates[1]-r.coordinates[1]:r.coordinates[1]-i.coordinates[1];var o=ai(t.coordinates,i.coordinates,r.coordinates);return o<0?1:o>0?-1:Math.pow(i.coordinates[0]-t.coordinates[0],2)+Math.pow(i.coordinates[1]-t.coordinates[1],2)-(Math.pow(r.coordinates[0]-t.coordinates[0],2)+Math.pow(r.coordinates[1]-t.coordinates[1],2))}),this.outerEdgesSorted=!0)},fa.prototype.getOuterEdges=function(){return this.sortOuterEdges(),this.outerEdges},fa.prototype.getOuterEdge=function(t){return this.sortOuterEdges(),this.outerEdges[t]},fa.prototype.addInnerEdge=function(t){this.innerEdges.push(t)};var da=function(t,e){this.from=t,this.to=e,this.next=void 0,this.label=void 0,this.symetric=void 0,this.ring=void 0,this.from.addOuterEdge(this),this.to.addInnerEdge(this)};da.prototype.getSymetric=function(){return this.symetric||(this.symetric=new da(this.to,this.from),this.symetric.symetric=this),this.symetric},da.prototype.deleteEdge=function(){this.from.removeOuterEdge(this),this.to.removeInnerEdge(this)},da.prototype.isEqual=function(t){return this.from.id===t.from.id&&this.to.id===t.to.id},da.prototype.toString=function(){return"Edge { "+this.from.id+" -> "+this.to.id+" }"},da.prototype.toLineString=function(){return a([this.from.coordinates,this.to.coordinates])},da.prototype.compareTo=function(t){return ai(t.from.coordinates,t.to.coordinates,this.to.coordinates)};var ga=function(){this.edges=[],this.polygon=void 0,this.envelope=void 0},ya={length:{configurable:!0}};ga.prototype.push=function(t){this[this.edges.length]=t,this.edges.push(t),this.polygon=this.envelope=void 0},ga.prototype.get=function(t){return this.edges[t]},ya.length.get=function(){return this.edges.length},ga.prototype.forEach=function(t){this.edges.forEach(t)},ga.prototype.map=function(t){return this.edges.map(t)},ga.prototype.some=function(t){return this.edges.some(t)},ga.prototype.isValid=function(){return!0},ga.prototype.isHole=function(){var t=this,e=this.edges.reduce(function(e,n,i){return n.from.coordinates[1]>t.edges[e].from.coordinates[1]&&(e=i),e},0),n=(0===e?this.length:e)-1,i=(e+1)%this.length,r=ai(this.edges[n].from.coordinates,this.edges[e].from.coordinates,this.edges[i].from.coordinates);return 0===r?this.edges[n].from.coordinates[0]>this.edges[i].from.coordinates[0]:r>0},ga.prototype.toMultiPoint=function(){return l(this.edges.map(function(t){return t.from.coordinates}))},ga.prototype.toPolygon=function(){if(this.polygon)return this.polygon;var t=this.edges.map(function(t){return t.from.coordinates});return t.push(this.edges[0].from.coordinates),this.polygon=o([t])},ga.prototype.getEnvelope=function(){return this.envelope?this.envelope:this.envelope=ie(this.toPolygon())},ga.findEdgeRingContaining=function(t,e){var n,r,o=t.getEnvelope();return e.forEach(function(e){var s=e.getEnvelope();if(r&&(n=r.getEnvelope()),!function(t,e){var n=t.geometry.coordinates.map(function(t){return t[0]}),i=t.geometry.coordinates.map(function(t){return t[1]}),r=e.geometry.coordinates.map(function(t){return t[0]}),o=e.geometry.coordinates.map(function(t){return t[1]});return Math.max(null,n)===Math.max(null,r)&&Math.max(null,i)===Math.max(null,o)&&Math.min(null,n)===Math.min(null,r)&&Math.min(null,i)===Math.min(null,o)}(s,o)&&ui(s,o)){var a=t.map(function(t){return t.from.coordinates}).find(function(t){return!e.some(function(e){return function(t,e){return t[0]===e[0]&&t[1]===e[1]}(t,e.from.coordinates)})});a&&e.inside(i(a))&&(r&&!ui(n,s)||(r=e))}}),r},ga.prototype.inside=function(t){return Tt(t,this.toPolygon())},Object.defineProperties(ga.prototype,ya);var _a=function(){this.edges=[],this.nodes={}};_a.fromGeoJson=function(t){!function(t){if(!t)throw new Error("No geojson passed");if("FeatureCollection"!==t.type&&"GeometryCollection"!==t.type&&"MultiLineString"!==t.type&&"LineString"!==t.type&&"Feature"!==t.type)throw new Error("Invalid input type '"+t.type+"'. Geojson must be FeatureCollection, GeometryCollection, LineString, MultiLineString or Feature")}(t);var e=new _a;return F(t,function(t){W(t,"LineString","Graph::fromGeoJson"),T(t,function(t,n){if(t){var i=e.getNode(t),r=e.getNode(n);e.addEdge(i,r)}return n})}),e},_a.prototype.getNode=function(t){var e=fa.buildId(t),n=this.nodes[e];return n||(n=this.nodes[e]=new fa(t)),n},_a.prototype.addEdge=function(t,e){var n=new da(t,e),i=n.getSymetric();this.edges.push(n),this.edges.push(i)},_a.prototype.deleteDangles=function(){var t=this;Object.keys(this.nodes).map(function(e){return t.nodes[e]}).forEach(function(e){return t._removeIfDangle(e)})},_a.prototype._removeIfDangle=function(t){var e=this;if(t.innerEdges.length<=1){var n=t.getOuterEdges().map(function(t){return t.to});this.removeNode(t),n.forEach(function(t){return e._removeIfDangle(t)})}},_a.prototype.deleteCutEdges=function(){var t=this;this._computeNextCWEdges(),this._findLabeledEdgeRings(),this.edges.forEach(function(e){e.label===e.symetric.label&&(t.removeEdge(e.symetric),t.removeEdge(e))})},_a.prototype._computeNextCWEdges=function(t){var e=this;void 0===t?Object.keys(this.nodes).forEach(function(t){return e._computeNextCWEdges(e.nodes[t])}):t.getOuterEdges().forEach(function(e,n){t.getOuterEdge((0===n?t.getOuterEdges().length:n)-1).symetric.next=e})},_a.prototype._computeNextCCWEdges=function(t,e){for(var n,i,r=t.getOuterEdges(),o=r.length-1;o>=0;--o){var s=r[o],a=s.symetric,u=void 0,h=void 0;s.label===e&&(u=s),a.label===e&&(h=a),u&&h&&(h&&(i=h),u&&(i&&(i.next=u,i=void 0),n||(n=u)))}i&&(i.next=n)},_a.prototype._findLabeledEdgeRings=function(){var t=[],e=0;return this.edges.forEach(function(n){if(!(n.label>=0)){t.push(n);var i=n;do{i.label=e,i=i.next}while(!n.isEqual(i));e++}}),t},_a.prototype.getEdgeRings=function(){var t=this;this._computeNextCWEdges(),this.edges.forEach(function(t){t.label=void 0}),this._findLabeledEdgeRings().forEach(function(e){t._findIntersectionNodes(e).forEach(function(n){t._computeNextCCWEdges(n,e.label)})});var e=[];return this.edges.forEach(function(n){n.ring||e.push(t._findEdgeRing(n))}),e},_a.prototype._findIntersectionNodes=function(t){var e=[],n=t,i=function(){var i=0;n.from.getOuterEdges().forEach(function(e){e.label===t.label&&++i}),i>1&&e.push(n.from),n=n.next};do{i()}while(!t.isEqual(n));return e},_a.prototype._findEdgeRing=function(t){var e=t,n=new ga;do{n.push(e),e.ring=n,e=e.next}while(!t.isEqual(e));return n},_a.prototype.removeNode=function(t){var e=this;t.getOuterEdges().forEach(function(t){return e.removeEdge(t)}),t.innerEdges.forEach(function(t){return e.removeEdge(t)}),delete this.nodes[t.id]},_a.prototype.removeEdge=function(t){this.edges=this.edges.filter(function(e){return!e.isEqual(t)}),t.deleteEdge()};var va=yt(function(t,e){function n(t){var e=[];for(var n in t)e.push(n);return e}(t.exports="function"==typeof Object.keys?Object.keys:n).shim=n}),ma=(va.shim,yt(function(t,e){function n(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function i(t){return t&&"object"==typeof t&&"number"==typeof t.length&&Object.prototype.hasOwnProperty.call(t,"callee")&&!Object.prototype.propertyIsEnumerable.call(t,"callee")||!1}var r="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();(e=t.exports=r?n:i).supported=n,e.unsupported=i})),Ea=(ma.supported,ma.unsupported,yt(function(t){function e(t){return null===t||void 0===t}function n(t){return!(!t||"object"!=typeof t||"number"!=typeof t.length||"function"!=typeof t.copy||"function"!=typeof t.slice||t.length>0&&"number"!=typeof t[0])}var i=Array.prototype.slice,r=t.exports=function(t,o,s){return s||(s={}),t===o||(t instanceof Date&&o instanceof Date?t.getTime()===o.getTime():!t||!o||"object"!=typeof t&&"object"!=typeof o?s.strict?t===o:t==o:function(t,o,s){var a,u;if(e(t)||e(o))return!1;if(t.prototype!==o.prototype)return!1;if(ma(t))return!!ma(o)&&(t=i.call(t),o=i.call(o),r(t,o,s));if(n(t)){if(!n(o))return!1;if(t.length!==o.length)return!1;for(a=0;a<t.length;a++)if(t[a]!==o[a])return!1;return!0}try{var h=va(t),c=va(o)}catch(t){return!1}if(h.length!=c.length)return!1;for(h.sort(),c.sort(),a=h.length-1;a>=0;a--)if(h[a]!=c[a])return!1;for(a=h.length-1;a>=0;a--)if(u=h[a],!r(t[u],o[u],s))return!1;return typeof t==typeof o}(t,o,s))}})),xa=function(t){this.precision=t&&t.precision?t.precision:17,this.direction=!(!t||!t.direction)&&t.direction,this.pseudoNode=!(!t||!t.pseudoNode)&&t.pseudoNode,this.objectComparator=t&&t.objectComparator?t.objectComparator:mi};xa.prototype.compare=function(t,e){if(t.type!==e.type||!vi(t,e))return!1;switch(t.type){case"Point":return this.compareCoord(t.coordinates,e.coordinates);case"LineString":return this.compareLine(t.coordinates,e.coordinates,0,!1);case"Polygon":return this.comparePolygon(t,e);case"Feature":return this.compareFeature(t,e);default:if(0===t.type.indexOf("Multi")){var n=this,i=_i(t),r=_i(e);return i.every(function(t){return this.some(function(e){return n.compare(t,e)})},r)}}return!1},xa.prototype.compareCoord=function(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n].toFixed(this.precision)!==e[n].toFixed(this.precision))return!1;return!0},xa.prototype.compareLine=function(t,e,n,i){if(!vi(t,e))return!1;var r=this.pseudoNode?t:this.removePseudo(t),o=this.pseudoNode?e:this.removePseudo(e);if(!i||this.compareCoord(r[0],o[0])||(o=this.fixStartIndex(o,r))){var s=this.compareCoord(r[n],o[n]);return this.direction||s?this.comparePath(r,o):!!this.compareCoord(r[n],o[o.length-(1+n)])&&this.comparePath(r.slice().reverse(),o)}},xa.prototype.fixStartIndex=function(t,e){for(var n,i=-1,r=0;r<t.length;r++)if(this.compareCoord(t[r],e[0])){i=r;break}return i>=0&&(n=[].concat(t.slice(i,t.length),t.slice(1,i+1))),n},xa.prototype.comparePath=function(t,e){var n=this;return t.every(function(t,e){return n.compareCoord(t,this[e])},e)},xa.prototype.comparePolygon=function(t,e){if(this.compareLine(t.coordinates[0],e.coordinates[0],1,!0)){var n=t.coordinates.slice(1,t.coordinates.length),i=e.coordinates.slice(1,e.coordinates.length),r=this;return n.every(function(t){return this.some(function(e){return r.compareLine(t,e,1,!0)})},i)}return!1},xa.prototype.compareFeature=function(t,e){return!(t.id!==e.id||!this.objectComparator(t.properties,e.properties)||!this.compareBBox(t,e))&&this.compare(t.geometry,e.geometry)},xa.prototype.compareBBox=function(t,e){return!!(!t.bbox&&!e.bbox||t.bbox&&e.bbox&&this.compareCoord(t.bbox,e.bbox))},xa.prototype.removePseudo=function(t){return t};var ba=xa,wa=yt(function(t){function e(t,e,n,i){this.dataset=[],this.epsilon=1,this.minPts=2,this.distance=this._euclideanDistance,this.clusters=[],this.noise=[],this._visited=[],this._assigned=[],this._datasetLength=0,this._init(t,e,n,i)}e.prototype.run=function(t,e,n,i){this._init(t,e,n,i);for(var r=0;r<this._datasetLength;r++)if(1!==this._visited[r]){this._visited[r]=1;var o=this._regionQuery(r);if(o.length<this.minPts)this.noise.push(r);else{var s=this.clusters.length;this.clusters.push([]),this._addToCluster(r,s),this._expandCluster(s,o)}}return this.clusters},e.prototype._init=function(t,e,n,i){if(t){if(!(t instanceof Array))throw Error("Dataset must be of type array, "+typeof t+" given");this.dataset=t,this.clusters=[],this.noise=[],this._datasetLength=t.length,this._visited=new Array(this._datasetLength),this._assigned=new Array(this._datasetLength)}e&&(this.epsilon=e),n&&(this.minPts=n),i&&(this.distance=i)},e.prototype._expandCluster=function(t,e){for(var n=0;n<e.length;n++){var i=e[n];if(1!==this._visited[i]){this._visited[i]=1;var r=this._regionQuery(i);r.length>=this.minPts&&(e=this._mergeArrays(e,r))}1!==this._assigned[i]&&this._addToCluster(i,t)}},e.prototype._addToCluster=function(t,e){this.clusters[e].push(t),this._assigned[t]=1},e.prototype._regionQuery=function(t){for(var e=[],n=0;n<this._datasetLength;n++)this.distance(this.dataset[t],this.dataset[n])<this.epsilon&&e.push(n);return e},e.prototype._mergeArrays=function(t,e){for(var n=e.length,i=0;i<n;i++){var r=e[i];t.indexOf(r)<0&&t.push(r)}return t},e.prototype._euclideanDistance=function(t,e){for(var n=0,i=Math.min(t.length,e.length);i--;)n+=(t[i]-e[i])*(t[i]-e[i]);return Math.sqrt(n)},t.exports&&(t.exports=e)}),Ca=yt(function(t){function e(t,e,n){this.k=3,this.dataset=[],this.assignments=[],this.centroids=[],this.init(t,e,n)}e.prototype.init=function(t,e,n){this.assignments=[],this.centroids=[],void 0!==t&&(this.dataset=t),void 0!==e&&(this.k=e),void 0!==n&&(this.distance=n)},e.prototype.run=function(t,e){this.init(t,e);for(var n=this.dataset.length,i=0;i<this.k;i++)this.centroids[i]=this.randomCentroid();for(var r=!0;r;){r=this.assign();for(var o=0;o<this.k;o++){for(var s=new Array(c),a=0,u=0;u<c;u++)s[u]=0;for(var h=0;h<n;h++){var c=this.dataset[h].length;if(o===this.assignments[h]){for(u=0;u<c;u++)s[u]+=this.dataset[h][u];a++}}if(a>0){for(u=0;u<c;u++)s[u]/=a;this.centroids[o]=s}else this.centroids[o]=this.randomCentroid(),r=!0}}return this.getClusters()},e.prototype.randomCentroid=function(){var t,e,n=this.dataset.length-1;do{e=Math.round(Math.random()*n),t=this.dataset[e]}while(this.centroids.indexOf(t)>=0);return t},e.prototype.assign=function(){for(var t,e=!1,n=this.dataset.length,i=0;i<n;i++)(t=this.argmin(this.dataset[i],this.centroids,this.distance))!=this.assignments[i]&&(this.assignments[i]=t,e=!0);return e},e.prototype.getClusters=function(){for(var t,e=new Array(this.k),n=0;n<this.assignments.length;n++)void 0===e[t=this.assignments[n]]&&(e[t]=[]),e[t].push(n);return e},e.prototype.argmin=function(t,e,n){for(var i,r=Number.MAX_VALUE,o=0,s=e.length,a=0;a<s;a++)(i=n(t,e[a]))<r&&(r=i,o=a);return o},e.prototype.distance=function(t,e){for(var n=0,i=Math.min(t.length,e.length);i--;){var r=t[i]-e[i];n+=r*r}return Math.sqrt(n)},t.exports&&(t.exports=e)}),Oa=yt(function(t){function e(t,e,n){this._queue=[],this._priorities=[],this._sorting="desc",this._init(t,e,n)}e.prototype.insert=function(t,e){for(var n=this._queue.length,i=n;i--;){var r=this._priorities[i];"desc"===this._sorting?e>r&&(n=i):e<r&&(n=i)}this._insertAt(t,e,n)},e.prototype.remove=function(t){for(var e=this._queue.length;e--;)if(t===this._queue[e]){this._queue.splice(e,1),this._priorities.splice(e,1);break}},e.prototype.forEach=function(t){this._queue.forEach(t)},e.prototype.getElements=function(){return this._queue},e.prototype.getElementPriority=function(t){return this._priorities[t]},e.prototype.getPriorities=function(){return this._priorities},e.prototype.getElementsWithPriorities=function(){for(var t=[],e=0,n=this._queue.length;e<n;e++)t.push([this._queue[e],this._priorities[e]]);return t},e.prototype._init=function(t,e,n){if(t&&e){if(this._queue=[],this._priorities=[],t.length!==e.length)throw new Error("Arrays must have the same length");for(var i=0;i<t.length;i++)this.insert(t[i],e[i])}n&&(this._sorting=n)},e.prototype._insertAt=function(t,e,n){this._queue.length===n?(this._queue.push(t),this._priorities.push(e)):(this._queue.splice(n,0,t),this._priorities.splice(n,0,e))},t.exports&&(t.exports=e)}),Ia=yt(function(t){function e(t,e,n,i){this.epsilon=1,this.minPts=1,this.distance=this._euclideanDistance,this._reachability=[],this._processed=[],this._coreDistance=0,this._orderedList=[],this._init(t,e,n,i)}if(t.exports)var n=Oa;e.prototype.run=function(t,e,i,r){this._init(t,e,i,r);for(var o=0,s=this.dataset.length;o<s;o++)if(1!==this._processed[o]){this._processed[o]=1,this.clusters.push([o]);var a=this.clusters.length-1;this._orderedList.push(o);var u=new n(null,null,"asc"),h=this._regionQuery(o);void 0!==this._distanceToCore(o)&&(this._updateQueue(o,h,u),this._expandCluster(a,u))}return this.clusters},e.prototype.getReachabilityPlot=function(){for(var t=[],e=0,n=this._orderedList.length;e<n;e++){var i=this._orderedList[e],r=this._reachability[i];t.push([i,r])}return t},e.prototype._init=function(t,e,n,i){if(t){if(!(t instanceof Array))throw Error("Dataset must be of type array, "+typeof t+" given");this.dataset=t,this.clusters=[],this._reachability=new Array(this.dataset.length),this._processed=new Array(this.dataset.length),this._coreDistance=0,this._orderedList=[]}e&&(this.epsilon=e),n&&(this.minPts=n),i&&(this.distance=i)},e.prototype._updateQueue=function(t,e,n){var i=this;this._coreDistance=this._distanceToCore(t),e.forEach(function(e){if(void 0===i._processed[e]){var r=i.distance(i.dataset[t],i.dataset[e]),o=Math.max(i._coreDistance,r);void 0===i._reachability[e]?(i._reachability[e]=o,n.insert(e,o)):o<i._reachability[e]&&(i._reachability[e]=o,n.remove(e),n.insert(e,o))}})},e.prototype._expandCluster=function(t,e){for(var n=e.getElements(),i=0,r=n.length;i<r;i++){var o=n[i];if(void 0===this._processed[o]){var s=this._regionQuery(o);this._processed[o]=1,this.clusters[t].push(o),this._orderedList.push(o),void 0!==this._distanceToCore(o)&&(this._updateQueue(o,s,e),this._expandCluster(t,e))}}},e.prototype._distanceToCore=function(t){for(var e=this.epsilon,n=0;n<e;n++)if(this._regionQuery(t,n).length>=this.minPts)return n},e.prototype._regionQuery=function(t,e){e=e||this.epsilon;for(var n=[],i=0,r=this.dataset.length;i<r;i++)this.distance(this.dataset[t],this.dataset[i])<e&&n.push(i);return n},e.prototype._euclideanDistance=function(t,e){for(var n=0,i=Math.min(t.length,e.length);i--;)n+=(t[i]-e[i])*(t[i]-e[i]);return Math.sqrt(n)},t.exports&&(t.exports=e)}),Sa=yt(function(t){t.exports&&(t.exports={DBSCAN:wa,KMEANS:Ca,OPTICS:Ia,PriorityQueue:Oa})}),Ta=(Sa.DBSCAN,Sa.KMEANS,Sa.OPTICS,Sa.PriorityQueue,function(t,e,n){for(var i=t.length,r=0,o=0;o<i;o++){var s=(t[o]||0)-(e[o]||0);r+=s*s}return n?Math.sqrt(r):r}),Ra=Ta,Na=function(t,e,n){var i=Math.abs(t-e);return n?i:i*i},La=Ta,Ma=function(t,e,n,i){var r=[],o=[],s=[],a=[],u=!1,h=i||1e4,c=t.length,l=t[0].length,p=l>0,f=[];if(n)r="kmrand"==n?function(t,e){for(var n={},i=[],r=e<<2,o=t.length,s=t[0].length>0;i.length<e&&r-- >0;){var a=t[Math.floor(Math.random()*o)],u=s?a.join("_"):""+a;n[u]||(n[u]=!0,i.push(a))}if(i.length<e)throw new Error("Error initializating clusters");return i}(t,e):"kmpp"==n?function(t,e){var n=t[0].length?Ra:Na,i=[],r=t.length,o=t[0].length>0,s=t[Math.floor(Math.random()*r)];for(o&&s.join("_"),i.push(s);i.length<e;){for(var a=[],u=i.length,h=0,c=[],l=0;l<r;l++){for(var p=1/0,f=0;f<u;f++){var d=n(t[l],i[f]);d<=p&&(p=d)}a[l]=p}for(var g=0;g<r;g++)h+=a[g];for(var y=0;y<r;y++)c[y]={i:y,v:t[y],pr:a[y]/h,cs:0};c.sort(function(t,e){return t.pr-e.pr}),c[0].cs=c[0].pr;for(var _=1;_<r;_++)c[_].cs=c[_-1].cs+c[_].pr;for(var v=Math.random(),m=0;m<r-1&&c[m++].cs<v;);i.push(c[m-1].v)}return i}(t,e):n;else for(var d={};r.length<e;){var g=Math.floor(Math.random()*c);d[g]||(d[g]=!0,r.push(t[g]))}do{xi(e,0,f);for(var y=0;y<c;y++){for(var _=1/0,v=0,m=0;m<e;m++)(a=p?La(t[y],r[m]):Math.abs(t[y]-r[m]))<=_&&(_=a,v=m);s[y]=v,f[v]++}for(var E=[],x=(o=[],0);x<e;x++)E[x]=p?xi(l,0,E[x]):0,o[x]=r[x];if(p){for(var b=0;b<e;b++)r[b]=[];for(var w=0;w<c;w++)for(var C=E[s[w]],O=t[w],I=0;I<l;I++)C[I]+=O[I];u=!0;for(var S=0;S<e;S++){for(var T=r[S],R=E[S],N=o[S],L=f[S],M=0;M<l;M++)T[M]=R[M]/L||0;if(u)for(var P=0;P<l;P++)if(N[P]!=T[P]){u=!1;break}}}else{for(var A=0;A<c;A++)E[s[A]]+=t[A];for(var D=0;D<e;D++)r[D]=E[D]/f[D]||0;u=!0;for(var F=0;F<e;F++)if(o[F]!=r[F]){u=!1;break}}u=u||--h<=0}while(!u);return{it:1e4-h,k:e,idxs:s,centroids:r}},Pa={search:function(t,e,n,i){t.cleanDirty();var r=(i=i||{}).heuristic||Pa.heuristics.manhattan,o=i.closest||!1,s=new Ii(function(t){return t.f}),a=e;for(e.h=r(e,n),s.push(e);s.size()>0;){var u=s.pop();if(u===n)return wi(u);u.closed=!0;for(var h=t.neighbors(u),c=0,l=h.length;c<l;++c){var p=h[c];if(!p.closed&&!p.isWall()){var f=u.g+p.getCost(u),d=p.visited;(!d||f<p.g)&&(p.visited=!0,p.parent=u,p.h=p.h||r(p,n),p.g=f,p.f=p.g+p.h,t.markDirty(p),o&&(p.h<a.h||p.h===a.h&&p.g<a.g)&&(a=p),d?s.rescoreElement(p):s.push(p))}}}return o?wi(a):[]},heuristics:{manhattan:function(t,e){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)},diagonal:function(t,e){var n=Math.sqrt(2),i=Math.abs(e.x-t.x),r=Math.abs(e.y-t.y);return 1*(i+r)+(n-2)*Math.min(i,r)}},cleanNode:function(t){t.f=0,t.g=0,t.h=0,t.visited=!1,t.closed=!1,t.parent=null}};Ci.prototype.init=function(){this.dirtyNodes=[];for(var t=0;t<this.nodes.length;t++)Pa.cleanNode(this.nodes[t])},Ci.prototype.cleanDirty=function(){for(var t=0;t<this.dirtyNodes.length;t++)Pa.cleanNode(this.dirtyNodes[t]);this.dirtyNodes=[]},Ci.prototype.markDirty=function(t){this.dirtyNodes.push(t)},Ci.prototype.neighbors=function(t){var e=[],n=t.x,i=t.y,r=this.grid;return r[n-1]&&r[n-1][i]&&e.push(r[n-1][i]),r[n+1]&&r[n+1][i]&&e.push(r[n+1][i]),r[n]&&r[n][i-1]&&e.push(r[n][i-1]),r[n]&&r[n][i+1]&&e.push(r[n][i+1]),this.diagonal&&(r[n-1]&&r[n-1][i-1]&&e.push(r[n-1][i-1]),r[n+1]&&r[n+1][i-1]&&e.push(r[n+1][i-1]),r[n-1]&&r[n-1][i+1]&&e.push(r[n-1][i+1]),r[n+1]&&r[n+1][i+1]&&e.push(r[n+1][i+1])),e},Ci.prototype.toString=function(){for(var t,e,n,i,r=[],o=this.grid,s=0,a=o.length;s<a;s++){for(t=[],n=0,i=(e=o[s]).length;n<i;n++)t.push(e[n].weight);r.push(t.join(" "))}return r.join("\n")},Oi.prototype.toString=function(){return"["+this.x+" "+this.y+"]"},Oi.prototype.getCost=function(t){return t&&t.x!==this.x&&t.y!==this.y?1.41421*this.weight:this.weight},Oi.prototype.isWall=function(){return 0===this.weight},Ii.prototype={push:function(t){this.content.push(t),this.sinkDown(this.content.length-1)},pop:function(){var t=this.content[0],e=this.content.pop();return this.content.length>0&&(this.content[0]=e,this.bubbleUp(0)),t},remove:function(t){var e=this.content.indexOf(t),n=this.content.pop();e!==this.content.length-1&&(this.content[e]=n,this.scoreFunction(n)<this.scoreFunction(t)?this.sinkDown(e):this.bubbleUp(e))},size:function(){return this.content.length},rescoreElement:function(t){this.sinkDown(this.content.indexOf(t))},sinkDown:function(t){for(var e=this.content[t];t>0;){var n=(t+1>>1)-1,i=this.content[n];if(!(this.scoreFunction(e)<this.scoreFunction(i)))break;this.content[n]=e,this.content[t]=i,t=n}},bubbleUp:function(t){for(var e=this.content.length,n=this.content[t],i=this.scoreFunction(n);;){var r,o=t+1<<1,s=o-1,a=null;if(s<e){var u=this.content[s];(r=this.scoreFunction(u))<i&&(a=s)}if(o<e){var h=this.content[o];this.scoreFunction(h)<(null===a?i:r)&&(a=o)}if(null===a)break;this.content[t]=this.content[a],this.content[a]=n,t=a}}};var Aa=function(t){return function(){return t}};Ri.prototype={constructor:Ri,insert:function(t,e){var n,i,r;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=Pi(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)n===(i=n.U).L?(r=i.R)&&r.C?(n.C=r.C=!1,i.C=!0,t=i):(t===n.R&&(Li(this,n),n=(t=n).U),n.C=!1,i.C=!0,Mi(this,i)):(r=i.L)&&r.C?(n.C=r.C=!1,i.C=!0,t=i):(t===n.L&&(Mi(this,n),n=(t=n).U),n.C=!1,i.C=!0,Li(this,i)),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,i,r=t.U,o=t.L,s=t.R;if(n=o?s?Pi(s):o:s,r?r.L===t?r.L=n:r.R=n:this._=n,o&&s?(i=n.C,n.C=t.C,n.L=o,o.U=n,n!==s?(r=n.U,n.U=t.U,t=n.R,r.L=t,n.R=s,s.U=n):(n.U=r,r=n,t=n.R)):(i=t.C,t=n),t&&(t.U=r),!i)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===r.L){if((e=r.R).C&&(e.C=!1,r.C=!0,Li(this,r),e=r.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,Mi(this,e),e=r.R),e.C=r.C,r.C=e.R.C=!1,Li(this,r),t=this._;break}}else if((e=r.L).C&&(e.C=!1,r.C=!0,Mi(this,r),e=r.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,Li(this,e),e=r.L),e.C=r.C,r.C=e.L.C=!1,Mi(this,r),t=this._;break}e.C=!0,t=r,r=r.U}while(!t.C);t&&(t.C=!1)}}};var Da,Fa,ja,Ga,ka,Ba=[],Ya=[],Xa=1e-6,qa=1e-12;Ji.prototype={constructor:Ji,polygons:function(){var t=this.edges;return this.cells.map(function(e){var n=e.halfedges.map(function(n){return Bi(e,t[n])});return n.data=e.site.data,n})},triangles:function(){var t=[],e=this.edges;return this.cells.forEach(function(n,i){if(o=(r=n.halfedges).length)for(var r,o,s,a=n.site,u=-1,h=e[r[o-1]],c=h.left===a?h.right:h.left;++u<o;)s=c,c=(h=e[r[u]]).left===a?h.right:h.left,s&&c&&i<s.index&&i<c.index&&Hi(a,s,c)<0&&t.push([a.data,s.data,c.data])}),t},links:function(){return this.edges.filter(function(t){return t.right}).map(function(t){return{source:t.left.data,target:t.right.data}})},find:function(t,e,n){for(var i,r,o=this,s=o._found||0,a=o.cells.length;!(r=o.cells[s]);)if(++s>=a)return null;var u=t-r.site[0],h=e-r.site[1],c=u*u+h*h;do{r=o.cells[i=s],s=null,r.halfedges.forEach(function(n){var i=o.edges[n],a=i.left;if(a!==r.site&&a||(a=i.right)){var u=t-a[0],h=e-a[1],l=u*u+h*h;l<c&&(c=l,s=a.index)}})}while(null!==s);return o._found=i,null==n||c<=n*n?r.site:null}};var Ua=Object.freeze({randomPosition:rr,randomPoint:or,randomPolygon:sr,randomLineString:ar}),za=Object.freeze({getCluster:hr,clusterEach:cr,clusterReduce:lr,createBins:pr,applyFilter:fr,propertiesContainsFilter:dr,filterProperties:gr});"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(t){if(void 0===this||null===this)throw new TypeError(this+" is not an object");var e=Object(this),n=Math.max(Math.min(e.length,9007199254740991),0)||0,i=1 in arguments&&parseInt(Number(arguments[1]),10)||0;i=i<0?Math.max(n+i,0):Math.min(i,n);var r=2 in arguments&&void 0!==arguments[2]?parseInt(Number(arguments[2]),10)||0:n;for(r=r<0?Math.max(n+arguments[2],0):Math.min(r,n);i<r;)e[i]=t,++i;return e},writable:!0}),Number.isFinite=Number.isFinite||function(t){return"number"==typeof t&&isFinite(t)},Number.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},Number.parseFloat=Number.parseFloat||parseFloat,Number.isNaN=Number.isNaN||function(t){return t!=t},Math.trunc=Math.trunc||function(t){return t<0?Math.ceil(t):Math.floor(t)};var Va=function(){};Va.prototype.interfaces_=function(){return[]},Va.prototype.getClass=function(){return Va},Va.prototype.equalsWithTolerance=function(t,e,n){return Math.abs(t-e)<=n};var Wa=function(){},Ka=function(){},Ha={MAX_VALUE:{configurable:!0}};Ka.isNaN=function(t){return Number.isNaN(t)},Ka.doubleToLongBits=function(t){return t},Ka.longBitsToDouble=function(t){return t},Ka.isInfinite=function(t){return!Number.isFinite(t)},Ha.MAX_VALUE.get=function(){return Number.MAX_VALUE},Object.defineProperties(Ka,Ha);var Za=function(){},Ja=function(){},Qa=function(){},$a=function t(){if(this.x=null,this.y=null,this.z=null,0===arguments.length)this.x=0,this.y=0,this.z=t.NULL_ORDINATE;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.z=e.z}else 2===arguments.length?(this.x=arguments[0],this.y=arguments[1],this.z=t.NULL_ORDINATE):3===arguments.length&&(this.x=arguments[0],this.y=arguments[1],this.z=arguments[2])},tu={DimensionalComparator:{configurable:!0},serialVersionUID:{configurable:!0},NULL_ORDINATE:{configurable:!0},X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0}};$a.prototype.setOrdinate=function(t,e){switch(t){case $a.X:this.x=e;break;case $a.Y:this.y=e;break;case $a.Z:this.z=e;break;default:throw new Wa("Invalid ordinate index: "+t)}},$a.prototype.equals2D=function(){if(1===arguments.length){var t=arguments[0];return this.x===t.x&&this.y===t.y}if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!Va.equalsWithTolerance(this.x,e.x,n)&&!!Va.equalsWithTolerance(this.y,e.y,n)}},$a.prototype.getOrdinate=function(t){switch(t){case $a.X:return this.x;case $a.Y:return this.y;case $a.Z:return this.z}throw new Wa("Invalid ordinate index: "+t)},$a.prototype.equals3D=function(t){return this.x===t.x&&this.y===t.y&&(this.z===t.z||Ka.isNaN(this.z))&&Ka.isNaN(t.z)},$a.prototype.equals=function(t){return t instanceof $a&&this.equals2D(t)},$a.prototype.equalInZ=function(t,e){return Va.equalsWithTolerance(this.z,t.z,e)},$a.prototype.compareTo=function(t){var e=t;return this.x<e.x?-1:this.x>e.x?1:this.y<e.y?-1:this.y>e.y?1:0},$a.prototype.clone=function(){},$a.prototype.copy=function(){return new $a(this)},$a.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"},$a.prototype.distance3D=function(t){var e=this.x-t.x,n=this.y-t.y,i=this.z-t.z;return Math.sqrt(e*e+n*n+i*i)},$a.prototype.distance=function(t){var e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)},$a.prototype.hashCode=function(){var t=17;return t=37*(t=37*t+$a.hashCode(this.x))+$a.hashCode(this.y)},$a.prototype.setCoordinate=function(t){this.x=t.x,this.y=t.y,this.z=t.z},$a.prototype.interfaces_=function(){return[Za,Ja,yr]},$a.prototype.getClass=function(){return $a},$a.hashCode=function(){if(1===arguments.length){var t=arguments[0],e=Ka.doubleToLongBits(t);return Math.trunc((e^e)>>>32)}},tu.DimensionalComparator.get=function(){return eu},tu.serialVersionUID.get=function(){return 0x5cbf2c235c7e5800},tu.NULL_ORDINATE.get=function(){return Ka.NaN},tu.X.get=function(){return 0},tu.Y.get=function(){return 1},tu.Z.get=function(){return 2},Object.defineProperties($a,tu);var eu=function(t){if(this._dimensionsToTest=2,0===arguments.length);else if(1===arguments.length){var e=arguments[0];if(2!==e&&3!==e)throw new Wa("only 2 or 3 dimensions may be specified");this._dimensionsToTest=e}};eu.prototype.compare=function(t,e){var n=t,i=e,r=eu.compare(n.x,i.x);if(0!==r)return r;var o=eu.compare(n.y,i.y);return 0!==o?o:this._dimensionsToTest<=2?0:eu.compare(n.z,i.z)},eu.prototype.interfaces_=function(){return[Qa]},eu.prototype.getClass=function(){return eu},eu.compare=function(t,e){return t<e?-1:t>e?1:Ka.isNaN(t)?Ka.isNaN(e)?0:-1:Ka.isNaN(e)?1:0};var nu=function(){};nu.prototype.create=function(){},nu.prototype.interfaces_=function(){return[]},nu.prototype.getClass=function(){return nu};var iu=function(){},ru={INTERIOR:{configurable:!0},BOUNDARY:{configurable:!0},EXTERIOR:{configurable:!0},NONE:{configurable:!0}};iu.prototype.interfaces_=function(){return[]},iu.prototype.getClass=function(){return iu},iu.toLocationSymbol=function(t){switch(t){case iu.EXTERIOR:return"e";case iu.BOUNDARY:return"b";case iu.INTERIOR:return"i";case iu.NONE:return"-"}throw new Wa("Unknown location value: "+t)},ru.INTERIOR.get=function(){return 0},ru.BOUNDARY.get=function(){return 1},ru.EXTERIOR.get=function(){return 2},ru.NONE.get=function(){return-1},Object.defineProperties(iu,ru);var ou=function(t,e){return t.interfaces_&&t.interfaces_().indexOf(e)>-1},su=function(){},au={LOG_10:{configurable:!0}};su.prototype.interfaces_=function(){return[]},su.prototype.getClass=function(){return su},su.log10=function(t){var e=Math.log(t);return Ka.isInfinite(e)?e:Ka.isNaN(e)?e:e/su.LOG_10},su.min=function(t,e,n,i){var r=t;return e<r&&(r=e),n<r&&(r=n),i<r&&(r=i),r},su.clamp=function(){if("number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1],n=arguments[2];return t<e?e:t>n?n:t}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var i=arguments[0],r=arguments[1],o=arguments[2];return i<r?r:i>o?o:i}},su.wrap=function(t,e){return t<0?e- -t%e:t%e},su.max=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],i=t;return e>i&&(i=e),n>i&&(i=n),i}if(4===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3],u=r;return o>u&&(u=o),s>u&&(u=s),a>u&&(u=a),u}},su.average=function(t,e){return(t+e)/2},au.LOG_10.get=function(){return Math.log(10)},Object.defineProperties(su,au);var uu=function(t){this.str=t};uu.prototype.append=function(t){this.str+=t},uu.prototype.setCharAt=function(t,e){this.str=this.str.substr(0,t)+e+this.str.substr(t+1)},uu.prototype.toString=function(t){return this.str};var hu=function(t){this.value=t};hu.prototype.intValue=function(){return this.value},hu.prototype.compareTo=function(t){return this.value<t?-1:this.value>t?1:0},hu.isNaN=function(t){return Number.isNaN(t)};var cu=function(){};cu.isWhitespace=function(t){return t<=32&&t>=0||127===t},cu.toUpperCase=function(t){return t.toUpperCase()};var lu=function t(){if(this._hi=0,this._lo=0,0===arguments.length)this.init(0);else if(1===arguments.length){if("number"==typeof arguments[0]){var e=arguments[0];this.init(e)}else if(arguments[0]instanceof t){var n=arguments[0];this.init(n)}else if("string"==typeof arguments[0]){var i=arguments[0];t.call(this,t.parse(i))}}else if(2===arguments.length){var r=arguments[0],o=arguments[1];this.init(r,o)}},pu={PI:{configurable:!0},TWO_PI:{configurable:!0},PI_2:{configurable:!0},E:{configurable:!0},NaN:{configurable:!0},EPS:{configurable:!0},SPLIT:{configurable:!0},MAX_PRINT_DIGITS:{configurable:!0},TEN:{configurable:!0},ONE:{configurable:!0},SCI_NOT_EXPONENT_CHAR:{configurable:!0},SCI_NOT_ZERO:{configurable:!0}};lu.prototype.le=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<=t._lo},lu.prototype.extractSignificantDigits=function(t,e){var n=this.abs(),i=lu.magnitude(n._hi),r=lu.TEN.pow(i);(n=n.divide(r)).gt(lu.TEN)?(n=n.divide(lu.TEN),i+=1):n.lt(lu.ONE)&&(n=n.multiply(lu.TEN),i-=1);for(var o=i+1,s=new uu,a=lu.MAX_PRINT_DIGITS-1,u=0;u<=a;u++){t&&u===o&&s.append(".");var h=Math.trunc(n._hi);if(h<0)break;var c=!1,l=0;h>9?(c=!0,l="9"):l="0"+h,s.append(l),n=n.subtract(lu.valueOf(h)).multiply(lu.TEN),c&&n.selfAdd(lu.TEN);var p=!0,f=lu.magnitude(n._hi);if(f<0&&Math.abs(f)>=a-u&&(p=!1),!p)break}return e[0]=i,s.toString()},lu.prototype.sqr=function(){return this.multiply(this)},lu.prototype.doubleValue=function(){return this._hi+this._lo},lu.prototype.subtract=function(){if(arguments[0]instanceof lu){var t=arguments[0];return this.add(t.negate())}if("number"==typeof arguments[0]){var e=arguments[0];return this.add(-e)}},lu.prototype.equals=function(){if(1===arguments.length){var t=arguments[0];return this._hi===t._hi&&this._lo===t._lo}},lu.prototype.isZero=function(){return 0===this._hi&&0===this._lo},lu.prototype.selfSubtract=function(){if(arguments[0]instanceof lu){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t._hi,-t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.isNaN()?this:this.selfAdd(-e,0)}},lu.prototype.getSpecialNumberString=function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null},lu.prototype.min=function(t){return this.le(t)?this:t},lu.prototype.selfDivide=function(){if(1===arguments.length){if(arguments[0]instanceof lu){var t=arguments[0];return this.selfDivide(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfDivide(e,0)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1],r=null,o=null,s=null,a=null,u=null,h=null,c=null,l=null;return u=this._hi/n,l=(r=(h=lu.SPLIT*u)-(r=h-u))*(s=(l=lu.SPLIT*n)-(s=l-n))-(c=u*n)+r*(a=n-s)+(o=u-r)*s+o*a,h=(this._hi-c-l+this._lo-u*i)/n,l=u+h,this._hi=l,this._lo=u-l+h,this}},lu.prototype.dump=function(){return"DD<"+this._hi+", "+this._lo+">"},lu.prototype.divide=function(){if(arguments[0]instanceof lu){var t=arguments[0],e=null,n=null,i=null,r=null,o=null,s=null,a=null,u=null;return n=(o=this._hi/t._hi)-(e=(s=lu.SPLIT*o)-(e=s-o)),u=e*(i=(u=lu.SPLIT*t._hi)-(i=u-t._hi))-(a=o*t._hi)+e*(r=t._hi-i)+n*i+n*r,s=(this._hi-a-u+this._lo-o*t._lo)/t._hi,new lu(u=o+s,o-u+s)}if("number"==typeof arguments[0]){var h=arguments[0];return Ka.isNaN(h)?lu.createNaN():lu.copy(this).selfDivide(h,0)}},lu.prototype.ge=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>=t._lo},lu.prototype.pow=function(t){if(0===t)return lu.valueOf(1);var e=new lu(this),n=lu.valueOf(1),i=Math.abs(t);if(i>1)for(;i>0;)i%2==1&&n.selfMultiply(e),(i/=2)>0&&(e=e.sqr());else n=e;return t<0?n.reciprocal():n},lu.prototype.ceil=function(){if(this.isNaN())return lu.NaN;var t=Math.ceil(this._hi),e=0;return t===this._hi&&(e=Math.ceil(this._lo)),new lu(t,e)},lu.prototype.compareTo=function(t){var e=t;return this._hi<e._hi?-1:this._hi>e._hi?1:this._lo<e._lo?-1:this._lo>e._lo?1:0},lu.prototype.rint=function(){return this.isNaN()?this:this.add(.5).floor()},lu.prototype.setValue=function(){if(arguments[0]instanceof lu){var t=arguments[0];return this.init(t),this}if("number"==typeof arguments[0]){var e=arguments[0];return this.init(e),this}},lu.prototype.max=function(t){return this.ge(t)?this:t},lu.prototype.sqrt=function(){if(this.isZero())return lu.valueOf(0);if(this.isNegative())return lu.NaN;var t=1/Math.sqrt(this._hi),e=this._hi*t,n=lu.valueOf(e),i=this.subtract(n.sqr())._hi*(.5*t);return n.add(i)},lu.prototype.selfAdd=function(){if(1===arguments.length){if(arguments[0]instanceof lu){var t=arguments[0];return this.selfAdd(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0],n=null,i=null,r=null,o=null,s=null,a=null;return r=this._hi+e,s=r-this._hi,o=r-s,o=e-s+(this._hi-o),a=o+this._lo,i=a+(r-(n=r+a)),this._hi=n+i,this._lo=i+(n-this._hi),this}}else if(2===arguments.length){var u=arguments[0],h=arguments[1],c=null,l=null,p=null,f=null,d=null,g=null,y=null;f=this._hi+u,l=this._lo+h,d=f-(g=f-this._hi),p=l-(y=l-this._lo);var _=(c=f+(g=(d=u-g+(this._hi-d))+l))+(g=(p=h-y+(this._lo-p))+(g+(f-c))),v=g+(c-_);return this._hi=_,this._lo=v,this}},lu.prototype.selfMultiply=function(){if(1===arguments.length){if(arguments[0]instanceof lu){var t=arguments[0];return this.selfMultiply(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfMultiply(e,0)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1],r=null,o=null,s=null,a=null,u=null,h=null;r=(u=lu.SPLIT*this._hi)-this._hi,h=lu.SPLIT*n,r=u-r,o=this._hi-r,s=h-n;var c=(u=this._hi*n)+(h=r*(s=h-s)-u+r*(a=n-s)+o*s+o*a+(this._hi*i+this._lo*n)),l=h+(r=u-c);return this._hi=c,this._lo=l,this}},lu.prototype.selfSqr=function(){return this.selfMultiply(this)},lu.prototype.floor=function(){if(this.isNaN())return lu.NaN;var t=Math.floor(this._hi),e=0;return t===this._hi&&(e=Math.floor(this._lo)),new lu(t,e)},lu.prototype.negate=function(){return this.isNaN()?this:new lu(-this._hi,-this._lo)},lu.prototype.clone=function(){},lu.prototype.multiply=function(){if(arguments[0]instanceof lu){var t=arguments[0];return t.isNaN()?lu.createNaN():lu.copy(this).selfMultiply(t)}if("number"==typeof arguments[0]){var e=arguments[0];return Ka.isNaN(e)?lu.createNaN():lu.copy(this).selfMultiply(e,0)}},lu.prototype.isNaN=function(){return Ka.isNaN(this._hi)},lu.prototype.intValue=function(){return Math.trunc(this._hi)},lu.prototype.toString=function(){var t=lu.magnitude(this._hi);return t>=-3&&t<=20?this.toStandardNotation():this.toSciNotation()},lu.prototype.toStandardNotation=function(){var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!0,e),i=e[0]+1,r=n;if("."===n.charAt(0))r="0"+n;else if(i<0)r="0."+lu.stringOfChar("0",-i)+n;else if(-1===n.indexOf(".")){var o=i-n.length;r=n+lu.stringOfChar("0",o)+".0"}return this.isNegative()?"-"+r:r},lu.prototype.reciprocal=function(){var t=null,e=null,n=null,i=null,r=null,o=null,s=null,a=null;e=(r=1/this._hi)-(t=(o=lu.SPLIT*r)-(t=o-r)),n=(a=lu.SPLIT*this._hi)-this._hi;var u=r+(o=(1-(s=r*this._hi)-(a=t*(n=a-n)-s+t*(i=this._hi-n)+e*n+e*i)-r*this._lo)/this._hi);return new lu(u,r-u+o)},lu.prototype.toSciNotation=function(){if(this.isZero())return lu.SCI_NOT_ZERO;var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!1,e),i=lu.SCI_NOT_EXPONENT_CHAR+e[0];if("0"===n.charAt(0))throw new Error("Found leading zero: "+n);var r="";n.length>1&&(r=n.substring(1));var o=n.charAt(0)+"."+r;return this.isNegative()?"-"+o+i:o+i},lu.prototype.abs=function(){return this.isNaN()?lu.NaN:this.isNegative()?this.negate():new lu(this)},lu.prototype.isPositive=function(){return(this._hi>0||0===this._hi)&&this._lo>0},lu.prototype.lt=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<t._lo},lu.prototype.add=function(){if(arguments[0]instanceof lu){var t=arguments[0];return lu.copy(this).selfAdd(t)}if("number"==typeof arguments[0]){var e=arguments[0];return lu.copy(this).selfAdd(e)}},lu.prototype.init=function(){if(1===arguments.length){if("number"==typeof arguments[0]){var t=arguments[0];this._hi=t,this._lo=0}else if(arguments[0]instanceof lu){var e=arguments[0];this._hi=e._hi,this._lo=e._lo}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this._hi=n,this._lo=i}},lu.prototype.gt=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>t._lo},lu.prototype.isNegative=function(){return(this._hi<0||0===this._hi)&&this._lo<0},lu.prototype.trunc=function(){return this.isNaN()?lu.NaN:this.isPositive()?this.floor():this.ceil()},lu.prototype.signum=function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0},lu.prototype.interfaces_=function(){return[yr,Za,Ja]},lu.prototype.getClass=function(){return lu},lu.sqr=function(t){return lu.valueOf(t).selfMultiply(t)},lu.valueOf=function(){if("string"==typeof arguments[0]){var t=arguments[0];return lu.parse(t)}if("number"==typeof arguments[0]){var e=arguments[0];return new lu(e)}},lu.sqrt=function(t){return lu.valueOf(t).sqrt()},lu.parse=function(t){for(var e=0,n=t.length;cu.isWhitespace(t.charAt(e));)e++;var i=!1;if(e<n){var r=t.charAt(e);"-"!==r&&"+"!==r||(e++,"-"===r&&(i=!0))}for(var o=new lu,s=0,a=0,u=0;!(e>=n);){var h=t.charAt(e);if(e++,cu.isDigit(h)){var c=h-"0";o.selfMultiply(lu.TEN),o.selfAdd(c),s++}else{if("."!==h){if("e"===h||"E"===h){var l=t.substring(e);try{u=hu.parseInt(l)}catch(e){throw e instanceof Error?new Error("Invalid exponent "+l+" in string "+t):e}break}throw new Error("Unexpected character '"+h+"' at position "+e+" in string "+t)}a=s}}var p=o,f=s-a-u;if(0===f)p=o;else if(f>0){var d=lu.TEN.pow(f);p=o.divide(d)}else if(f<0){var g=lu.TEN.pow(-f);p=o.multiply(g)}return i?p.negate():p},lu.createNaN=function(){return new lu(Ka.NaN,Ka.NaN)},lu.copy=function(t){return new lu(t)},lu.magnitude=function(t){var e=Math.abs(t),n=Math.log(e)/Math.log(10),i=Math.trunc(Math.floor(n));return 10*Math.pow(10,i)<=e&&(i+=1),i},lu.stringOfChar=function(t,e){for(var n=new uu,i=0;i<e;i++)n.append(t);return n.toString()},pu.PI.get=function(){return new lu(3.141592653589793,1.2246467991473532e-16)},pu.TWO_PI.get=function(){return new lu(6.283185307179586,2.4492935982947064e-16)},pu.PI_2.get=function(){return new lu(1.5707963267948966,6.123233995736766e-17)},pu.E.get=function(){return new lu(2.718281828459045,1.4456468917292502e-16)},pu.NaN.get=function(){return new lu(Ka.NaN,Ka.NaN)},pu.EPS.get=function(){return 1.23259516440783e-32},pu.SPLIT.get=function(){return 134217729},pu.MAX_PRINT_DIGITS.get=function(){return 32},pu.TEN.get=function(){return lu.valueOf(10)},pu.ONE.get=function(){return lu.valueOf(1)},pu.SCI_NOT_EXPONENT_CHAR.get=function(){return"E"},pu.SCI_NOT_ZERO.get=function(){return"0.0E0"},Object.defineProperties(lu,pu);var fu=function(){},du={DP_SAFE_EPSILON:{configurable:!0}};fu.prototype.interfaces_=function(){return[]},fu.prototype.getClass=function(){return fu},fu.orientationIndex=function(t,e,n){var i=fu.orientationIndexFilter(t,e,n);if(i<=1)return i;var r=lu.valueOf(e.x).selfAdd(-t.x),o=lu.valueOf(e.y).selfAdd(-t.y),s=lu.valueOf(n.x).selfAdd(-e.x),a=lu.valueOf(n.y).selfAdd(-e.y);return r.selfMultiply(a).selfSubtract(o.selfMultiply(s)).signum()},fu.signOfDet2x2=function(t,e,n,i){return t.multiply(i).selfSubtract(e.multiply(n)).signum()},fu.intersection=function(t,e,n,i){var r=lu.valueOf(i.y).selfSubtract(n.y).selfMultiply(lu.valueOf(e.x).selfSubtract(t.x)),o=lu.valueOf(i.x).selfSubtract(n.x).selfMultiply(lu.valueOf(e.y).selfSubtract(t.y)),s=r.subtract(o),a=lu.valueOf(i.x).selfSubtract(n.x).selfMultiply(lu.valueOf(t.y).selfSubtract(n.y)),u=lu.valueOf(i.y).selfSubtract(n.y).selfMultiply(lu.valueOf(t.x).selfSubtract(n.x)),h=a.subtract(u).selfDivide(s).doubleValue(),c=lu.valueOf(t.x).selfAdd(lu.valueOf(e.x).selfSubtract(t.x).selfMultiply(h)).doubleValue(),l=lu.valueOf(e.x).selfSubtract(t.x).selfMultiply(lu.valueOf(t.y).selfSubtract(n.y)),p=lu.valueOf(e.y).selfSubtract(t.y).selfMultiply(lu.valueOf(t.x).selfSubtract(n.x)),f=l.subtract(p).selfDivide(s).doubleValue(),d=lu.valueOf(n.y).selfAdd(lu.valueOf(i.y).selfSubtract(n.y).selfMultiply(f)).doubleValue();return new $a(c,d)},fu.orientationIndexFilter=function(t,e,n){var i=null,r=(t.x-n.x)*(e.y-n.y),o=(t.y-n.y)*(e.x-n.x),s=r-o;if(r>0){if(o<=0)return fu.signum(s);i=r+o}else{if(!(r<0))return fu.signum(s);if(o>=0)return fu.signum(s);i=-r-o}var a=fu.DP_SAFE_EPSILON*i;return s>=a||-s>=a?fu.signum(s):2},fu.signum=function(t){return t>0?1:t<0?-1:0},du.DP_SAFE_EPSILON.get=function(){return 1e-15},Object.defineProperties(fu,du);var gu=function(){},yu={X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0},M:{configurable:!0}};yu.X.get=function(){return 0},yu.Y.get=function(){return 1},yu.Z.get=function(){return 2},yu.M.get=function(){return 3},gu.prototype.setOrdinate=function(t,e,n){},gu.prototype.size=function(){},gu.prototype.getOrdinate=function(t,e){},gu.prototype.getCoordinate=function(){},gu.prototype.getCoordinateCopy=function(t){},gu.prototype.getDimension=function(){},gu.prototype.getX=function(t){},gu.prototype.clone=function(){},gu.prototype.expandEnvelope=function(t){},gu.prototype.copy=function(){},gu.prototype.getY=function(t){},gu.prototype.toCoordinateArray=function(){},gu.prototype.interfaces_=function(){return[Ja]},gu.prototype.getClass=function(){return gu},Object.defineProperties(gu,yu);var _u=function(){},vu=function(t){function e(){t.call(this,"Projective point not representable on the Cartesian plane.")}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(_u),mu=function(){};mu.arraycopy=function(t,e,n,i,r){for(var o=0,s=e;s<e+r;s++)n[i+o]=t[s],o++},mu.getProperty=function(t){return{"line.separator":"\n"}[t]};var Eu=function t(){if(this.x=null,this.y=null,this.w=null,0===arguments.length)this.x=0,this.y=0,this.w=1;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.w=1}else if(2===arguments.length){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var n=arguments[0],i=arguments[1];this.x=n,this.y=i,this.w=1}else if(arguments[0]instanceof t&&arguments[1]instanceof t){var r=arguments[0],o=arguments[1];this.x=r.y*o.w-o.y*r.w,this.y=o.x*r.w-r.x*o.w,this.w=r.x*o.y-o.x*r.y}else if(arguments[0]instanceof $a&&arguments[1]instanceof $a){var s=arguments[0],a=arguments[1];this.x=s.y-a.y,this.y=a.x-s.x,this.w=s.x*a.y-a.x*s.y}}else if(3===arguments.length){var u=arguments[0],h=arguments[1],c=arguments[2];this.x=u,this.y=h,this.w=c}else if(4===arguments.length){var l=arguments[0],p=arguments[1],f=arguments[2],d=arguments[3],g=l.y-p.y,y=p.x-l.x,_=l.x*p.y-p.x*l.y,v=f.y-d.y,m=d.x-f.x,E=f.x*d.y-d.x*f.y;this.x=y*E-m*_,this.y=v*_-g*E,this.w=g*m-v*y}};Eu.prototype.getY=function(){var t=this.y/this.w;if(Ka.isNaN(t)||Ka.isInfinite(t))throw new vu;return t},Eu.prototype.getX=function(){var t=this.x/this.w;if(Ka.isNaN(t)||Ka.isInfinite(t))throw new vu;return t},Eu.prototype.getCoordinate=function(){var t=new $a;return t.x=this.getX(),t.y=this.getY(),t},Eu.prototype.interfaces_=function(){return[]},Eu.prototype.getClass=function(){return Eu},Eu.intersection=function(t,e,n,i){var r=t.y-e.y,o=e.x-t.x,s=t.x*e.y-e.x*t.y,a=n.y-i.y,u=i.x-n.x,h=n.x*i.y-i.x*n.y,c=r*u-a*o,l=(o*h-u*s)/c,p=(a*s-r*h)/c;if(Ka.isNaN(l)||Ka.isInfinite(l)||Ka.isNaN(p)||Ka.isInfinite(p))throw new vu;return new $a(l,p)};var xu=function t(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,0===arguments.length)this.init();else if(1===arguments.length){if(arguments[0]instanceof $a){var e=arguments[0];this.init(e.x,e.x,e.y,e.y)}else if(arguments[0]instanceof t){var n=arguments[0];this.init(n)}}else if(2===arguments.length){var i=arguments[0],r=arguments[1];this.init(i.x,r.x,i.y,r.y)}else if(4===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2],u=arguments[3];this.init(o,s,a,u)}},bu={serialVersionUID:{configurable:!0}};xu.prototype.getArea=function(){return this.getWidth()*this.getHeight()},xu.prototype.equals=function(t){if(!(t instanceof xu))return!1;var e=t;return this.isNull()?e.isNull():this._maxx===e.getMaxX()&&this._maxy===e.getMaxY()&&this._minx===e.getMinX()&&this._miny===e.getMinY()},xu.prototype.intersection=function(t){if(this.isNull()||t.isNull()||!this.intersects(t))return new xu;var e=this._minx>t._minx?this._minx:t._minx,n=this._miny>t._miny?this._miny:t._miny,i=this._maxx<t._maxx?this._maxx:t._maxx,r=this._maxy<t._maxy?this._maxy:t._maxy;return new xu(e,i,n,r)},xu.prototype.isNull=function(){return this._maxx<this._minx},xu.prototype.getMaxX=function(){return this._maxx},xu.prototype.covers=function(){if(1===arguments.length){if(arguments[0]instanceof $a){var t=arguments[0];return this.covers(t.x,t.y)}if(arguments[0]instanceof xu){var e=arguments[0];return!this.isNull()&&!e.isNull()&&e.getMinX()>=this._minx&&e.getMaxX()<=this._maxx&&e.getMinY()>=this._miny&&e.getMaxY()<=this._maxy}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];return!this.isNull()&&n>=this._minx&&n<=this._maxx&&i>=this._miny&&i<=this._maxy}},xu.prototype.intersects=function(){if(1===arguments.length){if(arguments[0]instanceof xu){var t=arguments[0];return!this.isNull()&&!t.isNull()&&!(t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny)}if(arguments[0]instanceof $a){var e=arguments[0];return this.intersects(e.x,e.y)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];return!this.isNull()&&!(n>this._maxx||n<this._minx||i>this._maxy||i<this._miny)}},xu.prototype.getMinY=function(){return this._miny},xu.prototype.getMinX=function(){return this._minx},xu.prototype.expandToInclude=function(){if(1===arguments.length){if(arguments[0]instanceof $a){var t=arguments[0];this.expandToInclude(t.x,t.y)}else if(arguments[0]instanceof xu){var e=arguments[0];if(e.isNull())return null;this.isNull()?(this._minx=e.getMinX(),this._maxx=e.getMaxX(),this._miny=e.getMinY(),this._maxy=e.getMaxY()):(e._minx<this._minx&&(this._minx=e._minx),e._maxx>this._maxx&&(this._maxx=e._maxx),e._miny<this._miny&&(this._miny=e._miny),e._maxy>this._maxy&&(this._maxy=e._maxy))}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.isNull()?(this._minx=n,this._maxx=n,this._miny=i,this._maxy=i):(n<this._minx&&(this._minx=n),n>this._maxx&&(this._maxx=n),i<this._miny&&(this._miny=i),i>this._maxy&&(this._maxy=i))}},xu.prototype.minExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t<e?t:e},xu.prototype.getWidth=function(){return this.isNull()?0:this._maxx-this._minx},xu.prototype.compareTo=function(t){var e=t;return this.isNull()?e.isNull()?0:-1:e.isNull()?1:this._minx<e._minx?-1:this._minx>e._minx?1:this._miny<e._miny?-1:this._miny>e._miny?1:this._maxx<e._maxx?-1:this._maxx>e._maxx?1:this._maxy<e._maxy?-1:this._maxy>e._maxy?1:0},xu.prototype.translate=function(t,e){if(this.isNull())return null;this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+e,this.getMaxY()+e)},xu.prototype.toString=function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"},xu.prototype.setToNull=function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1},xu.prototype.getHeight=function(){return this.isNull()?0:this._maxy-this._miny},xu.prototype.maxExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t>e?t:e},xu.prototype.expandBy=function(){if(1===arguments.length){var t=arguments[0];this.expandBy(t,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this.isNull())return null;this._minx-=e,this._maxx+=e,this._miny-=n,this._maxy+=n,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}},xu.prototype.contains=function(){if(1===arguments.length){if(arguments[0]instanceof xu){var t=arguments[0];return this.covers(t)}if(arguments[0]instanceof $a){var e=arguments[0];return this.covers(e)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];return this.covers(n,i)}},xu.prototype.centre=function(){return this.isNull()?null:new $a((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)},xu.prototype.init=function(){if(0===arguments.length)this.setToNull();else if(1===arguments.length){if(arguments[0]instanceof $a){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof xu){var e=arguments[0];this._minx=e._minx,this._maxx=e._maxx,this._miny=e._miny,this._maxy=e._maxy}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.init(n.x,i.x,n.y,i.y)}else if(4===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];r<o?(this._minx=r,this._maxx=o):(this._minx=o,this._maxx=r),s<a?(this._miny=s,this._maxy=a):(this._miny=a,this._maxy=s)}},xu.prototype.getMaxY=function(){return this._maxy},xu.prototype.distance=function(t){if(this.intersects(t))return 0;var e=0;this._maxx<t._minx?e=t._minx-this._maxx:this._minx>t._maxx&&(e=this._minx-t._maxx);var n=0;return this._maxy<t._miny?n=t._miny-this._maxy:this._miny>t._maxy&&(n=this._miny-t._maxy),0===e?n:0===n?e:Math.sqrt(e*e+n*n)},xu.prototype.hashCode=function(){var t=17;return t=37*(t=37*(t=37*(t=37*t+$a.hashCode(this._minx))+$a.hashCode(this._maxx))+$a.hashCode(this._miny))+$a.hashCode(this._maxy)},xu.prototype.interfaces_=function(){return[Za,yr]},xu.prototype.getClass=function(){return xu},xu.intersects=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2];return n.x>=(t.x<e.x?t.x:e.x)&&n.x<=(t.x>e.x?t.x:e.x)&&n.y>=(t.y<e.y?t.y:e.y)&&n.y<=(t.y>e.y?t.y:e.y)}if(4===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2],s=arguments[3],a=Math.min(o.x,s.x),u=Math.max(o.x,s.x),h=Math.min(i.x,r.x),c=Math.max(i.x,r.x);return!(h>u||c<a||(a=Math.min(o.y,s.y),u=Math.max(o.y,s.y),h=Math.min(i.y,r.y),c=Math.max(i.y,r.y),h>u||c<a))}},bu.serialVersionUID.get=function(){return 0x51845cd552189800},Object.defineProperties(xu,bu);var wu={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},Cu=function(t){this.geometryFactory=t||new Wh};Cu.prototype.read=function(t){var e,n,i;t=t.replace(/[\n\r]/g," ");var r=wu.typeStr.exec(t);if(-1!==t.search("EMPTY")&&((r=wu.emptyTypeStr.exec(t))[2]=void 0),r&&(n=r[1].toLowerCase(),i=r[2],Iu[n]&&(e=Iu[n].apply(this,[i]))),void 0===e)throw new Error("Could not parse WKT "+t);return e},Cu.prototype.write=function(t){return this.extractGeometry(t)},Cu.prototype.extractGeometry=function(t){var e=t.getGeometryType().toLowerCase();if(!Ou[e])return null;var n=e.toUpperCase();return t.isEmpty()?n+" EMPTY":n+"("+Ou[e].apply(this,[t])+")"};var Ou={coordinate:function(t){return t.x+" "+t.y},point:function(t){return Ou.coordinate.call(this,t._coordinates._coordinates[0])},multipoint:function(t){for(var e=[],n=0,i=t._geometries.length;n<i;++n)e.push("("+Ou.point.apply(this,[t._geometries[n]])+")");return e.join(",")},linestring:function(t){for(var e=[],n=0,i=t._points._coordinates.length;n<i;++n)e.push(Ou.coordinate.apply(this,[t._points._coordinates[n]]));return e.join(",")},linearring:function(t){for(var e=[],n=0,i=t._points._coordinates.length;n<i;++n)e.push(Ou.coordinate.apply(this,[t._points._coordinates[n]]));return e.join(",")},multilinestring:function(t){for(var e=[],n=0,i=t._geometries.length;n<i;++n)e.push("("+Ou.linestring.apply(this,[t._geometries[n]])+")");return e.join(",")},polygon:function(t){var e=[];e.push("("+Ou.linestring.apply(this,[t._shell])+")");for(var n=0,i=t._holes.length;n<i;++n)e.push("("+Ou.linestring.apply(this,[t._holes[n]])+")");return e.join(",")},multipolygon:function(t){for(var e=[],n=0,i=t._geometries.length;n<i;++n)e.push("("+Ou.polygon.apply(this,[t._geometries[n]])+")");return e.join(",")},geometrycollection:function(t){for(var e=[],n=0,i=t._geometries.length;n<i;++n)e.push(this.extractGeometry(t._geometries[n]));return e.join(",")}},Iu={point:function(t){if(void 0===t)return this.geometryFactory.createPoint();var e=t.trim().split(wu.spaces);return this.geometryFactory.createPoint(new $a(Number.parseFloat(e[0]),Number.parseFloat(e[1])))},multipoint:function(t){if(void 0===t)return this.geometryFactory.createMultiPoint();for(var e,n=t.trim().split(","),i=[],r=0,o=n.length;r<o;++r)e=n[r].replace(wu.trimParens,"$1"),i.push(Iu.point.apply(this,[e]));return this.geometryFactory.createMultiPoint(i)},linestring:function(t){if(void 0===t)return this.geometryFactory.createLineString();for(var e,n=t.trim().split(","),i=[],r=0,o=n.length;r<o;++r)e=n[r].trim().split(wu.spaces),i.push(new $a(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLineString(i)},linearring:function(t){if(void 0===t)return this.geometryFactory.createLinearRing();for(var e,n=t.trim().split(","),i=[],r=0,o=n.length;r<o;++r)e=n[r].trim().split(wu.spaces),i.push(new $a(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLinearRing(i)},multilinestring:function(t){if(void 0===t)return this.geometryFactory.createMultiLineString();for(var e,n=t.trim().split(wu.parenComma),i=[],r=0,o=n.length;r<o;++r)e=n[r].replace(wu.trimParens,"$1"),i.push(Iu.linestring.apply(this,[e]));return this.geometryFactory.createMultiLineString(i)},polygon:function(t){if(void 0===t)return this.geometryFactory.createPolygon();for(var e,n,i,r,o=t.trim().split(wu.parenComma),s=[],a=0,u=o.length;a<u;++a)e=o[a].replace(wu.trimParens,"$1"),n=Iu.linestring.apply(this,[e]),i=this.geometryFactory.createLinearRing(n._points),0===a?r=i:s.push(i);return this.geometryFactory.createPolygon(r,s)},multipolygon:function(t){if(void 0===t)return this.geometryFactory.createMultiPolygon();for(var e,n=t.trim().split(wu.doubleParenComma),i=[],r=0,o=n.length;r<o;++r)e=n[r].replace(wu.trimParens,"$1"),i.push(Iu.polygon.apply(this,[e]));return this.geometryFactory.createMultiPolygon(i)},geometrycollection:function(t){if(void 0===t)return this.geometryFactory.createGeometryCollection();for(var e=(t=t.replace(/,\s*([A-Za-z])/g,"|$1")).trim().split("|"),n=[],i=0,r=e.length;i<r;++i)n.push(this.read(e[i]));return this.geometryFactory.createGeometryCollection(n)}},Su=function(t){this.parser=new Cu(t)};Su.prototype.write=function(t){return this.parser.write(t)},Su.toLineString=function(t,e){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+t.x+" "+t.y+", "+e.x+" "+e.y+" )"};var Tu=function(t){function e(e){t.call(this,e),this.name="RuntimeException",this.message=e,this.stack=(new t).stack}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),Ru=function(t){function e(){if(t.call(this),0===arguments.length)t.call(this);else if(1===arguments.length){var e=arguments[0];t.call(this,e)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Tu),Nu=function(){};Nu.prototype.interfaces_=function(){return[]},Nu.prototype.getClass=function(){return Nu},Nu.shouldNeverReachHere=function(){if(0===arguments.length)Nu.shouldNeverReachHere(null);else if(1===arguments.length){var t=arguments[0];throw new Ru("Should never reach here"+(null!==t?": "+t:""))}},Nu.isTrue=function(){var t,e;if(1===arguments.length)t=arguments[0],Nu.isTrue(t,null);else if(2===arguments.length&&(t=arguments[0],e=arguments[1],!t))throw null===e?new Ru:new Ru(e)},Nu.equals=function(){var t,e,n;if(2===arguments.length)t=arguments[0],e=arguments[1],Nu.equals(t,e,null);else if(3===arguments.length&&(t=arguments[0],e=arguments[1],n=arguments[2],!e.equals(t)))throw new Ru("Expected "+t+" but encountered "+e+(null!==n?": "+n:""))};var Lu=function(){this._result=null,this._inputLines=Array(2).fill().map(function(){return Array(2)}),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new $a,this._intPt[1]=new $a,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0},Mu={DONT_INTERSECT:{configurable:!0},DO_INTERSECT:{configurable:!0},COLLINEAR:{configurable:!0},NO_INTERSECTION:{configurable:!0},POINT_INTERSECTION:{configurable:!0},COLLINEAR_INTERSECTION:{configurable:!0}};Lu.prototype.getIndexAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intLineIndex[t][e]},Lu.prototype.getTopologySummary=function(){var t=new uu;return this.isEndPoint()&&t.append(" endpoint"),this._isProper&&t.append(" proper"),this.isCollinear()&&t.append(" collinear"),t.toString()},Lu.prototype.computeIntersection=function(t,e,n,i){this._inputLines[0][0]=t,this._inputLines[0][1]=e,this._inputLines[1][0]=n,this._inputLines[1][1]=i,this._result=this.computeIntersect(t,e,n,i)},Lu.prototype.getIntersectionNum=function(){return this._result},Lu.prototype.computeIntLineIndex=function(){if(0===arguments.length)null===this._intLineIndex&&(this._intLineIndex=Array(2).fill().map(function(){return Array(2)}),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(1===arguments.length){var t=arguments[0];this.getEdgeDistance(t,0)>this.getEdgeDistance(t,1)?(this._intLineIndex[t][0]=0,this._intLineIndex[t][1]=1):(this._intLineIndex[t][0]=1,this._intLineIndex[t][1]=0)}},Lu.prototype.isProper=function(){return this.hasIntersection()&&this._isProper},Lu.prototype.setPrecisionModel=function(t){this._precisionModel=t},Lu.prototype.isInteriorIntersection=function(){if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1===arguments.length){for(var t=arguments[0],e=0;e<this._result;e++)if(!this._intPt[e].equals2D(this._inputLines[t][0])&&!this._intPt[e].equals2D(this._inputLines[t][1]))return!0;return!1}},Lu.prototype.getIntersection=function(t){return this._intPt[t]},Lu.prototype.isEndPoint=function(){return this.hasIntersection()&&!this._isProper},Lu.prototype.hasIntersection=function(){return this._result!==Lu.NO_INTERSECTION},Lu.prototype.getEdgeDistance=function(t,e){return Lu.computeEdgeDistance(this._intPt[e],this._inputLines[t][0],this._inputLines[t][1])},Lu.prototype.isCollinear=function(){return this._result===Lu.COLLINEAR_INTERSECTION},Lu.prototype.toString=function(){return Su.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+Su.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()},Lu.prototype.getEndpoint=function(t,e){return this._inputLines[t][e]},Lu.prototype.isIntersection=function(t){for(var e=0;e<this._result;e++)if(this._intPt[e].equals2D(t))return!0;return!1},Lu.prototype.getIntersectionAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[t][e]]},Lu.prototype.interfaces_=function(){return[]},Lu.prototype.getClass=function(){return Lu},Lu.computeEdgeDistance=function(t,e,n){var i=Math.abs(n.x-e.x),r=Math.abs(n.y-e.y),o=-1;if(t.equals(e))o=0;else if(t.equals(n))o=i>r?i:r;else{var s=Math.abs(t.x-e.x),a=Math.abs(t.y-e.y);0!==(o=i>r?s:a)||t.equals(e)||(o=Math.max(s,a))}return Nu.isTrue(!(0===o&&!t.equals(e)),"Bad distance calculation"),o},Lu.nonRobustComputeEdgeDistance=function(t,e,n){var i=t.x-e.x,r=t.y-e.y,o=Math.sqrt(i*i+r*r);return Nu.isTrue(!(0===o&&!t.equals(e)),"Invalid distance calculation"),o},Mu.DONT_INTERSECT.get=function(){return 0},Mu.DO_INTERSECT.get=function(){return 1},Mu.COLLINEAR.get=function(){return 2},Mu.NO_INTERSECTION.get=function(){return 0},Mu.POINT_INTERSECTION.get=function(){return 1},Mu.COLLINEAR_INTERSECTION.get=function(){return 2},Object.defineProperties(Lu,Mu);var Pu=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isInSegmentEnvelopes=function(t){var e=new xu(this._inputLines[0][0],this._inputLines[0][1]),n=new xu(this._inputLines[1][0],this._inputLines[1][1]);return e.contains(t)&&n.contains(t)},e.prototype.computeIntersection=function(){if(3!==arguments.length)return t.prototype.computeIntersection.apply(this,arguments);var e=arguments[0],n=arguments[1],i=arguments[2];if(this._isProper=!1,xu.intersects(n,i,e)&&0===Fu.orientationIndex(n,i,e)&&0===Fu.orientationIndex(i,n,e))return this._isProper=!0,(e.equals(n)||e.equals(i))&&(this._isProper=!1),this._result=t.POINT_INTERSECTION,null;this._result=t.NO_INTERSECTION},e.prototype.normalizeToMinimum=function(t,e,n,i,r){r.x=this.smallestInAbsValue(t.x,e.x,n.x,i.x),r.y=this.smallestInAbsValue(t.y,e.y,n.y,i.y),t.x-=r.x,t.y-=r.y,e.x-=r.x,e.y-=r.y,n.x-=r.x,n.y-=r.y,i.x-=r.x,i.y-=r.y},e.prototype.safeHCoordinateIntersection=function(t,n,i,r){var o=null;try{o=Eu.intersection(t,n,i,r)}catch(s){if(!(s instanceof vu))throw s;o=e.nearestEndpoint(t,n,i,r)}return o},e.prototype.intersection=function(t,n,i,r){var o=this.intersectionWithNormalization(t,n,i,r);return this.isInSegmentEnvelopes(o)||(o=new $a(e.nearestEndpoint(t,n,i,r))),null!==this._precisionModel&&this._precisionModel.makePrecise(o),o},e.prototype.smallestInAbsValue=function(t,e,n,i){var r=t,o=Math.abs(r);return Math.abs(e)<o&&(r=e,o=Math.abs(e)),Math.abs(n)<o&&(r=n,o=Math.abs(n)),Math.abs(i)<o&&(r=i),r},e.prototype.checkDD=function(t,e,n,i,r){var o=fu.intersection(t,e,n,i),s=this.isInSegmentEnvelopes(o);mu.out.println("DD in env = "+s+"  --------------------- "+o),r.distance(o)>1e-4&&mu.out.println("Distance = "+r.distance(o))},e.prototype.intersectionWithNormalization=function(t,e,n,i){var r=new $a(t),o=new $a(e),s=new $a(n),a=new $a(i),u=new $a;this.normalizeToEnvCentre(r,o,s,a,u);var h=this.safeHCoordinateIntersection(r,o,s,a);return h.x+=u.x,h.y+=u.y,h},e.prototype.computeCollinearIntersection=function(e,n,i,r){var o=xu.intersects(e,n,i),s=xu.intersects(e,n,r),a=xu.intersects(i,r,e),u=xu.intersects(i,r,n);return o&&s?(this._intPt[0]=i,this._intPt[1]=r,t.COLLINEAR_INTERSECTION):a&&u?(this._intPt[0]=e,this._intPt[1]=n,t.COLLINEAR_INTERSECTION):o&&a?(this._intPt[0]=i,this._intPt[1]=e,!i.equals(e)||s||u?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):o&&u?(this._intPt[0]=i,this._intPt[1]=n,!i.equals(n)||s||a?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):s&&a?(this._intPt[0]=r,this._intPt[1]=e,!r.equals(e)||o||u?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):s&&u?(this._intPt[0]=r,this._intPt[1]=n,!r.equals(n)||o||a?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):t.NO_INTERSECTION},e.prototype.normalizeToEnvCentre=function(t,e,n,i,r){var o=t.x<e.x?t.x:e.x,s=t.y<e.y?t.y:e.y,a=t.x>e.x?t.x:e.x,u=t.y>e.y?t.y:e.y,h=n.x<i.x?n.x:i.x,c=n.y<i.y?n.y:i.y,l=n.x>i.x?n.x:i.x,p=n.y>i.y?n.y:i.y,f=((o>h?o:h)+(a<l?a:l))/2,d=((s>c?s:c)+(u<p?u:p))/2;r.x=f,r.y=d,t.x-=r.x,t.y-=r.y,e.x-=r.x,e.y-=r.y,n.x-=r.x,n.y-=r.y,i.x-=r.x,i.y-=r.y},e.prototype.computeIntersect=function(e,n,i,r){if(this._isProper=!1,!xu.intersects(e,n,i,r))return t.NO_INTERSECTION;var o=Fu.orientationIndex(e,n,i),s=Fu.orientationIndex(e,n,r);if(o>0&&s>0||o<0&&s<0)return t.NO_INTERSECTION;var a=Fu.orientationIndex(i,r,e),u=Fu.orientationIndex(i,r,n);return a>0&&u>0||a<0&&u<0?t.NO_INTERSECTION:0===o&&0===s&&0===a&&0===u?this.computeCollinearIntersection(e,n,i,r):(0===o||0===s||0===a||0===u?(this._isProper=!1,e.equals2D(i)||e.equals2D(r)?this._intPt[0]=e:n.equals2D(i)||n.equals2D(r)?this._intPt[0]=n:0===o?this._intPt[0]=new $a(i):0===s?this._intPt[0]=new $a(r):0===a?this._intPt[0]=new $a(e):0===u&&(this._intPt[0]=new $a(n))):(this._isProper=!0,this._intPt[0]=this.intersection(e,n,i,r)),t.POINT_INTERSECTION)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.nearestEndpoint=function(t,e,n,i){var r=t,o=Fu.distancePointLine(t,n,i),s=Fu.distancePointLine(e,n,i);return s<o&&(o=s,r=e),(s=Fu.distancePointLine(n,t,e))<o&&(o=s,r=n),(s=Fu.distancePointLine(i,t,e))<o&&(o=s,r=i),r},e}(Lu),Au=function(){};Au.prototype.interfaces_=function(){return[]},Au.prototype.getClass=function(){return Au},Au.orientationIndex=function(t,e,n){var i=e.x-t.x,r=e.y-t.y,o=n.x-e.x,s=n.y-e.y;return Au.signOfDet2x2(i,r,o,s)},Au.signOfDet2x2=function(t,e,n,i){var r=null,o=null,s=null;if(r=1,0===t||0===i)return 0===e||0===n?0:e>0?n>0?-r:r:n>0?r:-r;if(0===e||0===n)return i>0?t>0?r:-r:t>0?-r:r;if(e>0?i>0?e<=i||(r=-r,o=t,t=n,n=o,o=e,e=i,i=o):e<=-i?(r=-r,n=-n,i=-i):(o=t,t=-n,n=o,o=e,e=-i,i=o):i>0?-e<=i?(r=-r,t=-t,e=-e):(o=-t,t=n,n=o,o=-e,e=i,i=o):e>=i?(t=-t,e=-e,n=-n,i=-i):(r=-r,o=-t,t=-n,n=o,o=-e,e=-i,i=o),t>0){if(!(n>0))return r;if(!(t<=n))return r}else{if(n>0)return-r;if(!(t>=n))return-r;r=-r,t=-t,n=-n}for(;;){if(s=Math.floor(n/t),n-=s*t,(i-=s*e)<0)return-r;if(i>e)return r;if(t>n+n){if(e<i+i)return r}else{if(e>i+i)return-r;n=t-n,i=e-i,r=-r}if(0===i)return 0===n?0:-r;if(0===n)return r;if(s=Math.floor(t/n),t-=s*n,(e-=s*i)<0)return r;if(e>i)return-r;if(n>t+t){if(i<e+e)return-r}else{if(i>e+e)return r;t=n-t,e=i-e,r=-r}if(0===e)return 0===t?0:r;if(0===t)return-r}};var Du=function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var t=arguments[0];this._p=t};Du.prototype.countSegment=function(t,e){if(t.x<this._p.x&&e.x<this._p.x)return null;if(this._p.x===e.x&&this._p.y===e.y)return this._isPointOnSegment=!0,null;if(t.y===this._p.y&&e.y===this._p.y){var n=t.x,i=e.x;return n>i&&(n=e.x,i=t.x),this._p.x>=n&&this._p.x<=i&&(this._isPointOnSegment=!0),null}if(t.y>this._p.y&&e.y<=this._p.y||e.y>this._p.y&&t.y<=this._p.y){var r=t.x-this._p.x,o=t.y-this._p.y,s=e.x-this._p.x,a=e.y-this._p.y,u=Au.signOfDet2x2(r,o,s,a);if(0===u)return this._isPointOnSegment=!0,null;a<o&&(u=-u),u>0&&this._crossingCount++}},Du.prototype.isPointInPolygon=function(){return this.getLocation()!==iu.EXTERIOR},Du.prototype.getLocation=function(){return this._isPointOnSegment?iu.BOUNDARY:this._crossingCount%2==1?iu.INTERIOR:iu.EXTERIOR},Du.prototype.isOnSegment=function(){return this._isPointOnSegment},Du.prototype.interfaces_=function(){return[]},Du.prototype.getClass=function(){return Du},Du.locatePointInRing=function(){if(arguments[0]instanceof $a&&ou(arguments[1],gu)){for(var t=arguments[0],e=arguments[1],n=new Du(t),i=new $a,r=new $a,o=1;o<e.size();o++)if(e.getCoordinate(o,i),e.getCoordinate(o-1,r),n.countSegment(i,r),n.isOnSegment())return n.getLocation();return n.getLocation()}if(arguments[0]instanceof $a&&arguments[1]instanceof Array){for(var s=arguments[0],a=arguments[1],u=new Du(s),h=1;h<a.length;h++){var c=a[h],l=a[h-1];if(u.countSegment(c,l),u.isOnSegment())return u.getLocation()}return u.getLocation()}};var Fu=function(){},ju={CLOCKWISE:{configurable:!0},RIGHT:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},LEFT:{configurable:!0},COLLINEAR:{configurable:!0},STRAIGHT:{configurable:!0}};Fu.prototype.interfaces_=function(){return[]},Fu.prototype.getClass=function(){return Fu},Fu.orientationIndex=function(t,e,n){return fu.orientationIndex(t,e,n)},Fu.signedArea=function(){if(arguments[0]instanceof Array){var t=arguments[0];if(t.length<3)return 0;for(var e=0,n=t[0].x,i=1;i<t.length-1;i++){var r=t[i].x-n,o=t[i+1].y;e+=r*(t[i-1].y-o)}return e/2}if(ou(arguments[0],gu)){var s=arguments[0],a=s.size();if(a<3)return 0;var u=new $a,h=new $a,c=new $a;s.getCoordinate(0,h),s.getCoordinate(1,c);var l=h.x;c.x-=l;for(var p=0,f=1;f<a-1;f++)u.y=h.y,h.x=c.x,h.y=c.y,s.getCoordinate(f+1,c),c.x-=l,p+=h.x*(u.y-c.y);return p/2}},Fu.distanceLineLine=function(t,e,n,i){if(t.equals(e))return Fu.distancePointLine(t,n,i);if(n.equals(i))return Fu.distancePointLine(i,t,e);var r=!1;if(xu.intersects(t,e,n,i)){var o=(e.x-t.x)*(i.y-n.y)-(e.y-t.y)*(i.x-n.x);if(0===o)r=!0;else{var s=(t.y-n.y)*(i.x-n.x)-(t.x-n.x)*(i.y-n.y),a=((t.y-n.y)*(e.x-t.x)-(t.x-n.x)*(e.y-t.y))/o,u=s/o;(u<0||u>1||a<0||a>1)&&(r=!0)}}else r=!0;return r?su.min(Fu.distancePointLine(t,n,i),Fu.distancePointLine(e,n,i),Fu.distancePointLine(n,t,e),Fu.distancePointLine(i,t,e)):0},Fu.isPointInRing=function(t,e){return Fu.locatePointInRing(t,e)!==iu.EXTERIOR},Fu.computeLength=function(t){var e=t.size();if(e<=1)return 0;var n=0,i=new $a;t.getCoordinate(0,i);for(var r=i.x,o=i.y,s=1;s<e;s++){t.getCoordinate(s,i);var a=i.x,u=i.y,h=a-r,c=u-o;n+=Math.sqrt(h*h+c*c),r=a,o=u}return n},Fu.isCCW=function(t){var e=t.length-1;if(e<3)throw new Wa("Ring has fewer than 4 points, so orientation cannot be determined");for(var n=t[0],i=0,r=1;r<=e;r++){var o=t[r];o.y>n.y&&(n=o,i=r)}var s=i;do{(s-=1)<0&&(s=e)}while(t[s].equals2D(n)&&s!==i);var a=i;do{a=(a+1)%e}while(t[a].equals2D(n)&&a!==i);var u=t[s],h=t[a];if(u.equals2D(n)||h.equals2D(n)||u.equals2D(h))return!1;var c=Fu.computeOrientation(u,n,h);return 0===c?u.x>h.x:c>0},Fu.locatePointInRing=function(t,e){return Du.locatePointInRing(t,e)},Fu.distancePointLinePerpendicular=function(t,e,n){var i=(n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y),r=((e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y))/i;return Math.abs(r)*Math.sqrt(i)},Fu.computeOrientation=function(t,e,n){return Fu.orientationIndex(t,e,n)},Fu.distancePointLine=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(0===e.length)throw new Wa("Line array must contain at least one vertex");for(var n=t.distance(e[0]),i=0;i<e.length-1;i++){var r=Fu.distancePointLine(t,e[i],e[i+1]);r<n&&(n=r)}return n}if(3===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2];if(s.x===a.x&&s.y===a.y)return o.distance(s);var u=(a.x-s.x)*(a.x-s.x)+(a.y-s.y)*(a.y-s.y),h=((o.x-s.x)*(a.x-s.x)+(o.y-s.y)*(a.y-s.y))/u;if(h<=0)return o.distance(s);if(h>=1)return o.distance(a);var c=((s.y-o.y)*(a.x-s.x)-(s.x-o.x)*(a.y-s.y))/u;return Math.abs(c)*Math.sqrt(u)}},Fu.isOnLine=function(t,e){for(var n=new Pu,i=1;i<e.length;i++){var r=e[i-1],o=e[i];if(n.computeIntersection(t,r,o),n.hasIntersection())return!0}return!1},ju.CLOCKWISE.get=function(){return-1},ju.RIGHT.get=function(){return Fu.CLOCKWISE},ju.COUNTERCLOCKWISE.get=function(){return 1},ju.LEFT.get=function(){return Fu.COUNTERCLOCKWISE},ju.COLLINEAR.get=function(){return 0},ju.STRAIGHT.get=function(){return Fu.COLLINEAR},Object.defineProperties(Fu,ju);var Gu=function(){};Gu.prototype.filter=function(t){},Gu.prototype.interfaces_=function(){return[]},Gu.prototype.getClass=function(){return Gu};var ku=function(){var t=arguments[0];this._envelope=null,this._factory=null,this._SRID=null,this._userData=null,this._factory=t,this._SRID=t.getSRID()},Bu={serialVersionUID:{configurable:!0},SORTINDEX_POINT:{configurable:!0},SORTINDEX_MULTIPOINT:{configurable:!0},SORTINDEX_LINESTRING:{configurable:!0},SORTINDEX_LINEARRING:{configurable:!0},SORTINDEX_MULTILINESTRING:{configurable:!0},SORTINDEX_POLYGON:{configurable:!0},SORTINDEX_MULTIPOLYGON:{configurable:!0},SORTINDEX_GEOMETRYCOLLECTION:{configurable:!0},geometryChangedFilter:{configurable:!0}};ku.prototype.isGeometryCollection=function(){return this.getSortIndex()===ku.SORTINDEX_GEOMETRYCOLLECTION},ku.prototype.getFactory=function(){return this._factory},ku.prototype.getGeometryN=function(t){return this},ku.prototype.getArea=function(){return 0},ku.prototype.isRectangle=function(){return!1},ku.prototype.equals=function(){if(arguments[0]instanceof ku){var t=arguments[0];return null!==t&&this.equalsTopo(t)}if(arguments[0]instanceof Object){var e=arguments[0];if(!(e instanceof ku))return!1;var n=e;return this.equalsExact(n)}},ku.prototype.equalsExact=function(t){return this===t||this.equalsExact(t,0)},ku.prototype.geometryChanged=function(){this.apply(ku.geometryChangedFilter)},ku.prototype.geometryChangedAction=function(){this._envelope=null},ku.prototype.equalsNorm=function(t){return null!==t&&this.norm().equalsExact(t.norm())},ku.prototype.getLength=function(){return 0},ku.prototype.getNumGeometries=function(){return 1},ku.prototype.compareTo=function(){if(1===arguments.length){var t=arguments[0],e=t;return this.getSortIndex()!==e.getSortIndex()?this.getSortIndex()-e.getSortIndex():this.isEmpty()&&e.isEmpty()?0:this.isEmpty()?-1:e.isEmpty()?1:this.compareToSameClass(t)}if(2===arguments.length){var n=arguments[0],i=arguments[1];return this.getSortIndex()!==n.getSortIndex()?this.getSortIndex()-n.getSortIndex():this.isEmpty()&&n.isEmpty()?0:this.isEmpty()?-1:n.isEmpty()?1:this.compareToSameClass(n,i)}},ku.prototype.getUserData=function(){return this._userData},ku.prototype.getSRID=function(){return this._SRID},ku.prototype.getEnvelope=function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())},ku.prototype.checkNotGeometryCollection=function(t){if(t.getSortIndex()===ku.SORTINDEX_GEOMETRYCOLLECTION)throw new Wa("This method does not support GeometryCollection arguments")},ku.prototype.equal=function(t,e,n){return 0===n?t.equals(e):t.distance(e)<=n},ku.prototype.norm=function(){var t=this.copy();return t.normalize(),t},ku.prototype.getPrecisionModel=function(){return this._factory.getPrecisionModel()},ku.prototype.getEnvelopeInternal=function(){return null===this._envelope&&(this._envelope=this.computeEnvelopeInternal()),new xu(this._envelope)},ku.prototype.setSRID=function(t){this._SRID=t},ku.prototype.setUserData=function(t){this._userData=t},ku.prototype.compare=function(t,e){for(var n=t.iterator(),i=e.iterator();n.hasNext()&&i.hasNext();){var r=n.next(),o=i.next(),s=r.compareTo(o);if(0!==s)return s}return n.hasNext()?1:i.hasNext()?-1:0},ku.prototype.hashCode=function(){return this.getEnvelopeInternal().hashCode()},ku.prototype.isGeometryCollectionOrDerived=function(){return this.getSortIndex()===ku.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===ku.SORTINDEX_MULTIPOINT||this.getSortIndex()===ku.SORTINDEX_MULTILINESTRING||this.getSortIndex()===ku.SORTINDEX_MULTIPOLYGON},ku.prototype.interfaces_=function(){return[Ja,Za,yr]},ku.prototype.getClass=function(){return ku},ku.hasNonEmptyElements=function(t){for(var e=0;e<t.length;e++)if(!t[e].isEmpty())return!0;return!1},ku.hasNullElements=function(t){for(var e=0;e<t.length;e++)if(null===t[e])return!0;return!1},Bu.serialVersionUID.get=function(){return 0x799ea46522854c00},Bu.SORTINDEX_POINT.get=function(){return 0},Bu.SORTINDEX_MULTIPOINT.get=function(){return 1},Bu.SORTINDEX_LINESTRING.get=function(){return 2},Bu.SORTINDEX_LINEARRING.get=function(){return 3},Bu.SORTINDEX_MULTILINESTRING.get=function(){return 4},Bu.SORTINDEX_POLYGON.get=function(){return 5},Bu.SORTINDEX_MULTIPOLYGON.get=function(){return 6},Bu.SORTINDEX_GEOMETRYCOLLECTION.get=function(){return 7},Bu.geometryChangedFilter.get=function(){return Yu},Object.defineProperties(ku,Bu);var Yu=function(){};Yu.interfaces_=function(){return[Gu]},Yu.filter=function(t){t.geometryChangedAction()};var Xu=function(){};Xu.prototype.filter=function(t){},Xu.prototype.interfaces_=function(){return[]},Xu.prototype.getClass=function(){return Xu};var qu=function(){},Uu={Mod2BoundaryNodeRule:{configurable:!0},EndPointBoundaryNodeRule:{configurable:!0},MultiValentEndPointBoundaryNodeRule:{configurable:!0},MonoValentEndPointBoundaryNodeRule:{configurable:!0},MOD2_BOUNDARY_RULE:{configurable:!0},ENDPOINT_BOUNDARY_RULE:{configurable:!0},MULTIVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},MONOVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},OGC_SFS_BOUNDARY_RULE:{configurable:!0}};qu.prototype.isInBoundary=function(t){},qu.prototype.interfaces_=function(){return[]},qu.prototype.getClass=function(){return qu},Uu.Mod2BoundaryNodeRule.get=function(){return zu},Uu.EndPointBoundaryNodeRule.get=function(){return Vu},Uu.MultiValentEndPointBoundaryNodeRule.get=function(){return Wu},Uu.MonoValentEndPointBoundaryNodeRule.get=function(){return Ku},Uu.MOD2_BOUNDARY_RULE.get=function(){return new zu},Uu.ENDPOINT_BOUNDARY_RULE.get=function(){return new Vu},Uu.MULTIVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new Wu},Uu.MONOVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new Ku},Uu.OGC_SFS_BOUNDARY_RULE.get=function(){return qu.MOD2_BOUNDARY_RULE},Object.defineProperties(qu,Uu);var zu=function(){};zu.prototype.isInBoundary=function(t){return t%2==1},zu.prototype.interfaces_=function(){return[qu]},zu.prototype.getClass=function(){return zu};var Vu=function(){};Vu.prototype.isInBoundary=function(t){return t>0},Vu.prototype.interfaces_=function(){return[qu]},Vu.prototype.getClass=function(){return Vu};var Wu=function(){};Wu.prototype.isInBoundary=function(t){return t>1},Wu.prototype.interfaces_=function(){return[qu]},Wu.prototype.getClass=function(){return Wu};var Ku=function(){};Ku.prototype.isInBoundary=function(t){return 1===t},Ku.prototype.interfaces_=function(){return[qu]},Ku.prototype.getClass=function(){return Ku};var Hu=function(){};Hu.prototype.add=function(){},Hu.prototype.addAll=function(){},Hu.prototype.isEmpty=function(){},Hu.prototype.iterator=function(){},Hu.prototype.size=function(){},Hu.prototype.toArray=function(){},Hu.prototype.remove=function(){};var Zu=function(t){function e(e){t.call(this),this.message=e||""}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={name:{configurable:!0}};return n.name.get=function(){return"IndexOutOfBoundsException"},Object.defineProperties(e,n),e}(Error),Ju=function(){};Ju.prototype.hasNext=function(){},Ju.prototype.next=function(){},Ju.prototype.remove=function(){};var Qu=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(){},e.prototype.set=function(){},e.prototype.isEmpty=function(){},e}(Hu);(_r.prototype=new Error).name="NoSuchElementException";var $u=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof Hu&&this.addAll(arguments[0])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.ensureCapacity=function(){},e.prototype.interfaces_=function(){return[t,Hu]},e.prototype.add=function(t){return 1===arguments.length?this.array_.push(t):this.array_.splice(arguments[0],arguments[1]),!0},e.prototype.clear=function(){this.array_=[]},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.set=function(t,e){var n=this.array_[t];return this.array_[t]=e,n},e.prototype.iterator=function(){return new th(this)},e.prototype.get=function(t){if(t<0||t>=this.size())throw new Zu;return this.array_[t]},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.size=function(){return this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},e.prototype.remove=function(t){for(var e=!1,n=0,i=this.array_.length;n<i;n++)if(this.array_[n]===t){this.array_.splice(n,1),e=!0;break}return e},e}(Qu),th=function(t){function e(e){t.call(this),this.arrayList_=e,this.position_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new _r;return this.arrayList_.get(this.position_++)},e.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},e.prototype.set=function(t){return this.arrayList_.set(this.position_-1,t)},e.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))},e}(Ju),eh=function(t){function e(){if(t.call(this),0===arguments.length);else if(1===arguments.length){var e=arguments[0];this.ensureCapacity(e.length),this.add(e,!0)}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.ensureCapacity(n.length),this.add(n,i)}}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={coordArrayType:{configurable:!0}};return n.coordArrayType.get=function(){return new Array(0).fill(null)},e.prototype.getCoordinate=function(t){return this.get(t)},e.prototype.addAll=function(){if(2===arguments.length){for(var e=arguments[0],n=arguments[1],i=!1,r=e.iterator();r.hasNext();)this.add(r.next(),n),i=!0;return i}return t.prototype.addAll.apply(this,arguments)},e.prototype.clone=function(){for(var e=t.prototype.clone.call(this),n=0;n<this.size();n++)e.add(n,this.get(n).copy());return e},e.prototype.toCoordinateArray=function(){return this.toArray(e.coordArrayType)},e.prototype.add=function(){if(1===arguments.length){var e=arguments[0];t.prototype.add.call(this,e)}else if(2===arguments.length){if(arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var n=arguments[0],i=arguments[1];return this.add(n,i,!0),!0}if(arguments[0]instanceof $a&&"boolean"==typeof arguments[1]){var r=arguments[0];if(!arguments[1]&&this.size()>=1&&this.get(this.size()-1).equals2D(r))return null;t.prototype.add.call(this,r)}else if(arguments[0]instanceof Object&&"boolean"==typeof arguments[1]){var o=arguments[0],s=arguments[1];return this.add(o,s),!0}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var a=arguments[0],u=arguments[1];if(arguments[2])for(var h=0;h<a.length;h++)this.add(a[h],u);else for(var c=a.length-1;c>=0;c--)this.add(a[c],u);return!0}if("boolean"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof $a){var l=arguments[0],p=arguments[1];if(!arguments[2]){var f=this.size();if(f>0){if(l>0&&this.get(l-1).equals2D(p))return null;if(l<f&&this.get(l).equals2D(p))return null}}t.prototype.add.call(this,l,p)}}else if(4===arguments.length){var d=arguments[0],g=arguments[1],y=arguments[2],_=arguments[3],v=1;y>_&&(v=-1);for(var m=y;m!==_;m+=v)this.add(d[m],g);return!0}},e.prototype.closeRing=function(){this.size()>0&&this.add(new $a(this.get(0)),!1)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},Object.defineProperties(e,n),e}($u),nh=function(){},ih={ForwardComparator:{configurable:!0},BidirectionalComparator:{configurable:!0},coordArrayType:{configurable:!0}};ih.ForwardComparator.get=function(){return rh},ih.BidirectionalComparator.get=function(){return oh},ih.coordArrayType.get=function(){return new Array(0).fill(null)},nh.prototype.interfaces_=function(){return[]},nh.prototype.getClass=function(){return nh},nh.isRing=function(t){return!(t.length<4||!t[0].equals2D(t[t.length-1]))},nh.ptNotInList=function(t,e){for(var n=0;n<t.length;n++){var i=t[n];if(nh.indexOf(i,e)<0)return i}return null},nh.scroll=function(t,e){var n=nh.indexOf(e,t);if(n<0)return null;var i=new Array(t.length).fill(null);mu.arraycopy(t,n,i,0,t.length-n),mu.arraycopy(t,0,i,t.length-n,n),mu.arraycopy(i,0,t,0,t.length)},nh.equals=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(t===e)return!0;if(null===t||null===e)return!1;if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].equals(e[n]))return!1;return!0}if(3===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2];if(i===r)return!0;if(null===i||null===r)return!1;if(i.length!==r.length)return!1;for(var s=0;s<i.length;s++)if(0!==o.compare(i[s],r[s]))return!1;return!0}},nh.intersection=function(t,e){for(var n=new eh,i=0;i<t.length;i++)e.intersects(t[i])&&n.add(t[i],!0);return n.toCoordinateArray()},nh.hasRepeatedPoints=function(t){for(var e=1;e<t.length;e++)if(t[e-1].equals(t[e]))return!0;return!1},nh.removeRepeatedPoints=function(t){return nh.hasRepeatedPoints(t)?new eh(t,!1).toCoordinateArray():t},nh.reverse=function(t){for(var e=t.length-1,n=Math.trunc(e/2),i=0;i<=n;i++){var r=t[i];t[i]=t[e-i],t[e-i]=r}},nh.removeNull=function(t){for(var e=0,n=0;n<t.length;n++)null!==t[n]&&e++;var i=new Array(e).fill(null);if(0===e)return i;for(var r=0,o=0;o<t.length;o++)null!==t[o]&&(i[r++]=t[o]);return i},nh.copyDeep=function(){if(1===arguments.length){for(var t=arguments[0],e=new Array(t.length).fill(null),n=0;n<t.length;n++)e[n]=new $a(t[n]);return e}if(5===arguments.length)for(var i=arguments[0],r=arguments[1],o=arguments[2],s=arguments[3],a=arguments[4],u=0;u<a;u++)o[s+u]=new $a(i[r+u])},nh.isEqualReversed=function(t,e){for(var n=0;n<t.length;n++){var i=t[n],r=e[t.length-n-1];if(0!==i.compareTo(r))return!1}return!0},nh.envelope=function(t){for(var e=new xu,n=0;n<t.length;n++)e.expandToInclude(t[n]);return e},nh.toCoordinateArray=function(t){return t.toArray(nh.coordArrayType)},nh.atLeastNCoordinatesOrNothing=function(t,e){return e.length>=t?e:[]},nh.indexOf=function(t,e){for(var n=0;n<e.length;n++)if(t.equals(e[n]))return n;return-1},nh.increasingDirection=function(t){for(var e=0;e<Math.trunc(t.length/2);e++){var n=t.length-1-e,i=t[e].compareTo(t[n]);if(0!==i)return i}return 1},nh.compare=function(t,e){for(var n=0;n<t.length&&n<e.length;){var i=t[n].compareTo(e[n]);if(0!==i)return i;n++}return n<e.length?-1:n<t.length?1:0},nh.minCoordinate=function(t){for(var e=null,n=0;n<t.length;n++)(null===e||e.compareTo(t[n])>0)&&(e=t[n]);return e},nh.extract=function(t,e,n){e=su.clamp(e,0,t.length);var i=(n=su.clamp(n,-1,t.length))-e+1;n<0&&(i=0),e>=t.length&&(i=0),n<e&&(i=0);var r=new Array(i).fill(null);if(0===i)return r;for(var o=0,s=e;s<=n;s++)r[o++]=t[s];return r},Object.defineProperties(nh,ih);var rh=function(){};rh.prototype.compare=function(t,e){return nh.compare(t,e)},rh.prototype.interfaces_=function(){return[Qa]},rh.prototype.getClass=function(){return rh};var oh=function(){};oh.prototype.compare=function(t,e){var n=t,i=e;if(n.length<i.length)return-1;if(n.length>i.length)return 1;if(0===n.length)return 0;var r=nh.compare(n,i);return nh.isEqualReversed(n,i)?0:r},oh.prototype.OLDcompare=function(t,e){var n=t,i=e;if(n.length<i.length)return-1;if(n.length>i.length)return 1;if(0===n.length)return 0;for(var r=nh.increasingDirection(n),o=nh.increasingDirection(i),s=r>0?0:n.length-1,a=o>0?0:n.length-1,u=0;u<n.length;u++){var h=n[s].compareTo(i[a]);if(0!==h)return h;s+=r,a+=o}return 0},oh.prototype.interfaces_=function(){return[Qa]},oh.prototype.getClass=function(){return oh};var sh=function(){};sh.prototype.get=function(){},sh.prototype.put=function(){},sh.prototype.size=function(){},sh.prototype.values=function(){},sh.prototype.entrySet=function(){};var ah=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(sh);(vr.prototype=new Error).name="OperationNotSupported",(mr.prototype=new Hu).contains=function(){};var uh=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof Hu&&this.addAll(arguments[0])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.contains=function(t){for(var e=0,n=this.array_.length;e<n;e++)if(this.array_[e]===t)return!0;return!1},e.prototype.add=function(t){return!this.contains(t)&&(this.array_.push(t),!0)},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.remove=function(t){throw new Error},e.prototype.size=function(){return this.array_.length},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},e.prototype.iterator=function(){return new hh(this)},e}(mr),hh=function(t){function e(e){t.call(this),this.hashSet_=e,this.position_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new _r;return this.hashSet_.array_[this.position_++]},e.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},e.prototype.remove=function(){throw new vr},e}(Ju),ch=0;(Or.prototype=new ah).get=function(t){for(var e=this.root_;null!==e;){var n=t.compareTo(e.key);if(n<0)e=e.left;else{if(!(n>0))return e.value;e=e.right}}return null},Or.prototype.put=function(t,e){if(null===this.root_)return this.root_={key:t,value:e,left:null,right:null,parent:null,color:ch,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var n,i,r=this.root_;do{if(n=r,(i=t.compareTo(r.key))<0)r=r.left;else{if(!(i>0)){var o=r.value;return r.value=e,o}r=r.right}}while(null!==r);var s={key:t,left:null,right:null,value:e,parent:n,color:ch,getValue:function(){return this.value},getKey:function(){return this.key}};return i<0?n.left=s:n.right=s,this.fixAfterInsertion(s),this.size_++,null},Or.prototype.fixAfterInsertion=function(t){for(t.color=1;null!=t&&t!==this.root_&&1===t.parent.color;)if(xr(t)===wr(xr(xr(t)))){var e=Cr(xr(xr(t)));1===Er(e)?(br(xr(t),ch),br(e,ch),br(xr(xr(t)),1),t=xr(xr(t))):(t===Cr(xr(t))&&(t=xr(t),this.rotateLeft(t)),br(xr(t),ch),br(xr(xr(t)),1),this.rotateRight(xr(xr(t))))}else{var n=wr(xr(xr(t)));1===Er(n)?(br(xr(t),ch),br(n,ch),br(xr(xr(t)),1),t=xr(xr(t))):(t===wr(xr(t))&&(t=xr(t),this.rotateRight(t)),br(xr(t),ch),br(xr(xr(t)),1),this.rotateLeft(xr(xr(t))))}this.root_.color=ch},Or.prototype.values=function(){var t=new $u,e=this.getFirstEntry();if(null!==e)for(t.add(e.value);null!==(e=Or.successor(e));)t.add(e.value);return t},Or.prototype.entrySet=function(){var t=new uh,e=this.getFirstEntry();if(null!==e)for(t.add(e);null!==(e=Or.successor(e));)t.add(e);return t},Or.prototype.rotateLeft=function(t){if(null!=t){var e=t.right;t.right=e.left,null!=e.left&&(e.left.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.left===t?t.parent.left=e:t.parent.right=e,e.left=t,t.parent=e}},Or.prototype.rotateRight=function(t){if(null!=t){var e=t.left;t.left=e.right,null!=e.right&&(e.right.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.right===t?t.parent.right=e:t.parent.left=e,e.right=t,t.parent=e}},Or.prototype.getFirstEntry=function(){var t=this.root_;if(null!=t)for(;null!=t.left;)t=t.left;return t},Or.successor=function(t){if(null===t)return null;if(null!==t.right){for(var e=t.right;null!==e.left;)e=e.left;return e}for(var n=t.parent,i=t;null!==n&&i===n.right;)i=n,n=n.parent;return n},Or.prototype.size=function(){return this.size_};var lh=function(){};lh.prototype.interfaces_=function(){return[]},lh.prototype.getClass=function(){return lh},Ir.prototype=new mr,(Sr.prototype=new Ir).contains=function(t){for(var e=0,n=this.array_.length;e<n;e++)if(0===this.array_[e].compareTo(t))return!0;return!1},Sr.prototype.add=function(t){if(this.contains(t))return!1;for(var e=0,n=this.array_.length;e<n;e++)if(1===this.array_[e].compareTo(t))return this.array_.splice(e,0,t),!0;return this.array_.push(t),!0},Sr.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},Sr.prototype.remove=function(t){throw new vr},Sr.prototype.size=function(){return this.array_.length},Sr.prototype.isEmpty=function(){return 0===this.array_.length},Sr.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},Sr.prototype.iterator=function(){return new ph(this)};var ph=function(t){this.treeSet_=t,this.position_=0};ph.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new _r;return this.treeSet_.array_[this.position_++]},ph.prototype.hasNext=function(){return this.position_<this.treeSet_.size()},ph.prototype.remove=function(){throw new vr};var fh=function(){};fh.sort=function(){var t,e,n,i,r=arguments[0];if(1===arguments.length)i=function(t,e){return t.compareTo(e)},r.sort(i);else if(2===arguments.length)n=arguments[1],i=function(t,e){return n.compare(t,e)},r.sort(i);else if(3===arguments.length){(e=r.slice(arguments[1],arguments[2])).sort();var o=r.slice(0,arguments[1]).concat(e,r.slice(arguments[2],r.length));for(r.splice(0,r.length),t=0;t<o.length;t++)r.push(o[t])}else if(4===arguments.length)for(e=r.slice(arguments[1],arguments[2]),n=arguments[3],i=function(t,e){return n.compare(t,e)},e.sort(i),o=r.slice(0,arguments[1]).concat(e,r.slice(arguments[2],r.length)),r.splice(0,r.length),t=0;t<o.length;t++)r.push(o[t])},fh.asList=function(t){for(var e=new $u,n=0,i=t.length;n<i;n++)e.add(t[n]);return e};var dh=function(){},gh={P:{configurable:!0},L:{configurable:!0},A:{configurable:!0},FALSE:{configurable:!0},TRUE:{configurable:!0},DONTCARE:{configurable:!0},SYM_FALSE:{configurable:!0},SYM_TRUE:{configurable:!0},SYM_DONTCARE:{configurable:!0},SYM_P:{configurable:!0},SYM_L:{configurable:!0},SYM_A:{configurable:!0}};gh.P.get=function(){return 0},gh.L.get=function(){return 1},gh.A.get=function(){return 2},gh.FALSE.get=function(){return-1},gh.TRUE.get=function(){return-2},gh.DONTCARE.get=function(){return-3},gh.SYM_FALSE.get=function(){return"F"},gh.SYM_TRUE.get=function(){return"T"},gh.SYM_DONTCARE.get=function(){return"*"},gh.SYM_P.get=function(){return"0"},gh.SYM_L.get=function(){return"1"},gh.SYM_A.get=function(){return"2"},dh.prototype.interfaces_=function(){return[]},dh.prototype.getClass=function(){return dh},dh.toDimensionSymbol=function(t){switch(t){case dh.FALSE:return dh.SYM_FALSE;case dh.TRUE:return dh.SYM_TRUE;case dh.DONTCARE:return dh.SYM_DONTCARE;case dh.P:return dh.SYM_P;case dh.L:return dh.SYM_L;case dh.A:return dh.SYM_A}throw new Wa("Unknown dimension value: "+t)},dh.toDimensionValue=function(t){switch(cu.toUpperCase(t)){case dh.SYM_FALSE:return dh.FALSE;case dh.SYM_TRUE:return dh.TRUE;case dh.SYM_DONTCARE:return dh.DONTCARE;case dh.SYM_P:return dh.P;case dh.SYM_L:return dh.L;case dh.SYM_A:return dh.A}throw new Wa("Unknown dimension symbol: "+t)},Object.defineProperties(dh,gh);var yh=function(){};yh.prototype.filter=function(t){},yh.prototype.interfaces_=function(){return[]},yh.prototype.getClass=function(){return yh};var _h=function(){};_h.prototype.filter=function(t,e){},_h.prototype.isDone=function(){},_h.prototype.isGeometryChanged=function(){},_h.prototype.interfaces_=function(){return[]},_h.prototype.getClass=function(){return _h};var vh=function(t){function e(e,n){if(t.call(this,n),this._geometries=e||[],t.hasNullElements(this._geometries))throw new Wa("geometries must not contain null elements")}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){for(var t=new xu,e=0;e<this._geometries.length;e++)t.expandToInclude(this._geometries[e].getEnvelopeInternal());return t},e.prototype.getGeometryN=function(t){return this._geometries[t]},e.prototype.getSortIndex=function(){return t.SORTINDEX_GEOMETRYCOLLECTION},e.prototype.getCoordinates=function(){for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=0;n<this._geometries.length;n++)for(var i=this._geometries[n].getCoordinates(),r=0;r<i.length;r++)t[++e]=i[r];return t},e.prototype.getArea=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getArea();return t},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var i=e;if(this._geometries.length!==i._geometries.length)return!1;for(var r=0;r<this._geometries.length;r++)if(!this._geometries[r].equalsExact(i._geometries[r],n))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=0;t<this._geometries.length;t++)this._geometries[t].normalize();fh.sort(this._geometries)},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()},e.prototype.getBoundaryDimension=function(){for(var t=dh.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getBoundaryDimension());return t},e.prototype.getDimension=function(){for(var t=dh.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getDimension());return t},e.prototype.getLength=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getLength();return t},e.prototype.getNumPoints=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getNumPoints();return t},e.prototype.getNumGeometries=function(){return this._geometries.length},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[n]=this._geometries[n].reverse();return this.getFactory().createGeometryCollection(e)},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0],e=new Sr(fh.asList(this._geometries)),n=new Sr(fh.asList(t._geometries));return this.compare(e,n)}if(2===arguments.length){for(var i=arguments[0],r=arguments[1],o=i,s=this.getNumGeometries(),a=o.getNumGeometries(),u=0;u<s&&u<a;){var h=this.getGeometryN(u),c=o.getGeometryN(u),l=h.compareToSameClass(c,r);if(0!==l)return l;u++}return u<s?1:u<a?-1:0}},e.prototype.apply=function(){if(ou(arguments[0],Xu))for(var t=arguments[0],e=0;e<this._geometries.length;e++)this._geometries[e].apply(t);else if(ou(arguments[0],_h)){var n=arguments[0];if(0===this._geometries.length)return null;for(var i=0;i<this._geometries.length&&(this._geometries[i].apply(n),!n.isDone());i++);n.isGeometryChanged()&&this.geometryChanged()}else if(ou(arguments[0],yh)){var r=arguments[0];r.filter(this);for(var o=0;o<this._geometries.length;o++)this._geometries[o].apply(r)}else if(ou(arguments[0],Gu)){var s=arguments[0];s.filter(this);for(var a=0;a<this._geometries.length;a++)this._geometries[a].apply(s)}},e.prototype.getBoundary=function(){return this.checkNotGeometryCollection(this),Nu.shouldNeverReachHere(),null},e.prototype.clone=function(){var e=t.prototype.clone.call(this);e._geometries=new Array(this._geometries.length).fill(null);for(var n=0;n<this._geometries.length;n++)e._geometries[n]=this._geometries[n].clone();return e},e.prototype.getGeometryType=function(){return"GeometryCollection"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.isEmpty=function(){for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isEmpty())return!1;return!0},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x4f07bcb1f857d800},Object.defineProperties(e,n),e}(ku),mh=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return ku.SORTINDEX_MULTILINESTRING},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?dh.FALSE:0},e.prototype.isClosed=function(){if(this.isEmpty())return!1;for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isClosed())return!1;return!0},e.prototype.getDimension=function(){return 1},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[t-1-n]=this._geometries[n].reverse();return this.getFactory().createMultiLineString(e)},e.prototype.getBoundary=function(){return new Eh(this).getBoundary()},e.prototype.getGeometryType=function(){return"MultiLineString"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[lh]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x7155d2ab4afa8000},Object.defineProperties(e,n),e}(vh),Eh=function(){if(this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,1===arguments.length){var t=arguments[0],e=qu.MOD2_BOUNDARY_RULE;this._geom=t,this._geomFact=t.getFactory(),this._bnRule=e}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this._geom=n,this._geomFact=n.getFactory(),this._bnRule=i}};Eh.prototype.boundaryMultiLineString=function(t){if(this._geom.isEmpty())return this.getEmptyMultiPoint();var e=this.computeBoundaryCoordinates(t);return 1===e.length?this._geomFact.createPoint(e[0]):this._geomFact.createMultiPointFromCoords(e)},Eh.prototype.getBoundary=function(){return this._geom instanceof Oh?this.boundaryLineString(this._geom):this._geom instanceof mh?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()},Eh.prototype.boundaryLineString=function(t){return this._geom.isEmpty()?this.getEmptyMultiPoint():t.isClosed()?this._bnRule.isInBoundary(2)?t.getStartPoint():this._geomFact.createMultiPoint():this._geomFact.createMultiPoint([t.getStartPoint(),t.getEndPoint()])},Eh.prototype.getEmptyMultiPoint=function(){return this._geomFact.createMultiPoint()},Eh.prototype.computeBoundaryCoordinates=function(t){var e=new $u;this._endpointMap=new Or;for(var n=0;n<t.getNumGeometries();n++){var i=t.getGeometryN(n);0!==i.getNumPoints()&&(this.addEndpoint(i.getCoordinateN(0)),this.addEndpoint(i.getCoordinateN(i.getNumPoints()-1)))}for(var r=this._endpointMap.entrySet().iterator();r.hasNext();){var o=r.next(),s=o.getValue().count;this._bnRule.isInBoundary(s)&&e.add(o.getKey())}return nh.toCoordinateArray(e)},Eh.prototype.addEndpoint=function(t){var e=this._endpointMap.get(t);null===e&&(e=new xh,this._endpointMap.put(t,e)),e.count++},Eh.prototype.interfaces_=function(){return[]},Eh.prototype.getClass=function(){return Eh},Eh.getBoundary=function(){if(1===arguments.length){var t=arguments[0];return new Eh(t).getBoundary()}if(2===arguments.length){var e=arguments[0],n=arguments[1];return new Eh(e,n).getBoundary()}};var xh=function(){this.count=null};xh.prototype.interfaces_=function(){return[]},xh.prototype.getClass=function(){return xh};var bh=function(){},wh={NEWLINE:{configurable:!0},SIMPLE_ORDINATE_FORMAT:{configurable:!0}};bh.prototype.interfaces_=function(){return[]},bh.prototype.getClass=function(){return bh},bh.chars=function(t,e){for(var n=new Array(e).fill(null),i=0;i<e;i++)n[i]=t;return String(n)},bh.getStackTrace=function(){if(1===arguments.length){var t=arguments[0],e=new function(){},n=new function(){}(e);return t.printStackTrace(n),e.toString()}if(2===arguments.length){for(var i=arguments[0],r=arguments[1],o="",s=new function(){}(new function(){}(bh.getStackTrace(i))),a=0;a<r;a++)try{o+=s.readLine()+bh.NEWLINE}catch(t){if(!(t instanceof Tr))throw t;Nu.shouldNeverReachHere()}return o}},bh.split=function(t,e){for(var n=e.length,i=new $u,r=""+t,o=r.indexOf(e);o>=0;){var s=r.substring(0,o);i.add(s),o=(r=r.substring(o+n)).indexOf(e)}r.length>0&&i.add(r);for(var a=new Array(i.size()).fill(null),u=0;u<a.length;u++)a[u]=i.get(u);return a},bh.toString=function(){if(1===arguments.length){var t=arguments[0];return bh.SIMPLE_ORDINATE_FORMAT.format(t)}},bh.spaces=function(t){return bh.chars(" ",t)},wh.NEWLINE.get=function(){return mu.getProperty("line.separator")},wh.SIMPLE_ORDINATE_FORMAT.get=function(){return new function(){}("0.#")},Object.defineProperties(bh,wh);var Ch=function(){};Ch.prototype.interfaces_=function(){return[]},Ch.prototype.getClass=function(){return Ch},Ch.copyCoord=function(t,e,n,i){for(var r=Math.min(t.getDimension(),n.getDimension()),o=0;o<r;o++)n.setOrdinate(i,o,t.getOrdinate(e,o))},Ch.isRing=function(t){var e=t.size();return 0===e||!(e<=3)&&t.getOrdinate(0,gu.X)===t.getOrdinate(e-1,gu.X)&&t.getOrdinate(0,gu.Y)===t.getOrdinate(e-1,gu.Y)},Ch.isEqual=function(t,e){var n=t.size();if(n!==e.size())return!1;for(var i=Math.min(t.getDimension(),e.getDimension()),r=0;r<n;r++)for(var o=0;o<i;o++){var s=t.getOrdinate(r,o),a=e.getOrdinate(r,o);if(!(t.getOrdinate(r,o)===e.getOrdinate(r,o)||Ka.isNaN(s)&&Ka.isNaN(a)))return!1}return!0},Ch.extend=function(t,e,n){var i=t.create(n,e.getDimension()),r=e.size();if(Ch.copy(e,0,i,0,r),r>0)for(var o=r;o<n;o++)Ch.copy(e,r-1,i,o,1);return i},Ch.reverse=function(t){for(var e=t.size()-1,n=Math.trunc(e/2),i=0;i<=n;i++)Ch.swap(t,i,e-i)},Ch.swap=function(t,e,n){if(e===n)return null;for(var i=0;i<t.getDimension();i++){var r=t.getOrdinate(e,i);t.setOrdinate(e,i,t.getOrdinate(n,i)),t.setOrdinate(n,i,r)}},Ch.copy=function(t,e,n,i,r){for(var o=0;o<r;o++)Ch.copyCoord(t,e+o,n,i+o)},Ch.toString=function(){if(1===arguments.length){var t=arguments[0],e=t.size();if(0===e)return"()";var n=t.getDimension(),i=new uu;i.append("(");for(var r=0;r<e;r++){r>0&&i.append(" ");for(var o=0;o<n;o++)o>0&&i.append(","),i.append(bh.toString(t.getOrdinate(r,o)))}return i.append(")"),i.toString()}},Ch.ensureValidRing=function(t,e){var n=e.size();return 0===n?e:n<=3?Ch.createClosedRing(t,e,4):e.getOrdinate(0,gu.X)===e.getOrdinate(n-1,gu.X)&&e.getOrdinate(0,gu.Y)===e.getOrdinate(n-1,gu.Y)?e:Ch.createClosedRing(t,e,n+1)},Ch.createClosedRing=function(t,e,n){var i=t.create(n,e.getDimension()),r=e.size();Ch.copy(e,0,i,0,r);for(var o=r;o<n;o++)Ch.copy(e,0,i,o,1);return i};var Oh=function(t){function e(e,n){t.call(this,n),this._points=null,this.init(e)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this.isEmpty()?new xu:this._points.expandEnvelope(new xu)},e.prototype.isRing=function(){return this.isClosed()&&this.isSimple()},e.prototype.getSortIndex=function(){return t.SORTINDEX_LINESTRING},e.prototype.getCoordinates=function(){return this._points.toCoordinateArray()},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var i=e;if(this._points.size()!==i._points.size())return!1;for(var r=0;r<this._points.size();r++)if(!this.equal(this._points.getCoordinate(r),i._points.getCoordinate(r),n))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=0;t<Math.trunc(this._points.size()/2);t++){var e=this._points.size()-1-t;if(!this._points.getCoordinate(t).equals(this._points.getCoordinate(e)))return this._points.getCoordinate(t).compareTo(this._points.getCoordinate(e))>0&&Ch.reverse(this._points),null}},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._points.getCoordinate(0)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?dh.FALSE:0},e.prototype.isClosed=function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},e.prototype.getEndPoint=function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},e.prototype.getDimension=function(){return 1},e.prototype.getLength=function(){return Fu.computeLength(this._points)},e.prototype.getNumPoints=function(){return this._points.size()},e.prototype.reverse=function(){var t=this._points.copy();return Ch.reverse(t),this.getFactory().createLineString(t)},e.prototype.compareToSameClass=function(){if(1===arguments.length){for(var t=arguments[0],e=0,n=0;e<this._points.size()&&n<t._points.size();){var i=this._points.getCoordinate(e).compareTo(t._points.getCoordinate(n));if(0!==i)return i;e++,n++}return e<this._points.size()?1:n<t._points.size()?-1:0}if(2===arguments.length){var r=arguments[0];return arguments[1].compare(this._points,r._points)}},e.prototype.apply=function(){if(ou(arguments[0],Xu))for(var t=arguments[0],e=0;e<this._points.size();e++)t.filter(this._points.getCoordinate(e));else if(ou(arguments[0],_h)){var n=arguments[0];if(0===this._points.size())return null;for(var i=0;i<this._points.size()&&(n.filter(this._points,i),!n.isDone());i++);n.isGeometryChanged()&&this.geometryChanged()}else ou(arguments[0],yh)?arguments[0].filter(this):ou(arguments[0],Gu)&&arguments[0].filter(this)},e.prototype.getBoundary=function(){return new Eh(this).getBoundary()},e.prototype.isEquivalentClass=function(t){return t instanceof e},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e._points=this._points.clone(),e},e.prototype.getCoordinateN=function(t){return this._points.getCoordinate(t)},e.prototype.getGeometryType=function(){return"LineString"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._points},e.prototype.isEmpty=function(){return 0===this._points.size()},e.prototype.init=function(t){if(null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),1===t.size())throw new Wa("Invalid number of points in LineString (found "+t.size()+" - must be 0 or >= 2)");this._points=t},e.prototype.isCoordinate=function(t){for(var e=0;e<this._points.size();e++)if(this._points.getCoordinate(e).equals(t))return!0;return!1},e.prototype.getStartPoint=function(){return this.isEmpty()?null:this.getPointN(0)},e.prototype.getPointN=function(t){return this.getFactory().createPoint(this._points.getCoordinate(t))},e.prototype.interfaces_=function(){return[lh]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x2b2b51ba435c8e00},Object.defineProperties(e,n),e}(ku),Ih=function(){};Ih.prototype.interfaces_=function(){return[]},Ih.prototype.getClass=function(){return Ih};var Sh=function(t){function e(e,n){t.call(this,n),this._coordinates=e||null,this.init(this._coordinates)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){if(this.isEmpty())return new xu;var t=new xu;return t.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),t},e.prototype.getSortIndex=function(){return t.SORTINDEX_POINT},e.prototype.getCoordinates=function(){return this.isEmpty()?[]:[this.getCoordinate()]},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&(!(!this.isEmpty()||!e.isEmpty())||this.isEmpty()===e.isEmpty()&&this.equal(e.getCoordinate(),this.getCoordinate(),n))}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){},e.prototype.getCoordinate=function(){return 0!==this._coordinates.size()?this._coordinates.getCoordinate(0):null},e.prototype.getBoundaryDimension=function(){return dh.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getNumPoints=function(){return this.isEmpty()?0:1},e.prototype.reverse=function(){return this.copy()},e.prototype.getX=function(){if(null===this.getCoordinate())throw new Error("getX called on empty Point");return this.getCoordinate().x},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0];return this.getCoordinate().compareTo(t.getCoordinate())}if(2===arguments.length){var e=arguments[0];return arguments[1].compare(this._coordinates,e._coordinates)}},e.prototype.apply=function(){if(ou(arguments[0],Xu)){var t=arguments[0];if(this.isEmpty())return null;t.filter(this.getCoordinate())}else if(ou(arguments[0],_h)){var e=arguments[0];if(this.isEmpty())return null;e.filter(this._coordinates,0),e.isGeometryChanged()&&this.geometryChanged()}else ou(arguments[0],yh)?arguments[0].filter(this):ou(arguments[0],Gu)&&arguments[0].filter(this)},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e._coordinates=this._coordinates.clone(),e},e.prototype.getGeometryType=function(){return"Point"},e.prototype.copy=function(){return new e(this._coordinates.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._coordinates},e.prototype.getY=function(){if(null===this.getCoordinate())throw new Error("getY called on empty Point");return this.getCoordinate().y},e.prototype.isEmpty=function(){return 0===this._coordinates.size()},e.prototype.init=function(t){null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),Nu.isTrue(t.size()<=1),this._coordinates=t},e.prototype.isSimple=function(){return!0},e.prototype.interfaces_=function(){return[Ih]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x44077bad161cbc00},Object.defineProperties(e,n),e}(ku),Th=function(){};Th.prototype.interfaces_=function(){return[]},Th.prototype.getClass=function(){return Th};var Rh=function(t){function e(e,n,i){if(t.call(this,i),this._shell=null,this._holes=null,null===e&&(e=this.getFactory().createLinearRing()),null===n&&(n=[]),t.hasNullElements(n))throw new Wa("holes must not contain null elements");if(e.isEmpty()&&t.hasNonEmptyElements(n))throw new Wa("shell is empty but holes are not");this._shell=e,this._holes=n}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this._shell.getEnvelopeInternal()},e.prototype.getSortIndex=function(){return t.SORTINDEX_POLYGON},e.prototype.getCoordinates=function(){if(this.isEmpty())return[];for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=this._shell.getCoordinates(),i=0;i<n.length;i++)t[++e]=n[i];for(var r=0;r<this._holes.length;r++)for(var o=this._holes[r].getCoordinates(),s=0;s<o.length;s++)t[++e]=o[s];return t},e.prototype.getArea=function(){var t=0;t+=Math.abs(Fu.signedArea(this._shell.getCoordinateSequence()));for(var e=0;e<this._holes.length;e++)t-=Math.abs(Fu.signedArea(this._holes[e].getCoordinateSequence()));return t},e.prototype.isRectangle=function(){if(0!==this.getNumInteriorRing())return!1;if(null===this._shell)return!1;if(5!==this._shell.getNumPoints())return!1;for(var t=this._shell.getCoordinateSequence(),e=this.getEnvelopeInternal(),n=0;n<5;n++){var i=t.getX(n);if(i!==e.getMinX()&&i!==e.getMaxX())return!1;var r=t.getY(n);if(r!==e.getMinY()&&r!==e.getMaxY())return!1}for(var o=t.getX(0),s=t.getY(0),a=1;a<=4;a++){var u=t.getX(a),h=t.getY(a);if(u!==o==(h!==s))return!1;o=u,s=h}return!0},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var i=e,r=this._shell,o=i._shell;if(!r.equalsExact(o,n))return!1;if(this._holes.length!==i._holes.length)return!1;for(var s=0;s<this._holes.length;s++)if(!this._holes[s].equalsExact(i._holes[s],n))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){if(0===arguments.length){this.normalize(this._shell,!0);for(var t=0;t<this._holes.length;t++)this.normalize(this._holes[t],!1);fh.sort(this._holes)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(e.isEmpty())return null;var i=new Array(e.getCoordinates().length-1).fill(null);mu.arraycopy(e.getCoordinates(),0,i,0,i.length);var r=nh.minCoordinate(e.getCoordinates());nh.scroll(i,r),mu.arraycopy(i,0,e.getCoordinates(),0,i.length),e.getCoordinates()[i.length]=i[0],Fu.isCCW(e.getCoordinates())===n&&nh.reverse(e.getCoordinates())}},e.prototype.getCoordinate=function(){return this._shell.getCoordinate()},e.prototype.getNumInteriorRing=function(){return this._holes.length},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.getLength=function(){var t=0;t+=this._shell.getLength();for(var e=0;e<this._holes.length;e++)t+=this._holes[e].getLength();return t},e.prototype.getNumPoints=function(){for(var t=this._shell.getNumPoints(),e=0;e<this._holes.length;e++)t+=this._holes[e].getNumPoints();return t},e.prototype.reverse=function(){var t=this.copy();t._shell=this._shell.copy().reverse(),t._holes=new Array(this._holes.length).fill(null);for(var e=0;e<this._holes.length;e++)t._holes[e]=this._holes[e].copy().reverse();return t},e.prototype.convexHull=function(){return this.getExteriorRing().convexHull()},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0],e=this._shell,n=t._shell;return e.compareToSameClass(n)}if(2===arguments.length){var i=arguments[0],r=arguments[1],o=i,s=this._shell,a=o._shell,u=s.compareToSameClass(a,r);if(0!==u)return u;for(var h=this.getNumInteriorRing(),c=o.getNumInteriorRing(),l=0;l<h&&l<c;){var p=this.getInteriorRingN(l),f=o.getInteriorRingN(l),d=p.compareToSameClass(f,r);if(0!==d)return d;l++}return l<h?1:l<c?-1:0}},e.prototype.apply=function(t){if(ou(t,Xu)){this._shell.apply(t);for(var e=0;e<this._holes.length;e++)this._holes[e].apply(t)}else if(ou(t,_h)){if(this._shell.apply(t),!t.isDone())for(var n=0;n<this._holes.length&&(this._holes[n].apply(t),!t.isDone());n++);t.isGeometryChanged()&&this.geometryChanged()}else if(ou(t,yh))t.filter(this);else if(ou(t,Gu)){t.filter(this),this._shell.apply(t);for(var i=0;i<this._holes.length;i++)this._holes[i].apply(t)}},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var t=new Array(this._holes.length+1).fill(null);t[0]=this._shell;for(var e=0;e<this._holes.length;e++)t[e+1]=this._holes[e];return t.length<=1?this.getFactory().createLinearRing(t[0].getCoordinateSequence()):this.getFactory().createMultiLineString(t)},e.prototype.clone=function(){var e=t.prototype.clone.call(this);e._shell=this._shell.clone(),e._holes=new Array(this._holes.length).fill(null);for(var n=0;n<this._holes.length;n++)e._holes[n]=this._holes[n].clone();return e},e.prototype.getGeometryType=function(){return"Polygon"},e.prototype.copy=function(){for(var t=this._shell.copy(),n=new Array(this._holes.length).fill(null),i=0;i<n.length;i++)n[i]=this._holes[i].copy();return new e(t,n,this._factory)},e.prototype.getExteriorRing=function(){return this._shell},e.prototype.isEmpty=function(){return this._shell.isEmpty()},e.prototype.getInteriorRingN=function(t){return this._holes[t]},e.prototype.interfaces_=function(){return[Th]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x307ffefd8dc97200},Object.defineProperties(e,n),e}(ku),Nh=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return ku.SORTINDEX_MULTIPOINT},e.prototype.isValid=function(){return!0},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getCoordinate=function(){if(1===arguments.length){var e=arguments[0];return this._geometries[e].getCoordinate()}return t.prototype.getCoordinate.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return dh.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.getGeometryType=function(){return"MultiPoint"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Ih]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x6fb1ed4162e0fc00},Object.defineProperties(e,n),e}(vh),Lh=function(t){function e(e,n){e instanceof $a&&n instanceof Wh&&(e=n.getCoordinateSequenceFactory().create(e)),t.call(this,e,n),this.validateConstruction()}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={MINIMUM_VALID_SIZE:{configurable:!0},serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return ku.SORTINDEX_LINEARRING},e.prototype.getBoundaryDimension=function(){return dh.FALSE},e.prototype.isClosed=function(){return!!this.isEmpty()||t.prototype.isClosed.call(this)},e.prototype.reverse=function(){var t=this._points.copy();return Ch.reverse(t),this.getFactory().createLinearRing(t)},e.prototype.validateConstruction=function(){if(!this.isEmpty()&&!t.prototype.isClosed.call(this))throw new Wa("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<e.MINIMUM_VALID_SIZE)throw new Wa("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},e.prototype.getGeometryType=function(){return"LinearRing"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.MINIMUM_VALID_SIZE.get=function(){return 4},n.serialVersionUID.get=function(){return-0x3b229e262367a600},Object.defineProperties(e,n),e}(Oh),Mh=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return ku.SORTINDEX_MULTIPOLYGON},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[n]=this._geometries[n].reverse();return this.getFactory().createMultiPolygon(e)},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var t=new $u,e=0;e<this._geometries.length;e++)for(var n=this._geometries[e].getBoundary(),i=0;i<n.getNumGeometries();i++)t.add(n.getGeometryN(i));var r=new Array(t.size()).fill(null);return this.getFactory().createMultiLineString(t.toArray(r))},e.prototype.getGeometryType=function(){return"MultiPolygon"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Th]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x7a5aa1369171980},Object.defineProperties(e,n),e}(vh),Ph=function(t){this._factory=t||null,this._isUserDataCopied=!1},Ah={NoOpGeometryOperation:{configurable:!0},CoordinateOperation:{configurable:!0},CoordinateSequenceOperation:{configurable:!0}};Ph.prototype.setCopyUserData=function(t){this._isUserDataCopied=t},Ph.prototype.edit=function(t,e){if(null===t)return null;var n=this.editInternal(t,e);return this._isUserDataCopied&&n.setUserData(t.getUserData()),n},Ph.prototype.editInternal=function(t,e){return null===this._factory&&(this._factory=t.getFactory()),t instanceof vh?this.editGeometryCollection(t,e):t instanceof Rh?this.editPolygon(t,e):t instanceof Sh?e.edit(t,this._factory):t instanceof Oh?e.edit(t,this._factory):(Nu.shouldNeverReachHere("Unsupported Geometry class: "+t.getClass().getName()),null)},Ph.prototype.editGeometryCollection=function(t,e){for(var n=e.edit(t,this._factory),i=new $u,r=0;r<n.getNumGeometries();r++){var o=this.edit(n.getGeometryN(r),e);null===o||o.isEmpty()||i.add(o)}return n.getClass()===Nh?this._factory.createMultiPoint(i.toArray([])):n.getClass()===mh?this._factory.createMultiLineString(i.toArray([])):n.getClass()===Mh?this._factory.createMultiPolygon(i.toArray([])):this._factory.createGeometryCollection(i.toArray([]))},Ph.prototype.editPolygon=function(t,e){var n=e.edit(t,this._factory);if(null===n&&(n=this._factory.createPolygon(null)),n.isEmpty())return n;var i=this.edit(n.getExteriorRing(),e);if(null===i||i.isEmpty())return this._factory.createPolygon();for(var r=new $u,o=0;o<n.getNumInteriorRing();o++){var s=this.edit(n.getInteriorRingN(o),e);null===s||s.isEmpty()||r.add(s)}return this._factory.createPolygon(i,r.toArray([]))},Ph.prototype.interfaces_=function(){return[]},Ph.prototype.getClass=function(){return Ph},Ph.GeometryEditorOperation=function(){},Ah.NoOpGeometryOperation.get=function(){return Dh},Ah.CoordinateOperation.get=function(){return Fh},Ah.CoordinateSequenceOperation.get=function(){return jh},Object.defineProperties(Ph,Ah);var Dh=function(){};Dh.prototype.edit=function(t,e){return t},Dh.prototype.interfaces_=function(){return[Ph.GeometryEditorOperation]},Dh.prototype.getClass=function(){return Dh};var Fh=function(){};Fh.prototype.edit=function(t,e){var n=this.editCoordinates(t.getCoordinates(),t);return null===n?t:t instanceof Lh?e.createLinearRing(n):t instanceof Oh?e.createLineString(n):t instanceof Sh?n.length>0?e.createPoint(n[0]):e.createPoint():t},Fh.prototype.interfaces_=function(){return[Ph.GeometryEditorOperation]},Fh.prototype.getClass=function(){return Fh};var jh=function(){};jh.prototype.edit=function(t,e){return t instanceof Lh?e.createLinearRing(this.edit(t.getCoordinateSequence(),t)):t instanceof Oh?e.createLineString(this.edit(t.getCoordinateSequence(),t)):t instanceof Sh?e.createPoint(this.edit(t.getCoordinateSequence(),t)):t},jh.prototype.interfaces_=function(){return[Ph.GeometryEditorOperation]},jh.prototype.getClass=function(){return jh};var Gh=function(){if(this._dimension=3,this._coordinates=null,1===arguments.length){if(arguments[0]instanceof Array)this._coordinates=arguments[0],this._dimension=3;else if(Number.isInteger(arguments[0])){var t=arguments[0];this._coordinates=new Array(t).fill(null);for(var e=0;e<t;e++)this._coordinates[e]=new $a}else if(ou(arguments[0],gu)){var n=arguments[0];if(null===n)return this._coordinates=new Array(0).fill(null),null;this._dimension=n.getDimension(),this._coordinates=new Array(n.size()).fill(null);for(var i=0;i<this._coordinates.length;i++)this._coordinates[i]=n.getCoordinateCopy(i)}}else if(2===arguments.length)if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var r=arguments[0],o=arguments[1];this._coordinates=r,this._dimension=o,null===r&&(this._coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var s=arguments[0],a=arguments[1];this._coordinates=new Array(s).fill(null),this._dimension=a;for(var u=0;u<s;u++)this._coordinates[u]=new $a}},kh={serialVersionUID:{configurable:!0}};Gh.prototype.setOrdinate=function(t,e,n){switch(e){case gu.X:this._coordinates[t].x=n;break;case gu.Y:this._coordinates[t].y=n;break;case gu.Z:this._coordinates[t].z=n;break;default:throw new Wa("invalid ordinateIndex")}},Gh.prototype.size=function(){return this._coordinates.length},Gh.prototype.getOrdinate=function(t,e){switch(e){case gu.X:return this._coordinates[t].x;case gu.Y:return this._coordinates[t].y;case gu.Z:return this._coordinates[t].z}return Ka.NaN},Gh.prototype.getCoordinate=function(){if(1===arguments.length){var t=arguments[0];return this._coordinates[t]}if(2===arguments.length){var e=arguments[0],n=arguments[1];n.x=this._coordinates[e].x,n.y=this._coordinates[e].y,n.z=this._coordinates[e].z}},Gh.prototype.getCoordinateCopy=function(t){return new $a(this._coordinates[t])},Gh.prototype.getDimension=function(){return this._dimension},Gh.prototype.getX=function(t){return this._coordinates[t].x},Gh.prototype.clone=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].clone();return new Gh(t,this._dimension)},Gh.prototype.expandEnvelope=function(t){for(var e=0;e<this._coordinates.length;e++)t.expandToInclude(this._coordinates[e]);return t},Gh.prototype.copy=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].copy();return new Gh(t,this._dimension)},Gh.prototype.toString=function(){if(this._coordinates.length>0){var t=new uu(17*this._coordinates.length);t.append("("),t.append(this._coordinates[0]);for(var e=1;e<this._coordinates.length;e++)t.append(", "),t.append(this._coordinates[e]);return t.append(")"),t.toString()}return"()"},Gh.prototype.getY=function(t){return this._coordinates[t].y},Gh.prototype.toCoordinateArray=function(){return this._coordinates},Gh.prototype.interfaces_=function(){return[gu,yr]},Gh.prototype.getClass=function(){return Gh},kh.serialVersionUID.get=function(){return-0xcb44a778db18e00},Object.defineProperties(Gh,kh);var Bh=function(){},Yh={serialVersionUID:{configurable:!0},instanceObject:{configurable:!0}};Bh.prototype.readResolve=function(){return Bh.instance()},Bh.prototype.create=function(){if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return new Gh(t)}if(ou(arguments[0],gu)){var e=arguments[0];return new Gh(e)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];return i>3&&(i=3),i<2?new Gh(n):new Gh(n,i)}},Bh.prototype.interfaces_=function(){return[nu,yr]},Bh.prototype.getClass=function(){return Bh},Bh.instance=function(){return Bh.instanceObject},Yh.serialVersionUID.get=function(){return-0x38e49fa6cf6f2e00},Yh.instanceObject.get=function(){return new Bh},Object.defineProperties(Bh,Yh);var Xh=function(t){function e(){t.call(this),this.map_=new Map}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){return this.map_.get(t)||null},e.prototype.put=function(t,e){return this.map_.set(t,e),e},e.prototype.values=function(){for(var t=new $u,e=this.map_.values(),n=e.next();!n.done;)t.add(n.value),n=e.next();return t},e.prototype.entrySet=function(){var t=new uh;return this.map_.entries().forEach(function(e){return t.add(e)}),t},e.prototype.size=function(){return this.map_.size()},e}(sh),qh=function t(){if(this._modelType=null,this._scale=null,0===arguments.length)this._modelType=t.FLOATING;else if(1===arguments.length)if(arguments[0]instanceof zh){var e=arguments[0];this._modelType=e,e===t.FIXED&&this.setScale(1)}else if("number"==typeof arguments[0]){var n=arguments[0];this._modelType=t.FIXED,this.setScale(n)}else if(arguments[0]instanceof t){var i=arguments[0];this._modelType=i._modelType,this._scale=i._scale}},Uh={serialVersionUID:{configurable:!0},maximumPreciseValue:{configurable:!0}};qh.prototype.equals=function(t){if(!(t instanceof qh))return!1;var e=t;return this._modelType===e._modelType&&this._scale===e._scale},qh.prototype.compareTo=function(t){var e=t,n=this.getMaximumSignificantDigits(),i=e.getMaximumSignificantDigits();return new hu(n).compareTo(new hu(i))},qh.prototype.getScale=function(){return this._scale},qh.prototype.isFloating=function(){return this._modelType===qh.FLOATING||this._modelType===qh.FLOATING_SINGLE},qh.prototype.getType=function(){return this._modelType},qh.prototype.toString=function(){var t="UNKNOWN";return this._modelType===qh.FLOATING?t="Floating":this._modelType===qh.FLOATING_SINGLE?t="Floating-Single":this._modelType===qh.FIXED&&(t="Fixed (Scale="+this.getScale()+")"),t},qh.prototype.makePrecise=function(){if("number"==typeof arguments[0]){var t=arguments[0];return Ka.isNaN(t)?t:this._modelType===qh.FLOATING_SINGLE?t:this._modelType===qh.FIXED?Math.round(t*this._scale)/this._scale:t}if(arguments[0]instanceof $a){var e=arguments[0];if(this._modelType===qh.FLOATING)return null;e.x=this.makePrecise(e.x),e.y=this.makePrecise(e.y)}},qh.prototype.getMaximumSignificantDigits=function(){var t=16;return this._modelType===qh.FLOATING?t=16:this._modelType===qh.FLOATING_SINGLE?t=6:this._modelType===qh.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t},qh.prototype.setScale=function(t){this._scale=Math.abs(t)},qh.prototype.interfaces_=function(){return[yr,Za]},qh.prototype.getClass=function(){return qh},qh.mostPrecise=function(t,e){return t.compareTo(e)>=0?t:e},Uh.serialVersionUID.get=function(){return 0x6bee6404e9a25c00},Uh.maximumPreciseValue.get=function(){return 9007199254740992},Object.defineProperties(qh,Uh);var zh=function t(e){this._name=e||null,t.nameToTypeMap.put(e,this)},Vh={serialVersionUID:{configurable:!0},nameToTypeMap:{configurable:!0}};zh.prototype.readResolve=function(){return zh.nameToTypeMap.get(this._name)},zh.prototype.toString=function(){return this._name},zh.prototype.interfaces_=function(){return[yr]},zh.prototype.getClass=function(){return zh},Vh.serialVersionUID.get=function(){return-552860263173159e4},Vh.nameToTypeMap.get=function(){return new Xh},Object.defineProperties(zh,Vh),qh.Type=zh,qh.FIXED=new zh("FIXED"),qh.FLOATING=new zh("FLOATING"),qh.FLOATING_SINGLE=new zh("FLOATING SINGLE");var Wh=function t(){this._precisionModel=new qh,this._SRID=0,this._coordinateSequenceFactory=t.getDefaultCoordinateSequenceFactory(),0===arguments.length||(1===arguments.length?ou(arguments[0],nu)?this._coordinateSequenceFactory=arguments[0]:arguments[0]instanceof qh&&(this._precisionModel=arguments[0]):2===arguments.length?(this._precisionModel=arguments[0],this._SRID=arguments[1]):3===arguments.length&&(this._precisionModel=arguments[0],this._SRID=arguments[1],this._coordinateSequenceFactory=arguments[2]))},Kh={serialVersionUID:{configurable:!0}};Wh.prototype.toGeometry=function(t){return t.isNull()?this.createPoint(null):t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new $a(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new $a(t.getMinX(),t.getMinY()),new $a(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new $a(t.getMinX(),t.getMinY()),new $a(t.getMinX(),t.getMaxY()),new $a(t.getMaxX(),t.getMaxY()),new $a(t.getMaxX(),t.getMinY()),new $a(t.getMinX(),t.getMinY())]),null)},Wh.prototype.createLineString=function(t){return t?t instanceof Array?new Oh(this.getCoordinateSequenceFactory().create(t),this):ou(t,gu)?new Oh(t,this):void 0:new Oh(this.getCoordinateSequenceFactory().create([]),this)},Wh.prototype.createMultiLineString=function(){if(0===arguments.length)return new mh(null,this);if(1===arguments.length){var t=arguments[0];return new mh(t,this)}},Wh.prototype.buildGeometry=function(t){for(var e=null,n=!1,i=!1,r=t.iterator();r.hasNext();){var o=r.next(),s=o.getClass();null===e&&(e=s),s!==e&&(n=!0),o.isGeometryCollectionOrDerived()&&(i=!0)}if(null===e)return this.createGeometryCollection();if(n||i)return this.createGeometryCollection(Wh.toGeometryArray(t));var a=t.iterator().next();if(t.size()>1){if(a instanceof Rh)return this.createMultiPolygon(Wh.toPolygonArray(t));if(a instanceof Oh)return this.createMultiLineString(Wh.toLineStringArray(t));if(a instanceof Sh)return this.createMultiPoint(Wh.toPointArray(t));Nu.shouldNeverReachHere("Unhandled class: "+a.getClass().getName())}return a},Wh.prototype.createMultiPointFromCoords=function(t){return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)},Wh.prototype.createPoint=function(){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof $a){var t=arguments[0];return this.createPoint(null!==t?this.getCoordinateSequenceFactory().create([t]):null)}if(ou(arguments[0],gu)){var e=arguments[0];return new Sh(e,this)}}},Wh.prototype.getCoordinateSequenceFactory=function(){return this._coordinateSequenceFactory},Wh.prototype.createPolygon=function(){if(0===arguments.length)return new Rh(null,null,this);if(1===arguments.length){if(ou(arguments[0],gu)){var t=arguments[0];return this.createPolygon(this.createLinearRing(t))}if(arguments[0]instanceof Array){var e=arguments[0];return this.createPolygon(this.createLinearRing(e))}if(arguments[0]instanceof Lh){var n=arguments[0];return this.createPolygon(n,null)}}else if(2===arguments.length){var i=arguments[0],r=arguments[1];return new Rh(i,r,this)}},Wh.prototype.getSRID=function(){return this._SRID},Wh.prototype.createGeometryCollection=function(){if(0===arguments.length)return new vh(null,this);if(1===arguments.length){var t=arguments[0];return new vh(t,this)}},Wh.prototype.createGeometry=function(t){return new Ph(this).edit(t,{edit:function(){if(2===arguments.length){var t=arguments[0];return this._coordinateSequenceFactory.create(t)}}})},Wh.prototype.getPrecisionModel=function(){return this._precisionModel},Wh.prototype.createLinearRing=function(){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLinearRing(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(ou(arguments[0],gu)){var e=arguments[0];return new Lh(e,this)}}},Wh.prototype.createMultiPolygon=function(){if(0===arguments.length)return new Mh(null,this);if(1===arguments.length){var t=arguments[0];return new Mh(t,this)}},Wh.prototype.createMultiPoint=function(){if(0===arguments.length)return new Nh(null,this);if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return new Nh(t,this)}if(arguments[0]instanceof Array){var e=arguments[0];return this.createMultiPoint(null!==e?this.getCoordinateSequenceFactory().create(e):null)}if(ou(arguments[0],gu)){var n=arguments[0];if(null===n)return this.createMultiPoint(new Array(0).fill(null));for(var i=new Array(n.size()).fill(null),r=0;r<n.size();r++){var o=this.getCoordinateSequenceFactory().create(1,n.getDimension());Ch.copy(n,r,o,0,1),i[r]=this.createPoint(o)}return this.createMultiPoint(i)}}},Wh.prototype.interfaces_=function(){return[yr]},Wh.prototype.getClass=function(){return Wh},Wh.toMultiPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Wh.toGeometryArray=function(t){if(null===t)return null;var e=new Array(t.size()).fill(null);return t.toArray(e)},Wh.getDefaultCoordinateSequenceFactory=function(){return Bh.instance()},Wh.toMultiLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Wh.toLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Wh.toMultiPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Wh.toLinearRingArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Wh.toPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Wh.toPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Wh.createPointFromInternalCoord=function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)},Kh.serialVersionUID.get=function(){return-0x5ea75f2051eeb400},Object.defineProperties(Wh,Kh);var Hh=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],Zh=function(t){this.geometryFactory=t||new Wh};Zh.prototype.read=function(t){var e,n=(e="string"==typeof t?JSON.parse(t):t).type;if(!Jh[n])throw new Error("Unknown GeoJSON type: "+e.type);return-1!==Hh.indexOf(n)?Jh[n].apply(this,[e.coordinates]):"GeometryCollection"===n?Jh[n].apply(this,[e.geometries]):Jh[n].apply(this,[e])},Zh.prototype.write=function(t){var e=t.getGeometryType();if(!Qh[e])throw new Error("Geometry is not supported");return Qh[e].apply(this,[t])};var Jh={Feature:function(t){var e={};for(var n in t)e[n]=t[n];if(t.geometry){var i=t.geometry.type;if(!Jh[i])throw new Error("Unknown GeoJSON type: "+t.type);e.geometry=this.read(t.geometry)}return t.bbox&&(e.bbox=Jh.bbox.apply(this,[t.bbox])),e},FeatureCollection:function(t){var e={};if(t.features){e.features=[];for(var n=0;n<t.features.length;++n)e.features.push(this.read(t.features[n]))}return t.bbox&&(e.bbox=this.parse.bbox.apply(this,[t.bbox])),e},coordinates:function(t){for(var e=[],n=0;n<t.length;++n){var i=t[n];e.push(new $a(i[0],i[1]))}return e},bbox:function(t){return this.geometryFactory.createLinearRing([new $a(t[0],t[1]),new $a(t[2],t[1]),new $a(t[2],t[3]),new $a(t[0],t[3]),new $a(t[0],t[1])])},Point:function(t){var e=new $a(t[0],t[1]);return this.geometryFactory.createPoint(e)},MultiPoint:function(t){for(var e=[],n=0;n<t.length;++n)e.push(Jh.Point.apply(this,[t[n]]));return this.geometryFactory.createMultiPoint(e)},LineString:function(t){var e=Jh.coordinates.apply(this,[t]);return this.geometryFactory.createLineString(e)},MultiLineString:function(t){for(var e=[],n=0;n<t.length;++n)e.push(Jh.LineString.apply(this,[t[n]]));return this.geometryFactory.createMultiLineString(e)},Polygon:function(t){for(var e=Jh.coordinates.apply(this,[t[0]]),n=this.geometryFactory.createLinearRing(e),i=[],r=1;r<t.length;++r){var o=t[r],s=Jh.coordinates.apply(this,[o]),a=this.geometryFactory.createLinearRing(s);i.push(a)}return this.geometryFactory.createPolygon(n,i)},MultiPolygon:function(t){for(var e=[],n=0;n<t.length;++n){var i=t[n];e.push(Jh.Polygon.apply(this,[i]))}return this.geometryFactory.createMultiPolygon(e)},GeometryCollection:function(t){for(var e=[],n=0;n<t.length;++n){var i=t[n];e.push(this.read(i))}return this.geometryFactory.createGeometryCollection(e)}},Qh={coordinate:function(t){return[t.x,t.y]},Point:function(t){return{type:"Point",coordinates:Qh.coordinate.apply(this,[t.getCoordinate()])}},MultiPoint:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var i=t._geometries[n],r=Qh.Point.apply(this,[i]);e.push(r.coordinates)}return{type:"MultiPoint",coordinates:e}},LineString:function(t){for(var e=[],n=t.getCoordinates(),i=0;i<n.length;++i){var r=n[i];e.push(Qh.coordinate.apply(this,[r]))}return{type:"LineString",coordinates:e}},MultiLineString:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var i=t._geometries[n],r=Qh.LineString.apply(this,[i]);e.push(r.coordinates)}return{type:"MultiLineString",coordinates:e}},Polygon:function(t){var e=[],n=Qh.LineString.apply(this,[t._shell]);e.push(n.coordinates);for(var i=0;i<t._holes.length;++i){var r=t._holes[i],o=Qh.LineString.apply(this,[r]);e.push(o.coordinates)}return{type:"Polygon",coordinates:e}},MultiPolygon:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var i=t._geometries[n],r=Qh.Polygon.apply(this,[i]);e.push(r.coordinates)}return{type:"MultiPolygon",coordinates:e}},GeometryCollection:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var i=t._geometries[n],r=i.getGeometryType();e.push(Qh[r].apply(this,[i]))}return{type:"GeometryCollection",geometries:e}}},$h=function(t){this.geometryFactory=t||new Wh,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new Zh(this.geometryFactory)};$h.prototype.read=function(t){var e=this.parser.read(t);return this.precisionModel.getType()===qh.FIXED&&this.reducePrecision(e),e},$h.prototype.reducePrecision=function(t){var e,n;if(t.coordinate)this.precisionModel.makePrecise(t.coordinate);else if(t.points)for(e=0,n=t.points.length;e<n;e++)this.precisionModel.makePrecise(t.points[e]);else if(t.geometries)for(e=0,n=t.geometries.length;e<n;e++)this.reducePrecision(t.geometries[e])};var tc=function(){this.parser=new Zh(this.geometryFactory)};tc.prototype.write=function(t){return this.parser.write(t)};var ec=function(){},nc={ON:{configurable:!0},LEFT:{configurable:!0},RIGHT:{configurable:!0}};ec.prototype.interfaces_=function(){return[]},ec.prototype.getClass=function(){return ec},ec.opposite=function(t){return t===ec.LEFT?ec.RIGHT:t===ec.RIGHT?ec.LEFT:t},nc.ON.get=function(){return 0},nc.LEFT.get=function(){return 1},nc.RIGHT.get=function(){return 2},Object.defineProperties(ec,nc),(Rr.prototype=new Error).name="EmptyStackException",(Nr.prototype=new Qu).add=function(t){return this.array_.push(t),!0},Nr.prototype.get=function(t){if(t<0||t>=this.size())throw new Error;return this.array_[t]},Nr.prototype.push=function(t){return this.array_.push(t),t},Nr.prototype.pop=function(t){if(0===this.array_.length)throw new Rr;return this.array_.pop()},Nr.prototype.peek=function(){if(0===this.array_.length)throw new Rr;return this.array_[this.array_.length-1]},Nr.prototype.empty=function(){return 0===this.array_.length},Nr.prototype.isEmpty=function(){return this.empty()},Nr.prototype.search=function(t){return this.array_.indexOf(t)},Nr.prototype.size=function(){return this.array_.length},Nr.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t};var ic=function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null};ic.prototype.getCoordinate=function(){return this._minCoord},ic.prototype.getRightmostSide=function(t,e){var n=this.getRightmostSideOfSegment(t,e);return n<0&&(n=this.getRightmostSideOfSegment(t,e-1)),n<0&&(this._minCoord=null,this.checkForRightmostCoordinate(t)),n},ic.prototype.findRightmostEdgeAtVertex=function(){var t=this._minDe.getEdge().getCoordinates();Nu.isTrue(this._minIndex>0&&this._minIndex<t.length,"rightmost point expected to be interior vertex of edge");var e=t[this._minIndex-1],n=t[this._minIndex+1],i=Fu.computeOrientation(this._minCoord,n,e),r=!1;e.y<this._minCoord.y&&n.y<this._minCoord.y&&i===Fu.COUNTERCLOCKWISE?r=!0:e.y>this._minCoord.y&&n.y>this._minCoord.y&&i===Fu.CLOCKWISE&&(r=!0),r&&(this._minIndex=this._minIndex-1)},ic.prototype.getRightmostSideOfSegment=function(t,e){var n=t.getEdge().getCoordinates();if(e<0||e+1>=n.length)return-1;if(n[e].y===n[e+1].y)return-1;var i=ec.LEFT;return n[e].y<n[e+1].y&&(i=ec.RIGHT),i},ic.prototype.getEdge=function(){return this._orientedDe},ic.prototype.checkForRightmostCoordinate=function(t){for(var e=t.getEdge().getCoordinates(),n=0;n<e.length-1;n++)(null===this._minCoord||e[n].x>this._minCoord.x)&&(this._minDe=t,this._minIndex=n,this._minCoord=e[n])},ic.prototype.findRightmostEdgeAtNode=function(){var t=this._minDe.getNode().getEdges();this._minDe=t.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)},ic.prototype.findEdge=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();n.isForward()&&this.checkForRightmostCoordinate(n)}Nu.isTrue(0!==this._minIndex||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),0===this._minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===ec.LEFT&&(this._orientedDe=this._minDe.getSym())},ic.prototype.interfaces_=function(){return[]},ic.prototype.getClass=function(){return ic};var rc=function(t){function e(n,i){t.call(this,e.msgWithCoord(n,i)),this.pt=i?new $a(i):null,this.name="TopologyException"}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getCoordinate=function(){return this.pt},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.msgWithCoord=function(t,e){return e?t:t+" [ "+e+" ]"},e}(Tu),oc=function(){this.array_=[]};oc.prototype.addLast=function(t){this.array_.push(t)},oc.prototype.removeFirst=function(){return this.array_.shift()},oc.prototype.isEmpty=function(){return 0===this.array_.length};var sc=function(){this._finder=null,this._dirEdgeList=new $u,this._nodes=new $u,this._rightMostCoord=null,this._env=null,this._finder=new ic};sc.prototype.clearVisitedEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();)t.next().setVisited(!1)},sc.prototype.getRightmostCoordinate=function(){return this._rightMostCoord},sc.prototype.computeNodeDepth=function(t){for(var e=null,n=t.getEdges().iterator();n.hasNext();){var i=n.next();if(i.isVisited()||i.getSym().isVisited()){e=i;break}}if(null===e)throw new rc("unable to find edge to compute depths at "+t.getCoordinate());t.getEdges().computeDepths(e);for(var r=t.getEdges().iterator();r.hasNext();){var o=r.next();o.setVisited(!0),this.copySymDepths(o)}},sc.prototype.computeDepth=function(t){this.clearVisitedEdges();var e=this._finder.getEdge();e.setEdgeDepths(ec.RIGHT,t),this.copySymDepths(e),this.computeDepths(e)},sc.prototype.create=function(t){this.addReachable(t),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()},sc.prototype.findResultEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();){var e=t.next();e.getDepth(ec.RIGHT)>=1&&e.getDepth(ec.LEFT)<=0&&!e.isInteriorAreaEdge()&&e.setInResult(!0)}},sc.prototype.computeDepths=function(t){var e=new uh,n=new oc,i=t.getNode();for(n.addLast(i),e.add(i),t.setVisited(!0);!n.isEmpty();){var r=n.removeFirst();e.add(r),this.computeNodeDepth(r);for(var o=r.getEdges().iterator();o.hasNext();){var s=o.next().getSym();if(!s.isVisited()){var a=s.getNode();e.contains(a)||(n.addLast(a),e.add(a))}}}},sc.prototype.compareTo=function(t){var e=t;return this._rightMostCoord.x<e._rightMostCoord.x?-1:this._rightMostCoord.x>e._rightMostCoord.x?1:0},sc.prototype.getEnvelope=function(){if(null===this._env){for(var t=new xu,e=this._dirEdgeList.iterator();e.hasNext();)for(var n=e.next().getEdge().getCoordinates(),i=0;i<n.length-1;i++)t.expandToInclude(n[i]);this._env=t}return this._env},sc.prototype.addReachable=function(t){var e=new Nr;for(e.add(t);!e.empty();){var n=e.pop();this.add(n,e)}},sc.prototype.copySymDepths=function(t){var e=t.getSym();e.setDepth(ec.LEFT,t.getDepth(ec.RIGHT)),e.setDepth(ec.RIGHT,t.getDepth(ec.LEFT))},sc.prototype.add=function(t,e){t.setVisited(!0),this._nodes.add(t);for(var n=t.getEdges().iterator();n.hasNext();){var i=n.next();this._dirEdgeList.add(i);var r=i.getSym().getNode();r.isVisited()||e.push(r)}},sc.prototype.getNodes=function(){return this._nodes},sc.prototype.getDirectedEdges=function(){return this._dirEdgeList},sc.prototype.interfaces_=function(){return[Za]},sc.prototype.getClass=function(){return sc};var ac=function t(){if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array){var e=arguments[0];this.init(e.length)}else if(Number.isInteger(arguments[0])){var n=arguments[0];this.init(1),this.location[ec.ON]=n}else if(arguments[0]instanceof t){var i=arguments[0];if(this.init(i.location.length),null!==i)for(var r=0;r<this.location.length;r++)this.location[r]=i.location[r]}}else if(3===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2];this.init(3),this.location[ec.ON]=o,this.location[ec.LEFT]=s,this.location[ec.RIGHT]=a}};ac.prototype.setAllLocations=function(t){for(var e=0;e<this.location.length;e++)this.location[e]=t},ac.prototype.isNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]!==iu.NONE)return!1;return!0},ac.prototype.setAllLocationsIfNull=function(t){for(var e=0;e<this.location.length;e++)this.location[e]===iu.NONE&&(this.location[e]=t)},ac.prototype.isLine=function(){return 1===this.location.length},ac.prototype.merge=function(t){if(t.location.length>this.location.length){var e=new Array(3).fill(null);e[ec.ON]=this.location[ec.ON],e[ec.LEFT]=iu.NONE,e[ec.RIGHT]=iu.NONE,this.location=e}for(var n=0;n<this.location.length;n++)this.location[n]===iu.NONE&&n<t.location.length&&(this.location[n]=t.location[n])},ac.prototype.getLocations=function(){return this.location},ac.prototype.flip=function(){if(this.location.length<=1)return null;var t=this.location[ec.LEFT];this.location[ec.LEFT]=this.location[ec.RIGHT],this.location[ec.RIGHT]=t},ac.prototype.toString=function(){var t=new uu;return this.location.length>1&&t.append(iu.toLocationSymbol(this.location[ec.LEFT])),t.append(iu.toLocationSymbol(this.location[ec.ON])),this.location.length>1&&t.append(iu.toLocationSymbol(this.location[ec.RIGHT])),t.toString()},ac.prototype.setLocations=function(t,e,n){this.location[ec.ON]=t,this.location[ec.LEFT]=e,this.location[ec.RIGHT]=n},ac.prototype.get=function(t){return t<this.location.length?this.location[t]:iu.NONE},ac.prototype.isArea=function(){return this.location.length>1},ac.prototype.isAnyNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]===iu.NONE)return!0;return!1},ac.prototype.setLocation=function(){if(1===arguments.length){var t=arguments[0];this.setLocation(ec.ON,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.location[e]=n}},ac.prototype.init=function(t){this.location=new Array(t).fill(null),this.setAllLocations(iu.NONE)},ac.prototype.isEqualOnSide=function(t,e){return this.location[e]===t.location[e]},ac.prototype.allPositionsEqual=function(t){for(var e=0;e<this.location.length;e++)if(this.location[e]!==t)return!1;return!0},ac.prototype.interfaces_=function(){return[]},ac.prototype.getClass=function(){return ac};var uc=function t(){if(this.elt=new Array(2).fill(null),1===arguments.length){if(Number.isInteger(arguments[0])){var e=arguments[0];this.elt[0]=new ac(e),this.elt[1]=new ac(e)}else if(arguments[0]instanceof t){var n=arguments[0];this.elt[0]=new ac(n.elt[0]),this.elt[1]=new ac(n.elt[1])}}else if(2===arguments.length){var i=arguments[0],r=arguments[1];this.elt[0]=new ac(iu.NONE),this.elt[1]=new ac(iu.NONE),this.elt[i].setLocation(r)}else if(3===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2];this.elt[0]=new ac(o,s,a),this.elt[1]=new ac(o,s,a)}else if(4===arguments.length){var u=arguments[0],h=arguments[1],c=arguments[2],l=arguments[3];this.elt[0]=new ac(iu.NONE,iu.NONE,iu.NONE),this.elt[1]=new ac(iu.NONE,iu.NONE,iu.NONE),this.elt[u].setLocations(h,c,l)}};uc.prototype.getGeometryCount=function(){var t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t},uc.prototype.setAllLocations=function(t,e){this.elt[t].setAllLocations(e)},uc.prototype.isNull=function(t){return this.elt[t].isNull()},uc.prototype.setAllLocationsIfNull=function(){if(1===arguments.length){var t=arguments[0];this.setAllLocationsIfNull(0,t),this.setAllLocationsIfNull(1,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.elt[e].setAllLocationsIfNull(n)}},uc.prototype.isLine=function(t){return this.elt[t].isLine()},uc.prototype.merge=function(t){for(var e=0;e<2;e++)null===this.elt[e]&&null!==t.elt[e]?this.elt[e]=new ac(t.elt[e]):this.elt[e].merge(t.elt[e])},uc.prototype.flip=function(){this.elt[0].flip(),this.elt[1].flip()},uc.prototype.getLocation=function(){if(1===arguments.length){var t=arguments[0];return this.elt[t].get(ec.ON)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return this.elt[e].get(n)}},uc.prototype.toString=function(){var t=new uu;return null!==this.elt[0]&&(t.append("A:"),t.append(this.elt[0].toString())),null!==this.elt[1]&&(t.append(" B:"),t.append(this.elt[1].toString())),t.toString()},uc.prototype.isArea=function(){if(0===arguments.length)return this.elt[0].isArea()||this.elt[1].isArea();if(1===arguments.length){var t=arguments[0];return this.elt[t].isArea()}},uc.prototype.isAnyNull=function(t){return this.elt[t].isAnyNull()},uc.prototype.setLocation=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.elt[t].setLocation(ec.ON,e)}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];this.elt[n].setLocation(i,r)}},uc.prototype.isEqualOnSide=function(t,e){return this.elt[0].isEqualOnSide(t.elt[0],e)&&this.elt[1].isEqualOnSide(t.elt[1],e)},uc.prototype.allPositionsEqual=function(t,e){return this.elt[t].allPositionsEqual(e)},uc.prototype.toLine=function(t){this.elt[t].isArea()&&(this.elt[t]=new ac(this.elt[t].location[0]))},uc.prototype.interfaces_=function(){return[]},uc.prototype.getClass=function(){return uc},uc.toLineLabel=function(t){for(var e=new uc(iu.NONE),n=0;n<2;n++)e.setLocation(n,t.getLocation(n));return e};var hc=function(){this._startDe=null,this._maxNodeDegree=-1,this._edges=new $u,this._pts=new $u,this._label=new uc(iu.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new $u,this._geometryFactory=null;var t=arguments[0],e=arguments[1];this._geometryFactory=e,this.computePoints(t),this.computeRing()};hc.prototype.computeRing=function(){if(null!==this._ring)return null;for(var t=new Array(this._pts.size()).fill(null),e=0;e<this._pts.size();e++)t[e]=this._pts.get(e);this._ring=this._geometryFactory.createLinearRing(t),this._isHole=Fu.isCCW(this._ring.getCoordinates())},hc.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},hc.prototype.computePoints=function(t){this._startDe=t;var e=t,n=!0;do{if(null===e)throw new rc("Found null DirectedEdge");if(e.getEdgeRing()===this)throw new rc("Directed Edge visited twice during ring-building at "+e.getCoordinate());this._edges.add(e);var i=e.getLabel();Nu.isTrue(i.isArea()),this.mergeLabel(i),this.addPoints(e.getEdge(),e.isForward(),n),n=!1,this.setEdgeRing(e,this),e=this.getNext(e)}while(e!==this._startDe)},hc.prototype.getLinearRing=function(){return this._ring},hc.prototype.getCoordinate=function(t){return this._pts.get(t)},hc.prototype.computeMaxNodeDegree=function(){this._maxNodeDegree=0;var t=this._startDe;do{var e=t.getNode().getEdges().getOutgoingDegree(this);e>this._maxNodeDegree&&(this._maxNodeDegree=e),t=this.getNext(t)}while(t!==this._startDe);this._maxNodeDegree*=2},hc.prototype.addPoints=function(t,e,n){var i=t.getCoordinates();if(e){var r=1;n&&(r=0);for(var o=r;o<i.length;o++)this._pts.add(i[o])}else{var s=i.length-2;n&&(s=i.length-1);for(var a=s;a>=0;a--)this._pts.add(i[a])}},hc.prototype.isHole=function(){return this._isHole},hc.prototype.setInResult=function(){var t=this._startDe;do{t.getEdge().setInResult(!0),t=t.getNext()}while(t!==this._startDe)},hc.prototype.containsPoint=function(t){var e=this.getLinearRing();if(!e.getEnvelopeInternal().contains(t))return!1;if(!Fu.isPointInRing(t,e.getCoordinates()))return!1;for(var n=this._holes.iterator();n.hasNext();)if(n.next().containsPoint(t))return!1;return!0},hc.prototype.addHole=function(t){this._holes.add(t)},hc.prototype.isShell=function(){return null===this._shell},hc.prototype.getLabel=function(){return this._label},hc.prototype.getEdges=function(){return this._edges},hc.prototype.getMaxNodeDegree=function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree},hc.prototype.getShell=function(){return this._shell},hc.prototype.mergeLabel=function(){if(1===arguments.length){var t=arguments[0];this.mergeLabel(t,0),this.mergeLabel(t,1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],i=e.getLocation(n,ec.RIGHT);if(i===iu.NONE)return null;if(this._label.getLocation(n)===iu.NONE)return this._label.setLocation(n,i),null}},hc.prototype.setShell=function(t){this._shell=t,null!==t&&t.addHole(this)},hc.prototype.toPolygon=function(t){for(var e=new Array(this._holes.size()).fill(null),n=0;n<this._holes.size();n++)e[n]=this._holes.get(n).getLinearRing();return t.createPolygon(this.getLinearRing(),e)},hc.prototype.interfaces_=function(){return[]},hc.prototype.getClass=function(){return hc};var cc=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setEdgeRing=function(t,e){t.setMinEdgeRing(e)},e.prototype.getNext=function(t){return t.getNextMin()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(hc),lc=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.buildMinimalRings=function(){var t=new $u,e=this._startDe;do{if(null===e.getMinEdgeRing()){var n=new cc(e,this._geometryFactory);t.add(n)}e=e.getNext()}while(e!==this._startDe);return t},e.prototype.setEdgeRing=function(t,e){t.setEdgeRing(e)},e.prototype.linkDirectedEdgesForMinimalEdgeRings=function(){var t=this._startDe;do{t.getNode().getEdges().linkMinimalDirectedEdges(this),t=t.getNext()}while(t!==this._startDe)},e.prototype.getNext=function(t){return t.getNext()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(hc),pc=function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._label=t}};pc.prototype.setVisited=function(t){this._isVisited=t},pc.prototype.setInResult=function(t){this._isInResult=t},pc.prototype.isCovered=function(){return this._isCovered},pc.prototype.isCoveredSet=function(){return this._isCoveredSet},pc.prototype.setLabel=function(t){this._label=t},pc.prototype.getLabel=function(){return this._label},pc.prototype.setCovered=function(t){this._isCovered=t,this._isCoveredSet=!0},pc.prototype.updateIM=function(t){Nu.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(t)},pc.prototype.isInResult=function(){return this._isInResult},pc.prototype.isVisited=function(){return this._isVisited},pc.prototype.interfaces_=function(){return[]},pc.prototype.getClass=function(){return pc};var fc=function(t){function e(){t.call(this),this._coord=null,this._edges=null;var e=arguments[0],n=arguments[1];this._coord=e,this._edges=n,this._label=new uc(0,iu.NONE)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isIncidentEdgeInResult=function(){for(var t=this.getEdges().getEdges().iterator();t.hasNext();)if(t.next().getEdge().isInResult())return!0;return!1},e.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},e.prototype.getCoordinate=function(){return this._coord},e.prototype.print=function(t){t.println("node "+this._coord+" lbl: "+this._label)},e.prototype.computeIM=function(t){},e.prototype.computeMergedLocation=function(t,e){var n=iu.NONE;if(n=this._label.getLocation(e),!t.isNull(e)){var i=t.getLocation(e);n!==iu.BOUNDARY&&(n=i)}return n},e.prototype.setLabel=function(){if(2!==arguments.length)return t.prototype.setLabel.apply(this,arguments);var e=arguments[0],n=arguments[1];null===this._label?this._label=new uc(e,n):this._label.setLocation(e,n)},e.prototype.getEdges=function(){return this._edges},e.prototype.mergeLabel=function(){if(arguments[0]instanceof e){var t=arguments[0];this.mergeLabel(t._label)}else if(arguments[0]instanceof uc)for(var n=arguments[0],i=0;i<2;i++){var r=this.computeMergedLocation(n,i);this._label.getLocation(i)===iu.NONE&&this._label.setLocation(i,r)}},e.prototype.add=function(t){this._edges.insert(t),t.setNode(this)},e.prototype.setLabelBoundary=function(t){if(null===this._label)return null;var e=iu.NONE;null!==this._label&&(e=this._label.getLocation(t));var n=null;switch(e){case iu.BOUNDARY:n=iu.INTERIOR;break;case iu.INTERIOR:default:n=iu.BOUNDARY}this._label.setLocation(t,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(pc),dc=function(){this.nodeMap=new Or,this.nodeFact=null;var t=arguments[0];this.nodeFact=t};dc.prototype.find=function(t){return this.nodeMap.get(t)},dc.prototype.addNode=function(){if(arguments[0]instanceof $a){var t=arguments[0],e=this.nodeMap.get(t);return null===e&&(e=this.nodeFact.createNode(t),this.nodeMap.put(t,e)),e}if(arguments[0]instanceof fc){var n=arguments[0],i=this.nodeMap.get(n.getCoordinate());return null===i?(this.nodeMap.put(n.getCoordinate(),n),n):(i.mergeLabel(n),i)}},dc.prototype.print=function(t){for(var e=this.iterator();e.hasNext();)e.next().print(t)},dc.prototype.iterator=function(){return this.nodeMap.values().iterator()},dc.prototype.values=function(){return this.nodeMap.values()},dc.prototype.getBoundaryNodes=function(t){for(var e=new $u,n=this.iterator();n.hasNext();){var i=n.next();i.getLabel().getLocation(t)===iu.BOUNDARY&&e.add(i)}return e},dc.prototype.add=function(t){var e=t.getCoordinate();this.addNode(e).add(t)},dc.prototype.interfaces_=function(){return[]},dc.prototype.getClass=function(){return dc};var gc=function(){},yc={NE:{configurable:!0},NW:{configurable:!0},SW:{configurable:!0},SE:{configurable:!0}};gc.prototype.interfaces_=function(){return[]},gc.prototype.getClass=function(){return gc},gc.isNorthern=function(t){return t===gc.NE||t===gc.NW},gc.isOpposite=function(t,e){return t!==e&&2==(t-e+4)%4},gc.commonHalfPlane=function(t,e){if(t===e)return t;if(2==(t-e+4)%4)return-1;var n=t<e?t:e;return 0===n&&3===(t>e?t:e)?3:n},gc.isInHalfPlane=function(t,e){return e===gc.SE?t===gc.SE||t===gc.SW:t===e||t===e+1},gc.quadrant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new Wa("Cannot compute the quadrant for point ( "+t+", "+e+" )");return t>=0?e>=0?gc.NE:gc.SE:e>=0?gc.NW:gc.SW}if(arguments[0]instanceof $a&&arguments[1]instanceof $a){var n=arguments[0],i=arguments[1];if(i.x===n.x&&i.y===n.y)throw new Wa("Cannot compute the quadrant for two identical points "+n);return i.x>=n.x?i.y>=n.y?gc.NE:gc.SE:i.y>=n.y?gc.NW:gc.SW}},yc.NE.get=function(){return 0},yc.NW.get=function(){return 1},yc.SW.get=function(){return 2},yc.SE.get=function(){return 3},Object.defineProperties(gc,yc);var _c=function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,1===arguments.length){var t=arguments[0];this._edge=t}else if(3===arguments.length){var e=arguments[0],n=arguments[1],i=arguments[2];this._edge=e,this.init(n,i),this._label=null}else if(4===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];this._edge=r,this.init(o,s),this._label=a}};_c.prototype.compareDirection=function(t){return this._dx===t._dx&&this._dy===t._dy?0:this._quadrant>t._quadrant?1:this._quadrant<t._quadrant?-1:Fu.computeOrientation(t._p0,t._p1,this._p1)},_c.prototype.getDy=function(){return this._dy},_c.prototype.getCoordinate=function(){return this._p0},_c.prototype.setNode=function(t){this._node=t},_c.prototype.print=function(t){var e=Math.atan2(this._dy,this._dx),n=this.getClass().getName(),i=n.lastIndexOf("."),r=n.substring(i+1);t.print("  "+r+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+e+"   "+this._label)},_c.prototype.compareTo=function(t){var e=t;return this.compareDirection(e)},_c.prototype.getDirectedCoordinate=function(){return this._p1},_c.prototype.getDx=function(){return this._dx},_c.prototype.getLabel=function(){return this._label},_c.prototype.getEdge=function(){return this._edge},_c.prototype.getQuadrant=function(){return this._quadrant},_c.prototype.getNode=function(){return this._node},_c.prototype.toString=function(){var t=Math.atan2(this._dy,this._dx),e=this.getClass().getName(),n=e.lastIndexOf(".");return"  "+e.substring(n+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label},_c.prototype.computeLabel=function(t){},_c.prototype.init=function(t,e){this._p0=t,this._p1=e,this._dx=e.x-t.x,this._dy=e.y-t.y,this._quadrant=gc.quadrant(this._dx,this._dy),Nu.isTrue(!(0===this._dx&&0===this._dy),"EdgeEnd with identical endpoints found")},_c.prototype.interfaces_=function(){return[Za]},_c.prototype.getClass=function(){return _c};var vc=function(t){function e(){var e=arguments[0],n=arguments[1];if(t.call(this,e),this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999],this._isForward=n,n)this.init(e.getCoordinate(0),e.getCoordinate(1));else{var i=e.getNumPoints()-1;this.init(e.getCoordinate(i),e.getCoordinate(i-1))}this.computeDirectedLabel()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getNextMin=function(){return this._nextMin},e.prototype.getDepth=function(t){return this._depth[t]},e.prototype.setVisited=function(t){this._isVisited=t},e.prototype.computeDirectedLabel=function(){this._label=new uc(this._edge.getLabel()),this._isForward||this._label.flip()},e.prototype.getNext=function(){return this._next},e.prototype.setDepth=function(t,e){if(-999!==this._depth[t]&&this._depth[t]!==e)throw new rc("assigned depths do not match",this.getCoordinate());this._depth[t]=e},e.prototype.isInteriorAreaEdge=function(){for(var t=!0,e=0;e<2;e++)this._label.isArea(e)&&this._label.getLocation(e,ec.LEFT)===iu.INTERIOR&&this._label.getLocation(e,ec.RIGHT)===iu.INTERIOR||(t=!1);return t},e.prototype.setNextMin=function(t){this._nextMin=t},e.prototype.print=function(e){t.prototype.print.call(this,e),e.print(" "+this._depth[ec.LEFT]+"/"+this._depth[ec.RIGHT]),e.print(" ("+this.getDepthDelta()+")"),this._isInResult&&e.print(" inResult")},e.prototype.setMinEdgeRing=function(t){this._minEdgeRing=t},e.prototype.isLineEdge=function(){var t=this._label.isLine(0)||this._label.isLine(1),e=!this._label.isArea(0)||this._label.allPositionsEqual(0,iu.EXTERIOR),n=!this._label.isArea(1)||this._label.allPositionsEqual(1,iu.EXTERIOR);return t&&e&&n},e.prototype.setEdgeRing=function(t){this._edgeRing=t},e.prototype.getMinEdgeRing=function(){return this._minEdgeRing},e.prototype.getDepthDelta=function(){var t=this._edge.getDepthDelta();return this._isForward||(t=-t),t},e.prototype.setInResult=function(t){this._isInResult=t},e.prototype.getSym=function(){return this._sym},e.prototype.isForward=function(){return this._isForward},e.prototype.getEdge=function(){return this._edge},e.prototype.printEdge=function(t){this.print(t),t.print(" "),this._isForward?this._edge.print(t):this._edge.printReverse(t)},e.prototype.setSym=function(t){this._sym=t},e.prototype.setVisitedEdge=function(t){this.setVisited(t),this._sym.setVisited(t)},e.prototype.setEdgeDepths=function(t,e){var n=this.getEdge().getDepthDelta();this._isForward||(n=-n);var i=1;t===ec.LEFT&&(i=-1);var r=ec.opposite(t),o=e+n*i;this.setDepth(t,e),this.setDepth(r,o)},e.prototype.getEdgeRing=function(){return this._edgeRing},e.prototype.isInResult=function(){return this._isInResult},e.prototype.setNext=function(t){this._next=t},e.prototype.isVisited=function(){return this._isVisited},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.depthFactor=function(t,e){return t===iu.EXTERIOR&&e===iu.INTERIOR?1:t===iu.INTERIOR&&e===iu.EXTERIOR?-1:0},e}(_c),mc=function(){};mc.prototype.createNode=function(t){return new fc(t,null)},mc.prototype.interfaces_=function(){return[]},mc.prototype.getClass=function(){return mc};var Ec=function(){if(this._edges=new $u,this._nodes=null,this._edgeEndList=new $u,0===arguments.length)this._nodes=new dc(new mc);else if(1===arguments.length){var t=arguments[0];this._nodes=new dc(t)}};Ec.prototype.printEdges=function(t){t.println("Edges:");for(var e=0;e<this._edges.size();e++){t.println("edge "+e+":");var n=this._edges.get(e);n.print(t),n.eiList.print(t)}},Ec.prototype.find=function(t){return this._nodes.find(t)},Ec.prototype.addNode=function(){if(arguments[0]instanceof fc){var t=arguments[0];return this._nodes.addNode(t)}if(arguments[0]instanceof $a){var e=arguments[0];return this._nodes.addNode(e)}},Ec.prototype.getNodeIterator=function(){return this._nodes.iterator()},Ec.prototype.linkResultDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkResultDirectedEdges()},Ec.prototype.debugPrintln=function(t){mu.out.println(t)},Ec.prototype.isBoundaryNode=function(t,e){var n=this._nodes.find(e);if(null===n)return!1;var i=n.getLabel();return null!==i&&i.getLocation(t)===iu.BOUNDARY},Ec.prototype.linkAllDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkAllDirectedEdges()},Ec.prototype.matchInSameDirection=function(t,e,n,i){return!!t.equals(n)&&Fu.computeOrientation(t,e,i)===Fu.COLLINEAR&&gc.quadrant(t,e)===gc.quadrant(n,i)},Ec.prototype.getEdgeEnds=function(){return this._edgeEndList},Ec.prototype.debugPrint=function(t){mu.out.print(t)},Ec.prototype.getEdgeIterator=function(){return this._edges.iterator()},Ec.prototype.findEdgeInSameDirection=function(t,e){for(var n=0;n<this._edges.size();n++){var i=this._edges.get(n),r=i.getCoordinates();if(this.matchInSameDirection(t,e,r[0],r[1]))return i;if(this.matchInSameDirection(t,e,r[r.length-1],r[r.length-2]))return i}return null},Ec.prototype.insertEdge=function(t){this._edges.add(t)},Ec.prototype.findEdgeEnd=function(t){for(var e=this.getEdgeEnds().iterator();e.hasNext();){var n=e.next();if(n.getEdge()===t)return n}return null},Ec.prototype.addEdges=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this._edges.add(n);var i=new vc(n,!0),r=new vc(n,!1);i.setSym(r),r.setSym(i),this.add(i),this.add(r)}},Ec.prototype.add=function(t){this._nodes.add(t),this._edgeEndList.add(t)},Ec.prototype.getNodes=function(){return this._nodes.values()},Ec.prototype.findEdge=function(t,e){for(var n=0;n<this._edges.size();n++){var i=this._edges.get(n),r=i.getCoordinates();if(t.equals(r[0])&&e.equals(r[1]))return i}return null},Ec.prototype.interfaces_=function(){return[]},Ec.prototype.getClass=function(){return Ec},Ec.linkResultDirectedEdges=function(t){for(var e=t.iterator();e.hasNext();)e.next().getEdges().linkResultDirectedEdges()};var xc=function(){this._geometryFactory=null,this._shellList=new $u;var t=arguments[0];this._geometryFactory=t};xc.prototype.sortShellsAndHoles=function(t,e,n){for(var i=t.iterator();i.hasNext();){var r=i.next();r.isHole()?n.add(r):e.add(r)}},xc.prototype.computePolygons=function(t){for(var e=new $u,n=t.iterator();n.hasNext();){var i=n.next().toPolygon(this._geometryFactory);e.add(i)}return e},xc.prototype.placeFreeHoles=function(t,e){for(var n=e.iterator();n.hasNext();){var i=n.next();if(null===i.getShell()){var r=this.findEdgeRingContaining(i,t);if(null===r)throw new rc("unable to assign hole to a shell",i.getCoordinate(0));i.setShell(r)}}},xc.prototype.buildMinimalEdgeRings=function(t,e,n){for(var i=new $u,r=t.iterator();r.hasNext();){var o=r.next();if(o.getMaxNodeDegree()>2){o.linkDirectedEdgesForMinimalEdgeRings();var s=o.buildMinimalRings(),a=this.findShell(s);null!==a?(this.placePolygonHoles(a,s),e.add(a)):n.addAll(s)}else i.add(o)}return i},xc.prototype.containsPoint=function(t){for(var e=this._shellList.iterator();e.hasNext();)if(e.next().containsPoint(t))return!0;return!1},xc.prototype.buildMaximalEdgeRings=function(t){for(var e=new $u,n=t.iterator();n.hasNext();){var i=n.next();if(i.isInResult()&&i.getLabel().isArea()&&null===i.getEdgeRing()){var r=new lc(i,this._geometryFactory);e.add(r),r.setInResult()}}return e},xc.prototype.placePolygonHoles=function(t,e){for(var n=e.iterator();n.hasNext();){var i=n.next();i.isHole()&&i.setShell(t)}},xc.prototype.getPolygons=function(){return this.computePolygons(this._shellList)},xc.prototype.findEdgeRingContaining=function(t,e){for(var n=t.getLinearRing(),i=n.getEnvelopeInternal(),r=n.getCoordinateN(0),o=null,s=null,a=e.iterator();a.hasNext();){var u=a.next(),h=u.getLinearRing(),c=h.getEnvelopeInternal();null!==o&&(s=o.getLinearRing().getEnvelopeInternal());var l=!1;c.contains(i)&&Fu.isPointInRing(r,h.getCoordinates())&&(l=!0),l&&(null===o||s.contains(c))&&(o=u)}return o},xc.prototype.findShell=function(t){for(var e=0,n=null,i=t.iterator();i.hasNext();){var r=i.next();r.isHole()||(n=r,e++)}return Nu.isTrue(e<=1,"found two shells in MinimalEdgeRing list"),n},xc.prototype.add=function(){if(1===arguments.length){var t=arguments[0];this.add(t.getEdgeEnds(),t.getNodes())}else if(2===arguments.length){var e=arguments[0],n=arguments[1];Ec.linkResultDirectedEdges(n);var i=this.buildMaximalEdgeRings(e),r=new $u,o=this.buildMinimalEdgeRings(i,this._shellList,r);this.sortShellsAndHoles(o,this._shellList,r),this.placeFreeHoles(this._shellList,r)}},xc.prototype.interfaces_=function(){return[]},xc.prototype.getClass=function(){return xc};var bc=function(){};bc.prototype.getBounds=function(){},bc.prototype.interfaces_=function(){return[]},bc.prototype.getClass=function(){return bc};var wc=function(){this._bounds=null,this._item=null;var t=arguments[0],e=arguments[1];this._bounds=t,this._item=e};wc.prototype.getItem=function(){return this._item},wc.prototype.getBounds=function(){return this._bounds},wc.prototype.interfaces_=function(){return[bc,yr]},wc.prototype.getClass=function(){return wc};var Cc=function(){this._size=null,this._items=null,this._size=0,this._items=new $u,this._items.add(null)};Cc.prototype.poll=function(){if(this.isEmpty())return null;var t=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),t},Cc.prototype.size=function(){return this._size},Cc.prototype.reorder=function(t){for(var e=null,n=this._items.get(t);2*t<=this._size&&((e=2*t)!==this._size&&this._items.get(e+1).compareTo(this._items.get(e))<0&&e++,this._items.get(e).compareTo(n)<0);t=e)this._items.set(t,this._items.get(e));this._items.set(t,n)},Cc.prototype.clear=function(){this._size=0,this._items.clear()},Cc.prototype.isEmpty=function(){return 0===this._size},Cc.prototype.add=function(t){this._items.add(null),this._size+=1;var e=this._size;for(this._items.set(0,t);t.compareTo(this._items.get(Math.trunc(e/2)))<0;e/=2)this._items.set(e,this._items.get(Math.trunc(e/2)));this._items.set(e,t)},Cc.prototype.interfaces_=function(){return[]},Cc.prototype.getClass=function(){return Cc};var Oc=function(){};Oc.prototype.visitItem=function(t){},Oc.prototype.interfaces_=function(){return[]},Oc.prototype.getClass=function(){return Oc};var Ic=function(){};Ic.prototype.insert=function(t,e){},Ic.prototype.remove=function(t,e){},Ic.prototype.query=function(){},Ic.prototype.interfaces_=function(){return[]},Ic.prototype.getClass=function(){return Ic};var Sc=function(){if(this._childBoundables=new $u,this._bounds=null,this._level=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._level=t}},Tc={serialVersionUID:{configurable:!0}};Sc.prototype.getLevel=function(){return this._level},Sc.prototype.size=function(){return this._childBoundables.size()},Sc.prototype.getChildBoundables=function(){return this._childBoundables},Sc.prototype.addChildBoundable=function(t){Nu.isTrue(null===this._bounds),this._childBoundables.add(t)},Sc.prototype.isEmpty=function(){return this._childBoundables.isEmpty()},Sc.prototype.getBounds=function(){return null===this._bounds&&(this._bounds=this.computeBounds()),this._bounds},Sc.prototype.interfaces_=function(){return[bc,yr]},Sc.prototype.getClass=function(){return Sc},Tc.serialVersionUID.get=function(){return 0x5a1e55ec41369800},Object.defineProperties(Sc,Tc);var Rc=function(){};Rc.reverseOrder=function(){return{compare:function(t,e){return e.compareTo(t)}}},Rc.min=function(t){return Rc.sort(t),t.get(0)},Rc.sort=function(t,e){var n=t.toArray();e?fh.sort(n,e):fh.sort(n);for(var i=t.iterator(),r=0,o=n.length;r<o;r++)i.next(),i.set(n[r])},Rc.singletonList=function(t){var e=new $u;return e.add(t),e};var Nc=function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var t=arguments[0],e=arguments[1],n=arguments[2];this._boundable1=t,this._boundable2=e,this._itemDistance=n,this._distance=this.distance()};Nc.prototype.expandToQueue=function(t,e){var n=Nc.isComposite(this._boundable1),i=Nc.isComposite(this._boundable2);if(n&&i)return Nc.area(this._boundable1)>Nc.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,t,e),null):(this.expand(this._boundable2,this._boundable1,t,e),null);if(n)return this.expand(this._boundable1,this._boundable2,t,e),null;if(i)return this.expand(this._boundable2,this._boundable1,t,e),null;throw new Wa("neither boundable is composite")},Nc.prototype.isLeaves=function(){return!(Nc.isComposite(this._boundable1)||Nc.isComposite(this._boundable2))},Nc.prototype.compareTo=function(t){var e=t;return this._distance<e._distance?-1:this._distance>e._distance?1:0},Nc.prototype.expand=function(t,e,n,i){for(var r=t.getChildBoundables().iterator();r.hasNext();){var o=r.next(),s=new Nc(o,e,this._itemDistance);s.getDistance()<i&&n.add(s)}},Nc.prototype.getBoundable=function(t){return 0===t?this._boundable1:this._boundable2},Nc.prototype.getDistance=function(){return this._distance},Nc.prototype.distance=function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())},Nc.prototype.interfaces_=function(){return[Za]},Nc.prototype.getClass=function(){return Nc},Nc.area=function(t){return t.getBounds().getArea()},Nc.isComposite=function(t){return t instanceof Sc};var Lc=function t(){if(this._root=null,this._built=!1,this._itemBoundables=new $u,this._nodeCapacity=null,0===arguments.length){var e=t.DEFAULT_NODE_CAPACITY;this._nodeCapacity=e}else if(1===arguments.length){var n=arguments[0];Nu.isTrue(n>1,"Node capacity must be greater than 1"),this._nodeCapacity=n}},Mc={IntersectsOp:{configurable:!0},serialVersionUID:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};Lc.prototype.getNodeCapacity=function(){return this._nodeCapacity},Lc.prototype.lastNode=function(t){return t.get(t.size()-1)},Lc.prototype.size=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.size(this._root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var n=e.next();n instanceof Sc?t+=this.size(n):n instanceof wc&&(t+=1)}return t}},Lc.prototype.removeItem=function(t,e){for(var n=null,i=t.getChildBoundables().iterator();i.hasNext();){var r=i.next();r instanceof wc&&r.getItem()===e&&(n=r)}return null!==n&&(t.getChildBoundables().remove(n),!0)},Lc.prototype.itemsTree=function(){if(0===arguments.length){this.build();var t=this.itemsTree(this._root);return null===t?new $u:t}if(1===arguments.length){for(var e=arguments[0],n=new $u,i=e.getChildBoundables().iterator();i.hasNext();){var r=i.next();if(r instanceof Sc){var o=this.itemsTree(r);null!==o&&n.add(o)}else r instanceof wc?n.add(r.getItem()):Nu.shouldNeverReachHere()}return n.size()<=0?null:n}},Lc.prototype.insert=function(t,e){Nu.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new wc(t,e))},Lc.prototype.boundablesAtLevel=function(){if(1===arguments.length){var t=arguments[0],e=new $u;return this.boundablesAtLevel(t,this._root,e),e}if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];if(Nu.isTrue(n>-2),i.getLevel()===n)return r.add(i),null;for(var o=i.getChildBoundables().iterator();o.hasNext();){var s=o.next();s instanceof Sc?this.boundablesAtLevel(n,s,r):(Nu.isTrue(s instanceof wc),-1===n&&r.add(s))}return null}},Lc.prototype.query=function(){if(1===arguments.length){var t=arguments[0];this.build();var e=new $u;return this.isEmpty()?e:(this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.query(t,this._root,e),e)}if(2===arguments.length){var n=arguments[0],i=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),n)&&this.query(n,this._root,i)}else if(3===arguments.length)if(ou(arguments[2],Oc)&&arguments[0]instanceof Object&&arguments[1]instanceof Sc)for(var r=arguments[0],o=arguments[1],s=arguments[2],a=o.getChildBoundables(),u=0;u<a.size();u++){var h=a.get(u);this.getIntersectsOp().intersects(h.getBounds(),r)&&(h instanceof Sc?this.query(r,h,s):h instanceof wc?s.visitItem(h.getItem()):Nu.shouldNeverReachHere())}else if(ou(arguments[2],Qu)&&arguments[0]instanceof Object&&arguments[1]instanceof Sc)for(var c=arguments[0],l=arguments[1],p=arguments[2],f=l.getChildBoundables(),d=0;d<f.size();d++){var g=f.get(d);this.getIntersectsOp().intersects(g.getBounds(),c)&&(g instanceof Sc?this.query(c,g,p):g instanceof wc?p.add(g.getItem()):Nu.shouldNeverReachHere())}},Lc.prototype.build=function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0},Lc.prototype.getRoot=function(){return this.build(),this._root},Lc.prototype.remove=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.remove(t,this._root,e)}if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2],o=this.removeItem(i,r);if(o)return!0;for(var s=null,a=i.getChildBoundables().iterator();a.hasNext();){var u=a.next();if(this.getIntersectsOp().intersects(u.getBounds(),n)&&u instanceof Sc&&(o=this.remove(n,u,r))){s=u;break}}return null!==s&&s.getChildBoundables().isEmpty()&&i.getChildBoundables().remove(s),o}},Lc.prototype.createHigherLevels=function(t,e){Nu.isTrue(!t.isEmpty());var n=this.createParentBoundables(t,e+1);return 1===n.size()?n.get(0):this.createHigherLevels(n,e+1)},Lc.prototype.depth=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var n=e.next();if(n instanceof Sc){var i=this.depth(n);i>t&&(t=i)}}return t+1}},Lc.prototype.createParentBoundables=function(t,e){Nu.isTrue(!t.isEmpty());var n=new $u;n.add(this.createNode(e));var i=new $u(t);Rc.sort(i,this.getComparator());for(var r=i.iterator();r.hasNext();){var o=r.next();this.lastNode(n).getChildBoundables().size()===this.getNodeCapacity()&&n.add(this.createNode(e)),this.lastNode(n).addChildBoundable(o)}return n},Lc.prototype.isEmpty=function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()},Lc.prototype.interfaces_=function(){return[yr]},Lc.prototype.getClass=function(){return Lc},Lc.compareDoubles=function(t,e){return t>e?1:t<e?-1:0},Mc.IntersectsOp.get=function(){return Pc},Mc.serialVersionUID.get=function(){return-0x35ef64c82d4c5400},Mc.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(Lc,Mc);var Pc=function(){},Ac=function(){};Ac.prototype.distance=function(t,e){},Ac.prototype.interfaces_=function(){return[]},Ac.prototype.getClass=function(){return Ac};var Dc=function(t){function e(n){n=n||e.DEFAULT_NODE_CAPACITY,t.call(this,n)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={STRtreeNode:{configurable:!0},serialVersionUID:{configurable:!0},xComparator:{configurable:!0},yComparator:{configurable:!0},intersectsOp:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};return e.prototype.createParentBoundablesFromVerticalSlices=function(t,e){Nu.isTrue(t.length>0);for(var n=new $u,i=0;i<t.length;i++)n.addAll(this.createParentBoundablesFromVerticalSlice(t[i],e));return n},e.prototype.createNode=function(t){return new Fc(t)},e.prototype.size=function(){return 0===arguments.length?t.prototype.size.call(this):t.prototype.size.apply(this,arguments)},e.prototype.insert=function(){if(2!==arguments.length)return t.prototype.insert.apply(this,arguments);var e=arguments[0],n=arguments[1];if(e.isNull())return null;t.prototype.insert.call(this,e,n)},e.prototype.getIntersectsOp=function(){return e.intersectsOp},e.prototype.verticalSlices=function(t,e){for(var n=Math.trunc(Math.ceil(t.size()/e)),i=new Array(e).fill(null),r=t.iterator(),o=0;o<e;o++){i[o]=new $u;for(var s=0;r.hasNext()&&s<n;){var a=r.next();i[o].add(a),s++}}return i},e.prototype.query=function(){if(1===arguments.length){var e=arguments[0];return t.prototype.query.call(this,e)}if(2===arguments.length){var n=arguments[0],i=arguments[1];t.prototype.query.call(this,n,i)}else if(3===arguments.length)if(ou(arguments[2],Oc)&&arguments[0]instanceof Object&&arguments[1]instanceof Sc){var r=arguments[0],o=arguments[1],s=arguments[2];t.prototype.query.call(this,r,o,s)}else if(ou(arguments[2],Qu)&&arguments[0]instanceof Object&&arguments[1]instanceof Sc){var a=arguments[0],u=arguments[1],h=arguments[2];t.prototype.query.call(this,a,u,h)}},e.prototype.getComparator=function(){return e.yComparator},e.prototype.createParentBoundablesFromVerticalSlice=function(e,n){return t.prototype.createParentBoundables.call(this,e,n)},e.prototype.remove=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return t.prototype.remove.call(this,e,n)}return t.prototype.remove.apply(this,arguments)},e.prototype.depth=function(){return 0===arguments.length?t.prototype.depth.call(this):t.prototype.depth.apply(this,arguments)},e.prototype.createParentBoundables=function(t,n){Nu.isTrue(!t.isEmpty());var i=Math.trunc(Math.ceil(t.size()/this.getNodeCapacity())),r=new $u(t);Rc.sort(r,e.xComparator);var o=this.verticalSlices(r,Math.trunc(Math.ceil(Math.sqrt(i))));return this.createParentBoundablesFromVerticalSlices(o,n)},e.prototype.nearestNeighbour=function(){if(1===arguments.length){if(ou(arguments[0],Ac)){var t=arguments[0],n=new Nc(this.getRoot(),this.getRoot(),t);return this.nearestNeighbour(n)}if(arguments[0]instanceof Nc){var i=arguments[0];return this.nearestNeighbour(i,Ka.POSITIVE_INFINITY)}}else if(2===arguments.length){if(arguments[0]instanceof e&&ou(arguments[1],Ac)){var r=arguments[0],o=arguments[1],s=new Nc(this.getRoot(),r.getRoot(),o);return this.nearestNeighbour(s)}if(arguments[0]instanceof Nc&&"number"==typeof arguments[1]){var a=arguments[0],u=arguments[1],h=null,c=new Cc;for(c.add(a);!c.isEmpty()&&u>0;){var l=c.poll(),p=l.getDistance();if(p>=u)break;l.isLeaves()?(u=p,h=l):l.expandToQueue(c,u)}return[h.getBoundable(0).getItem(),h.getBoundable(1).getItem()]}}else if(3===arguments.length){var f=arguments[0],d=arguments[1],g=arguments[2],y=new wc(f,d),_=new Nc(this.getRoot(),y,g);return this.nearestNeighbour(_)[0]}},e.prototype.interfaces_=function(){return[Ic,yr]},e.prototype.getClass=function(){return e},e.centreX=function(t){return e.avg(t.getMinX(),t.getMaxX())},e.avg=function(t,e){return(t+e)/2},e.centreY=function(t){return e.avg(t.getMinY(),t.getMaxY())},n.STRtreeNode.get=function(){return Fc},n.serialVersionUID.get=function(){return 0x39920f7d5f261e0},n.xComparator.get=function(){return{interfaces_:function(){return[Qa]},compare:function(n,i){return t.compareDoubles(e.centreX(n.getBounds()),e.centreX(i.getBounds()))}}},n.yComparator.get=function(){return{interfaces_:function(){return[Qa]},compare:function(n,i){return t.compareDoubles(e.centreY(n.getBounds()),e.centreY(i.getBounds()))}}},n.intersectsOp.get=function(){return{interfaces_:function(){return[t.IntersectsOp]},intersects:function(t,e){return t.intersects(e)}}},n.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(e,n),e}(Lc),Fc=function(t){function e(){var e=arguments[0];t.call(this,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.computeBounds=function(){for(var t=null,e=this.getChildBoundables().iterator();e.hasNext();){var n=e.next();null===t?t=new xu(n.getBounds()):t.expandToInclude(n.getBounds())}return t},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Sc),jc=function(){};jc.prototype.interfaces_=function(){return[]},jc.prototype.getClass=function(){return jc},jc.relativeSign=function(t,e){return t<e?-1:t>e?1:0},jc.compare=function(t,e,n){if(e.equals2D(n))return 0;var i=jc.relativeSign(e.x,n.x),r=jc.relativeSign(e.y,n.y);switch(t){case 0:return jc.compareValue(i,r);case 1:return jc.compareValue(r,i);case 2:return jc.compareValue(r,-i);case 3:return jc.compareValue(-i,r);case 4:return jc.compareValue(-i,-r);case 5:return jc.compareValue(-r,-i);case 6:return jc.compareValue(-r,i);case 7:return jc.compareValue(i,-r)}return Nu.shouldNeverReachHere("invalid octant value"),0},jc.compareValue=function(t,e){return t<0?-1:t>0?1:e<0?-1:e>0?1:0};var Gc=function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];this._segString=t,this.coord=new $a(e),this.segmentIndex=n,this._segmentOctant=i,this._isInterior=!e.equals2D(t.getCoordinate(n))};Gc.prototype.getCoordinate=function(){return this.coord},Gc.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex)},Gc.prototype.compareTo=function(t){var e=t;return this.segmentIndex<e.segmentIndex?-1:this.segmentIndex>e.segmentIndex?1:this.coord.equals2D(e.coord)?0:jc.compare(this._segmentOctant,this.coord,e.coord)},Gc.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&!this._isInterior||this.segmentIndex===t},Gc.prototype.isInterior=function(){return this._isInterior},Gc.prototype.interfaces_=function(){return[Za]},Gc.prototype.getClass=function(){return Gc};var kc=function(){this._nodeMap=new Or,this._edge=null;var t=arguments[0];this._edge=t};kc.prototype.getSplitCoordinates=function(){var t=new eh;this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var i=e.next();this.addEdgeCoordinates(n,i,t),n=i}return t.toCoordinateArray()},kc.prototype.addCollapsedNodes=function(){var t=new $u;this.findCollapsesFromInsertedNodes(t),this.findCollapsesFromExistingVertices(t);for(var e=t.iterator();e.hasNext();){var n=e.next().intValue();this.add(this._edge.getCoordinate(n),n)}},kc.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},kc.prototype.findCollapsesFromExistingVertices=function(t){for(var e=0;e<this._edge.size()-2;e++){var n=this._edge.getCoordinate(e),i=this._edge.getCoordinate(e+2);n.equals2D(i)&&t.add(new hu(e+1))}},kc.prototype.addEdgeCoordinates=function(t,e,n){var i=this._edge.getCoordinate(e.segmentIndex),r=e.isInterior()||!e.coord.equals2D(i);n.add(new $a(t.coord),!1);for(var o=t.segmentIndex+1;o<=e.segmentIndex;o++)n.add(this._edge.getCoordinate(o));r&&n.add(new $a(e.coord))},kc.prototype.iterator=function(){return this._nodeMap.values().iterator()},kc.prototype.addSplitEdges=function(t){this.addEndpoints(),this.addCollapsedNodes();for(var e=this.iterator(),n=e.next();e.hasNext();){var i=e.next(),r=this.createSplitEdge(n,i);t.add(r),n=i}},kc.prototype.findCollapseIndex=function(t,e,n){if(!t.coord.equals2D(e.coord))return!1;var i=e.segmentIndex-t.segmentIndex;return e.isInterior()||i--,1===i&&(n[0]=t.segmentIndex+1,!0)},kc.prototype.findCollapsesFromInsertedNodes=function(t){for(var e=new Array(1).fill(null),n=this.iterator(),i=n.next();n.hasNext();){var r=n.next();this.findCollapseIndex(i,r,e)&&t.add(new hu(e[0])),i=r}},kc.prototype.getEdge=function(){return this._edge},kc.prototype.addEndpoints=function(){var t=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(t),t)},kc.prototype.createSplitEdge=function(t,e){var n=e.segmentIndex-t.segmentIndex+2,i=this._edge.getCoordinate(e.segmentIndex),r=e.isInterior()||!e.coord.equals2D(i);r||n--;var o=new Array(n).fill(null),s=0;o[s++]=new $a(t.coord);for(var a=t.segmentIndex+1;a<=e.segmentIndex;a++)o[s++]=this._edge.getCoordinate(a);return r&&(o[s]=new $a(e.coord)),new qc(o,this._edge.getData())},kc.prototype.add=function(t,e){var n=new Gc(this._edge,t,e,this._edge.getSegmentOctant(e)),i=this._nodeMap.get(n);return null!==i?(Nu.isTrue(i.coord.equals2D(t),"Found equal nodes with different coordinates"),i):(this._nodeMap.put(n,n),n)},kc.prototype.checkSplitEdgesCorrectness=function(t){var e=this._edge.getCoordinates(),n=t.get(0).getCoordinate(0);if(!n.equals2D(e[0]))throw new Tu("bad split edge start point at "+n);var i=t.get(t.size()-1).getCoordinates(),r=i[i.length-1];if(!r.equals2D(e[e.length-1]))throw new Tu("bad split edge end point at "+r)},kc.prototype.interfaces_=function(){return[]},kc.prototype.getClass=function(){return kc};var Bc=function(){};Bc.prototype.interfaces_=function(){return[]},Bc.prototype.getClass=function(){return Bc},Bc.octant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new Wa("Cannot compute the octant for point ( "+t+", "+e+" )");var n=Math.abs(t),i=Math.abs(e);return t>=0?e>=0?n>=i?0:1:n>=i?7:6:e>=0?n>=i?3:2:n>=i?4:5}if(arguments[0]instanceof $a&&arguments[1]instanceof $a){var r=arguments[0],o=arguments[1],s=o.x-r.x,a=o.y-r.y;if(0===s&&0===a)throw new Wa("Cannot compute the octant for two identical points "+r);return Bc.octant(s,a)}};var Yc=function(){};Yc.prototype.getCoordinates=function(){},Yc.prototype.size=function(){},Yc.prototype.getCoordinate=function(t){},Yc.prototype.isClosed=function(){},Yc.prototype.setData=function(t){},Yc.prototype.getData=function(){},Yc.prototype.interfaces_=function(){return[]},Yc.prototype.getClass=function(){return Yc};var Xc=function(){};Xc.prototype.addIntersection=function(t,e){},Xc.prototype.interfaces_=function(){return[Yc]},Xc.prototype.getClass=function(){return Xc};var qc=function(){this._nodeList=new kc(this),this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e};qc.prototype.getCoordinates=function(){return this._pts},qc.prototype.size=function(){return this._pts.length},qc.prototype.getCoordinate=function(t){return this._pts[t]},qc.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},qc.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(t),this.getCoordinate(t+1))},qc.prototype.setData=function(t){this._data=t},qc.prototype.safeOctant=function(t,e){return t.equals2D(e)?0:Bc.octant(t,e)},qc.prototype.getData=function(){return this._data},qc.prototype.addIntersection=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.addIntersectionNode(t,e)}else if(4===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[3],o=new $a(n.getIntersection(r));this.addIntersection(o,i)}},qc.prototype.toString=function(){return Su.toLineString(new Gh(this._pts))},qc.prototype.getNodeList=function(){return this._nodeList},qc.prototype.addIntersectionNode=function(t,e){var n=e,i=n+1;if(i<this._pts.length){var r=this._pts[i];t.equals2D(r)&&(n=i)}return this._nodeList.add(t,n)},qc.prototype.addIntersections=function(t,e,n){for(var i=0;i<t.getIntersectionNum();i++)this.addIntersection(t,e,n,i)},qc.prototype.interfaces_=function(){return[Xc]},qc.prototype.getClass=function(){return qc},qc.getNodedSubstrings=function(){if(1===arguments.length){var t=arguments[0],e=new $u;return qc.getNodedSubstrings(t,e),e}if(2===arguments.length)for(var n=arguments[0],i=arguments[1],r=n.iterator();r.hasNext();)r.next().getNodeList().addSplitEdges(i)};var Uc=function(){if(this.p0=null,this.p1=null,0===arguments.length)this.p0=new $a,this.p1=new $a;else if(1===arguments.length){var t=arguments[0];this.p0=new $a(t.p0),this.p1=new $a(t.p1)}else if(2===arguments.length)this.p0=arguments[0],this.p1=arguments[1];else if(4===arguments.length){var e=arguments[0],n=arguments[1],i=arguments[2],r=arguments[3];this.p0=new $a(e,n),this.p1=new $a(i,r)}},zc={serialVersionUID:{configurable:!0}};Uc.prototype.minX=function(){return Math.min(this.p0.x,this.p1.x)},Uc.prototype.orientationIndex=function(){if(arguments[0]instanceof Uc){var t=arguments[0],e=Fu.orientationIndex(this.p0,this.p1,t.p0),n=Fu.orientationIndex(this.p0,this.p1,t.p1);return e>=0&&n>=0?Math.max(e,n):e<=0&&n<=0?Math.max(e,n):0}if(arguments[0]instanceof $a){var i=arguments[0];return Fu.orientationIndex(this.p0,this.p1,i)}},Uc.prototype.toGeometry=function(t){return t.createLineString([this.p0,this.p1])},Uc.prototype.isVertical=function(){return this.p0.x===this.p1.x},Uc.prototype.equals=function(t){if(!(t instanceof Uc))return!1;var e=t;return this.p0.equals(e.p0)&&this.p1.equals(e.p1)},Uc.prototype.intersection=function(t){var e=new Pu;return e.computeIntersection(this.p0,this.p1,t.p0,t.p1),e.hasIntersection()?e.getIntersection(0):null},Uc.prototype.project=function(){if(arguments[0]instanceof $a){var t=arguments[0];if(t.equals(this.p0)||t.equals(this.p1))return new $a(t);var e=this.projectionFactor(t),n=new $a;return n.x=this.p0.x+e*(this.p1.x-this.p0.x),n.y=this.p0.y+e*(this.p1.y-this.p0.y),n}if(arguments[0]instanceof Uc){var i=arguments[0],r=this.projectionFactor(i.p0),o=this.projectionFactor(i.p1);if(r>=1&&o>=1)return null;if(r<=0&&o<=0)return null;var s=this.project(i.p0);r<0&&(s=this.p0),r>1&&(s=this.p1);var a=this.project(i.p1);return o<0&&(a=this.p0),o>1&&(a=this.p1),new Uc(s,a)}},Uc.prototype.normalize=function(){this.p1.compareTo(this.p0)<0&&this.reverse()},Uc.prototype.angle=function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)},Uc.prototype.getCoordinate=function(t){return 0===t?this.p0:this.p1},Uc.prototype.distancePerpendicular=function(t){return Fu.distancePointLinePerpendicular(t,this.p0,this.p1)},Uc.prototype.minY=function(){return Math.min(this.p0.y,this.p1.y)},Uc.prototype.midPoint=function(){return Uc.midPoint(this.p0,this.p1)},Uc.prototype.projectionFactor=function(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;var e=this.p1.x-this.p0.x,n=this.p1.y-this.p0.y,i=e*e+n*n;return i<=0?Ka.NaN:((t.x-this.p0.x)*e+(t.y-this.p0.y)*n)/i},Uc.prototype.closestPoints=function(t){var e=this.intersection(t);if(null!==e)return[e,e];var n=new Array(2).fill(null),i=Ka.MAX_VALUE,r=null,o=this.closestPoint(t.p0);i=o.distance(t.p0),n[0]=o,n[1]=t.p0;var s=this.closestPoint(t.p1);(r=s.distance(t.p1))<i&&(i=r,n[0]=s,n[1]=t.p1);var a=t.closestPoint(this.p0);(r=a.distance(this.p0))<i&&(i=r,n[0]=this.p0,n[1]=a);var u=t.closestPoint(this.p1);return(r=u.distance(this.p1))<i&&(i=r,n[0]=this.p1,n[1]=u),n},Uc.prototype.closestPoint=function(t){var e=this.projectionFactor(t);return e>0&&e<1?this.project(t):this.p0.distance(t)<this.p1.distance(t)?this.p0:this.p1},Uc.prototype.maxX=function(){return Math.max(this.p0.x,this.p1.x)},Uc.prototype.getLength=function(){return this.p0.distance(this.p1)},Uc.prototype.compareTo=function(t){var e=t,n=this.p0.compareTo(e.p0);return 0!==n?n:this.p1.compareTo(e.p1)},Uc.prototype.reverse=function(){var t=this.p0;this.p0=this.p1,this.p1=t},Uc.prototype.equalsTopo=function(t){return this.p0.equals(t.p0)&&(this.p1.equals(t.p1)||this.p0.equals(t.p1))&&this.p1.equals(t.p0)},Uc.prototype.lineIntersection=function(t){try{return Eu.intersection(this.p0,this.p1,t.p0,t.p1)}catch(t){if(!(t instanceof vu))throw t}return null},Uc.prototype.maxY=function(){return Math.max(this.p0.y,this.p1.y)},Uc.prototype.pointAlongOffset=function(t,e){var n=this.p0.x+t*(this.p1.x-this.p0.x),i=this.p0.y+t*(this.p1.y-this.p0.y),r=this.p1.x-this.p0.x,o=this.p1.y-this.p0.y,s=Math.sqrt(r*r+o*o),a=0,u=0;if(0!==e){if(s<=0)throw new Error("Cannot compute offset from zero-length line segment");a=e*r/s,u=e*o/s}return new $a(n-u,i+a)},Uc.prototype.setCoordinates=function(){if(1===arguments.length){var t=arguments[0];this.setCoordinates(t.p0,t.p1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.p0.x=e.x,this.p0.y=e.y,this.p1.x=n.x,this.p1.y=n.y}},Uc.prototype.segmentFraction=function(t){var e=this.projectionFactor(t);return e<0?e=0:(e>1||Ka.isNaN(e))&&(e=1),e},Uc.prototype.toString=function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"},Uc.prototype.isHorizontal=function(){return this.p0.y===this.p1.y},Uc.prototype.distance=function(){if(arguments[0]instanceof Uc){var t=arguments[0];return Fu.distanceLineLine(this.p0,this.p1,t.p0,t.p1)}if(arguments[0]instanceof $a){var e=arguments[0];return Fu.distancePointLine(e,this.p0,this.p1)}},Uc.prototype.pointAlong=function(t){var e=new $a;return e.x=this.p0.x+t*(this.p1.x-this.p0.x),e.y=this.p0.y+t*(this.p1.y-this.p0.y),e},Uc.prototype.hashCode=function(){var t=Ka.doubleToLongBits(this.p0.x);t^=31*Ka.doubleToLongBits(this.p0.y);var e=Math.trunc(t)^Math.trunc(t>>32),n=Ka.doubleToLongBits(this.p1.x);return n^=31*Ka.doubleToLongBits(this.p1.y),e^Math.trunc(n)^Math.trunc(n>>32)},Uc.prototype.interfaces_=function(){return[Za,yr]},Uc.prototype.getClass=function(){return Uc},Uc.midPoint=function(t,e){return new $a((t.x+e.x)/2,(t.y+e.y)/2)},zc.serialVersionUID.get=function(){return 0x2d2172135f411c00},Object.defineProperties(Uc,zc);var Vc=function(){this.tempEnv1=new xu,this.tempEnv2=new xu,this._overlapSeg1=new Uc,this._overlapSeg2=new Uc};Vc.prototype.overlap=function(){if(2===arguments.length);else if(4===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];t.getLineSegment(e,this._overlapSeg1),n.getLineSegment(i,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}},Vc.prototype.interfaces_=function(){return[]},Vc.prototype.getClass=function(){return Vc};var Wc=function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];this._pts=t,this._start=e,this._end=n,this._context=i};Wc.prototype.getLineSegment=function(t,e){e.p0=this._pts[t],e.p1=this._pts[t+1]},Wc.prototype.computeSelect=function(t,e,n,i){var r=this._pts[e],o=this._pts[n];if(i.tempEnv1.init(r,o),n-e==1)return i.select(this,e),null;if(!t.intersects(i.tempEnv1))return null;var s=Math.trunc((e+n)/2);e<s&&this.computeSelect(t,e,s,i),s<n&&this.computeSelect(t,s,n,i)},Wc.prototype.getCoordinates=function(){for(var t=new Array(this._end-this._start+1).fill(null),e=0,n=this._start;n<=this._end;n++)t[e++]=this._pts[n];return t},Wc.prototype.computeOverlaps=function(t,e){this.computeOverlapsInternal(this._start,this._end,t,t._start,t._end,e)},Wc.prototype.setId=function(t){this._id=t},Wc.prototype.select=function(t,e){this.computeSelect(t,this._start,this._end,e)},Wc.prototype.getEnvelope=function(){if(null===this._env){var t=this._pts[this._start],e=this._pts[this._end];this._env=new xu(t,e)}return this._env},Wc.prototype.getEndIndex=function(){return this._end},Wc.prototype.getStartIndex=function(){return this._start},Wc.prototype.getContext=function(){return this._context},Wc.prototype.getId=function(){return this._id},Wc.prototype.computeOverlapsInternal=function(t,e,n,i,r,o){var s=this._pts[t],a=this._pts[e],u=n._pts[i],h=n._pts[r];if(e-t==1&&r-i==1)return o.overlap(this,t,n,i),null;if(o.tempEnv1.init(s,a),o.tempEnv2.init(u,h),!o.tempEnv1.intersects(o.tempEnv2))return null;var c=Math.trunc((t+e)/2),l=Math.trunc((i+r)/2);t<c&&(i<l&&this.computeOverlapsInternal(t,c,n,i,l,o),l<r&&this.computeOverlapsInternal(t,c,n,l,r,o)),c<e&&(i<l&&this.computeOverlapsInternal(c,e,n,i,l,o),l<r&&this.computeOverlapsInternal(c,e,n,l,r,o))},Wc.prototype.interfaces_=function(){return[]},Wc.prototype.getClass=function(){return Wc};var Kc=function(){};Kc.prototype.interfaces_=function(){return[]},Kc.prototype.getClass=function(){return Kc},Kc.getChainStartIndices=function(t){var e=0,n=new $u;n.add(new hu(e));do{var i=Kc.findChainEnd(t,e);n.add(new hu(i)),e=i}while(e<t.length-1);return Kc.toIntArray(n)},Kc.findChainEnd=function(t,e){for(var n=e;n<t.length-1&&t[n].equals2D(t[n+1]);)n++;if(n>=t.length-1)return t.length-1;for(var i=gc.quadrant(t[n],t[n+1]),r=e+1;r<t.length&&(t[r-1].equals2D(t[r])||gc.quadrant(t[r-1],t[r])===i);)r++;return r-1},Kc.getChains=function(){if(1===arguments.length){var t=arguments[0];return Kc.getChains(t,null)}if(2===arguments.length){for(var e=arguments[0],n=arguments[1],i=new $u,r=Kc.getChainStartIndices(e),o=0;o<r.length-1;o++){var s=new Wc(e,r[o],r[o+1],n);i.add(s)}return i}},Kc.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e};var Hc=function(){};Hc.prototype.computeNodes=function(t){},Hc.prototype.getNodedSubstrings=function(){},Hc.prototype.interfaces_=function(){return[]},Hc.prototype.getClass=function(){return Hc};var Zc=function(){if(this._segInt=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.setSegmentIntersector(t)}};Zc.prototype.setSegmentIntersector=function(t){this._segInt=t},Zc.prototype.interfaces_=function(){return[Hc]},Zc.prototype.getClass=function(){return Zc};var Jc=function(t){function e(e){e?t.call(this,e):t.call(this),this._monoChains=new $u,this._index=new Dc,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={SegmentOverlapAction:{configurable:!0}};return e.prototype.getMonotoneChains=function(){return this._monoChains},e.prototype.getNodedSubstrings=function(){return qc.getNodedSubstrings(this._nodedSegStrings)},e.prototype.getIndex=function(){return this._index},e.prototype.add=function(t){for(var e=Kc.getChains(t.getCoordinates(),t).iterator();e.hasNext();){var n=e.next();n.setId(this._idCounter++),this._index.insert(n.getEnvelope(),n),this._monoChains.add(n)}},e.prototype.computeNodes=function(t){this._nodedSegStrings=t;for(var e=t.iterator();e.hasNext();)this.add(e.next());this.intersectChains()},e.prototype.intersectChains=function(){for(var t=new Qc(this._segInt),e=this._monoChains.iterator();e.hasNext();)for(var n=e.next(),i=this._index.query(n.getEnvelope()).iterator();i.hasNext();){var r=i.next();if(r.getId()>n.getId()&&(n.computeOverlaps(r,t),this._nOverlaps++),this._segInt.isDone())return null}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.SegmentOverlapAction.get=function(){return Qc},Object.defineProperties(e,n),e}(Zc),Qc=function(t){function e(){t.call(this),this._si=null;var e=arguments[0];this._si=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.overlap=function(){if(4!==arguments.length)return t.prototype.overlap.apply(this,arguments);var e=arguments[0],n=arguments[1],i=arguments[2],r=arguments[3],o=e.getContext(),s=i.getContext();this._si.processIntersections(o,n,s,r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Vc),$c=function t(){if(this._quadrantSegments=t.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=t.CAP_ROUND,this._joinStyle=t.JOIN_ROUND,this._mitreLimit=t.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=t.DEFAULT_SIMPLIFY_FACTOR,0===arguments.length);else if(1===arguments.length){var e=arguments[0];this.setQuadrantSegments(e)}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.setQuadrantSegments(n),this.setEndCapStyle(i)}else if(4===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];this.setQuadrantSegments(r),this.setEndCapStyle(o),this.setJoinStyle(s),this.setMitreLimit(a)}},tl={CAP_ROUND:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},JOIN_ROUND:{configurable:!0},JOIN_MITRE:{configurable:!0},JOIN_BEVEL:{configurable:!0},DEFAULT_QUADRANT_SEGMENTS:{configurable:!0},DEFAULT_MITRE_LIMIT:{configurable:!0},DEFAULT_SIMPLIFY_FACTOR:{configurable:!0}};$c.prototype.getEndCapStyle=function(){return this._endCapStyle},$c.prototype.isSingleSided=function(){return this._isSingleSided},$c.prototype.setQuadrantSegments=function(t){this._quadrantSegments=t,0===this._quadrantSegments&&(this._joinStyle=$c.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=$c.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),t<=0&&(this._quadrantSegments=1),this._joinStyle!==$c.JOIN_ROUND&&(this._quadrantSegments=$c.DEFAULT_QUADRANT_SEGMENTS)},$c.prototype.getJoinStyle=function(){return this._joinStyle},$c.prototype.setJoinStyle=function(t){this._joinStyle=t},$c.prototype.setSimplifyFactor=function(t){this._simplifyFactor=t<0?0:t},$c.prototype.getSimplifyFactor=function(){return this._simplifyFactor},$c.prototype.getQuadrantSegments=function(){return this._quadrantSegments},$c.prototype.setEndCapStyle=function(t){this._endCapStyle=t},$c.prototype.getMitreLimit=function(){return this._mitreLimit},$c.prototype.setMitreLimit=function(t){this._mitreLimit=t},$c.prototype.setSingleSided=function(t){this._isSingleSided=t},$c.prototype.interfaces_=function(){return[]},$c.prototype.getClass=function(){return $c},$c.bufferDistanceError=function(t){var e=Math.PI/2/t;return 1-Math.cos(e/2)},tl.CAP_ROUND.get=function(){return 1},tl.CAP_FLAT.get=function(){return 2},tl.CAP_SQUARE.get=function(){return 3},tl.JOIN_ROUND.get=function(){return 1},tl.JOIN_MITRE.get=function(){return 2},tl.JOIN_BEVEL.get=function(){return 3},tl.DEFAULT_QUADRANT_SEGMENTS.get=function(){return 8},tl.DEFAULT_MITRE_LIMIT.get=function(){return 5},tl.DEFAULT_SIMPLIFY_FACTOR.get=function(){return.01},Object.defineProperties($c,tl);var el=function(t){this._distanceTol=null,this._isDeleted=null,this._angleOrientation=Fu.COUNTERCLOCKWISE,this._inputLine=t||null},nl={INIT:{configurable:!0},DELETE:{configurable:!0},KEEP:{configurable:!0},NUM_PTS_TO_CHECK:{configurable:!0}};el.prototype.isDeletable=function(t,e,n,i){var r=this._inputLine[t],o=this._inputLine[e],s=this._inputLine[n];return!!this.isConcave(r,o,s)&&!!this.isShallow(r,o,s,i)&&this.isShallowSampled(r,o,t,n,i)},el.prototype.deleteShallowConcavities=function(){for(var t=1,e=this.findNextNonDeletedIndex(t),n=this.findNextNonDeletedIndex(e),i=!1;n<this._inputLine.length;){var r=!1;this.isDeletable(t,e,n,this._distanceTol)&&(this._isDeleted[e]=el.DELETE,r=!0,i=!0),t=r?n:e,e=this.findNextNonDeletedIndex(t),n=this.findNextNonDeletedIndex(e)}return i},el.prototype.isShallowConcavity=function(t,e,n,i){return Fu.computeOrientation(t,e,n)===this._angleOrientation&&Fu.distancePointLine(e,t,n)<i},el.prototype.isShallowSampled=function(t,e,n,i,r){var o=Math.trunc((i-n)/el.NUM_PTS_TO_CHECK);o<=0&&(o=1);for(var s=n;s<i;s+=o)if(!this.isShallow(t,e,this._inputLine[s],r))return!1;return!0},el.prototype.isConcave=function(t,e,n){var i=Fu.computeOrientation(t,e,n)===this._angleOrientation;return i},el.prototype.simplify=function(t){this._distanceTol=Math.abs(t),t<0&&(this._angleOrientation=Fu.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var e=!1;do{e=this.deleteShallowConcavities()}while(e);return this.collapseLine()},el.prototype.findNextNonDeletedIndex=function(t){for(var e=t+1;e<this._inputLine.length&&this._isDeleted[e]===el.DELETE;)e++;return e},el.prototype.isShallow=function(t,e,n,i){return Fu.distancePointLine(e,t,n)<i},el.prototype.collapseLine=function(){for(var t=new eh,e=0;e<this._inputLine.length;e++)this._isDeleted[e]!==el.DELETE&&t.add(this._inputLine[e]);return t.toCoordinateArray()},el.prototype.interfaces_=function(){return[]},el.prototype.getClass=function(){return el},el.simplify=function(t,e){return new el(t).simplify(e)},nl.INIT.get=function(){return 0},nl.DELETE.get=function(){return 1},nl.KEEP.get=function(){return 1},nl.NUM_PTS_TO_CHECK.get=function(){return 10},Object.defineProperties(el,nl);var il=function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new $u},rl={COORDINATE_ARRAY_TYPE:{configurable:!0}};il.prototype.getCoordinates=function(){return this._ptList.toArray(il.COORDINATE_ARRAY_TYPE)},il.prototype.setPrecisionModel=function(t){this._precisionModel=t},il.prototype.addPt=function(t){var e=new $a(t);if(this._precisionModel.makePrecise(e),this.isRedundant(e))return null;this._ptList.add(e)},il.prototype.revere=function(){},il.prototype.addPts=function(t,e){if(e)for(var n=0;n<t.length;n++)this.addPt(t[n]);else for(var i=t.length-1;i>=0;i--)this.addPt(t[i])},il.prototype.isRedundant=function(t){if(this._ptList.size()<1)return!1;var e=this._ptList.get(this._ptList.size()-1);return t.distance(e)<this._minimimVertexDistance},il.prototype.toString=function(){return(new Wh).createLineString(this.getCoordinates()).toString()},il.prototype.closeRing=function(){if(this._ptList.size()<1)return null;var t=new $a(this._ptList.get(0)),e=this._ptList.get(this._ptList.size()-1);if(t.equals(e))return null;this._ptList.add(t)},il.prototype.setMinimumVertexDistance=function(t){this._minimimVertexDistance=t},il.prototype.interfaces_=function(){return[]},il.prototype.getClass=function(){return il},rl.COORDINATE_ARRAY_TYPE.get=function(){return new Array(0).fill(null)},Object.defineProperties(il,rl);var ol=function(){},sl={PI_TIMES_2:{configurable:!0},PI_OVER_2:{configurable:!0},PI_OVER_4:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},CLOCKWISE:{configurable:!0},NONE:{configurable:!0}};ol.prototype.interfaces_=function(){return[]},ol.prototype.getClass=function(){return ol},ol.toDegrees=function(t){return 180*t/Math.PI},ol.normalize=function(t){for(;t>Math.PI;)t-=ol.PI_TIMES_2;for(;t<=-Math.PI;)t+=ol.PI_TIMES_2;return t},ol.angle=function(){if(1===arguments.length){var t=arguments[0];return Math.atan2(t.y,t.x)}if(2===arguments.length){var e=arguments[0],n=arguments[1],i=n.x-e.x,r=n.y-e.y;return Math.atan2(r,i)}},ol.isAcute=function(t,e,n){var i=t.x-e.x,r=t.y-e.y;return i*(n.x-e.x)+r*(n.y-e.y)>0},ol.isObtuse=function(t,e,n){var i=t.x-e.x,r=t.y-e.y;return i*(n.x-e.x)+r*(n.y-e.y)<0},ol.interiorAngle=function(t,e,n){var i=ol.angle(e,t),r=ol.angle(e,n);return Math.abs(r-i)},ol.normalizePositive=function(t){if(t<0){for(;t<0;)t+=ol.PI_TIMES_2;t>=ol.PI_TIMES_2&&(t=0)}else{for(;t>=ol.PI_TIMES_2;)t-=ol.PI_TIMES_2;t<0&&(t=0)}return t},ol.angleBetween=function(t,e,n){var i=ol.angle(e,t),r=ol.angle(e,n);return ol.diff(i,r)},ol.diff=function(t,e){var n=null;return(n=t<e?e-t:t-e)>Math.PI&&(n=2*Math.PI-n),n},ol.toRadians=function(t){return t*Math.PI/180},ol.getTurn=function(t,e){var n=Math.sin(e-t);return n>0?ol.COUNTERCLOCKWISE:n<0?ol.CLOCKWISE:ol.NONE},ol.angleBetweenOriented=function(t,e,n){var i=ol.angle(e,t),r=ol.angle(e,n)-i;return r<=-Math.PI?r+ol.PI_TIMES_2:r>Math.PI?r-ol.PI_TIMES_2:r},sl.PI_TIMES_2.get=function(){return 2*Math.PI},sl.PI_OVER_2.get=function(){return Math.PI/2},sl.PI_OVER_4.get=function(){return Math.PI/4},sl.COUNTERCLOCKWISE.get=function(){return Fu.COUNTERCLOCKWISE},sl.CLOCKWISE.get=function(){return Fu.CLOCKWISE},sl.NONE.get=function(){return Fu.COLLINEAR},Object.defineProperties(ol,sl);var al=function t(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new Uc,this._seg1=new Uc,this._offset0=new Uc,this._offset1=new Uc,this._side=0,this._hasNarrowConcaveAngle=!1;var e=arguments[0],n=arguments[1],i=arguments[2];this._precisionModel=e,this._bufParams=n,this._li=new Pu,this._filletAngleQuantum=Math.PI/2/n.getQuadrantSegments(),n.getQuadrantSegments()>=8&&n.getJoinStyle()===$c.JOIN_ROUND&&(this._closingSegLengthFactor=t.MAX_CLOSING_SEG_LEN_FACTOR),this.init(i)},ul={OFFSET_SEGMENT_SEPARATION_FACTOR:{configurable:!0},INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},CURVE_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},MAX_CLOSING_SEG_LEN_FACTOR:{configurable:!0}};al.prototype.addNextSegment=function(t,e){if(this._s0=this._s1,this._s1=this._s2,this._s2=t,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var n=Fu.computeOrientation(this._s0,this._s1,this._s2),i=n===Fu.CLOCKWISE&&this._side===ec.LEFT||n===Fu.COUNTERCLOCKWISE&&this._side===ec.RIGHT;0===n?this.addCollinear(e):i?this.addOutsideTurn(n,e):this.addInsideTurn(n,e)},al.prototype.addLineEndCap=function(t,e){var n=new Uc(t,e),i=new Uc;this.computeOffsetSegment(n,ec.LEFT,this._distance,i);var r=new Uc;this.computeOffsetSegment(n,ec.RIGHT,this._distance,r);var o=e.x-t.x,s=e.y-t.y,a=Math.atan2(s,o);switch(this._bufParams.getEndCapStyle()){case $c.CAP_ROUND:this._segList.addPt(i.p1),this.addFilletArc(e,a+Math.PI/2,a-Math.PI/2,Fu.CLOCKWISE,this._distance),this._segList.addPt(r.p1);break;case $c.CAP_FLAT:this._segList.addPt(i.p1),this._segList.addPt(r.p1);break;case $c.CAP_SQUARE:var u=new $a;u.x=Math.abs(this._distance)*Math.cos(a),u.y=Math.abs(this._distance)*Math.sin(a);var h=new $a(i.p1.x+u.x,i.p1.y+u.y),c=new $a(r.p1.x+u.x,r.p1.y+u.y);this._segList.addPt(h),this._segList.addPt(c)}},al.prototype.getCoordinates=function(){return this._segList.getCoordinates()},al.prototype.addMitreJoin=function(t,e,n,i){var r=!0,o=null;try{o=Eu.intersection(e.p0,e.p1,n.p0,n.p1),(i<=0?1:o.distance(t)/Math.abs(i))>this._bufParams.getMitreLimit()&&(r=!1)}catch(t){if(!(t instanceof vu))throw t;o=new $a(0,0),r=!1}r?this._segList.addPt(o):this.addLimitedMitreJoin(e,n,i,this._bufParams.getMitreLimit())},al.prototype.addFilletCorner=function(t,e,n,i,r){var o=e.x-t.x,s=e.y-t.y,a=Math.atan2(s,o),u=n.x-t.x,h=n.y-t.y,c=Math.atan2(h,u);i===Fu.CLOCKWISE?a<=c&&(a+=2*Math.PI):a>=c&&(a-=2*Math.PI),this._segList.addPt(e),this.addFilletArc(t,a,c,i,r),this._segList.addPt(n)},al.prototype.addOutsideTurn=function(t,e){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*al.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===$c.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===$c.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(e&&this._segList.addPt(this._offset0.p1),this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,t,this._distance),this._segList.addPt(this._offset1.p0))},al.prototype.createSquare=function(t){this._segList.addPt(new $a(t.x+this._distance,t.y+this._distance)),this._segList.addPt(new $a(t.x+this._distance,t.y-this._distance)),this._segList.addPt(new $a(t.x-this._distance,t.y-this._distance)),this._segList.addPt(new $a(t.x-this._distance,t.y+this._distance)),this._segList.closeRing()},al.prototype.addSegments=function(t,e){this._segList.addPts(t,e)},al.prototype.addFirstSegment=function(){this._segList.addPt(this._offset1.p0)},al.prototype.addLastSegment=function(){this._segList.addPt(this._offset1.p1)},al.prototype.initSideSegments=function(t,e,n){this._s1=t,this._s2=e,this._side=n,this._seg1.setCoordinates(t,e),this.computeOffsetSegment(this._seg1,n,this._distance,this._offset1)},al.prototype.addLimitedMitreJoin=function(t,e,n,i){var r=this._seg0.p1,o=ol.angle(r,this._seg0.p0),s=ol.angleBetweenOriented(this._seg0.p0,r,this._seg1.p1)/2,a=ol.normalize(o+s),u=ol.normalize(a+Math.PI),h=i*n,c=n-h*Math.abs(Math.sin(s)),l=r.x+h*Math.cos(u),p=r.y+h*Math.sin(u),f=new $a(l,p),d=new Uc(r,f),g=d.pointAlongOffset(1,c),y=d.pointAlongOffset(1,-c);this._side===ec.LEFT?(this._segList.addPt(g),this._segList.addPt(y)):(this._segList.addPt(y),this._segList.addPt(g))},al.prototype.computeOffsetSegment=function(t,e,n,i){var r=e===ec.LEFT?1:-1,o=t.p1.x-t.p0.x,s=t.p1.y-t.p0.y,a=Math.sqrt(o*o+s*s),u=r*n*o/a,h=r*n*s/a;i.p0.x=t.p0.x-h,i.p0.y=t.p0.y+u,i.p1.x=t.p1.x-h,i.p1.y=t.p1.y+u},al.prototype.addFilletArc=function(t,e,n,i,r){var o=i===Fu.CLOCKWISE?-1:1,s=Math.abs(e-n),a=Math.trunc(s/this._filletAngleQuantum+.5);if(a<1)return null;for(var u=s/a,h=0,c=new $a;h<s;){var l=e+o*h;c.x=t.x+r*Math.cos(l),c.y=t.y+r*Math.sin(l),this._segList.addPt(c),h+=u}},al.prototype.addInsideTurn=function(t,e){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*al.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var n=new $a((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(n);var i=new $a((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(i)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}},al.prototype.createCircle=function(t){var e=new $a(t.x+this._distance,t.y);this._segList.addPt(e),this.addFilletArc(t,0,2*Math.PI,-1,this._distance),this._segList.closeRing()},al.prototype.addBevelJoin=function(t,e){this._segList.addPt(t.p1),this._segList.addPt(e.p0)},al.prototype.init=function(t){this._distance=t,this._maxCurveSegmentError=t*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new il,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(t*al.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)},al.prototype.addCollinear=function(t){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===$c.JOIN_BEVEL||this._bufParams.getJoinStyle()===$c.JOIN_MITRE?(t&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,Fu.CLOCKWISE,this._distance))},al.prototype.closeRing=function(){this._segList.closeRing()},al.prototype.hasNarrowConcaveAngle=function(){return this._hasNarrowConcaveAngle},al.prototype.interfaces_=function(){return[]},al.prototype.getClass=function(){return al},ul.OFFSET_SEGMENT_SEPARATION_FACTOR.get=function(){return.001},ul.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return.001},ul.CURVE_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return 1e-6},ul.MAX_CLOSING_SEG_LEN_FACTOR.get=function(){return 80},Object.defineProperties(al,ul);var hl=function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var t=arguments[0],e=arguments[1];this._precisionModel=t,this._bufParams=e};hl.prototype.getOffsetCurve=function(t,e){if(this._distance=e,0===e)return null;var n=e<0,i=Math.abs(e),r=this.getSegGen(i);t.length<=1?this.computePointCurve(t[0],r):this.computeOffsetCurve(t,n,r);var o=r.getCoordinates();return n&&nh.reverse(o),o},hl.prototype.computeSingleSidedBufferCurve=function(t,e,n){var i=this.simplifyTolerance(this._distance);if(e){n.addSegments(t,!0);var r=el.simplify(t,-i),o=r.length-1;n.initSideSegments(r[o],r[o-1],ec.LEFT),n.addFirstSegment();for(var s=o-2;s>=0;s--)n.addNextSegment(r[s],!0)}else{n.addSegments(t,!1);var a=el.simplify(t,i),u=a.length-1;n.initSideSegments(a[0],a[1],ec.LEFT),n.addFirstSegment();for(var h=2;h<=u;h++)n.addNextSegment(a[h],!0)}n.addLastSegment(),n.closeRing()},hl.prototype.computeRingBufferCurve=function(t,e,n){var i=this.simplifyTolerance(this._distance);e===ec.RIGHT&&(i=-i);var r=el.simplify(t,i),o=r.length-1;n.initSideSegments(r[o-1],r[0],e);for(var s=1;s<=o;s++){var a=1!==s;n.addNextSegment(r[s],a)}n.closeRing()},hl.prototype.computeLineBufferCurve=function(t,e){var n=this.simplifyTolerance(this._distance),i=el.simplify(t,n),r=i.length-1;e.initSideSegments(i[0],i[1],ec.LEFT);for(var o=2;o<=r;o++)e.addNextSegment(i[o],!0);e.addLastSegment(),e.addLineEndCap(i[r-1],i[r]);var s=el.simplify(t,-n),a=s.length-1;e.initSideSegments(s[a],s[a-1],ec.LEFT);for(var u=a-2;u>=0;u--)e.addNextSegment(s[u],!0);e.addLastSegment(),e.addLineEndCap(s[1],s[0]),e.closeRing()},hl.prototype.computePointCurve=function(t,e){switch(this._bufParams.getEndCapStyle()){case $c.CAP_ROUND:e.createCircle(t);break;case $c.CAP_SQUARE:e.createSquare(t)}},hl.prototype.getLineCurve=function(t,e){if(this._distance=e,e<0&&!this._bufParams.isSingleSided())return null;if(0===e)return null;var n=Math.abs(e),i=this.getSegGen(n);if(t.length<=1)this.computePointCurve(t[0],i);else if(this._bufParams.isSingleSided()){var r=e<0;this.computeSingleSidedBufferCurve(t,r,i)}else this.computeLineBufferCurve(t,i);return i.getCoordinates()},hl.prototype.getBufferParameters=function(){return this._bufParams},hl.prototype.simplifyTolerance=function(t){return t*this._bufParams.getSimplifyFactor()},hl.prototype.getRingCurve=function(t,e,n){if(this._distance=n,t.length<=2)return this.getLineCurve(t,n);if(0===n)return hl.copyCoordinates(t);var i=this.getSegGen(n);return this.computeRingBufferCurve(t,e,i),i.getCoordinates()},hl.prototype.computeOffsetCurve=function(t,e,n){var i=this.simplifyTolerance(this._distance);if(e){var r=el.simplify(t,-i),o=r.length-1;n.initSideSegments(r[o],r[o-1],ec.LEFT),n.addFirstSegment();for(var s=o-2;s>=0;s--)n.addNextSegment(r[s],!0)}else{var a=el.simplify(t,i),u=a.length-1;n.initSideSegments(a[0],a[1],ec.LEFT),n.addFirstSegment();for(var h=2;h<=u;h++)n.addNextSegment(a[h],!0)}n.addLastSegment()},hl.prototype.getSegGen=function(t){return new al(this._precisionModel,this._bufParams,t)},hl.prototype.interfaces_=function(){return[]},hl.prototype.getClass=function(){return hl},hl.copyCoordinates=function(t){for(var e=new Array(t.length).fill(null),n=0;n<e.length;n++)e[n]=new $a(t[n]);return e};var cl=function(){this._subgraphs=null,this._seg=new Uc,this._cga=new Fu;var t=arguments[0];this._subgraphs=t},ll={DepthSegment:{configurable:!0}};cl.prototype.findStabbedSegments=function(){if(1===arguments.length){for(var t=arguments[0],e=new $u,n=this._subgraphs.iterator();n.hasNext();){var i=n.next(),r=i.getEnvelope();t.y<r.getMinY()||t.y>r.getMaxY()||this.findStabbedSegments(t,i.getDirectedEdges(),e)}return e}if(3===arguments.length)if(ou(arguments[2],Qu)&&arguments[0]instanceof $a&&arguments[1]instanceof vc){for(var o=arguments[0],s=arguments[1],a=arguments[2],u=s.getEdge().getCoordinates(),h=0;h<u.length-1;h++)if(this._seg.p0=u[h],this._seg.p1=u[h+1],this._seg.p0.y>this._seg.p1.y&&this._seg.reverse(),!(Math.max(this._seg.p0.x,this._seg.p1.x)<o.x||this._seg.isHorizontal()||o.y<this._seg.p0.y||o.y>this._seg.p1.y||Fu.computeOrientation(this._seg.p0,this._seg.p1,o)===Fu.RIGHT)){var c=s.getDepth(ec.LEFT);this._seg.p0.equals(u[h])||(c=s.getDepth(ec.RIGHT));var l=new pl(this._seg,c);a.add(l)}}else if(ou(arguments[2],Qu)&&arguments[0]instanceof $a&&ou(arguments[1],Qu))for(var p=arguments[0],f=arguments[1],d=arguments[2],g=f.iterator();g.hasNext();){var y=g.next();y.isForward()&&this.findStabbedSegments(p,y,d)}},cl.prototype.getDepth=function(t){var e=this.findStabbedSegments(t);return 0===e.size()?0:Rc.min(e)._leftDepth},cl.prototype.interfaces_=function(){return[]},cl.prototype.getClass=function(){return cl},ll.DepthSegment.get=function(){return pl},Object.defineProperties(cl,ll);var pl=function(){this._upwardSeg=null,this._leftDepth=null;var t=arguments[0],e=arguments[1];this._upwardSeg=new Uc(t),this._leftDepth=e};pl.prototype.compareTo=function(t){var e=t;if(this._upwardSeg.minX()>=e._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=e._upwardSeg.minX())return-1;var n=this._upwardSeg.orientationIndex(e._upwardSeg);return 0!==n?n:0!=(n=-1*e._upwardSeg.orientationIndex(this._upwardSeg))?n:this._upwardSeg.compareTo(e._upwardSeg)},pl.prototype.compareX=function(t,e){var n=t.p0.compareTo(e.p0);return 0!==n?n:t.p1.compareTo(e.p1)},pl.prototype.toString=function(){return this._upwardSeg.toString()},pl.prototype.interfaces_=function(){return[Za]},pl.prototype.getClass=function(){return pl};var fl=function(t,e,n){this.p0=t||null,this.p1=e||null,this.p2=n||null};fl.prototype.area=function(){return fl.area(this.p0,this.p1,this.p2)},fl.prototype.signedArea=function(){return fl.signedArea(this.p0,this.p1,this.p2)},fl.prototype.interpolateZ=function(t){if(null===t)throw new Wa("Supplied point is null.");return fl.interpolateZ(t,this.p0,this.p1,this.p2)},fl.prototype.longestSideLength=function(){return fl.longestSideLength(this.p0,this.p1,this.p2)},fl.prototype.isAcute=function(){return fl.isAcute(this.p0,this.p1,this.p2)},fl.prototype.circumcentre=function(){return fl.circumcentre(this.p0,this.p1,this.p2)},fl.prototype.area3D=function(){return fl.area3D(this.p0,this.p1,this.p2)},fl.prototype.centroid=function(){return fl.centroid(this.p0,this.p1,this.p2)},fl.prototype.inCentre=function(){return fl.inCentre(this.p0,this.p1,this.p2)},fl.prototype.interfaces_=function(){return[]},fl.prototype.getClass=function(){return fl},fl.area=function(t,e,n){return Math.abs(((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2)},fl.signedArea=function(t,e,n){return((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2},fl.det=function(t,e,n,i){return t*i-e*n},fl.interpolateZ=function(t,e,n,i){var r=e.x,o=e.y,s=n.x-r,a=i.x-r,u=n.y-o,h=i.y-o,c=s*h-a*u,l=t.x-r,p=t.y-o,f=(h*l-a*p)/c,d=(-u*l+s*p)/c;return e.z+f*(n.z-e.z)+d*(i.z-e.z)},fl.longestSideLength=function(t,e,n){var i=t.distance(e),r=e.distance(n),o=n.distance(t),s=i;return r>s&&(s=r),o>s&&(s=o),s},fl.isAcute=function(t,e,n){return!!ol.isAcute(t,e,n)&&!!ol.isAcute(e,n,t)&&!!ol.isAcute(n,t,e)},fl.circumcentre=function(t,e,n){var i=n.x,r=n.y,o=t.x-i,s=t.y-r,a=e.x-i,u=e.y-r,h=2*fl.det(o,s,a,u),c=fl.det(s,o*o+s*s,u,a*a+u*u),l=fl.det(o,o*o+s*s,a,a*a+u*u);return new $a(i-c/h,r+l/h)},fl.perpendicularBisector=function(t,e){var n=e.x-t.x,i=e.y-t.y,r=new Eu(t.x+n/2,t.y+i/2,1),o=new Eu(t.x-i+n/2,t.y+n+i/2,1);return new Eu(r,o)},fl.angleBisector=function(t,e,n){var i=e.distance(t),r=i/(i+e.distance(n)),o=n.x-t.x,s=n.y-t.y;return new $a(t.x+r*o,t.y+r*s)},fl.area3D=function(t,e,n){var i=e.x-t.x,r=e.y-t.y,o=e.z-t.z,s=n.x-t.x,a=n.y-t.y,u=n.z-t.z,h=r*u-o*a,c=o*s-i*u,l=i*a-r*s,p=h*h+c*c+l*l,f=Math.sqrt(p)/2;return f},fl.centroid=function(t,e,n){var i=(t.x+e.x+n.x)/3,r=(t.y+e.y+n.y)/3;return new $a(i,r)},fl.inCentre=function(t,e,n){var i=e.distance(n),r=t.distance(n),o=t.distance(e),s=i+r+o,a=(i*t.x+r*e.x+o*n.x)/s,u=(i*t.y+r*e.y+o*n.y)/s;return new $a(a,u)};var dl=function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new $u;var t=arguments[0],e=arguments[1],n=arguments[2];this._inputGeom=t,this._distance=e,this._curveBuilder=n};dl.prototype.addPoint=function(t){if(this._distance<=0)return null;var e=t.getCoordinates(),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,iu.EXTERIOR,iu.INTERIOR)},dl.prototype.addPolygon=function(t){var e=this._distance,n=ec.LEFT;this._distance<0&&(e=-this._distance,n=ec.RIGHT);var i=t.getExteriorRing(),r=nh.removeRepeatedPoints(i.getCoordinates());if(this._distance<0&&this.isErodedCompletely(i,this._distance))return null;if(this._distance<=0&&r.length<3)return null;this.addPolygonRing(r,e,n,iu.EXTERIOR,iu.INTERIOR);for(var o=0;o<t.getNumInteriorRing();o++){var s=t.getInteriorRingN(o),a=nh.removeRepeatedPoints(s.getCoordinates());this._distance>0&&this.isErodedCompletely(s,-this._distance)||this.addPolygonRing(a,e,ec.opposite(n),iu.INTERIOR,iu.EXTERIOR)}},dl.prototype.isTriangleErodedCompletely=function(t,e){var n=new fl(t[0],t[1],t[2]),i=n.inCentre();return Fu.distancePointLine(i,n.p0,n.p1)<Math.abs(e)},dl.prototype.addLineString=function(t){if(this._distance<=0&&!this._curveBuilder.getBufferParameters().isSingleSided())return null;var e=nh.removeRepeatedPoints(t.getCoordinates()),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,iu.EXTERIOR,iu.INTERIOR)},dl.prototype.addCurve=function(t,e,n){if(null===t||t.length<2)return null;var i=new qc(t,new uc(0,iu.BOUNDARY,e,n));this._curveList.add(i)},dl.prototype.getCurves=function(){return this.add(this._inputGeom),this._curveList},dl.prototype.addPolygonRing=function(t,e,n,i,r){if(0===e&&t.length<Lh.MINIMUM_VALID_SIZE)return null;var o=i,s=r;t.length>=Lh.MINIMUM_VALID_SIZE&&Fu.isCCW(t)&&(o=r,s=i,n=ec.opposite(n));var a=this._curveBuilder.getRingCurve(t,n,e);this.addCurve(a,o,s)},dl.prototype.add=function(t){if(t.isEmpty())return null;t instanceof Rh?this.addPolygon(t):t instanceof Oh?this.addLineString(t):t instanceof Sh?this.addPoint(t):t instanceof Nh?this.addCollection(t):t instanceof mh?this.addCollection(t):t instanceof Mh?this.addCollection(t):t instanceof vh&&this.addCollection(t)},dl.prototype.isErodedCompletely=function(t,e){var n=t.getCoordinates();if(n.length<4)return e<0;if(4===n.length)return this.isTriangleErodedCompletely(n,e);var i=t.getEnvelopeInternal(),r=Math.min(i.getHeight(),i.getWidth());return e<0&&2*Math.abs(e)>r},dl.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},dl.prototype.interfaces_=function(){return[]},dl.prototype.getClass=function(){return dl};var gl=function(){};gl.prototype.locate=function(t){},gl.prototype.interfaces_=function(){return[]},gl.prototype.getClass=function(){return gl};var yl=function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var t=arguments[0];this._parent=t,this._atStart=!0,this._index=0,this._max=t.getNumGeometries()};yl.prototype.next=function(){if(this._atStart)return this._atStart=!1,yl.isAtomic(this._parent)&&this._index++,this._parent;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new _r;var t=this._parent.getGeometryN(this._index++);return t instanceof vh?(this._subcollectionIterator=new yl(t),this._subcollectionIterator.next()):t},yl.prototype.remove=function(){throw new Error(this.getClass().getName())},yl.prototype.hasNext=function(){if(this._atStart)return!0;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)},yl.prototype.interfaces_=function(){return[Ju]},yl.prototype.getClass=function(){return yl},yl.isAtomic=function(t){return!(t instanceof vh)};var _l=function(){this._geom=null;var t=arguments[0];this._geom=t};_l.prototype.locate=function(t){return _l.locate(t,this._geom)},_l.prototype.interfaces_=function(){return[gl]},_l.prototype.getClass=function(){return _l},_l.isPointInRing=function(t,e){return!!e.getEnvelopeInternal().intersects(t)&&Fu.isPointInRing(t,e.getCoordinates())},_l.containsPointInPolygon=function(t,e){if(e.isEmpty())return!1;var n=e.getExteriorRing();if(!_l.isPointInRing(t,n))return!1;for(var i=0;i<e.getNumInteriorRing();i++){var r=e.getInteriorRingN(i);if(_l.isPointInRing(t,r))return!1}return!0},_l.containsPoint=function(t,e){if(e instanceof Rh)return _l.containsPointInPolygon(t,e);if(e instanceof vh)for(var n=new yl(e);n.hasNext();){var i=n.next();if(i!==e&&_l.containsPoint(t,i))return!0}return!1},_l.locate=function(t,e){return e.isEmpty()?iu.EXTERIOR:_l.containsPoint(t,e)?iu.INTERIOR:iu.EXTERIOR};var vl=function(){this._edgeMap=new Or,this._edgeList=null,this._ptInAreaLocation=[iu.NONE,iu.NONE]};vl.prototype.getNextCW=function(t){this.getEdges();var e=this._edgeList.indexOf(t),n=e-1;return 0===e&&(n=this._edgeList.size()-1),this._edgeList.get(n)},vl.prototype.propagateSideLabels=function(t){for(var e=iu.NONE,n=this.iterator();n.hasNext();){var i=n.next().getLabel();i.isArea(t)&&i.getLocation(t,ec.LEFT)!==iu.NONE&&(e=i.getLocation(t,ec.LEFT))}if(e===iu.NONE)return null;for(var r=e,o=this.iterator();o.hasNext();){var s=o.next(),a=s.getLabel();if(a.getLocation(t,ec.ON)===iu.NONE&&a.setLocation(t,ec.ON,r),a.isArea(t)){var u=a.getLocation(t,ec.LEFT),h=a.getLocation(t,ec.RIGHT);if(h!==iu.NONE){if(h!==r)throw new rc("side location conflict",s.getCoordinate());u===iu.NONE&&Nu.shouldNeverReachHere("found single null side (at "+s.getCoordinate()+")"),r=u}else Nu.isTrue(a.getLocation(t,ec.LEFT)===iu.NONE,"found single null side"),a.setLocation(t,ec.RIGHT,r),a.setLocation(t,ec.LEFT,r)}}},vl.prototype.getCoordinate=function(){var t=this.iterator();return t.hasNext()?t.next().getCoordinate():null},vl.prototype.print=function(t){mu.out.println("EdgeEndStar:   "+this.getCoordinate());for(var e=this.iterator();e.hasNext();)e.next().print(t)},vl.prototype.isAreaLabelsConsistent=function(t){return this.computeEdgeEndLabels(t.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)},vl.prototype.checkAreaLabelsConsistent=function(t){var e=this.getEdges();if(e.size()<=0)return!0;var n=e.size()-1,i=e.get(n).getLabel().getLocation(t,ec.LEFT);Nu.isTrue(i!==iu.NONE,"Found unlabelled area edge");for(var r=i,o=this.iterator();o.hasNext();){var s=o.next().getLabel();Nu.isTrue(s.isArea(t),"Found non-area edge");var a=s.getLocation(t,ec.LEFT),u=s.getLocation(t,ec.RIGHT);if(a===u)return!1;if(u!==r)return!1;r=a}return!0},vl.prototype.findIndex=function(t){this.iterator();for(var e=0;e<this._edgeList.size();e++)if(this._edgeList.get(e)===t)return e;return-1},vl.prototype.iterator=function(){return this.getEdges().iterator()},vl.prototype.getEdges=function(){return null===this._edgeList&&(this._edgeList=new $u(this._edgeMap.values())),this._edgeList},vl.prototype.getLocation=function(t,e,n){return this._ptInAreaLocation[t]===iu.NONE&&(this._ptInAreaLocation[t]=_l.locate(e,n[t].getGeometry())),this._ptInAreaLocation[t]},vl.prototype.toString=function(){var t=new uu;t.append("EdgeEndStar:   "+this.getCoordinate()),t.append("\n");for(var e=this.iterator();e.hasNext();){var n=e.next();t.append(n),t.append("\n")}return t.toString()},vl.prototype.computeEdgeEndLabels=function(t){for(var e=this.iterator();e.hasNext();)e.next().computeLabel(t)},vl.prototype.computeLabelling=function(t){this.computeEdgeEndLabels(t[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var e=[!1,!1],n=this.iterator();n.hasNext();)for(var i=n.next().getLabel(),r=0;r<2;r++)i.isLine(r)&&i.getLocation(r)===iu.BOUNDARY&&(e[r]=!0);for(var o=this.iterator();o.hasNext();)for(var s=o.next(),a=s.getLabel(),u=0;u<2;u++)if(a.isAnyNull(u)){var h=iu.NONE;if(e[u])h=iu.EXTERIOR;else{var c=s.getCoordinate();h=this.getLocation(u,c,t)}a.setAllLocationsIfNull(u,h)}},vl.prototype.getDegree=function(){return this._edgeMap.size()},vl.prototype.insertEdgeEnd=function(t,e){this._edgeMap.put(t,e),this._edgeList=null},vl.prototype.interfaces_=function(){return[]},vl.prototype.getClass=function(){return vl};var ml=function(t){function e(){t.call(this),this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.linkResultDirectedEdges=function(){this.getResultAreaEdges();for(var t=null,e=null,n=this._SCANNING_FOR_INCOMING,i=0;i<this._resultAreaEdgeList.size();i++){var r=this._resultAreaEdgeList.get(i),o=r.getSym();if(r.getLabel().isArea())switch(null===t&&r.isInResult()&&(t=r),n){case this._SCANNING_FOR_INCOMING:if(!o.isInResult())continue;e=o,n=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(!r.isInResult())continue;e.setNext(r),n=this._SCANNING_FOR_INCOMING}}if(n===this._LINKING_TO_OUTGOING){if(null===t)throw new rc("no outgoing dirEdge found",this.getCoordinate());Nu.isTrue(t.isInResult(),"unable to link last incoming dirEdge"),e.setNext(t)}},e.prototype.insert=function(t){var e=t;this.insertEdgeEnd(e,e)},e.prototype.getRightmostEdge=function(){var t=this.getEdges(),e=t.size();if(e<1)return null;var n=t.get(0);if(1===e)return n;var i=t.get(e-1),r=n.getQuadrant(),o=i.getQuadrant();return gc.isNorthern(r)&&gc.isNorthern(o)?n:gc.isNorthern(r)||gc.isNorthern(o)?0!==n.getDy()?n:0!==i.getDy()?i:(Nu.shouldNeverReachHere("found two horizontal edges incident on node"),null):i},e.prototype.print=function(t){mu.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var e=this.iterator();e.hasNext();){var n=e.next();t.print("out "),n.print(t),t.println(),t.print("in "),n.getSym().print(t),t.println()}},e.prototype.getResultAreaEdges=function(){if(null!==this._resultAreaEdgeList)return this._resultAreaEdgeList;this._resultAreaEdgeList=new $u;for(var t=this.iterator();t.hasNext();){var e=t.next();(e.isInResult()||e.getSym().isInResult())&&this._resultAreaEdgeList.add(e)}return this._resultAreaEdgeList},e.prototype.updateLabelling=function(t){for(var e=this.iterator();e.hasNext();){var n=e.next().getLabel();n.setAllLocationsIfNull(0,t.getLocation(0)),n.setAllLocationsIfNull(1,t.getLocation(1))}},e.prototype.linkAllDirectedEdges=function(){this.getEdges();for(var t=null,e=null,n=this._edgeList.size()-1;n>=0;n--){var i=this._edgeList.get(n),r=i.getSym();null===e&&(e=r),null!==t&&r.setNext(t),t=i}e.setNext(t)},e.prototype.computeDepths=function(){if(1===arguments.length){var t=arguments[0],e=this.findIndex(t),n=t.getDepth(ec.LEFT),i=t.getDepth(ec.RIGHT),r=this.computeDepths(e+1,this._edgeList.size(),n);if(this.computeDepths(0,e,r)!==i)throw new rc("depth mismatch at "+t.getCoordinate())}else if(3===arguments.length){for(var o=arguments[0],s=arguments[1],a=arguments[2],u=o;u<s;u++){var h=this._edgeList.get(u);h.setEdgeDepths(ec.RIGHT,a),a=h.getDepth(ec.LEFT)}return a}},e.prototype.mergeSymLabels=function(){for(var t=this.iterator();t.hasNext();){var e=t.next();e.getLabel().merge(e.getSym().getLabel())}},e.prototype.linkMinimalDirectedEdges=function(t){for(var e=null,n=null,i=this._SCANNING_FOR_INCOMING,r=this._resultAreaEdgeList.size()-1;r>=0;r--){var o=this._resultAreaEdgeList.get(r),s=o.getSym();switch(null===e&&o.getEdgeRing()===t&&(e=o),i){case this._SCANNING_FOR_INCOMING:if(s.getEdgeRing()!==t)continue;n=s,i=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(o.getEdgeRing()!==t)continue;n.setNextMin(o),i=this._SCANNING_FOR_INCOMING}}i===this._LINKING_TO_OUTGOING&&(Nu.isTrue(null!==e,"found null for first outgoing dirEdge"),Nu.isTrue(e.getEdgeRing()===t,"unable to link last incoming dirEdge"),n.setNextMin(e))},e.prototype.getOutgoingDegree=function(){if(0===arguments.length){for(var t=0,e=this.iterator();e.hasNext();)e.next().isInResult()&&t++;return t}if(1===arguments.length){for(var n=arguments[0],i=0,r=this.iterator();r.hasNext();)r.next().getEdgeRing()===n&&i++;return i}},e.prototype.getLabel=function(){return this._label},e.prototype.findCoveredLineEdges=function(){for(var t=iu.NONE,e=this.iterator();e.hasNext();){var n=e.next(),i=n.getSym();if(!n.isLineEdge()){if(n.isInResult()){t=iu.INTERIOR;break}if(i.isInResult()){t=iu.EXTERIOR;break}}}if(t===iu.NONE)return null;for(var r=t,o=this.iterator();o.hasNext();){var s=o.next(),a=s.getSym();s.isLineEdge()?s.getEdge().setCovered(r===iu.INTERIOR):(s.isInResult()&&(r=iu.EXTERIOR),a.isInResult()&&(r=iu.INTERIOR))}},e.prototype.computeLabelling=function(e){t.prototype.computeLabelling.call(this,e),this._label=new uc(iu.NONE);for(var n=this.iterator();n.hasNext();)for(var i=n.next().getEdge().getLabel(),r=0;r<2;r++){var o=i.getLocation(r);o!==iu.INTERIOR&&o!==iu.BOUNDARY||this._label.setLocation(r,iu.INTERIOR)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(vl),El=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createNode=function(t){return new fc(t,new ml)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(mc),xl=function t(){this._pts=null,this._orientation=null;var e=arguments[0];this._pts=e,this._orientation=t.orientation(e)};xl.prototype.compareTo=function(t){var e=t;return xl.compareOriented(this._pts,this._orientation,e._pts,e._orientation)},xl.prototype.interfaces_=function(){return[Za]},xl.prototype.getClass=function(){return xl},xl.orientation=function(t){return 1===nh.increasingDirection(t)},xl.compareOriented=function(t,e,n,i){for(var r=e?1:-1,o=i?1:-1,s=e?t.length:-1,a=i?n.length:-1,u=e?0:t.length-1,h=i?0:n.length-1;;){var c=t[u].compareTo(n[h]);if(0!==c)return c;var l=(u+=r)===s,p=(h+=o)===a;if(l&&!p)return-1;if(!l&&p)return 1;if(l&&p)return 0}};var bl=function(){this._edges=new $u,this._ocaMap=new Or};bl.prototype.print=function(t){t.print("MULTILINESTRING ( ");for(var e=0;e<this._edges.size();e++){var n=this._edges.get(e);e>0&&t.print(","),t.print("(");for(var i=n.getCoordinates(),r=0;r<i.length;r++)r>0&&t.print(","),t.print(i[r].x+" "+i[r].y);t.println(")")}t.print(")  ")},bl.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next())},bl.prototype.findEdgeIndex=function(t){for(var e=0;e<this._edges.size();e++)if(this._edges.get(e).equals(t))return e;return-1},bl.prototype.iterator=function(){return this._edges.iterator()},bl.prototype.getEdges=function(){return this._edges},bl.prototype.get=function(t){return this._edges.get(t)},bl.prototype.findEqualEdge=function(t){var e=new xl(t.getCoordinates());return this._ocaMap.get(e)},bl.prototype.add=function(t){this._edges.add(t);var e=new xl(t.getCoordinates());this._ocaMap.put(e,t)},bl.prototype.interfaces_=function(){return[]},bl.prototype.getClass=function(){return bl};var wl=function(){};wl.prototype.processIntersections=function(t,e,n,i){},wl.prototype.isDone=function(){},wl.prototype.interfaces_=function(){return[]},wl.prototype.getClass=function(){return wl};var Cl=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var t=arguments[0];this._li=t};Cl.prototype.isTrivialIntersection=function(t,e,n,i){if(t===n&&1===this._li.getIntersectionNum()){if(Cl.isAdjacentSegments(e,i))return!0;if(t.isClosed()){var r=t.size()-1;if(0===e&&i===r||0===i&&e===r)return!0}}return!1},Cl.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},Cl.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},Cl.prototype.getLineIntersector=function(){return this._li},Cl.prototype.hasProperIntersection=function(){return this._hasProper},Cl.prototype.processIntersections=function(t,e,n,i){if(t===n&&e===i)return null;this.numTests++;var r=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[i],a=n.getCoordinates()[i+1];this._li.computeIntersection(r,o,s,a),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(t,e,n,i)||(this._hasIntersection=!0,t.addIntersections(this._li,e,0),n.addIntersections(this._li,i,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))},Cl.prototype.hasIntersection=function(){return this._hasIntersection},Cl.prototype.isDone=function(){return!1},Cl.prototype.hasInteriorIntersection=function(){return this._hasInterior},Cl.prototype.interfaces_=function(){return[wl]},Cl.prototype.getClass=function(){return Cl},Cl.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var Ol=function(){this.coord=null,this.segmentIndex=null,this.dist=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.coord=new $a(t),this.segmentIndex=e,this.dist=n};Ol.prototype.getSegmentIndex=function(){return this.segmentIndex},Ol.prototype.getCoordinate=function(){return this.coord},Ol.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex),t.println(" dist = "+this.dist)},Ol.prototype.compareTo=function(t){var e=t;return this.compare(e.segmentIndex,e.dist)},Ol.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===t},Ol.prototype.toString=function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist},Ol.prototype.getDistance=function(){return this.dist},Ol.prototype.compare=function(t,e){return this.segmentIndex<t?-1:this.segmentIndex>t?1:this.dist<e?-1:this.dist>e?1:0},Ol.prototype.interfaces_=function(){return[Za]},Ol.prototype.getClass=function(){return Ol};var Il=function(){this._nodeMap=new Or,this.edge=null;var t=arguments[0];this.edge=t};Il.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},Il.prototype.iterator=function(){return this._nodeMap.values().iterator()},Il.prototype.addSplitEdges=function(t){this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var i=e.next(),r=this.createSplitEdge(n,i);t.add(r),n=i}},Il.prototype.addEndpoints=function(){var t=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[t],t,0)},Il.prototype.createSplitEdge=function(t,e){var n=e.segmentIndex-t.segmentIndex+2,i=this.edge.pts[e.segmentIndex],r=e.dist>0||!e.coord.equals2D(i);r||n--;var o=new Array(n).fill(null),s=0;o[s++]=new $a(t.coord);for(var a=t.segmentIndex+1;a<=e.segmentIndex;a++)o[s++]=this.edge.pts[a];return r&&(o[s]=e.coord),new Ll(o,new uc(this.edge._label))},Il.prototype.add=function(t,e,n){var i=new Ol(t,e,n),r=this._nodeMap.get(i);return null!==r?r:(this._nodeMap.put(i,i),i)},Il.prototype.isIntersection=function(t){for(var e=this.iterator();e.hasNext();)if(e.next().coord.equals(t))return!0;return!1},Il.prototype.interfaces_=function(){return[]},Il.prototype.getClass=function(){return Il};var Sl=function(){};Sl.prototype.getChainStartIndices=function(t){var e=0,n=new $u;n.add(new hu(e));do{var i=this.findChainEnd(t,e);n.add(new hu(i)),e=i}while(e<t.length-1);return Sl.toIntArray(n)},Sl.prototype.findChainEnd=function(t,e){for(var n=gc.quadrant(t[e],t[e+1]),i=e+1;i<t.length&&gc.quadrant(t[i-1],t[i])===n;)i++;return i-1},Sl.prototype.interfaces_=function(){return[]},Sl.prototype.getClass=function(){return Sl},Sl.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e};var Tl=function(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new xu,this.env2=new xu;var t=arguments[0];this.e=t,this.pts=t.getCoordinates();var e=new Sl;this.startIndex=e.getChainStartIndices(this.pts)};Tl.prototype.getCoordinates=function(){return this.pts},Tl.prototype.getMaxX=function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e>n?e:n},Tl.prototype.getMinX=function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e<n?e:n},Tl.prototype.computeIntersectsForChain=function(){if(4===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];this.computeIntersectsForChain(this.startIndex[t],this.startIndex[t+1],e,e.startIndex[n],e.startIndex[n+1],i)}else if(6===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3],u=arguments[4],h=arguments[5],c=this.pts[r],l=this.pts[o],p=s.pts[a],f=s.pts[u];if(o-r==1&&u-a==1)return h.addIntersections(this.e,r,s.e,a),null;if(this.env1.init(c,l),this.env2.init(p,f),!this.env1.intersects(this.env2))return null;var d=Math.trunc((r+o)/2),g=Math.trunc((a+u)/2);r<d&&(a<g&&this.computeIntersectsForChain(r,d,s,a,g,h),g<u&&this.computeIntersectsForChain(r,d,s,g,u,h)),d<o&&(a<g&&this.computeIntersectsForChain(d,o,s,a,g,h),g<u&&this.computeIntersectsForChain(d,o,s,g,u,h))}},Tl.prototype.getStartIndexes=function(){return this.startIndex},Tl.prototype.computeIntersects=function(t,e){for(var n=0;n<this.startIndex.length-1;n++)for(var i=0;i<t.startIndex.length-1;i++)this.computeIntersectsForChain(n,t,i,e)},Tl.prototype.interfaces_=function(){return[]},Tl.prototype.getClass=function(){return Tl};var Rl=function t(){this._depth=Array(2).fill().map(function(){return Array(3)});for(var e=0;e<2;e++)for(var n=0;n<3;n++)this._depth[e][n]=t.NULL_VALUE},Nl={NULL_VALUE:{configurable:!0}};Rl.prototype.getDepth=function(t,e){return this._depth[t][e]},Rl.prototype.setDepth=function(t,e,n){this._depth[t][e]=n},Rl.prototype.isNull=function(){if(0===arguments.length){for(var t=0;t<2;t++)for(var e=0;e<3;e++)if(this._depth[t][e]!==Rl.NULL_VALUE)return!1;return!0}if(1===arguments.length){var n=arguments[0];return this._depth[n][1]===Rl.NULL_VALUE}if(2===arguments.length){var i=arguments[0],r=arguments[1];return this._depth[i][r]===Rl.NULL_VALUE}},Rl.prototype.normalize=function(){for(var t=0;t<2;t++)if(!this.isNull(t)){var e=this._depth[t][1];this._depth[t][2]<e&&(e=this._depth[t][2]),e<0&&(e=0);for(var n=1;n<3;n++){var i=0;this._depth[t][n]>e&&(i=1),this._depth[t][n]=i}}},Rl.prototype.getDelta=function(t){return this._depth[t][ec.RIGHT]-this._depth[t][ec.LEFT]},Rl.prototype.getLocation=function(t,e){return this._depth[t][e]<=0?iu.EXTERIOR:iu.INTERIOR},Rl.prototype.toString=function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]},Rl.prototype.add=function(){if(1===arguments.length)for(var t=arguments[0],e=0;e<2;e++)for(var n=1;n<3;n++){var i=t.getLocation(e,n);i!==iu.EXTERIOR&&i!==iu.INTERIOR||(this.isNull(e,n)?this._depth[e][n]=Rl.depthAtLocation(i):this._depth[e][n]+=Rl.depthAtLocation(i))}else if(3===arguments.length){var r=arguments[0],o=arguments[1];arguments[2]===iu.INTERIOR&&this._depth[r][o]++}},Rl.prototype.interfaces_=function(){return[]},Rl.prototype.getClass=function(){return Rl},Rl.depthAtLocation=function(t){return t===iu.EXTERIOR?0:t===iu.INTERIOR?1:Rl.NULL_VALUE},Nl.NULL_VALUE.get=function(){return-1},Object.defineProperties(Rl,Nl);var Ll=function(t){function e(){if(t.call(this),this.pts=null,this._env=null,this.eiList=new Il(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new Rl,this._depthDelta=0,1===arguments.length){var n=arguments[0];e.call(this,n,null)}else if(2===arguments.length){var i=arguments[0],r=arguments[1];this.pts=i,this._label=r}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDepth=function(){return this._depth},e.prototype.getCollapsedEdge=function(){var t=new Array(2).fill(null);return t[0]=this.pts[0],t[1]=this.pts[1],new e(t,uc.toLineLabel(this._label))},e.prototype.isIsolated=function(){return this._isIsolated},e.prototype.getCoordinates=function(){return this.pts},e.prototype.setIsolated=function(t){this._isIsolated=t},e.prototype.setName=function(t){this._name=t},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var n=t;if(this.pts.length!==n.pts.length)return!1;for(var i=!0,r=!0,o=this.pts.length,s=0;s<this.pts.length;s++)if(this.pts[s].equals2D(n.pts[s])||(i=!1),this.pts[s].equals2D(n.pts[--o])||(r=!1),!i&&!r)return!1;return!0},e.prototype.getCoordinate=function(){if(0===arguments.length)return this.pts.length>0?this.pts[0]:null;if(1===arguments.length){var t=arguments[0];return this.pts[t]}},e.prototype.print=function(t){t.print("edge "+this._name+": "),t.print("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.print(","),t.print(this.pts[e].x+" "+this.pts[e].y);t.print(")  "+this._label+" "+this._depthDelta)},e.prototype.computeIM=function(t){e.updateIM(this._label,t)},e.prototype.isCollapsed=function(){return!!this._label.isArea()&&3===this.pts.length&&!!this.pts[0].equals(this.pts[2])},e.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},e.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1},e.prototype.getDepthDelta=function(){return this._depthDelta},e.prototype.getNumPoints=function(){return this.pts.length},e.prototype.printReverse=function(t){t.print("edge "+this._name+": ");for(var e=this.pts.length-1;e>=0;e--)t.print(this.pts[e]+" ");t.println("")},e.prototype.getMonotoneChainEdge=function(){return null===this._mce&&(this._mce=new Tl(this)),this._mce},e.prototype.getEnvelope=function(){if(null===this._env){this._env=new xu;for(var t=0;t<this.pts.length;t++)this._env.expandToInclude(this.pts[t])}return this._env},e.prototype.addIntersection=function(t,e,n,i){var r=new $a(t.getIntersection(i)),o=e,s=t.getEdgeDistance(n,i),a=o+1;if(a<this.pts.length){var u=this.pts[a];r.equals2D(u)&&(o=a,s=0)}this.eiList.add(r,o,s)},e.prototype.toString=function(){var t=new uu;t.append("edge "+this._name+": "),t.append("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.append(","),t.append(this.pts[e].x+" "+this.pts[e].y);return t.append(")  "+this._label+" "+this._depthDelta),t.toString()},e.prototype.isPointwiseEqual=function(t){if(this.pts.length!==t.pts.length)return!1;for(var e=0;e<this.pts.length;e++)if(!this.pts[e].equals2D(t.pts[e]))return!1;return!0},e.prototype.setDepthDelta=function(t){this._depthDelta=t},e.prototype.getEdgeIntersectionList=function(){return this.eiList},e.prototype.addIntersections=function(t,e,n){for(var i=0;i<t.getIntersectionNum();i++)this.addIntersection(t,e,n,i)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.updateIM=function(){if(2!==arguments.length)return t.prototype.updateIM.apply(this,arguments);var e=arguments[0],n=arguments[1];n.setAtLeastIfValid(e.getLocation(0,ec.ON),e.getLocation(1,ec.ON),1),e.isArea()&&(n.setAtLeastIfValid(e.getLocation(0,ec.LEFT),e.getLocation(1,ec.LEFT),2),n.setAtLeastIfValid(e.getLocation(0,ec.RIGHT),e.getLocation(1,ec.RIGHT),2))},e}(pc),Ml=function(t){this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new bl,this._bufParams=t||null};Ml.prototype.setWorkingPrecisionModel=function(t){this._workingPrecisionModel=t},Ml.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),i=t.getLabel();e.isPointwiseEqual(t)||(i=new uc(t.getLabel())).flip(),n.merge(i);var r=Ml.depthDelta(i),o=e.getDepthDelta()+r;e.setDepthDelta(o)}else this._edgeList.add(t),t.setDepthDelta(Ml.depthDelta(t.getLabel()))},Ml.prototype.buildSubgraphs=function(t,e){for(var n=new $u,i=t.iterator();i.hasNext();){var r=i.next(),o=r.getRightmostCoordinate(),s=new cl(n).getDepth(o);r.computeDepth(s),r.findResultEdges(),n.add(r),e.add(r.getDirectedEdges(),r.getNodes())}},Ml.prototype.createSubgraphs=function(t){for(var e=new $u,n=t.getNodes().iterator();n.hasNext();){var i=n.next();if(!i.isVisited()){var r=new sc;r.create(i),e.add(r)}}return Rc.sort(e,Rc.reverseOrder()),e},Ml.prototype.createEmptyResultGeometry=function(){return this._geomFact.createPolygon()},Ml.prototype.getNoder=function(t){if(null!==this._workingNoder)return this._workingNoder;var e=new Jc,n=new Pu;return n.setPrecisionModel(t),e.setSegmentIntersector(new Cl(n)),e},Ml.prototype.buffer=function(t,e){var n=this._workingPrecisionModel;null===n&&(n=t.getPrecisionModel()),this._geomFact=t.getFactory();var i=new hl(n,this._bufParams),r=new dl(t,e,i).getCurves();if(r.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(r,n),this._graph=new Ec(new El),this._graph.addEdges(this._edgeList.getEdges());var o=this.createSubgraphs(this._graph),s=new xc(this._geomFact);this.buildSubgraphs(o,s);var a=s.getPolygons();return a.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(a)},Ml.prototype.computeNodedEdges=function(t,e){var n=this.getNoder(e);n.computeNodes(t);for(var i=n.getNodedSubstrings().iterator();i.hasNext();){var r=i.next(),o=r.getCoordinates();if(2!==o.length||!o[0].equals2D(o[1])){var s=r.getData(),a=new Ll(r.getCoordinates(),new uc(s));this.insertUniqueEdge(a)}}},Ml.prototype.setNoder=function(t){this._workingNoder=t},Ml.prototype.interfaces_=function(){return[]},Ml.prototype.getClass=function(){return Ml},Ml.depthDelta=function(t){var e=t.getLocation(0,ec.LEFT),n=t.getLocation(0,ec.RIGHT);return e===iu.INTERIOR&&n===iu.EXTERIOR?1:e===iu.EXTERIOR&&n===iu.INTERIOR?-1:0},Ml.convertSegStrings=function(t){for(var e=new Wh,n=new $u;t.hasNext();){var i=t.next(),r=e.createLineString(i.getCoordinates());n.add(r)}return e.buildGeometry(n)};var Pl=function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,2===arguments.length){var t=arguments[0],e=arguments[1];this._noder=t,this._scaleFactor=e,this._offsetX=0,this._offsetY=0,this._isScaled=!this.isIntegerPrecision()}else if(4===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2],o=arguments[3];this._noder=n,this._scaleFactor=i,this._offsetX=r,this._offsetY=o,this._isScaled=!this.isIntegerPrecision()}};Pl.prototype.rescale=function(){if(ou(arguments[0],Hu))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.rescale(e.getCoordinates())}else if(arguments[0]instanceof Array){for(var n=arguments[0],i=0;i<n.length;i++)n[i].x=n[i].x/this._scaleFactor+this._offsetX,n[i].y=n[i].y/this._scaleFactor+this._offsetY;2===n.length&&n[0].equals2D(n[1])&&mu.out.println(n)}},Pl.prototype.scale=function(){if(ou(arguments[0],Hu)){for(var t=arguments[0],e=new $u,n=t.iterator();n.hasNext();){var i=n.next();e.add(new qc(this.scale(i.getCoordinates()),i.getData()))}return e}if(arguments[0]instanceof Array){for(var r=arguments[0],o=new Array(r.length).fill(null),s=0;s<r.length;s++)o[s]=new $a(Math.round((r[s].x-this._offsetX)*this._scaleFactor),Math.round((r[s].y-this._offsetY)*this._scaleFactor),r[s].z);return nh.removeRepeatedPoints(o)}},Pl.prototype.isIntegerPrecision=function(){return 1===this._scaleFactor},Pl.prototype.getNodedSubstrings=function(){var t=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(t),t},Pl.prototype.computeNodes=function(t){var e=t;this._isScaled&&(e=this.scale(t)),this._noder.computeNodes(e)},Pl.prototype.interfaces_=function(){return[Hc]},Pl.prototype.getClass=function(){return Pl};var Al=function(){this._li=new Pu,this._segStrings=null;var t=arguments[0];this._segStrings=t},Dl={fact:{configurable:!0}};Al.prototype.checkEndPtVertexIntersections=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next().getCoordinates();this.checkEndPtVertexIntersections(e[0],this._segStrings),this.checkEndPtVertexIntersections(e[e.length-1],this._segStrings)}else if(2===arguments.length)for(var n=arguments[0],i=arguments[1].iterator();i.hasNext();)for(var r=i.next().getCoordinates(),o=1;o<r.length-1;o++)if(r[o].equals(n))throw new Tu("found endpt/interior pt intersection at index "+o+" :pt "+n)},Al.prototype.checkInteriorIntersections=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();)for(var e=t.next(),n=this._segStrings.iterator();n.hasNext();){var i=n.next();this.checkInteriorIntersections(e,i)}else if(2===arguments.length)for(var r=arguments[0],o=arguments[1],s=r.getCoordinates(),a=o.getCoordinates(),u=0;u<s.length-1;u++)for(var h=0;h<a.length-1;h++)this.checkInteriorIntersections(r,u,o,h);else if(4===arguments.length){var c=arguments[0],l=arguments[1],p=arguments[2],f=arguments[3];if(c===p&&l===f)return null;var d=c.getCoordinates()[l],g=c.getCoordinates()[l+1],y=p.getCoordinates()[f],_=p.getCoordinates()[f+1];if(this._li.computeIntersection(d,g,y,_),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,d,g)||this.hasInteriorIntersection(this._li,y,_)))throw new Tu("found non-noded intersection at "+d+"-"+g+" and "+y+"-"+_)}},Al.prototype.checkValid=function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()},Al.prototype.checkCollapses=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next();this.checkCollapses(e)}else if(1===arguments.length)for(var n=arguments[0].getCoordinates(),i=0;i<n.length-2;i++)this.checkCollapse(n[i],n[i+1],n[i+2])},Al.prototype.hasInteriorIntersection=function(t,e,n){for(var i=0;i<t.getIntersectionNum();i++){var r=t.getIntersection(i);if(!r.equals(e)&&!r.equals(n))return!0}return!1},Al.prototype.checkCollapse=function(t,e,n){if(t.equals(n))throw new Tu("found non-noded collapse at "+Al.fact.createLineString([t,e,n]))},Al.prototype.interfaces_=function(){return[]},Al.prototype.getClass=function(){return Al},Dl.fact.get=function(){return new Wh},Object.defineProperties(Al,Dl);var Fl=function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var t=arguments[0],e=arguments[1],n=arguments[2];if(this._originalPt=t,this._pt=t,this._scaleFactor=e,this._li=n,e<=0)throw new Wa("Scale factor must be non-zero");1!==e&&(this._pt=new $a(this.scale(t.x),this.scale(t.y)),this._p0Scaled=new $a,this._p1Scaled=new $a),this.initCorners(this._pt)},jl={SAFE_ENV_EXPANSION_FACTOR:{configurable:!0}};Fl.prototype.intersectsScaled=function(t,e){var n=Math.min(t.x,e.x),i=Math.max(t.x,e.x),r=Math.min(t.y,e.y),o=Math.max(t.y,e.y),s=this._maxx<n||this._minx>i||this._maxy<r||this._miny>o;if(s)return!1;var a=this.intersectsToleranceSquare(t,e);return Nu.isTrue(!(s&&a),"Found bad envelope test"),a},Fl.prototype.initCorners=function(t){this._minx=t.x-.5,this._maxx=t.x+.5,this._miny=t.y-.5,this._maxy=t.y+.5,this._corner[0]=new $a(this._maxx,this._maxy),this._corner[1]=new $a(this._minx,this._maxy),this._corner[2]=new $a(this._minx,this._miny),this._corner[3]=new $a(this._maxx,this._miny)},Fl.prototype.intersects=function(t,e){return 1===this._scaleFactor?this.intersectsScaled(t,e):(this.copyScaled(t,this._p0Scaled),this.copyScaled(e,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))},Fl.prototype.scale=function(t){return Math.round(t*this._scaleFactor)},Fl.prototype.getCoordinate=function(){return this._originalPt},Fl.prototype.copyScaled=function(t,e){e.x=this.scale(t.x),e.y=this.scale(t.y)},Fl.prototype.getSafeEnvelope=function(){if(null===this._safeEnv){var t=Fl.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new xu(this._originalPt.x-t,this._originalPt.x+t,this._originalPt.y-t,this._originalPt.y+t)}return this._safeEnv},Fl.prototype.intersectsPixelClosure=function(t,e){return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!(this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),this._li.hasIntersection()))))},Fl.prototype.intersectsToleranceSquare=function(t,e){var n=!1,i=!1;return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!(this._li.isProper()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),this._li.isProper()||(this._li.hasIntersection()&&(n=!0),this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),this._li.isProper()||(this._li.hasIntersection()&&(i=!0),this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),this._li.isProper()||n&&i||t.equals(this._pt)||e.equals(this._pt)))))},Fl.prototype.addSnappedNode=function(t,e){var n=t.getCoordinate(e),i=t.getCoordinate(e+1);return!!this.intersects(n,i)&&(t.addIntersection(this.getCoordinate(),e),!0)},Fl.prototype.interfaces_=function(){return[]},Fl.prototype.getClass=function(){return Fl},jl.SAFE_ENV_EXPANSION_FACTOR.get=function(){return.75},Object.defineProperties(Fl,jl);var Gl=function(){this.tempEnv1=new xu,this.selectedSegment=new Uc};Gl.prototype.select=function(){if(1===arguments.length);else if(2===arguments.length){var t=arguments[0],e=arguments[1];t.getLineSegment(e,this.selectedSegment),this.select(this.selectedSegment)}},Gl.prototype.interfaces_=function(){return[]},Gl.prototype.getClass=function(){return Gl};var kl=function(){this._index=null;var t=arguments[0];this._index=t},Bl={HotPixelSnapAction:{configurable:!0}};kl.prototype.snap=function(){if(1===arguments.length){var t=arguments[0];return this.snap(t,null,-1)}if(3===arguments.length){var e=arguments[0],n=arguments[1],i=arguments[2],r=e.getSafeEnvelope(),o=new Yl(e,n,i);return this._index.query(r,{interfaces_:function(){return[Oc]},visitItem:function(t){t.select(r,o)}}),o.isNodeAdded()}},kl.prototype.interfaces_=function(){return[]},kl.prototype.getClass=function(){return kl},Bl.HotPixelSnapAction.get=function(){return Yl},Object.defineProperties(kl,Bl);var Yl=function(t){function e(){t.call(this),this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var e=arguments[0],n=arguments[1],i=arguments[2];this._hotPixel=e,this._parentEdge=n,this._hotPixelVertexIndex=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isNodeAdded=function(){return this._isNodeAdded},e.prototype.select=function(){if(2!==arguments.length)return t.prototype.select.apply(this,arguments);var e=arguments[0],n=arguments[1],i=e.getContext();if(null!==this._parentEdge&&i===this._parentEdge&&n===this._hotPixelVertexIndex)return null;this._isNodeAdded=this._hotPixel.addSnappedNode(i,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Gl),Xl=function(){this._li=null,this._interiorIntersections=null;var t=arguments[0];this._li=t,this._interiorIntersections=new $u};Xl.prototype.processIntersections=function(t,e,n,i){if(t===n&&e===i)return null;var r=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[i],a=n.getCoordinates()[i+1];if(this._li.computeIntersection(r,o,s,a),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var u=0;u<this._li.getIntersectionNum();u++)this._interiorIntersections.add(this._li.getIntersection(u));t.addIntersections(this._li,e,0),n.addIntersections(this._li,i,1)}},Xl.prototype.isDone=function(){return!1},Xl.prototype.getInteriorIntersections=function(){return this._interiorIntersections},Xl.prototype.interfaces_=function(){return[wl]},Xl.prototype.getClass=function(){return Xl};var ql=function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var t=arguments[0];this._pm=t,this._li=new Pu,this._li.setPrecisionModel(t),this._scaleFactor=t.getScale()};ql.prototype.checkCorrectness=function(t){var e=qc.getNodedSubstrings(t),n=new Al(e);try{n.checkValid()}catch(t){if(!(t instanceof _u))throw t;t.printStackTrace()}},ql.prototype.getNodedSubstrings=function(){return qc.getNodedSubstrings(this._nodedSegStrings)},ql.prototype.snapRound=function(t,e){var n=this.findInteriorIntersections(t,e);this.computeIntersectionSnaps(n),this.computeVertexSnaps(t)},ql.prototype.findInteriorIntersections=function(t,e){var n=new Xl(e);return this._noder.setSegmentIntersector(n),this._noder.computeNodes(t),n.getInteriorIntersections()},ql.prototype.computeVertexSnaps=function(){if(ou(arguments[0],Hu))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.computeVertexSnaps(e)}else if(arguments[0]instanceof qc)for(var n=arguments[0],i=n.getCoordinates(),r=0;r<i.length;r++){var o=new Fl(i[r],this._scaleFactor,this._li);this._pointSnapper.snap(o,n,r)&&n.addIntersection(i[r],r)}},ql.prototype.computeNodes=function(t){this._nodedSegStrings=t,this._noder=new Jc,this._pointSnapper=new kl(this._noder.getIndex()),this.snapRound(t,this._li)},ql.prototype.computeIntersectionSnaps=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),i=new Fl(n,this._scaleFactor,this._li);this._pointSnapper.snap(i)}},ql.prototype.interfaces_=function(){return[Hc]},ql.prototype.getClass=function(){return ql};var Ul=function(){if(this._argGeom=null,this._distance=null,this._bufParams=new $c,this._resultGeometry=null,this._saveException=null,1===arguments.length){var t=arguments[0];this._argGeom=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._argGeom=e,this._bufParams=n}},zl={CAP_ROUND:{configurable:!0},CAP_BUTT:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},MAX_PRECISION_DIGITS:{configurable:!0}};Ul.prototype.bufferFixedPrecision=function(t){var e=new Pl(new ql(new qh(1)),t.getScale()),n=new Ml(this._bufParams);n.setWorkingPrecisionModel(t),n.setNoder(e),this._resultGeometry=n.buffer(this._argGeom,this._distance)},Ul.prototype.bufferReducedPrecision=function(){var t=this;if(0===arguments.length){for(var e=Ul.MAX_PRECISION_DIGITS;e>=0;e--){try{t.bufferReducedPrecision(e)}catch(e){if(!(e instanceof rc))throw e;t._saveException=e}if(null!==t._resultGeometry)return null}throw this._saveException}if(1===arguments.length){var n=arguments[0],i=Ul.precisionScaleFactor(this._argGeom,this._distance,n),r=new qh(i);this.bufferFixedPrecision(r)}},Ul.prototype.computeGeometry=function(){if(this.bufferOriginalPrecision(),null!==this._resultGeometry)return null;var t=this._argGeom.getFactory().getPrecisionModel();t.getType()===qh.FIXED?this.bufferFixedPrecision(t):this.bufferReducedPrecision()},Ul.prototype.setQuadrantSegments=function(t){this._bufParams.setQuadrantSegments(t)},Ul.prototype.bufferOriginalPrecision=function(){try{var t=new Ml(this._bufParams);this._resultGeometry=t.buffer(this._argGeom,this._distance)}catch(t){if(!(t instanceof Tu))throw t;this._saveException=t}},Ul.prototype.getResultGeometry=function(t){return this._distance=t,this.computeGeometry(),this._resultGeometry},Ul.prototype.setEndCapStyle=function(t){this._bufParams.setEndCapStyle(t)},Ul.prototype.interfaces_=function(){return[]},Ul.prototype.getClass=function(){return Ul},Ul.bufferOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return new Ul(t).getResultGeometry(e)}if(3===arguments.length){if(Number.isInteger(arguments[2])&&arguments[0]instanceof ku&&"number"==typeof arguments[1]){var n=arguments[0],i=arguments[1],r=arguments[2],o=new Ul(n);return o.setQuadrantSegments(r),o.getResultGeometry(i)}if(arguments[2]instanceof $c&&arguments[0]instanceof ku&&"number"==typeof arguments[1]){var s=arguments[0],a=arguments[1],u=arguments[2];return new Ul(s,u).getResultGeometry(a)}}else if(4===arguments.length){var h=arguments[0],c=arguments[1],l=arguments[2],p=arguments[3],f=new Ul(h);return f.setQuadrantSegments(l),f.setEndCapStyle(p),f.getResultGeometry(c)}},Ul.precisionScaleFactor=function(t,e,n){var i=t.getEnvelopeInternal(),r=su.max(Math.abs(i.getMaxX()),Math.abs(i.getMaxY()),Math.abs(i.getMinX()),Math.abs(i.getMinY()))+2*(e>0?e:0),o=n-Math.trunc(Math.log(r)/Math.log(10)+1);return Math.pow(10,o)},zl.CAP_ROUND.get=function(){return $c.CAP_ROUND},zl.CAP_BUTT.get=function(){return $c.CAP_FLAT},zl.CAP_FLAT.get=function(){return $c.CAP_FLAT},zl.CAP_SQUARE.get=function(){return $c.CAP_SQUARE},zl.MAX_PRECISION_DIGITS.get=function(){return 12},Object.defineProperties(Ul,zl);var Vl=function(){this._pt=[new $a,new $a],this._distance=Ka.NaN,this._isNull=!0};Vl.prototype.getCoordinates=function(){return this._pt},Vl.prototype.getCoordinate=function(t){return this._pt[t]},Vl.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var i=e.distance(n);i<this._distance&&this.initialize(e,n,i)}},Vl.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(i),this._distance=r,this._isNull=!1}},Vl.prototype.getDistance=function(){return this._distance},Vl.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var i=e.distance(n);i>this._distance&&this.initialize(e,n,i)}},Vl.prototype.interfaces_=function(){return[]},Vl.prototype.getClass=function(){return Vl};var Wl=function(){};Wl.prototype.interfaces_=function(){return[]},Wl.prototype.getClass=function(){return Wl},Wl.computeDistance=function(){if(arguments[2]instanceof Vl&&arguments[0]instanceof Oh&&arguments[1]instanceof $a)for(var t=arguments[0],e=arguments[1],n=arguments[2],i=t.getCoordinates(),r=new Uc,o=0;o<i.length-1;o++){r.setCoordinates(i[o],i[o+1]);var s=r.closestPoint(e);n.setMinimum(s,e)}else if(arguments[2]instanceof Vl&&arguments[0]instanceof Rh&&arguments[1]instanceof $a){var a=arguments[0],u=arguments[1],h=arguments[2];Wl.computeDistance(a.getExteriorRing(),u,h);for(var c=0;c<a.getNumInteriorRing();c++)Wl.computeDistance(a.getInteriorRingN(c),u,h)}else if(arguments[2]instanceof Vl&&arguments[0]instanceof ku&&arguments[1]instanceof $a){var l=arguments[0],p=arguments[1],f=arguments[2];if(l instanceof Oh)Wl.computeDistance(l,p,f);else if(l instanceof Rh)Wl.computeDistance(l,p,f);else if(l instanceof vh)for(var d=l,g=0;g<d.getNumGeometries();g++){var y=d.getGeometryN(g);Wl.computeDistance(y,p,f)}else f.setMinimum(l.getCoordinate(),p)}else if(arguments[2]instanceof Vl&&arguments[0]instanceof Uc&&arguments[1]instanceof $a){var _=arguments[0],v=arguments[1],m=arguments[2],E=_.closestPoint(v);m.setMinimum(E,v)}};var Kl=function(t){this._maxPtDist=new Vl,this._inputGeom=t||null},Hl={MaxPointDistanceFilter:{configurable:!0},MaxMidpointDistanceFilter:{configurable:!0}};Kl.prototype.computeMaxMidpointDistance=function(t){var e=new Jl(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},Kl.prototype.computeMaxVertexDistance=function(t){var e=new Zl(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},Kl.prototype.findDistance=function(t){return this.computeMaxVertexDistance(t),this.computeMaxMidpointDistance(t),this._maxPtDist.getDistance()},Kl.prototype.getDistancePoints=function(){return this._maxPtDist},Kl.prototype.interfaces_=function(){return[]},Kl.prototype.getClass=function(){return Kl},Hl.MaxPointDistanceFilter.get=function(){return Zl},Hl.MaxMidpointDistanceFilter.get=function(){return Jl},Object.defineProperties(Kl,Hl);var Zl=function(t){this._maxPtDist=new Vl,this._minPtDist=new Vl,this._geom=t||null};Zl.prototype.filter=function(t){this._minPtDist.initialize(),Wl.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Zl.prototype.getMaxPointDistance=function(){return this._maxPtDist},Zl.prototype.interfaces_=function(){return[Xu]},Zl.prototype.getClass=function(){return Zl};var Jl=function(t){this._maxPtDist=new Vl,this._minPtDist=new Vl,this._geom=t||null};Jl.prototype.filter=function(t,e){if(0===e)return null;var n=t.getCoordinate(e-1),i=t.getCoordinate(e),r=new $a((n.x+i.x)/2,(n.y+i.y)/2);this._minPtDist.initialize(),Wl.computeDistance(this._geom,r,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Jl.prototype.isDone=function(){return!1},Jl.prototype.isGeometryChanged=function(){return!1},Jl.prototype.getMaxPointDistance=function(){return this._maxPtDist},Jl.prototype.interfaces_=function(){return[_h]},Jl.prototype.getClass=function(){return Jl};var Ql=function(t){this._comps=t||null};Ql.prototype.filter=function(t){t instanceof Rh&&this._comps.add(t)},Ql.prototype.interfaces_=function(){return[yh]},Ql.prototype.getClass=function(){return Ql},Ql.getPolygons=function(){if(1===arguments.length){var t=arguments[0];return Ql.getPolygons(t,new $u)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof Rh?n.add(e):e instanceof vh&&e.apply(new Ql(n)),n}};var $l=function(){if(this._lines=null,this._isForcedToLineString=!1,1===arguments.length){var t=arguments[0];this._lines=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._lines=e,this._isForcedToLineString=n}};$l.prototype.filter=function(t){if(this._isForcedToLineString&&t instanceof Lh){var e=t.getFactory().createLineString(t.getCoordinateSequence());return this._lines.add(e),null}t instanceof Oh&&this._lines.add(t)},$l.prototype.setForceToLineString=function(t){this._isForcedToLineString=t},$l.prototype.interfaces_=function(){return[Gu]},$l.prototype.getClass=function(){return $l},$l.getGeometry=function(){if(1===arguments.length){var t=arguments[0];return t.getFactory().buildGeometry($l.getLines(t))}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e.getFactory().buildGeometry($l.getLines(e,n))}},$l.getLines=function(){if(1===arguments.length){var t=arguments[0];return $l.getLines(t,!1)}if(2===arguments.length){if(ou(arguments[0],Hu)&&ou(arguments[1],Hu)){for(var e=arguments[0],n=arguments[1],i=e.iterator();i.hasNext();){var r=i.next();$l.getLines(r,n)}return n}if(arguments[0]instanceof ku&&"boolean"==typeof arguments[1]){var o=arguments[0],s=arguments[1],a=new $u;return o.apply(new $l(a,s)),a}if(arguments[0]instanceof ku&&ou(arguments[1],Hu)){var u=arguments[0],h=arguments[1];return u instanceof Oh?h.add(u):u.apply(new $l(h)),h}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&ou(arguments[0],Hu)&&ou(arguments[1],Hu)){for(var c=arguments[0],l=arguments[1],p=arguments[2],f=c.iterator();f.hasNext();){var d=f.next();$l.getLines(d,l,p)}return l}if("boolean"==typeof arguments[2]&&arguments[0]instanceof ku&&ou(arguments[1],Hu)){var g=arguments[0],y=arguments[1],_=arguments[2];return g.apply(new $l(y,_)),y}}};var tp=function(){if(this._boundaryRule=qu.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];if(null===t)throw new Wa("Rule must be non-null");this._boundaryRule=t}};tp.prototype.locateInternal=function(){if(arguments[0]instanceof $a&&arguments[1]instanceof Rh){var t=arguments[0],e=arguments[1];if(e.isEmpty())return iu.EXTERIOR;var n=e.getExteriorRing(),i=this.locateInPolygonRing(t,n);if(i===iu.EXTERIOR)return iu.EXTERIOR;if(i===iu.BOUNDARY)return iu.BOUNDARY;for(var r=0;r<e.getNumInteriorRing();r++){var o=e.getInteriorRingN(r),s=this.locateInPolygonRing(t,o);if(s===iu.INTERIOR)return iu.EXTERIOR;if(s===iu.BOUNDARY)return iu.BOUNDARY}return iu.INTERIOR}if(arguments[0]instanceof $a&&arguments[1]instanceof Oh){var a=arguments[0],u=arguments[1];if(!u.getEnvelopeInternal().intersects(a))return iu.EXTERIOR;var h=u.getCoordinates();return u.isClosed()||!a.equals(h[0])&&!a.equals(h[h.length-1])?Fu.isOnLine(a,h)?iu.INTERIOR:iu.EXTERIOR:iu.BOUNDARY}if(arguments[0]instanceof $a&&arguments[1]instanceof Sh){var c=arguments[0];return arguments[1].getCoordinate().equals2D(c)?iu.INTERIOR:iu.EXTERIOR}},tp.prototype.locateInPolygonRing=function(t,e){return e.getEnvelopeInternal().intersects(t)?Fu.locatePointInRing(t,e.getCoordinates()):iu.EXTERIOR},tp.prototype.intersects=function(t,e){return this.locate(t,e)!==iu.EXTERIOR},tp.prototype.updateLocationInfo=function(t){t===iu.INTERIOR&&(this._isIn=!0),t===iu.BOUNDARY&&this._numBoundaries++},tp.prototype.computeLocation=function(t,e){if(e instanceof Sh&&this.updateLocationInfo(this.locateInternal(t,e)),e instanceof Oh)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof Rh)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof mh)for(var n=e,i=0;i<n.getNumGeometries();i++){var r=n.getGeometryN(i);this.updateLocationInfo(this.locateInternal(t,r))}else if(e instanceof Mh)for(var o=e,s=0;s<o.getNumGeometries();s++){var a=o.getGeometryN(s);this.updateLocationInfo(this.locateInternal(t,a))}else if(e instanceof vh)for(var u=new yl(e);u.hasNext();){var h=u.next();h!==e&&this.computeLocation(t,h)}},tp.prototype.locate=function(t,e){return e.isEmpty()?iu.EXTERIOR:e instanceof Oh?this.locateInternal(t,e):e instanceof Rh?this.locateInternal(t,e):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(t,e),this._boundaryRule.isInBoundary(this._numBoundaries)?iu.BOUNDARY:this._numBoundaries>0||this._isIn?iu.INTERIOR:iu.EXTERIOR)},tp.prototype.interfaces_=function(){return[]},tp.prototype.getClass=function(){return tp};var ep=function t(){if(this._component=null,this._segIndex=null,this._pt=null,2===arguments.length){var e=arguments[0],n=arguments[1];t.call(this,e,t.INSIDE_AREA,n)}else if(3===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2];this._component=i,this._segIndex=r,this._pt=o}},np={INSIDE_AREA:{configurable:!0}};ep.prototype.isInsideArea=function(){return this._segIndex===ep.INSIDE_AREA},ep.prototype.getCoordinate=function(){return this._pt},ep.prototype.getGeometryComponent=function(){return this._component},ep.prototype.getSegmentIndex=function(){return this._segIndex},ep.prototype.interfaces_=function(){return[]},ep.prototype.getClass=function(){return ep},np.INSIDE_AREA.get=function(){return-1},Object.defineProperties(ep,np);var ip=function(t){this._pts=t||null};ip.prototype.filter=function(t){t instanceof Sh&&this._pts.add(t)},ip.prototype.interfaces_=function(){return[yh]},ip.prototype.getClass=function(){return ip},ip.getPoints=function(){if(1===arguments.length){var t=arguments[0];return t instanceof Sh?Rc.singletonList(t):ip.getPoints(t,new $u)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof Sh?n.add(e):e instanceof vh&&e.apply(new ip(n)),n}};var rp=function(){this._locations=null;var t=arguments[0];this._locations=t};rp.prototype.filter=function(t){(t instanceof Sh||t instanceof Oh||t instanceof Rh)&&this._locations.add(new ep(t,0,t.getCoordinate()))},rp.prototype.interfaces_=function(){return[yh]},rp.prototype.getClass=function(){return rp},rp.getLocations=function(t){var e=new $u;return t.apply(new rp(e)),e};var op=function(){if(this._geom=null,this._terminateDistance=0,this._ptLocator=new tp,this._minDistanceLocation=null,this._minDistance=Ka.MAX_VALUE,2===arguments.length){var t=arguments[0],e=arguments[1];this._geom=[t,e],this._terminateDistance=0}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];this._geom=new Array(2).fill(null),this._geom[0]=n,this._geom[1]=i,this._terminateDistance=r}};op.prototype.computeContainmentDistance=function(){if(0===arguments.length){var t=new Array(2).fill(null);if(this.computeContainmentDistance(0,t),this._minDistance<=this._terminateDistance)return null;this.computeContainmentDistance(1,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],i=1-e,r=Ql.getPolygons(this._geom[e]);if(r.size()>0){var o=rp.getLocations(this._geom[i]);if(this.computeContainmentDistance(o,r,n),this._minDistance<=this._terminateDistance)return this._minDistanceLocation[i]=n[0],this._minDistanceLocation[e]=n[1],null}}else if(3===arguments.length)if(arguments[2]instanceof Array&&ou(arguments[0],Qu)&&ou(arguments[1],Qu)){for(var s=arguments[0],a=arguments[1],u=arguments[2],h=0;h<s.size();h++)for(var c=s.get(h),l=0;l<a.size();l++)if(this.computeContainmentDistance(c,a.get(l),u),this._minDistance<=this._terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof ep&&arguments[1]instanceof Rh){var p=arguments[0],f=arguments[1],d=arguments[2],g=p.getCoordinate();if(iu.EXTERIOR!==this._ptLocator.locate(g,f))return this._minDistance=0,d[0]=p,d[1]=new ep(f,g),null}},op.prototype.computeMinDistanceLinesPoints=function(t,e,n){for(var i=0;i<t.size();i++)for(var r=t.get(i),o=0;o<e.size();o++){var s=e.get(o);if(this.computeMinDistance(r,s,n),this._minDistance<=this._terminateDistance)return null}},op.prototype.computeFacetDistance=function(){var t=new Array(2).fill(null),e=$l.getLines(this._geom[0]),n=$l.getLines(this._geom[1]),i=ip.getPoints(this._geom[0]),r=ip.getPoints(this._geom[1]);return this.computeMinDistanceLines(e,n,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(e,r,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(n,i,t),this.updateMinDistance(t,!0),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistancePoints(i,r,t),void this.updateMinDistance(t,!1))))},op.prototype.nearestLocations=function(){return this.computeMinDistance(),this._minDistanceLocation},op.prototype.updateMinDistance=function(t,e){if(null===t[0])return null;e?(this._minDistanceLocation[0]=t[1],this._minDistanceLocation[1]=t[0]):(this._minDistanceLocation[0]=t[0],this._minDistanceLocation[1]=t[1])},op.prototype.nearestPoints=function(){return this.computeMinDistance(),[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()]},op.prototype.computeMinDistance=function(){if(0===arguments.length){if(null!==this._minDistanceLocation)return null;if(this._minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this._minDistance<=this._terminateDistance)return null;this.computeFacetDistance()}else if(3===arguments.length)if(arguments[2]instanceof Array&&arguments[0]instanceof Oh&&arguments[1]instanceof Sh){var t=arguments[0],e=arguments[1],n=arguments[2];if(t.getEnvelopeInternal().distance(e.getEnvelopeInternal())>this._minDistance)return null;for(var i=t.getCoordinates(),r=e.getCoordinate(),o=0;o<i.length-1;o++){var s=Fu.distancePointLine(r,i[o],i[o+1]);if(s<this._minDistance){this._minDistance=s;var a=new Uc(i[o],i[o+1]).closestPoint(r);n[0]=new ep(t,o,a),n[1]=new ep(e,0,r)}if(this._minDistance<=this._terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof Oh&&arguments[1]instanceof Oh){var u=arguments[0],h=arguments[1],c=arguments[2];if(u.getEnvelopeInternal().distance(h.getEnvelopeInternal())>this._minDistance)return null;for(var l=u.getCoordinates(),p=h.getCoordinates(),f=0;f<l.length-1;f++)for(var d=0;d<p.length-1;d++){var g=Fu.distanceLineLine(l[f],l[f+1],p[d],p[d+1]);if(g<this._minDistance){this._minDistance=g;var y=new Uc(l[f],l[f+1]),_=new Uc(p[d],p[d+1]),v=y.closestPoints(_);c[0]=new ep(u,f,v[0]),c[1]=new ep(h,d,v[1])}if(this._minDistance<=this._terminateDistance)return null}}},op.prototype.computeMinDistancePoints=function(t,e,n){for(var i=0;i<t.size();i++)for(var r=t.get(i),o=0;o<e.size();o++){var s=e.get(o),a=r.getCoordinate().distance(s.getCoordinate());if(a<this._minDistance&&(this._minDistance=a,n[0]=new ep(r,0,r.getCoordinate()),n[1]=new ep(s,0,s.getCoordinate())),this._minDistance<=this._terminateDistance)return null}},op.prototype.distance=function(){if(null===this._geom[0]||null===this._geom[1])throw new Wa("null geometries are not supported");return this._geom[0].isEmpty()||this._geom[1].isEmpty()?0:(this.computeMinDistance(),this._minDistance)},op.prototype.computeMinDistanceLines=function(t,e,n){for(var i=0;i<t.size();i++)for(var r=t.get(i),o=0;o<e.size();o++){var s=e.get(o);if(this.computeMinDistance(r,s,n),this._minDistance<=this._terminateDistance)return null}},op.prototype.interfaces_=function(){return[]},op.prototype.getClass=function(){return op},op.distance=function(t,e){return new op(t,e).distance()},op.isWithinDistance=function(t,e,n){return new op(t,e,n).distance()<=n},op.nearestPoints=function(t,e){return new op(t,e).nearestPoints()};var sp=function(){this._pt=[new $a,new $a],this._distance=Ka.NaN,this._isNull=!0};sp.prototype.getCoordinates=function(){return this._pt},sp.prototype.getCoordinate=function(t){return this._pt[t]},sp.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var i=e.distance(n);i<this._distance&&this.initialize(e,n,i)}},sp.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(i),this._distance=r,this._isNull=!1}},sp.prototype.toString=function(){return Su.toLineString(this._pt[0],this._pt[1])},sp.prototype.getDistance=function(){return this._distance},sp.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var i=e.distance(n);i>this._distance&&this.initialize(e,n,i)}},sp.prototype.interfaces_=function(){return[]},sp.prototype.getClass=function(){return sp};var ap=function(){};ap.prototype.interfaces_=function(){return[]},ap.prototype.getClass=function(){return ap},ap.computeDistance=function(){if(arguments[2]instanceof sp&&arguments[0]instanceof Oh&&arguments[1]instanceof $a)for(var t=arguments[0],e=arguments[1],n=arguments[2],i=new Uc,r=t.getCoordinates(),o=0;o<r.length-1;o++){i.setCoordinates(r[o],r[o+1]);var s=i.closestPoint(e);n.setMinimum(s,e)}else if(arguments[2]instanceof sp&&arguments[0]instanceof Rh&&arguments[1]instanceof $a){var a=arguments[0],u=arguments[1],h=arguments[2];ap.computeDistance(a.getExteriorRing(),u,h);for(var c=0;c<a.getNumInteriorRing();c++)ap.computeDistance(a.getInteriorRingN(c),u,h)}else if(arguments[2]instanceof sp&&arguments[0]instanceof ku&&arguments[1]instanceof $a){var l=arguments[0],p=arguments[1],f=arguments[2];if(l instanceof Oh)ap.computeDistance(l,p,f);else if(l instanceof Rh)ap.computeDistance(l,p,f);else if(l instanceof vh)for(var d=l,g=0;g<d.getNumGeometries();g++){var y=d.getGeometryN(g);ap.computeDistance(y,p,f)}else f.setMinimum(l.getCoordinate(),p)}else if(arguments[2]instanceof sp&&arguments[0]instanceof Uc&&arguments[1]instanceof $a){var _=arguments[0],v=arguments[1],m=arguments[2],E=_.closestPoint(v);m.setMinimum(E,v)}};var up=function(){this._g0=null,this._g1=null,this._ptDist=new sp,this._densifyFrac=0;var t=arguments[0],e=arguments[1];this._g0=t,this._g1=e},hp={MaxPointDistanceFilter:{configurable:!0},MaxDensifiedByFractionDistanceFilter:{configurable:!0}};up.prototype.getCoordinates=function(){return this._ptDist.getCoordinates()},up.prototype.setDensifyFraction=function(t){if(t>1||t<=0)throw new Wa("Fraction is not in range (0.0 - 1.0]");this._densifyFrac=t},up.prototype.compute=function(t,e){this.computeOrientedDistance(t,e,this._ptDist),this.computeOrientedDistance(e,t,this._ptDist)},up.prototype.distance=function(){return this.compute(this._g0,this._g1),this._ptDist.getDistance()},up.prototype.computeOrientedDistance=function(t,e,n){var i=new cp(e);if(t.apply(i),n.setMaximum(i.getMaxPointDistance()),this._densifyFrac>0){var r=new lp(e,this._densifyFrac);t.apply(r),n.setMaximum(r.getMaxPointDistance())}},up.prototype.orientedDistance=function(){return this.computeOrientedDistance(this._g0,this._g1,this._ptDist),this._ptDist.getDistance()},up.prototype.interfaces_=function(){return[]},up.prototype.getClass=function(){return up},up.distance=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return new up(t,e).distance()}if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2],o=new up(n,i);return o.setDensifyFraction(r),o.distance()}},hp.MaxPointDistanceFilter.get=function(){return cp},hp.MaxDensifiedByFractionDistanceFilter.get=function(){return lp},Object.defineProperties(up,hp);var cp=function(){this._maxPtDist=new sp,this._minPtDist=new sp,this._euclideanDist=new ap,this._geom=null;var t=arguments[0];this._geom=t};cp.prototype.filter=function(t){this._minPtDist.initialize(),ap.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},cp.prototype.getMaxPointDistance=function(){return this._maxPtDist},cp.prototype.interfaces_=function(){return[Xu]},cp.prototype.getClass=function(){return cp};var lp=function(){this._maxPtDist=new sp,this._minPtDist=new sp,this._geom=null,this._numSubSegs=0;var t=arguments[0],e=arguments[1];this._geom=t,this._numSubSegs=Math.trunc(Math.round(1/e))};lp.prototype.filter=function(t,e){if(0===e)return null;for(var n=t.getCoordinate(e-1),i=t.getCoordinate(e),r=(i.x-n.x)/this._numSubSegs,o=(i.y-n.y)/this._numSubSegs,s=0;s<this._numSubSegs;s++){var a=n.x+s*r,u=n.y+s*o,h=new $a(a,u);this._minPtDist.initialize(),ap.computeDistance(this._geom,h,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)}},lp.prototype.isDone=function(){return!1},lp.prototype.isGeometryChanged=function(){return!1},lp.prototype.getMaxPointDistance=function(){return this._maxPtDist},lp.prototype.interfaces_=function(){return[_h]},lp.prototype.getClass=function(){return lp};var pp=function(t,e,n){this._minValidDistance=null,this._maxValidDistance=null,this._minDistanceFound=null,this._maxDistanceFound=null,this._isValid=!0,this._errMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._bufDistance=e||null,this._result=n||null},fp={VERBOSE:{configurable:!0},MAX_DISTANCE_DIFF_FRAC:{configurable:!0}};pp.prototype.checkMaximumDistance=function(t,e,n){var i=new up(e,t);if(i.setDensifyFraction(.25),this._maxDistanceFound=i.orientedDistance(),this._maxDistanceFound>n){this._isValid=!1;var r=i.getCoordinates();this._errorLocation=r[1],this._errorIndicator=t.getFactory().createLineString(r),this._errMsg="Distance between buffer curve and input is too large ("+this._maxDistanceFound+" at "+Su.toLineString(r[0],r[1])+")"}},pp.prototype.isValid=function(){var t=Math.abs(this._bufDistance),e=pp.MAX_DISTANCE_DIFF_FRAC*t;return this._minValidDistance=t-e,this._maxValidDistance=t+e,!(!this._input.isEmpty()&&!this._result.isEmpty())||(this._bufDistance>0?this.checkPositiveValid():this.checkNegativeValid(),pp.VERBOSE&&mu.out.println("Min Dist= "+this._minDistanceFound+"  err= "+(1-this._minDistanceFound/this._bufDistance)+"  Max Dist= "+this._maxDistanceFound+"  err= "+(this._maxDistanceFound/this._bufDistance-1)),this._isValid)},pp.prototype.checkNegativeValid=function(){if(!(this._input instanceof Rh||this._input instanceof Mh||this._input instanceof vh))return null;var t=this.getPolygonLines(this._input);if(this.checkMinimumDistance(t,this._result,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(t,this._result,this._maxValidDistance)},pp.prototype.getErrorIndicator=function(){return this._errorIndicator},pp.prototype.checkMinimumDistance=function(t,e,n){var i=new op(t,e,n);if(this._minDistanceFound=i.distance(),this._minDistanceFound<n){this._isValid=!1;var r=i.nearestPoints();this._errorLocation=i.nearestPoints()[1],this._errorIndicator=t.getFactory().createLineString(r),this._errMsg="Distance between buffer curve and input is too small ("+this._minDistanceFound+" at "+Su.toLineString(r[0],r[1])+" )"}},pp.prototype.checkPositiveValid=function(){var t=this._result.getBoundary();if(this.checkMinimumDistance(this._input,t,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(this._input,t,this._maxValidDistance)},pp.prototype.getErrorLocation=function(){return this._errorLocation},pp.prototype.getPolygonLines=function(t){for(var e=new $u,n=new $l(e),i=Ql.getPolygons(t).iterator();i.hasNext();)i.next().apply(n);return t.getFactory().buildGeometry(e)},pp.prototype.getErrorMessage=function(){return this._errMsg},pp.prototype.interfaces_=function(){return[]},pp.prototype.getClass=function(){return pp},fp.VERBOSE.get=function(){return!1},fp.MAX_DISTANCE_DIFF_FRAC.get=function(){return.012},Object.defineProperties(pp,fp);var dp=function(t,e,n){this._isValid=!0,this._errorMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._distance=e||null,this._result=n||null},gp={VERBOSE:{configurable:!0},MAX_ENV_DIFF_FRAC:{configurable:!0}};dp.prototype.isValid=function(){return this.checkPolygonal(),this._isValid?(this.checkExpectedEmpty(),this._isValid?(this.checkEnvelope(),this._isValid?(this.checkArea(),this._isValid?(this.checkDistance(),this._isValid):this._isValid):this._isValid):this._isValid):this._isValid},dp.prototype.checkEnvelope=function(){if(this._distance<0)return null;var t=this._distance*dp.MAX_ENV_DIFF_FRAC;0===t&&(t=.001);var e=new xu(this._input.getEnvelopeInternal());e.expandBy(this._distance);var n=new xu(this._result.getEnvelopeInternal());n.expandBy(t),n.contains(e)||(this._isValid=!1,this._errorMsg="Buffer envelope is incorrect",this._errorIndicator=this._input.getFactory().toGeometry(n)),this.report("Envelope")},dp.prototype.checkDistance=function(){var t=new pp(this._input,this._distance,this._result);t.isValid()||(this._isValid=!1,this._errorMsg=t.getErrorMessage(),this._errorLocation=t.getErrorLocation(),this._errorIndicator=t.getErrorIndicator()),this.report("Distance")},dp.prototype.checkArea=function(){var t=this._input.getArea(),e=this._result.getArea();this._distance>0&&t>e&&(this._isValid=!1,this._errorMsg="Area of positive buffer is smaller than input",this._errorIndicator=this._result),this._distance<0&&t<e&&(this._isValid=!1,this._errorMsg="Area of negative buffer is larger than input",this._errorIndicator=this._result),this.report("Area")},dp.prototype.checkPolygonal=function(){this._result instanceof Rh||this._result instanceof Mh||(this._isValid=!1),this._errorMsg="Result is not polygonal",this._errorIndicator=this._result,this.report("Polygonal")},dp.prototype.getErrorIndicator=function(){return this._errorIndicator},dp.prototype.getErrorLocation=function(){return this._errorLocation},dp.prototype.checkExpectedEmpty=function(){return this._input.getDimension()>=2?null:this._distance>0?null:(this._result.isEmpty()||(this._isValid=!1,this._errorMsg="Result is non-empty",this._errorIndicator=this._result),void this.report("ExpectedEmpty"))},dp.prototype.report=function(t){if(!dp.VERBOSE)return null;mu.out.println("Check "+t+": "+(this._isValid?"passed":"FAILED"))},dp.prototype.getErrorMessage=function(){return this._errorMsg},dp.prototype.interfaces_=function(){return[]},dp.prototype.getClass=function(){return dp},dp.isValidMsg=function(t,e,n){var i=new dp(t,e,n);return i.isValid()?null:i.getErrorMessage()},dp.isValid=function(t,e,n){return!!new dp(t,e,n).isValid()},gp.VERBOSE.get=function(){return!1},gp.MAX_ENV_DIFF_FRAC.get=function(){return.012},Object.defineProperties(dp,gp);var yp=function(){this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e};yp.prototype.getCoordinates=function(){return this._pts},yp.prototype.size=function(){return this._pts.length},yp.prototype.getCoordinate=function(t){return this._pts[t]},yp.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},yp.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:Bc.octant(this.getCoordinate(t),this.getCoordinate(t+1))},yp.prototype.setData=function(t){this._data=t},yp.prototype.getData=function(){return this._data},yp.prototype.toString=function(){return Su.toLineString(new Gh(this._pts))},yp.prototype.interfaces_=function(){return[Yc]},yp.prototype.getClass=function(){return yp};var _p=function(){this._findAllIntersections=!1,this._isCheckEndSegmentsOnly=!1,this._li=null,this._interiorIntersection=null,this._intSegments=null,this._intersections=new $u,this._intersectionCount=0,this._keepIntersections=!0;var t=arguments[0];this._li=t,this._interiorIntersection=null};_p.prototype.getInteriorIntersection=function(){return this._interiorIntersection},_p.prototype.setCheckEndSegmentsOnly=function(t){this._isCheckEndSegmentsOnly=t},_p.prototype.getIntersectionSegments=function(){return this._intSegments},_p.prototype.count=function(){return this._intersectionCount},_p.prototype.getIntersections=function(){return this._intersections},_p.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},_p.prototype.setKeepIntersections=function(t){this._keepIntersections=t},_p.prototype.processIntersections=function(t,e,n,i){if(!this._findAllIntersections&&this.hasIntersection())return null;if(t===n&&e===i)return null;if(this._isCheckEndSegmentsOnly&&!this.isEndSegment(t,e)&&!this.isEndSegment(n,i))return null;var r=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[i],a=n.getCoordinates()[i+1];this._li.computeIntersection(r,o,s,a),this._li.hasIntersection()&&this._li.isInteriorIntersection()&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=r,this._intSegments[1]=o,this._intSegments[2]=s,this._intSegments[3]=a,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)},_p.prototype.isEndSegment=function(t,e){return 0===e||e>=t.size()-2},_p.prototype.hasIntersection=function(){return null!==this._interiorIntersection},_p.prototype.isDone=function(){return!this._findAllIntersections&&null!==this._interiorIntersection},_p.prototype.interfaces_=function(){return[wl]},_p.prototype.getClass=function(){return _p},_p.createAllIntersectionsFinder=function(t){var e=new _p(t);return e.setFindAllIntersections(!0),e},_p.createAnyIntersectionFinder=function(t){return new _p(t)},_p.createIntersectionCounter=function(t){var e=new _p(t);return e.setFindAllIntersections(!0),e.setKeepIntersections(!1),e};var vp=function(){this._li=new Pu,this._segStrings=null,this._findAllIntersections=!1,this._segInt=null,this._isValid=!0;var t=arguments[0];this._segStrings=t};vp.prototype.execute=function(){if(null!==this._segInt)return null;this.checkInteriorIntersections()},vp.prototype.getIntersections=function(){return this._segInt.getIntersections()},vp.prototype.isValid=function(){return this.execute(),this._isValid},vp.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},vp.prototype.checkInteriorIntersections=function(){this._isValid=!0,this._segInt=new _p(this._li),this._segInt.setFindAllIntersections(this._findAllIntersections);var t=new Jc;if(t.setSegmentIntersector(this._segInt),t.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null},vp.prototype.checkValid=function(){if(this.execute(),!this._isValid)throw new rc(this.getErrorMessage(),this._segInt.getInteriorIntersection())},vp.prototype.getErrorMessage=function(){if(this._isValid)return"no intersections found";var t=this._segInt.getIntersectionSegments();return"found non-noded intersection between "+Su.toLineString(t[0],t[1])+" and "+Su.toLineString(t[2],t[3])},vp.prototype.interfaces_=function(){return[]},vp.prototype.getClass=function(){return vp},vp.computeIntersections=function(t){var e=new vp(t);return e.setFindAllIntersections(!0),e.isValid(),e.getIntersections()};var mp=function t(){this._nv=null;var e=arguments[0];this._nv=new vp(t.toSegmentStrings(e))};mp.prototype.checkValid=function(){this._nv.checkValid()},mp.prototype.interfaces_=function(){return[]},mp.prototype.getClass=function(){return mp},mp.toSegmentStrings=function(t){for(var e=new $u,n=t.iterator();n.hasNext();){var i=n.next();e.add(new yp(i.getCoordinates(),i))}return e},mp.checkValid=function(t){new mp(t).checkValid()};var Ep=function(t){this._mapOp=t};Ep.prototype.map=function(t){for(var e=new $u,n=0;n<t.getNumGeometries();n++){var i=this._mapOp.map(t.getGeometryN(n));i.isEmpty()||e.add(i)}return t.getFactory().createGeometryCollection(Wh.toGeometryArray(e))},Ep.prototype.interfaces_=function(){return[]},Ep.prototype.getClass=function(){return Ep},Ep.map=function(t,e){return new Ep(e).map(t)};var xp=function(){this._op=null,this._geometryFactory=null,this._ptLocator=null,this._lineEdgesList=new $u,this._resultLineList=new $u;var t=arguments[0],e=arguments[1],n=arguments[2];this._op=t,this._geometryFactory=e,this._ptLocator=n};xp.prototype.collectLines=function(t){for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next();this.collectLineEdge(n,t,this._lineEdgesList),this.collectBoundaryTouchEdge(n,t,this._lineEdgesList)}},xp.prototype.labelIsolatedLine=function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._op.getArgGeometry(e));t.getLabel().setLocation(e,n)},xp.prototype.build=function(t){return this.findCoveredLineEdges(),this.collectLines(t),this.buildLines(t),this._resultLineList},xp.prototype.collectLineEdge=function(t,e,n){var i=t.getLabel(),r=t.getEdge();t.isLineEdge()&&(t.isVisited()||!ef.isResultOfOp(i,e)||r.isCovered()||(n.add(r),t.setVisitedEdge(!0)))},xp.prototype.findCoveredLineEdges=function(){for(var t=this._op.getGraph().getNodes().iterator();t.hasNext();)t.next().getEdges().findCoveredLineEdges();for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next(),i=n.getEdge();if(n.isLineEdge()&&!i.isCoveredSet()){var r=this._op.isCoveredByA(n.getCoordinate());i.setCovered(r)}}},xp.prototype.labelIsolatedLines=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),i=n.getLabel();n.isIsolated()&&(i.isNull(0)?this.labelIsolatedLine(n,0):this.labelIsolatedLine(n,1))}},xp.prototype.buildLines=function(t){for(var e=this._lineEdgesList.iterator();e.hasNext();){var n=e.next(),i=this._geometryFactory.createLineString(n.getCoordinates());this._resultLineList.add(i),n.setInResult(!0)}},xp.prototype.collectBoundaryTouchEdge=function(t,e,n){var i=t.getLabel();return t.isLineEdge()?null:t.isVisited()?null:t.isInteriorAreaEdge()?null:t.getEdge().isInResult()?null:(Nu.isTrue(!(t.isInResult()||t.getSym().isInResult())||!t.getEdge().isInResult()),void(ef.isResultOfOp(i,e)&&e===ef.INTERSECTION&&(n.add(t.getEdge()),t.setVisitedEdge(!0))))},xp.prototype.interfaces_=function(){return[]},xp.prototype.getClass=function(){return xp};var bp=function(){this._op=null,this._geometryFactory=null,this._resultPointList=new $u;var t=arguments[0],e=arguments[1];this._op=t,this._geometryFactory=e};bp.prototype.filterCoveredNodeToPoint=function(t){var e=t.getCoordinate();if(!this._op.isCoveredByLA(e)){var n=this._geometryFactory.createPoint(e);this._resultPointList.add(n)}},bp.prototype.extractNonCoveredResultNodes=function(t){for(var e=this._op.getGraph().getNodes().iterator();e.hasNext();){var n=e.next();if(!(n.isInResult()||n.isIncidentEdgeInResult()||0!==n.getEdges().getDegree()&&t!==ef.INTERSECTION)){var i=n.getLabel();ef.isResultOfOp(i,t)&&this.filterCoveredNodeToPoint(n)}}},bp.prototype.build=function(t){return this.extractNonCoveredResultNodes(t),this._resultPointList},bp.prototype.interfaces_=function(){return[]},bp.prototype.getClass=function(){return bp};var wp=function(){this._inputGeom=null,this._factory=null,this._pruneEmptyGeometry=!0,this._preserveGeometryCollectionType=!0,this._preserveCollections=!1,this._preserveType=!1};wp.prototype.transformPoint=function(t,e){return this._factory.createPoint(this.transformCoordinates(t.getCoordinateSequence(),t))},wp.prototype.transformPolygon=function(t,e){var n=!0,i=this.transformLinearRing(t.getExteriorRing(),t);null!==i&&i instanceof Lh&&!i.isEmpty()||(n=!1);for(var r=new $u,o=0;o<t.getNumInteriorRing();o++){var s=this.transformLinearRing(t.getInteriorRingN(o),t);null===s||s.isEmpty()||(s instanceof Lh||(n=!1),r.add(s))}if(n)return this._factory.createPolygon(i,r.toArray([]));var a=new $u;return null!==i&&a.add(i),a.addAll(r),this._factory.buildGeometry(a)},wp.prototype.createCoordinateSequence=function(t){return this._factory.getCoordinateSequenceFactory().create(t)},wp.prototype.getInputGeometry=function(){return this._inputGeom},wp.prototype.transformMultiLineString=function(t,e){for(var n=new $u,i=0;i<t.getNumGeometries();i++){var r=this.transformLineString(t.getGeometryN(i),t);null!==r&&(r.isEmpty()||n.add(r))}return this._factory.buildGeometry(n)},wp.prototype.transformCoordinates=function(t,e){return this.copy(t)},wp.prototype.transformLineString=function(t,e){return this._factory.createLineString(this.transformCoordinates(t.getCoordinateSequence(),t))},wp.prototype.transformMultiPoint=function(t,e){for(var n=new $u,i=0;i<t.getNumGeometries();i++){var r=this.transformPoint(t.getGeometryN(i),t);null!==r&&(r.isEmpty()||n.add(r))}return this._factory.buildGeometry(n)},wp.prototype.transformMultiPolygon=function(t,e){for(var n=new $u,i=0;i<t.getNumGeometries();i++){var r=this.transformPolygon(t.getGeometryN(i),t);null!==r&&(r.isEmpty()||n.add(r))}return this._factory.buildGeometry(n)},wp.prototype.copy=function(t){return t.copy()},wp.prototype.transformGeometryCollection=function(t,e){for(var n=new $u,i=0;i<t.getNumGeometries();i++){var r=this.transform(t.getGeometryN(i));null!==r&&(this._pruneEmptyGeometry&&r.isEmpty()||n.add(r))}return this._preserveGeometryCollectionType?this._factory.createGeometryCollection(Wh.toGeometryArray(n)):this._factory.buildGeometry(n)},wp.prototype.transform=function(t){if(this._inputGeom=t,this._factory=t.getFactory(),t instanceof Sh)return this.transformPoint(t,null);if(t instanceof Nh)return this.transformMultiPoint(t,null);if(t instanceof Lh)return this.transformLinearRing(t,null);if(t instanceof Oh)return this.transformLineString(t,null);if(t instanceof mh)return this.transformMultiLineString(t,null);if(t instanceof Rh)return this.transformPolygon(t,null);if(t instanceof Mh)return this.transformMultiPolygon(t,null);if(t instanceof vh)return this.transformGeometryCollection(t,null);throw new Wa("Unknown Geometry subtype: "+t.getClass().getName())},wp.prototype.transformLinearRing=function(t,e){var n=this.transformCoordinates(t.getCoordinateSequence(),t);if(null===n)return this._factory.createLinearRing(null);var i=n.size();return i>0&&i<4&&!this._preserveType?this._factory.createLineString(n):this._factory.createLinearRing(n)},wp.prototype.interfaces_=function(){return[]},wp.prototype.getClass=function(){return wp};var Cp=function t(){if(this._snapTolerance=0,this._srcPts=null,this._seg=new Uc,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof Oh&&"number"==typeof arguments[1]){var e=arguments[0],n=arguments[1];t.call(this,e.getCoordinates(),n)}else if(arguments[0]instanceof Array&&"number"==typeof arguments[1]){var i=arguments[0],r=arguments[1];this._srcPts=i,this._isClosed=t.isClosed(i),this._snapTolerance=r}};Cp.prototype.snapVertices=function(t,e){for(var n=this._isClosed?t.size()-1:t.size(),i=0;i<n;i++){var r=t.get(i),o=this.findSnapForVertex(r,e);null!==o&&(t.set(i,new $a(o)),0===i&&this._isClosed&&t.set(t.size()-1,new $a(o)))}},Cp.prototype.findSnapForVertex=function(t,e){for(var n=0;n<e.length;n++){if(t.equals2D(e[n]))return null;if(t.distance(e[n])<this._snapTolerance)return e[n]}return null},Cp.prototype.snapTo=function(t){var e=new eh(this._srcPts);return this.snapVertices(e,t),this.snapSegments(e,t),e.toCoordinateArray()},Cp.prototype.snapSegments=function(t,e){if(0===e.length)return null;var n=e.length;e[0].equals2D(e[e.length-1])&&(n=e.length-1);for(var i=0;i<n;i++){var r=e[i],o=this.findSegmentIndexToSnap(r,t);o>=0&&t.add(o+1,new $a(r),!1)}},Cp.prototype.findSegmentIndexToSnap=function(t,e){for(var n=Ka.MAX_VALUE,i=-1,r=0;r<e.size()-1;r++){if(this._seg.p0=e.get(r),this._seg.p1=e.get(r+1),this._seg.p0.equals2D(t)||this._seg.p1.equals2D(t)){if(this._allowSnappingToSourceVertices)continue;return-1}var o=this._seg.distance(t);o<this._snapTolerance&&o<n&&(n=o,i=r)}return i},Cp.prototype.setAllowSnappingToSourceVertices=function(t){this._allowSnappingToSourceVertices=t},Cp.prototype.interfaces_=function(){return[]},Cp.prototype.getClass=function(){return Cp},Cp.isClosed=function(t){return!(t.length<=1)&&t[0].equals2D(t[t.length-1])};var Op=function(t){this._srcGeom=t||null},Ip={SNAP_PRECISION_FACTOR:{configurable:!0}};Op.prototype.snapTo=function(t,e){var n=this.extractTargetCoordinates(t);return new Sp(e,n).transform(this._srcGeom)},Op.prototype.snapToSelf=function(t,e){var n=this.extractTargetCoordinates(this._srcGeom),i=new Sp(t,n,!0).transform(this._srcGeom),r=i;return e&&ou(r,Th)&&(r=i.buffer(0)),r},Op.prototype.computeSnapTolerance=function(t){return this.computeMinimumSegmentLength(t)/10},Op.prototype.extractTargetCoordinates=function(t){for(var e=new Sr,n=t.getCoordinates(),i=0;i<n.length;i++)e.add(n[i]);return e.toArray(new Array(0).fill(null))},Op.prototype.computeMinimumSegmentLength=function(t){for(var e=Ka.MAX_VALUE,n=0;n<t.length-1;n++){var i=t[n].distance(t[n+1]);i<e&&(e=i)}return e},Op.prototype.interfaces_=function(){return[]},Op.prototype.getClass=function(){return Op},Op.snap=function(t,e,n){var i=new Array(2).fill(null),r=new Op(t);i[0]=r.snapTo(e,n);var o=new Op(e);return i[1]=o.snapTo(i[0],n),i},Op.computeOverlaySnapTolerance=function(){if(1===arguments.length){var t=arguments[0],e=Op.computeSizeBasedSnapTolerance(t),n=t.getPrecisionModel();if(n.getType()===qh.FIXED){var i=1/n.getScale()*2/1.415;i>e&&(e=i)}return e}if(2===arguments.length){var r=arguments[0],o=arguments[1];return Math.min(Op.computeOverlaySnapTolerance(r),Op.computeOverlaySnapTolerance(o))}},Op.computeSizeBasedSnapTolerance=function(t){var e=t.getEnvelopeInternal();return Math.min(e.getHeight(),e.getWidth())*Op.SNAP_PRECISION_FACTOR},Op.snapToSelf=function(t,e,n){return new Op(t).snapToSelf(e,n)},Ip.SNAP_PRECISION_FACTOR.get=function(){return 1e-9},Object.defineProperties(Op,Ip);var Sp=function(t){function e(e,n,i){t.call(this),this._snapTolerance=e||null,this._snapPts=n||null,this._isSelfSnap=void 0!==i&&i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.snapLine=function(t,e){var n=new Cp(t,this._snapTolerance);return n.setAllowSnappingToSourceVertices(this._isSelfSnap),n.snapTo(e)},e.prototype.transformCoordinates=function(t,e){var n=t.toCoordinateArray(),i=this.snapLine(n,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(i)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(wp),Tp=function(){this._isFirst=!0,this._commonMantissaBitsCount=53,this._commonBits=0,this._commonSignExp=null};Tp.prototype.getCommon=function(){return Ka.longBitsToDouble(this._commonBits)},Tp.prototype.add=function(t){var e=Ka.doubleToLongBits(t);return this._isFirst?(this._commonBits=e,this._commonSignExp=Tp.signExpBits(this._commonBits),this._isFirst=!1,null):Tp.signExpBits(e)!==this._commonSignExp?(this._commonBits=0,null):(this._commonMantissaBitsCount=Tp.numCommonMostSigMantissaBits(this._commonBits,e),void(this._commonBits=Tp.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))))},Tp.prototype.toString=function(){if(1===arguments.length){var t=arguments[0],e=Ka.longBitsToDouble(t),n="0000000000000000000000000000000000000000000000000000000000000000"+Ka.toBinaryString(t),i=n.substring(n.length-64);return i.substring(0,1)+"  "+i.substring(1,12)+"(exp) "+i.substring(12)+" [ "+e+" ]"}},Tp.prototype.interfaces_=function(){return[]},Tp.prototype.getClass=function(){return Tp},Tp.getBit=function(t,e){return 0!=(t&1<<e)?1:0},Tp.signExpBits=function(t){return t>>52},Tp.zeroLowerBits=function(t,e){return t&~((1<<e)-1)},Tp.numCommonMostSigMantissaBits=function(t,e){for(var n=0,i=52;i>=0;i--){if(Tp.getBit(t,i)!==Tp.getBit(e,i))return n;n++}return 52};var Rp=function(){this._commonCoord=null,this._ccFilter=new Lp},Np={CommonCoordinateFilter:{configurable:!0},Translater:{configurable:!0}};Rp.prototype.addCommonBits=function(t){var e=new Mp(this._commonCoord);t.apply(e),t.geometryChanged()},Rp.prototype.removeCommonBits=function(t){if(0===this._commonCoord.x&&0===this._commonCoord.y)return t;var e=new $a(this._commonCoord);e.x=-e.x,e.y=-e.y;var n=new Mp(e);return t.apply(n),t.geometryChanged(),t},Rp.prototype.getCommonCoordinate=function(){return this._commonCoord},Rp.prototype.add=function(t){t.apply(this._ccFilter),this._commonCoord=this._ccFilter.getCommonCoordinate()},Rp.prototype.interfaces_=function(){return[]},Rp.prototype.getClass=function(){return Rp},Np.CommonCoordinateFilter.get=function(){return Lp},Np.Translater.get=function(){return Mp},Object.defineProperties(Rp,Np);var Lp=function(){this._commonBitsX=new Tp,this._commonBitsY=new Tp};Lp.prototype.filter=function(t){this._commonBitsX.add(t.x),this._commonBitsY.add(t.y)},Lp.prototype.getCommonCoordinate=function(){return new $a(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())},Lp.prototype.interfaces_=function(){return[Xu]},Lp.prototype.getClass=function(){return Lp};var Mp=function(){this.trans=null;var t=arguments[0];this.trans=t};Mp.prototype.filter=function(t,e){var n=t.getOrdinate(e,0)+this.trans.x,i=t.getOrdinate(e,1)+this.trans.y;t.setOrdinate(e,0,n),t.setOrdinate(e,1,i)},Mp.prototype.isDone=function(){return!1},Mp.prototype.isGeometryChanged=function(){return!0},Mp.prototype.interfaces_=function(){return[_h]},Mp.prototype.getClass=function(){return Mp};var Pp=function(t,e){this._geom=new Array(2).fill(null),this._snapTolerance=null,this._cbr=null,this._geom[0]=t,this._geom[1]=e,this.computeSnapTolerance()};Pp.prototype.selfSnap=function(t){return new Op(t).snapTo(t,this._snapTolerance)},Pp.prototype.removeCommonBits=function(t){this._cbr=new Rp,this._cbr.add(t[0]),this._cbr.add(t[1]);var e=new Array(2).fill(null);return e[0]=this._cbr.removeCommonBits(t[0].copy()),e[1]=this._cbr.removeCommonBits(t[1].copy()),e},Pp.prototype.prepareResult=function(t){return this._cbr.addCommonBits(t),t},Pp.prototype.getResultGeometry=function(t){var e=this.snap(this._geom),n=ef.overlayOp(e[0],e[1],t);return this.prepareResult(n)},Pp.prototype.checkValid=function(t){t.isValid()||mu.out.println("Snapped geometry is invalid")},Pp.prototype.computeSnapTolerance=function(){this._snapTolerance=Op.computeOverlaySnapTolerance(this._geom[0],this._geom[1])},Pp.prototype.snap=function(t){var e=this.removeCommonBits(t);return Op.snap(e[0],e[1],this._snapTolerance)},Pp.prototype.interfaces_=function(){return[]},Pp.prototype.getClass=function(){return Pp},Pp.overlayOp=function(t,e,n){return new Pp(t,e).getResultGeometry(n)},Pp.union=function(t,e){return Pp.overlayOp(t,e,ef.UNION)},Pp.intersection=function(t,e){return Pp.overlayOp(t,e,ef.INTERSECTION)},Pp.symDifference=function(t,e){return Pp.overlayOp(t,e,ef.SYMDIFFERENCE)},Pp.difference=function(t,e){return Pp.overlayOp(t,e,ef.DIFFERENCE)};var Ap=function(t,e){this._geom=new Array(2).fill(null),this._geom[0]=t,this._geom[1]=e};Ap.prototype.getResultGeometry=function(t){var e=null,n=!1,i=null;try{e=ef.overlayOp(this._geom[0],this._geom[1],t),n=!0}catch(t){if(!(t instanceof Tu))throw t;i=t}if(!n)try{e=Pp.overlayOp(this._geom[0],this._geom[1],t)}catch(t){throw t instanceof Tu?i:t}return e},Ap.prototype.interfaces_=function(){return[]},Ap.prototype.getClass=function(){return Ap},Ap.overlayOp=function(t,e,n){return new Ap(t,e).getResultGeometry(n)},Ap.union=function(t,e){return Ap.overlayOp(t,e,ef.UNION)},Ap.intersection=function(t,e){return Ap.overlayOp(t,e,ef.INTERSECTION)},Ap.symDifference=function(t,e){return Ap.overlayOp(t,e,ef.SYMDIFFERENCE)},Ap.difference=function(t,e){return Ap.overlayOp(t,e,ef.DIFFERENCE)};var Dp=function(){this.mce=null,this.chainIndex=null;var t=arguments[0],e=arguments[1];this.mce=t,this.chainIndex=e};Dp.prototype.computeIntersections=function(t,e){this.mce.computeIntersectsForChain(this.chainIndex,t.mce,t.chainIndex,e)},Dp.prototype.interfaces_=function(){return[]},Dp.prototype.getClass=function(){return Dp};var Fp=function t(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,2===arguments.length){var e=arguments[0],n=arguments[1];this._eventType=t.DELETE,this._xValue=e,this._insertEvent=n}else if(3===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2];this._eventType=t.INSERT,this._label=i,this._xValue=r,this._obj=o}},jp={INSERT:{configurable:!0},DELETE:{configurable:!0}};Fp.prototype.isDelete=function(){return this._eventType===Fp.DELETE},Fp.prototype.setDeleteEventIndex=function(t){this._deleteEventIndex=t},Fp.prototype.getObject=function(){return this._obj},Fp.prototype.compareTo=function(t){var e=t;return this._xValue<e._xValue?-1:this._xValue>e._xValue?1:this._eventType<e._eventType?-1:this._eventType>e._eventType?1:0},Fp.prototype.getInsertEvent=function(){return this._insertEvent},Fp.prototype.isInsert=function(){return this._eventType===Fp.INSERT},Fp.prototype.isSameLabel=function(t){return null!==this._label&&this._label===t._label},Fp.prototype.getDeleteEventIndex=function(){return this._deleteEventIndex},Fp.prototype.interfaces_=function(){return[Za]},Fp.prototype.getClass=function(){return Fp},jp.INSERT.get=function(){return 1},jp.DELETE.get=function(){return 2},Object.defineProperties(Fp,jp);var Gp=function(){};Gp.prototype.interfaces_=function(){return[]},Gp.prototype.getClass=function(){return Gp};var kp=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;var t=arguments[0],e=arguments[1],n=arguments[2];this._li=t,this._includeProper=e,this._recordIsolated=n};kp.prototype.isTrivialIntersection=function(t,e,n,i){if(t===n&&1===this._li.getIntersectionNum()){if(kp.isAdjacentSegments(e,i))return!0;if(t.isClosed()){var r=t.getNumPoints()-1;if(0===e&&i===r||0===i&&e===r)return!0}}return!1},kp.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},kp.prototype.setIsDoneIfProperInt=function(t){this._isDoneWhenProperInt=t},kp.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},kp.prototype.isBoundaryPointInternal=function(t,e){for(var n=e.iterator();n.hasNext();){var i=n.next().getCoordinate();if(t.isIntersection(i))return!0}return!1},kp.prototype.hasProperIntersection=function(){return this._hasProper},kp.prototype.hasIntersection=function(){return this._hasIntersection},kp.prototype.isDone=function(){return this._isDone},kp.prototype.isBoundaryPoint=function(t,e){return!(null===e||!this.isBoundaryPointInternal(t,e[0])&&!this.isBoundaryPointInternal(t,e[1]))},kp.prototype.setBoundaryNodes=function(t,e){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=t,this._bdyNodes[1]=e},kp.prototype.addIntersections=function(t,e,n,i){if(t===n&&e===i)return null;this.numTests++;var r=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[i],a=n.getCoordinates()[i+1];this._li.computeIntersection(r,o,s,a),this._li.hasIntersection()&&(this._recordIsolated&&(t.setIsolated(!1),n.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(t,e,n,i)||(this._hasIntersection=!0,!this._includeProper&&this._li.isProper()||(t.addIntersections(this._li,e,0),n.addIntersections(this._li,i,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))},kp.prototype.interfaces_=function(){return[]},kp.prototype.getClass=function(){return kp},kp.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var Bp=function(t){function e(){t.call(this),this.events=new $u,this.nOverlaps=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.prepareEvents=function(){Rc.sort(this.events);for(var t=0;t<this.events.size();t++){var e=this.events.get(t);e.isDelete()&&e.getInsertEvent().setDeleteEventIndex(t)}},e.prototype.computeIntersections=function(){if(1===arguments.length){var t=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var e=0;e<this.events.size();e++){var n=this.events.get(e);if(n.isInsert()&&this.processOverlaps(e,n.getDeleteEventIndex(),n,t),t.isDone())break}}else if(3===arguments.length)if(arguments[2]instanceof kp&&ou(arguments[0],Qu)&&ou(arguments[1],Qu)){var i=arguments[0],r=arguments[1],o=arguments[2];this.addEdges(i,i),this.addEdges(r,r),this.computeIntersections(o)}else if("boolean"==typeof arguments[2]&&ou(arguments[0],Qu)&&arguments[1]instanceof kp){var s=arguments[0],a=arguments[1];arguments[2]?this.addEdges(s,null):this.addEdges(s),this.computeIntersections(a)}},e.prototype.addEdge=function(t,e){for(var n=t.getMonotoneChainEdge(),i=n.getStartIndexes(),r=0;r<i.length-1;r++){var o=new Dp(n,r),s=new Fp(e,n.getMinX(r),o);this.events.add(s),this.events.add(new Fp(n.getMaxX(r),s))}},e.prototype.processOverlaps=function(t,e,n,i){for(var r=n.getObject(),o=t;o<e;o++){var s=this.events.get(o);if(s.isInsert()){var a=s.getObject();n.isSameLabel(s)||(r.computeIntersections(a,i),this.nOverlaps++)}}},e.prototype.addEdges=function(){if(1===arguments.length)for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.addEdge(e,e)}else if(2===arguments.length)for(var n=arguments[0],i=arguments[1],r=n.iterator();r.hasNext();){var o=r.next();this.addEdge(o,i)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Gp),Yp=function(){this._min=Ka.POSITIVE_INFINITY,this._max=Ka.NEGATIVE_INFINITY},Xp={NodeComparator:{configurable:!0}};Yp.prototype.getMin=function(){return this._min},Yp.prototype.intersects=function(t,e){return!(this._min>e||this._max<t)},Yp.prototype.getMax=function(){return this._max},Yp.prototype.toString=function(){return Su.toLineString(new $a(this._min,0),new $a(this._max,0))},Yp.prototype.interfaces_=function(){return[]},Yp.prototype.getClass=function(){return Yp},Xp.NodeComparator.get=function(){return qp},Object.defineProperties(Yp,Xp);var qp=function(){};qp.prototype.compare=function(t,e){var n=t,i=e,r=(n._min+n._max)/2,o=(i._min+i._max)/2;return r<o?-1:r>o?1:0},qp.prototype.interfaces_=function(){return[Qa]},qp.prototype.getClass=function(){return qp};var Up=function(t){function e(){t.call(this),this._item=null;var e=arguments[0],n=arguments[1],i=arguments[2];this._min=e,this._max=n,this._item=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.query=function(t,e,n){if(!this.intersects(t,e))return null;n.visitItem(this._item)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Yp),zp=function(t){function e(){t.call(this),this._node1=null,this._node2=null;var e=arguments[0],n=arguments[1];this._node1=e,this._node2=n,this.buildExtent(this._node1,this._node2)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.buildExtent=function(t,e){this._min=Math.min(t._min,e._min),this._max=Math.max(t._max,e._max)},e.prototype.query=function(t,e,n){if(!this.intersects(t,e))return null;null!==this._node1&&this._node1.query(t,e,n),null!==this._node2&&this._node2.query(t,e,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Yp),Vp=function(){this._leaves=new $u,this._root=null,this._level=0};Vp.prototype.buildTree=function(){Rc.sort(this._leaves,new Yp.NodeComparator);for(var t=this._leaves,e=null,n=new $u;;){if(this.buildLevel(t,n),1===n.size())return n.get(0);e=t,t=n,n=e}},Vp.prototype.insert=function(t,e,n){if(null!==this._root)throw new Error("Index cannot be added to once it has been queried");this._leaves.add(new Up(t,e,n))},Vp.prototype.query=function(t,e,n){this.init(),this._root.query(t,e,n)},Vp.prototype.buildRoot=function(){if(null!==this._root)return null;this._root=this.buildTree()},Vp.prototype.printNode=function(t){mu.out.println(Su.toLineString(new $a(t._min,this._level),new $a(t._max,this._level)))},Vp.prototype.init=function(){if(null!==this._root)return null;this.buildRoot()},Vp.prototype.buildLevel=function(t,e){this._level++,e.clear();for(var n=0;n<t.size();n+=2){var i=t.get(n);if(null===(n+1<t.size()?t.get(n):null))e.add(i);else{var r=new zp(t.get(n),t.get(n+1));e.add(r)}}},Vp.prototype.interfaces_=function(){return[]},Vp.prototype.getClass=function(){return Vp};var Wp=function(){this._items=new $u};Wp.prototype.visitItem=function(t){this._items.add(t)},Wp.prototype.getItems=function(){return this._items},Wp.prototype.interfaces_=function(){return[Oc]},Wp.prototype.getClass=function(){return Wp};var Kp=function(){this._index=null;var t=arguments[0];if(!ou(t,Th))throw new Wa("Argument must be Polygonal");this._index=new Jp(t)},Hp={SegmentVisitor:{configurable:!0},IntervalIndexedGeometry:{configurable:!0}};Kp.prototype.locate=function(t){var e=new Du(t),n=new Zp(e);return this._index.query(t.y,t.y,n),e.getLocation()},Kp.prototype.interfaces_=function(){return[gl]},Kp.prototype.getClass=function(){return Kp},Hp.SegmentVisitor.get=function(){return Zp},Hp.IntervalIndexedGeometry.get=function(){return Jp},Object.defineProperties(Kp,Hp);var Zp=function(){this._counter=null;var t=arguments[0];this._counter=t};Zp.prototype.visitItem=function(t){var e=t;this._counter.countSegment(e.getCoordinate(0),e.getCoordinate(1))},Zp.prototype.interfaces_=function(){return[Oc]},Zp.prototype.getClass=function(){return Zp};var Jp=function(){this._index=new Vp;var t=arguments[0];this.init(t)};Jp.prototype.init=function(t){for(var e=$l.getLines(t).iterator();e.hasNext();){var n=e.next().getCoordinates();this.addLine(n)}},Jp.prototype.addLine=function(t){for(var e=1;e<t.length;e++){var n=new Uc(t[e-1],t[e]),i=Math.min(n.p0.y,n.p1.y),r=Math.max(n.p0.y,n.p1.y);this._index.insert(i,r,n)}},Jp.prototype.query=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new Wp;return this._index.query(t,e,n),n.getItems()}if(3===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2];this._index.query(i,r,o)}},Jp.prototype.interfaces_=function(){return[]},Jp.prototype.getClass=function(){return Jp};var Qp=function(t){function e(){if(t.call(this),this._parentGeom=null,this._lineEdgeMap=new Xh,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new tp,2===arguments.length){var e=arguments[0],n=arguments[1],i=qu.OGC_SFS_BOUNDARY_RULE;this._argIndex=e,this._parentGeom=n,this._boundaryNodeRule=i,null!==n&&this.add(n)}else if(3===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2];this._argIndex=r,this._parentGeom=o,this._boundaryNodeRule=s,null!==o&&this.add(o)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.insertBoundaryPoint=function(t,n){var i=this._nodes.addNode(n).getLabel(),r=1;iu.NONE,i.getLocation(t,ec.ON)===iu.BOUNDARY&&r++;var o=e.determineBoundary(this._boundaryNodeRule,r);i.setLocation(t,o)},e.prototype.computeSelfNodes=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.computeSelfNodes(t,e,!1)}if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2],o=new kp(n,!0,!1);o.setIsDoneIfProperInt(r);var s=this.createEdgeSetIntersector(),a=this._parentGeom instanceof Lh||this._parentGeom instanceof Rh||this._parentGeom instanceof Mh,u=i||!a;return s.computeIntersections(this._edges,o,u),this.addSelfIntersectionNodes(this._argIndex),o}},e.prototype.computeSplitEdges=function(t){for(var e=this._edges.iterator();e.hasNext();)e.next().eiList.addSplitEdges(t)},e.prototype.computeEdgeIntersections=function(t,e,n){var i=new kp(e,n,!0);return i.setBoundaryNodes(this.getBoundaryNodes(),t.getBoundaryNodes()),this.createEdgeSetIntersector().computeIntersections(this._edges,t._edges,i),i},e.prototype.getGeometry=function(){return this._parentGeom},e.prototype.getBoundaryNodeRule=function(){return this._boundaryNodeRule},e.prototype.hasTooFewPoints=function(){return this._hasTooFewPoints},e.prototype.addPoint=function(){if(arguments[0]instanceof Sh){var t=arguments[0].getCoordinate();this.insertPoint(this._argIndex,t,iu.INTERIOR)}else if(arguments[0]instanceof $a){var e=arguments[0];this.insertPoint(this._argIndex,e,iu.INTERIOR)}},e.prototype.addPolygon=function(t){this.addPolygonRing(t.getExteriorRing(),iu.EXTERIOR,iu.INTERIOR);for(var e=0;e<t.getNumInteriorRing();e++){var n=t.getInteriorRingN(e);this.addPolygonRing(n,iu.INTERIOR,iu.EXTERIOR)}},e.prototype.addEdge=function(t){this.insertEdge(t);var e=t.getCoordinates();this.insertPoint(this._argIndex,e[0],iu.BOUNDARY),this.insertPoint(this._argIndex,e[e.length-1],iu.BOUNDARY)},e.prototype.addLineString=function(t){var e=nh.removeRepeatedPoints(t.getCoordinates());if(e.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=e[0],null;var n=new Ll(e,new uc(this._argIndex,iu.INTERIOR));this._lineEdgeMap.put(t,n),this.insertEdge(n),Nu.isTrue(e.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,e[0]),this.insertBoundaryPoint(this._argIndex,e[e.length-1])},e.prototype.getInvalidPoint=function(){return this._invalidPoint},e.prototype.getBoundaryPoints=function(){for(var t=this.getBoundaryNodes(),e=new Array(t.size()).fill(null),n=0,i=t.iterator();i.hasNext();){var r=i.next();e[n++]=r.getCoordinate().copy()}return e},e.prototype.getBoundaryNodes=function(){return null===this._boundaryNodes&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes},e.prototype.addSelfIntersectionNode=function(t,e,n){if(this.isBoundaryNode(t,e))return null;n===iu.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(t,e):this.insertPoint(t,e,n)},e.prototype.addPolygonRing=function(t,e,n){if(t.isEmpty())return null;var i=nh.removeRepeatedPoints(t.getCoordinates());if(i.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=i[0],null;var r=e,o=n;Fu.isCCW(i)&&(r=n,o=e);var s=new Ll(i,new uc(this._argIndex,iu.BOUNDARY,r,o));this._lineEdgeMap.put(t,s),this.insertEdge(s),this.insertPoint(this._argIndex,i[0],iu.BOUNDARY)},e.prototype.insertPoint=function(t,e,n){var i=this._nodes.addNode(e),r=i.getLabel();null===r?i._label=new uc(t,n):r.setLocation(t,n)},e.prototype.createEdgeSetIntersector=function(){return new Bp},e.prototype.addSelfIntersectionNodes=function(t){for(var e=this._edges.iterator();e.hasNext();)for(var n=e.next(),i=n.getLabel().getLocation(t),r=n.eiList.iterator();r.hasNext();){var o=r.next();this.addSelfIntersectionNode(t,o.coord,i)}},e.prototype.add=function(){if(1!==arguments.length)return t.prototype.add.apply(this,arguments);var e=arguments[0];if(e.isEmpty())return null;if(e instanceof Mh&&(this._useBoundaryDeterminationRule=!1),e instanceof Rh)this.addPolygon(e);else if(e instanceof Oh)this.addLineString(e);else if(e instanceof Sh)this.addPoint(e);else if(e instanceof Nh)this.addCollection(e);else if(e instanceof mh)this.addCollection(e);else if(e instanceof Mh)this.addCollection(e);else{if(!(e instanceof vh))throw new Error(e.getClass().getName());this.addCollection(e)}},e.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},e.prototype.locate=function(t){return ou(this._parentGeom,Th)&&this._parentGeom.getNumGeometries()>50?(null===this._areaPtLocator&&(this._areaPtLocator=new Kp(this._parentGeom)),this._areaPtLocator.locate(t)):this._ptLocator.locate(t,this._parentGeom)},e.prototype.findEdge=function(){if(1===arguments.length){var e=arguments[0];return this._lineEdgeMap.get(e)}return t.prototype.findEdge.apply(this,arguments)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.determineBoundary=function(t,e){return t.isInBoundary(e)?iu.BOUNDARY:iu.INTERIOR},e}(Ec),$p=function(){if(this._li=new Pu,this._resultPrecisionModel=null,this._arg=null,1===arguments.length){var t=arguments[0];this.setComputationPrecision(t.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new Qp(0,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],i=qu.OGC_SFS_BOUNDARY_RULE;e.getPrecisionModel().compareTo(n.getPrecisionModel())>=0?this.setComputationPrecision(e.getPrecisionModel()):this.setComputationPrecision(n.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Qp(0,e,i),this._arg[1]=new Qp(1,n,i)}else if(3===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2];r.getPrecisionModel().compareTo(o.getPrecisionModel())>=0?this.setComputationPrecision(r.getPrecisionModel()):this.setComputationPrecision(o.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Qp(0,r,s),this._arg[1]=new Qp(1,o,s)}};$p.prototype.getArgGeometry=function(t){return this._arg[t].getGeometry()},$p.prototype.setComputationPrecision=function(t){this._resultPrecisionModel=t,this._li.setPrecisionModel(this._resultPrecisionModel)},$p.prototype.interfaces_=function(){return[]},$p.prototype.getClass=function(){return $p};var tf=function(){};tf.prototype.interfaces_=function(){return[]},tf.prototype.getClass=function(){return tf},tf.map=function(){if(arguments[0]instanceof ku&&ou(arguments[1],tf.MapOp)){for(var t=arguments[0],e=arguments[1],n=new $u,i=0;i<t.getNumGeometries();i++){var r=e.map(t.getGeometryN(i));null!==r&&n.add(r)}return t.getFactory().buildGeometry(n)}if(ou(arguments[0],Hu)&&ou(arguments[1],tf.MapOp)){for(var o=arguments[0],s=arguments[1],a=new $u,u=o.iterator();u.hasNext();){var h=u.next(),c=s.map(h);null!==c&&a.add(c)}return a}},tf.MapOp=function(){};var ef=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n),this._ptLocator=new tp,this._geomFact=null,this._resultGeom=null,this._graph=null,this._edgeList=new bl,this._resultPolyList=new $u,this._resultLineList=new $u,this._resultPointList=new $u,this._graph=new Ec(new El),this._geomFact=e.getFactory()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),i=t.getLabel();e.isPointwiseEqual(t)||(i=new uc(t.getLabel())).flip();var r=e.getDepth();r.isNull()&&r.add(n),r.add(i),n.merge(i)}else this._edgeList.add(t)},e.prototype.getGraph=function(){return this._graph},e.prototype.cancelDuplicateResultEdges=function(){for(var t=this._graph.getEdgeEnds().iterator();t.hasNext();){var e=t.next(),n=e.getSym();e.isInResult()&&n.isInResult()&&(e.setInResult(!1),n.setInResult(!1))}},e.prototype.isCoveredByLA=function(t){return!!this.isCovered(t,this._resultLineList)||!!this.isCovered(t,this._resultPolyList)},e.prototype.computeGeometry=function(t,n,i,r){var o=new $u;return o.addAll(t),o.addAll(n),o.addAll(i),o.isEmpty()?e.createEmptyResult(r,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(o)},e.prototype.mergeSymLabels=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().mergeSymLabels()},e.prototype.isCovered=function(t,e){for(var n=e.iterator();n.hasNext();){var i=n.next();if(this._ptLocator.locate(t,i)!==iu.EXTERIOR)return!0}return!1},e.prototype.replaceCollapsedEdges=function(){for(var t=new $u,e=this._edgeList.iterator();e.hasNext();){var n=e.next();n.isCollapsed()&&(e.remove(),t.add(n.getCollapsedEdge()))}this._edgeList.addAll(t)},e.prototype.updateNodeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getEdges().getLabel();e.getLabel().merge(n)}},e.prototype.getResultGeometry=function(t){return this.computeOverlay(t),this._resultGeom},e.prototype.insertUniqueEdges=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.insertUniqueEdge(n)}},e.prototype.computeOverlay=function(t){this.copyPoints(0),this.copyPoints(1),this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1),this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);var e=new $u;this._arg[0].computeSplitEdges(e),this._arg[1].computeSplitEdges(e),this.insertUniqueEdges(e),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),mp.checkValid(this._edgeList.getEdges()),this._graph.addEdges(this._edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(t),this.cancelDuplicateResultEdges();var n=new xc(this._geomFact);n.add(this._graph),this._resultPolyList=n.getPolygons();var i=new xp(this,this._geomFact,this._ptLocator);this._resultLineList=i.build(t);var r=new bp(this,this._geomFact,this._ptLocator);this._resultPointList=r.build(t),this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,t)},e.prototype.labelIncompleteNode=function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._arg[e].getGeometry());t.getLabel().setLocation(e,n)},e.prototype.copyPoints=function(t){for(var e=this._arg[t].getNodeIterator();e.hasNext();){var n=e.next();this._graph.addNode(n.getCoordinate()).setLabel(t,n.getLabel().getLocation(t))}},e.prototype.findResultAreaEdges=function(t){for(var n=this._graph.getEdgeEnds().iterator();n.hasNext();){var i=n.next(),r=i.getLabel();r.isArea()&&!i.isInteriorAreaEdge()&&e.isResultOfOp(r.getLocation(0,ec.RIGHT),r.getLocation(1,ec.RIGHT),t)&&i.setInResult(!0)}},e.prototype.computeLabelsFromDepths=function(){for(var t=this._edgeList.iterator();t.hasNext();){var e=t.next(),n=e.getLabel(),i=e.getDepth();if(!i.isNull()){i.normalize();for(var r=0;r<2;r++)n.isNull(r)||!n.isArea()||i.isNull(r)||(0===i.getDelta(r)?n.toLine(r):(Nu.isTrue(!i.isNull(r,ec.LEFT),"depth of LEFT side has not been initialized"),n.setLocation(r,ec.LEFT,i.getLocation(r,ec.LEFT)),Nu.isTrue(!i.isNull(r,ec.RIGHT),"depth of RIGHT side has not been initialized"),n.setLocation(r,ec.RIGHT,i.getLocation(r,ec.RIGHT))))}}},e.prototype.computeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().computeLabelling(this._arg);this.mergeSymLabels(),this.updateNodeLabelling()},e.prototype.labelIncompleteNodes=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getLabel();e.isIsolated()&&(n.isNull(0)?this.labelIncompleteNode(e,0):this.labelIncompleteNode(e,1)),e.getEdges().updateLabelling(n)}},e.prototype.isCoveredByA=function(t){return!!this.isCovered(t,this._resultPolyList)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}($p);ef.overlayOp=function(t,e,n){return new ef(t,e).getResultGeometry(n)},ef.intersection=function(t,e){if(t.isEmpty()||e.isEmpty())return ef.createEmptyResult(ef.INTERSECTION,t,e,t.getFactory());if(t.isGeometryCollection()){var n=e;return Ep.map(t,{interfaces_:function(){return[tf.MapOp]},map:function(t){return t.intersection(n)}})}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),Ap.overlayOp(t,e,ef.INTERSECTION)},ef.symDifference=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return ef.createEmptyResult(ef.SYMDIFFERENCE,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),Ap.overlayOp(t,e,ef.SYMDIFFERENCE)},ef.resultDimension=function(t,e,n){var i=e.getDimension(),r=n.getDimension(),o=-1;switch(t){case ef.INTERSECTION:o=Math.min(i,r);break;case ef.UNION:o=Math.max(i,r);break;case ef.DIFFERENCE:o=i;break;case ef.SYMDIFFERENCE:o=Math.max(i,r)}return o},ef.createEmptyResult=function(t,e,n,i){var r=null;switch(ef.resultDimension(t,e,n)){case-1:r=i.createGeometryCollection(new Array(0).fill(null));break;case 0:r=i.createPoint();break;case 1:r=i.createLineString();break;case 2:r=i.createPolygon()}return r},ef.difference=function(t,e){return t.isEmpty()?ef.createEmptyResult(ef.DIFFERENCE,t,e,t.getFactory()):e.isEmpty()?t.copy():(t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),Ap.overlayOp(t,e,ef.DIFFERENCE))},ef.isResultOfOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=t.getLocation(0),i=t.getLocation(1);return ef.isResultOfOp(n,i,e)}if(3===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2];switch(r===iu.BOUNDARY&&(r=iu.INTERIOR),o===iu.BOUNDARY&&(o=iu.INTERIOR),s){case ef.INTERSECTION:return r===iu.INTERIOR&&o===iu.INTERIOR;case ef.UNION:return r===iu.INTERIOR||o===iu.INTERIOR;case ef.DIFFERENCE:return r===iu.INTERIOR&&o!==iu.INTERIOR;case ef.SYMDIFFERENCE:return r===iu.INTERIOR&&o!==iu.INTERIOR||r!==iu.INTERIOR&&o===iu.INTERIOR}return!1}},ef.INTERSECTION=1,ef.UNION=2,ef.DIFFERENCE=3,ef.SYMDIFFERENCE=4;var nf=function(){this._g=null,this._boundaryDistanceTolerance=null,this._linework=null,this._ptLocator=new tp,this._seg=new Uc;var t=arguments[0],e=arguments[1];this._g=t,this._boundaryDistanceTolerance=e,this._linework=this.extractLinework(t)};nf.prototype.isWithinToleranceOfBoundary=function(t){for(var e=0;e<this._linework.getNumGeometries();e++)for(var n=this._linework.getGeometryN(e).getCoordinateSequence(),i=0;i<n.size()-1;i++)if(n.getCoordinate(i,this._seg.p0),n.getCoordinate(i+1,this._seg.p1),this._seg.distance(t)<=this._boundaryDistanceTolerance)return!0;return!1},nf.prototype.getLocation=function(t){return this.isWithinToleranceOfBoundary(t)?iu.BOUNDARY:this._ptLocator.locate(t,this._g)},nf.prototype.extractLinework=function(t){var e=new rf;t.apply(e);var n=e.getLinework(),i=Wh.toLineStringArray(n);return t.getFactory().createMultiLineString(i)},nf.prototype.interfaces_=function(){return[]},nf.prototype.getClass=function(){return nf};var rf=function(){this._linework=null,this._linework=new $u};rf.prototype.getLinework=function(){return this._linework},rf.prototype.filter=function(t){if(t instanceof Rh){var e=t;this._linework.add(e.getExteriorRing());for(var n=0;n<e.getNumInteriorRing();n++)this._linework.add(e.getInteriorRingN(n))}},rf.prototype.interfaces_=function(){return[yh]},rf.prototype.getClass=function(){return rf};var of=function(){this._g=null,this._doLeft=!0,this._doRight=!0;var t=arguments[0];this._g=t};of.prototype.extractPoints=function(t,e,n){for(var i=t.getCoordinates(),r=0;r<i.length-1;r++)this.computeOffsetPoints(i[r],i[r+1],e,n)},of.prototype.setSidesToGenerate=function(t,e){this._doLeft=t,this._doRight=e},of.prototype.getPoints=function(t){for(var e=new $u,n=$l.getLines(this._g).iterator();n.hasNext();){var i=n.next();this.extractPoints(i,t,e)}return e},of.prototype.computeOffsetPoints=function(t,e,n,i){var r=e.x-t.x,o=e.y-t.y,s=Math.sqrt(r*r+o*o),a=n*r/s,u=n*o/s,h=(e.x+t.x)/2,c=(e.y+t.y)/2;if(this._doLeft){var l=new $a(h-u,c+a);i.add(l)}if(this._doRight){var p=new $a(h+u,c-a);i.add(p)}},of.prototype.interfaces_=function(){return[]},of.prototype.getClass=function(){return of};var sf=function t(){this._geom=null,this._locFinder=null,this._location=new Array(3).fill(null),this._invalidLocation=null,this._boundaryDistanceTolerance=t.TOLERANCE,this._testCoords=new $u;var e=arguments[0],n=arguments[1],i=arguments[2];this._boundaryDistanceTolerance=t.computeBoundaryDistanceTolerance(e,n),this._geom=[e,n,i],this._locFinder=[new nf(this._geom[0],this._boundaryDistanceTolerance),new nf(this._geom[1],this._boundaryDistanceTolerance),new nf(this._geom[2],this._boundaryDistanceTolerance)]},af={TOLERANCE:{configurable:!0}};sf.prototype.reportResult=function(t,e,n){mu.out.println("Overlay result invalid - A:"+iu.toLocationSymbol(e[0])+" B:"+iu.toLocationSymbol(e[1])+" expected:"+(n?"i":"e")+" actual:"+iu.toLocationSymbol(e[2]))},sf.prototype.isValid=function(t){this.addTestPts(this._geom[0]),this.addTestPts(this._geom[1]);var e=this.checkValid(t);return e},sf.prototype.checkValid=function(){if(1===arguments.length){for(var t=arguments[0],e=0;e<this._testCoords.size();e++){var n=this._testCoords.get(e);if(!this.checkValid(t,n))return this._invalidLocation=n,!1}return!0}if(2===arguments.length){var i=arguments[0],r=arguments[1];return this._location[0]=this._locFinder[0].getLocation(r),this._location[1]=this._locFinder[1].getLocation(r),this._location[2]=this._locFinder[2].getLocation(r),!!sf.hasLocation(this._location,iu.BOUNDARY)||this.isValidResult(i,this._location)}},sf.prototype.addTestPts=function(t){var e=new of(t);this._testCoords.addAll(e.getPoints(5*this._boundaryDistanceTolerance))},sf.prototype.isValidResult=function(t,e){var n=ef.isResultOfOp(e[0],e[1],t),i=!(n^e[2]===iu.INTERIOR);return i||this.reportResult(t,e,n),i},sf.prototype.getInvalidLocation=function(){return this._invalidLocation},sf.prototype.interfaces_=function(){return[]},sf.prototype.getClass=function(){return sf},sf.hasLocation=function(t,e){for(var n=0;n<3;n++)if(t[n]===e)return!0;return!1},sf.computeBoundaryDistanceTolerance=function(t,e){return Math.min(Op.computeSizeBasedSnapTolerance(t),Op.computeSizeBasedSnapTolerance(e))},sf.isValid=function(t,e,n,i){return new sf(t,e,i).isValid(n)},af.TOLERANCE.get=function(){return 1e-6},Object.defineProperties(sf,af);var uf=function t(e){this._geomFactory=null,this._skipEmpty=!1,this._inputGeoms=null,this._geomFactory=t.extractFactory(e),this._inputGeoms=e};uf.prototype.extractElements=function(t,e){if(null===t)return null;for(var n=0;n<t.getNumGeometries();n++){var i=t.getGeometryN(n);this._skipEmpty&&i.isEmpty()||e.add(i)}},uf.prototype.combine=function(){for(var t=new $u,e=this._inputGeoms.iterator();e.hasNext();){var n=e.next();this.extractElements(n,t)}return 0===t.size()?null!==this._geomFactory?this._geomFactory.createGeometryCollection(null):null:this._geomFactory.buildGeometry(t)},uf.prototype.interfaces_=function(){return[]},uf.prototype.getClass=function(){return uf},uf.combine=function(){if(1===arguments.length){var t=arguments[0];return new uf(t).combine()}if(2===arguments.length){var e=arguments[0],n=arguments[1];return new uf(uf.createList(e,n)).combine()}if(3===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2];return new uf(uf.createList(i,r,o)).combine()}},uf.extractFactory=function(t){return t.isEmpty()?null:t.iterator().next().getFactory()},uf.createList=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new $u;return n.add(t),n.add(e),n}if(3===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2],s=new $u;return s.add(i),s.add(r),s.add(o),s}};var hf=function(){this._inputPolys=null,this._geomFactory=null;var t=arguments[0];this._inputPolys=t,null===this._inputPolys&&(this._inputPolys=new $u)},cf={STRTREE_NODE_CAPACITY:{configurable:!0}};hf.prototype.reduceToGeometries=function(t){for(var e=new $u,n=t.iterator();n.hasNext();){var i=n.next(),r=null;ou(i,Qu)?r=this.unionTree(i):i instanceof ku&&(r=i),e.add(r)}return e},hf.prototype.extractByEnvelope=function(t,e,n){for(var i=new $u,r=0;r<e.getNumGeometries();r++){var o=e.getGeometryN(r);o.getEnvelopeInternal().intersects(t)?i.add(o):n.add(o)}return this._geomFactory.buildGeometry(i)},hf.prototype.unionOptimized=function(t,e){var n=t.getEnvelopeInternal(),i=e.getEnvelopeInternal();if(!n.intersects(i))return uf.combine(t,e);if(t.getNumGeometries()<=1&&e.getNumGeometries()<=1)return this.unionActual(t,e);var r=n.intersection(i);return this.unionUsingEnvelopeIntersection(t,e,r)},hf.prototype.union=function(){if(null===this._inputPolys)throw new Error("union() method cannot be called twice");if(this._inputPolys.isEmpty())return null;this._geomFactory=this._inputPolys.iterator().next().getFactory();for(var t=new Dc(hf.STRTREE_NODE_CAPACITY),e=this._inputPolys.iterator();e.hasNext();){var n=e.next();t.insert(n.getEnvelopeInternal(),n)}this._inputPolys=null;var i=t.itemsTree();return this.unionTree(i)},hf.prototype.binaryUnion=function(){if(1===arguments.length){var t=arguments[0];return this.binaryUnion(t,0,t.size())}if(3===arguments.length){var e=arguments[0],n=arguments[1],i=arguments[2];if(i-n<=1){var r=hf.getGeometry(e,n);return this.unionSafe(r,null)}if(i-n==2)return this.unionSafe(hf.getGeometry(e,n),hf.getGeometry(e,n+1));var o=Math.trunc((i+n)/2),s=this.binaryUnion(e,n,o),a=this.binaryUnion(e,o,i);return this.unionSafe(s,a)}},hf.prototype.repeatedUnion=function(t){for(var e=null,n=t.iterator();n.hasNext();){var i=n.next();e=null===e?i.copy():e.union(i)}return e},hf.prototype.unionSafe=function(t,e){return null===t&&null===e?null:null===t?e.copy():null===e?t.copy():this.unionOptimized(t,e)},hf.prototype.unionActual=function(t,e){return hf.restrictToPolygons(t.union(e))},hf.prototype.unionTree=function(t){var e=this.reduceToGeometries(t);return this.binaryUnion(e)},hf.prototype.unionUsingEnvelopeIntersection=function(t,e,n){var i=new $u,r=this.extractByEnvelope(n,t,i),o=this.extractByEnvelope(n,e,i),s=this.unionActual(r,o);return i.add(s),uf.combine(i)},hf.prototype.bufferUnion=function(){if(1===arguments.length){var t=arguments[0];return t.get(0).getFactory().buildGeometry(t).buffer(0)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e.getFactory().createGeometryCollection([e,n]).buffer(0)}},hf.prototype.interfaces_=function(){return[]},hf.prototype.getClass=function(){return hf},hf.restrictToPolygons=function(t){if(ou(t,Th))return t;var e=Ql.getPolygons(t);return 1===e.size()?e.get(0):t.getFactory().createMultiPolygon(Wh.toPolygonArray(e))},hf.getGeometry=function(t,e){return e>=t.size()?null:t.get(e)},hf.union=function(t){return new hf(t).union()},cf.STRTREE_NODE_CAPACITY.get=function(){return 4},Object.defineProperties(hf,cf);var lf=function(){};lf.prototype.interfaces_=function(){return[]},lf.prototype.getClass=function(){return lf},lf.union=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return ef.createEmptyResult(ef.UNION,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),Ap.overlayOp(t,e,ef.UNION)};var pf=function(){return new Mr};Mr.prototype={constructor:Mr,reset:function(){this.s=this.t=0},add:function(t){Pr(ff,t,this.t),Pr(this,ff.s,this.s),this.s?this.t+=ff.t:this.s=ff.t},valueOf:function(){return this.s}};var ff=new Mr,df=1e-6,gf=Math.PI,yf=gf/2,_f=gf/4,vf=2*gf,mf=180/gf,Ef=gf/180,xf=Math.abs,bf=Math.atan,wf=Math.atan2,Cf=Math.cos,Of=Math.exp,If=Math.log,Sf=Math.sin,Tf=Math.sqrt,Rf=Math.tan,Nf={Feature:function(t,e){Fr(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,i=-1,r=n.length;++i<r;)Fr(n[i].geometry,e)}},Lf={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)t=n[i],e.point(t[0],t[1],t[2])},LineString:function(t,e){jr(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)jr(n[i],e,0)},Polygon:function(t,e){Gr(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)Gr(n[i],e)},GeometryCollection:function(t,e){for(var n=t.geometries,i=-1,r=n.length;++i<r;)Fr(n[i],e)}},Mf=function(t,e){t&&Nf.hasOwnProperty(t.type)?Nf[t.type](t,e):Fr(t,e)},Pf=(pf(),pf(),pf(),function(t,e){function n(n,i){return n=t(n,i),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,i){return(n=e.invert(n,i))&&t.invert(n[0],n[1])}),n});Vr.invert=Vr;var Af=function(t){function e(e){return(e=t(e[0]*Ef,e[1]*Ef))[0]*=mf,e[1]*=mf,e}return t=Wr(t[0]*Ef,t[1]*Ef,t.length>2?t[2]*Ef:0),e.invert=function(e){return(e=t.invert(e[0]*Ef,e[1]*Ef))[0]*=mf,e[1]*=mf,e},e},Df=function(){var t,e=[];return{point:function(e,n){t.push([e,n])},lineStart:function(){e.push(t=[])},lineEnd:Dr,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}},Ff=function(t,e,n,i,r,o){var s,a=t[0],u=t[1],h=0,c=1,l=e[0]-a,p=e[1]-u;if(s=n-a,l||!(s>0)){if(s/=l,l<0){if(s<h)return;s<c&&(c=s)}else if(l>0){if(s>c)return;s>h&&(h=s)}if(s=r-a,l||!(s<0)){if(s/=l,l<0){if(s>c)return;s>h&&(h=s)}else if(l>0){if(s<h)return;s<c&&(c=s)}if(s=i-u,p||!(s>0)){if(s/=p,p<0){if(s<h)return;s<c&&(c=s)}else if(p>0){if(s>c)return;s>h&&(h=s)}if(s=o-u,p||!(s<0)){if(s/=p,p<0){if(s>c)return;s>h&&(h=s)}else if(p>0){if(s<h)return;s<c&&(c=s)}return h>0&&(t[0]=a+h*l,t[1]=u+h*p),c<1&&(e[0]=a+c*l,e[1]=u+c*p),!0}}}}},jf=function(t,e){return xf(t[0]-e[0])<df&&xf(t[1]-e[1])<df},Gf=function(t,e,n,i,r){var o,s,a=[],u=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,n,i=t[0],s=t[e];if(jf(i,s)){for(r.lineStart(),o=0;o<e;++o)r.point((i=t[o])[0],i[1]);r.lineEnd()}else a.push(n=new Qr(i,t,null,!0)),u.push(n.o=new Qr(i,null,n,!1)),a.push(n=new Qr(s,t,null,!1)),u.push(n.o=new Qr(s,null,n,!0))}}),a.length){for(u.sort(e),$r(a),$r(u),o=0,s=u.length;o<s;++o)u[o].e=n=!n;for(var h,c,l=a[0];;){for(var p=l,f=!0;p.v;)if((p=p.n)===l)return;h=p.z,r.lineStart();do{if(p.v=p.o.v=!0,p.e){if(f)for(o=0,s=h.length;o<s;++o)r.point((c=h[o])[0],c[1]);else i(p.x,p.n.x,1,r);p=p.n}else{if(f)for(h=p.p.z,o=h.length-1;o>=0;--o)r.point((c=h[o])[0],c[1]);else i(p.x,p.p.x,-1,r);p=p.p}h=(p=p.o).z,f=!f}while(!p.v);r.lineEnd()}}},kf=function(t,e){return t<e?-1:t>e?1:t>=e?0:NaN},Bf=(function(t){1===t.length&&(t=function(t){return function(e,n){return kf(t(e),n)}}(t))}(kf),function(t){for(var e,n,i,r=t.length,o=-1,s=0;++o<r;)s+=t[o].length;for(n=new Array(s);--r>=0;)for(e=(i=t[r]).length;--e>=0;)n[--s]=i[e];return n}),Yf=1e9,Xf=-Yf,qf=pf(),Uf=(pf(),function(t){return t}),zf=(pf(),pf(),1/0),Vf=zf,Wf=-zf,Kf=Wf,Hf={point:function(t,e){t<zf&&(zf=t),t>Wf&&(Wf=t),e<Vf&&(Vf=e),e>Kf&&(Kf=e)},lineStart:Dr,lineEnd:Dr,polygonStart:Dr,polygonEnd:Dr,result:function(){var t=[[zf,Vf],[Wf,Kf]];return Wf=Kf=-(Vf=zf=1/0),t}},Zf=(pf(),function(t,e,n,i){return function(r,o){function s(e,n){var i=r(e,n);t(e=i[0],n=i[1])&&o.point(e,n)}function a(t,e){var n=r(t,e);y.point(n[0],n[1])}function u(){x.point=a,y.lineStart()}function h(){x.point=s,y.lineEnd()}function c(t,e){g.push([t,e]);var n=r(t,e);m.point(n[0],n[1])}function l(){m.lineStart(),g=[]}function p(){c(g[0][0],g[0][1]),m.lineEnd();var t,e,n,i,r=m.clean(),s=v.result(),a=s.length;if(g.pop(),f.push(g),g=null,a)if(1&r){if(n=s[0],(e=n.length-1)>0){for(E||(o.polygonStart(),E=!0),o.lineStart(),t=0;t<e;++t)o.point((i=n[t])[0],i[1]);o.lineEnd()}}else a>1&&2&r&&s.push(s.pop().concat(s.shift())),d.push(s.filter(to))}var f,d,g,y=e(o),_=r.invert(i[0],i[1]),v=Df(),m=e(v),E=!1,x={point:s,lineStart:u,lineEnd:h,polygonStart:function(){x.point=c,x.lineStart=l,x.lineEnd=p,d=[],f=[]},polygonEnd:function(){x.point=s,x.lineStart=u,x.lineEnd=h,d=Bf(d);var t=function(t,e){var n=e[0],i=e[1],r=[Sf(n),-Cf(n),0],o=0,s=0;qf.reset();for(var a=0,u=t.length;a<u;++a)if(c=(h=t[a]).length)for(var h,c,l=h[c-1],p=l[0],f=l[1]/2+_f,d=Sf(f),g=Cf(f),y=0;y<c;++y,p=v,d=E,g=x,l=_){var _=h[y],v=_[0],m=_[1]/2+_f,E=Sf(m),x=Cf(m),b=v-p,w=b>=0?1:-1,C=w*b,O=C>gf,I=d*E;if(qf.add(wf(I*w*Sf(C),g*x+I*Cf(C))),o+=O?b+w*vf:b,O^p>=n^v>=n){var S=Xr(Br(l),Br(_));zr(S);var T=Xr(r,S);zr(T);var R=(O^b>=0?-1:1)*Ar(T[2]);(i>R||i===R&&(S[0]||S[1]))&&(s+=O^b>=0?1:-1)}}return(o<-df||o<df&&qf<-df)^1&s}(f,_);d.length?(E||(o.polygonStart(),E=!0),Gf(d,eo,t,n,o)):t&&(E||(o.polygonStart(),E=!0),o.lineStart(),n(null,null,1,o),o.lineEnd()),E&&(o.polygonEnd(),E=!1),d=f=null},sphere:function(){o.polygonStart(),o.lineStart(),n(null,null,1,o),o.lineEnd(),o.polygonEnd()}};return x}}),Jf=Zf(function(){return!0},function(t){var e,n=NaN,i=NaN,r=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(o,s){var a=o>0?gf:-gf,u=xf(o-n);xf(u-gf)<df?(t.point(n,i=(i+s)/2>0?yf:-yf),t.point(r,i),t.lineEnd(),t.lineStart(),t.point(a,i),t.point(o,i),e=0):r!==a&&u>=gf&&(xf(n-r)<df&&(n-=r*df),xf(o-a)<df&&(o-=a*df),i=function(t,e,n,i){var r,o,s=Sf(t-n);return xf(s)>df?bf((Sf(e)*(o=Cf(i))*Sf(n)-Sf(i)*(r=Cf(e))*Sf(t))/(r*o*s)):(e+i)/2}(n,i,o,s),t.point(r,i),t.lineEnd(),t.lineStart(),t.point(a,i),e=0),t.point(n=o,i=s),r=a},lineEnd:function(){t.lineEnd(),n=i=NaN},clean:function(){return 2-e}}},function(t,e,n,i){var r;if(null==t)r=n*yf,i.point(-gf,r),i.point(0,r),i.point(gf,r),i.point(gf,0),i.point(gf,-r),i.point(0,-r),i.point(-gf,-r),i.point(-gf,0),i.point(-gf,r);else if(xf(t[0]-e[0])>df){var o=t[0]<e[0]?gf:-gf;r=n*o/2,i.point(-o,r),i.point(0,r),i.point(o,r)}else i.point(e[0],e[1])},[-gf,-yf]),Qf=function(t,e){function n(t,e){return Cf(t)*Cf(e)>o}function i(t,e,n){var i=[1,0,0],r=Xr(Br(t),Br(e)),s=Yr(r,r),a=r[0],u=s-a*a;if(!u)return!n&&t;var h=o*s/u,c=-o*a/u,l=Xr(i,r),p=Ur(i,h);qr(p,Ur(r,c));var f=l,d=Yr(p,f),g=Yr(f,f),y=d*d-g*(Yr(p,p)-1);if(!(y<0)){var _=Tf(y),v=Ur(f,(-d-_)/g);if(qr(v,p),v=kr(v),!n)return v;var m,E=t[0],x=e[0],b=t[1],w=e[1];x<E&&(m=E,E=x,x=m);var C=x-E,O=xf(C-gf)<df;if(!O&&w<b&&(m=b,b=w,w=m),O||C<df?O?b+w>0^v[1]<(xf(v[0]-E)<df?b:w):b<=v[1]&&v[1]<=w:C>gf^(E<=v[0]&&v[0]<=x)){var I=Ur(f,(-d+_)/g);return qr(I,p),[v,kr(I)]}}}function r(e,n){var i=s?t:gf-t,r=0;return e<-i?r|=1:e>i&&(r|=2),n<-i?r|=4:n>i&&(r|=8),r}var o=Cf(t),s=o>0,a=xf(o)>df;return Zf(n,function(t){var e,o,u,h,c;return{lineStart:function(){h=u=!1,c=1},point:function(l,p){var f,d=[l,p],g=n(l,p),y=s?g?0:r(l,p):g?r(l+(l<0?gf:-gf),p):0;if(!e&&(h=u=g)&&t.lineStart(),g!==u&&(!(f=i(e,d))||jf(e,f)||jf(d,f))&&(d[0]+=df,d[1]+=df,g=n(d[0],d[1])),g!==u)c=0,g?(t.lineStart(),f=i(d,e),t.point(f[0],f[1])):(f=i(e,d),t.point(f[0],f[1]),t.lineEnd()),e=f;else if(a&&e&&s^g){var _;y&o||!(_=i(d,e,!0))||(c=0,s?(t.lineStart(),t.point(_[0][0],_[0][1]),t.point(_[1][0],_[1][1]),t.lineEnd()):(t.point(_[1][0],_[1][1]),t.lineEnd(),t.lineStart(),t.point(_[0][0],_[0][1])))}!g||e&&jf(e,d)||t.point(d[0],d[1]),e=d,u=g,o=y},lineEnd:function(){u&&t.lineEnd(),e=null},clean:function(){return c|(h&&u)<<1}}},function(n,i,r,o){!function(t,e,n,i,r,o){if(n){var s=Cf(e),a=Sf(e),u=i*n;null==r?(r=e+i*vf,o=e-u/2):(r=Jr(s,r),o=Jr(s,o),(i>0?r<o:r>o)&&(r+=i*vf));for(var h,c=r;i>0?c>o:c<o;c-=u)h=kr([s,-a*Cf(c),-a*Sf(c)]),t.point(h[0],h[1])}}(o,t,e,r,n,i)},s?[0,-t]:[-gf,t-gf])};io.prototype={constructor:io,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var $f=16,td=Cf(30*Ef),ed=function(t,e){return+e?function(t,e){function n(i,r,o,s,a,u,h,c,l,p,f,d,g,y){var _=h-i,v=c-r,m=_*_+v*v;if(m>4*e&&g--){var E=s+p,x=a+f,b=u+d,w=Tf(E*E+x*x+b*b),C=Ar(b/=w),O=xf(xf(b)-1)<df||xf(o-l)<df?(o+l)/2:wf(x,E),I=t(O,C),S=I[0],T=I[1],R=S-i,N=T-r,L=v*R-_*N;(L*L/m>e||xf((_*R+v*N)/m-.5)>.3||s*p+a*f+u*d<td)&&(n(i,r,o,s,a,u,S,T,O,E/=w,x/=w,b,g,y),y.point(S,T),n(S,T,O,E,x,b,h,c,l,p,f,d,g,y))}}return function(e){function i(n,i){n=t(n,i),e.point(n[0],n[1])}function r(){_=NaN,b.point=o,e.lineStart()}function o(i,r){var o=Br([i,r]),s=t(i,r);n(_,v,y,m,E,x,_=s[0],v=s[1],y=i,m=o[0],E=o[1],x=o[2],$f,e),e.point(_,v)}function s(){b.point=i,e.lineEnd()}function a(){r(),b.point=u,b.lineEnd=h}function u(t,e){o(c=t,e),l=_,p=v,f=m,d=E,g=x,b.point=o}function h(){n(_,v,y,m,E,x,l,p,c,f,d,g,$f,e),b.lineEnd=s,s()}var c,l,p,f,d,g,y,_,v,m,E,x,b={point:i,lineStart:r,lineEnd:s,polygonStart:function(){e.polygonStart(),b.lineStart=a},polygonEnd:function(){e.polygonEnd(),b.lineStart=r}};return b}}(t,e):function(t){return no({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}(t)},nd=no({point:function(t,e){this.stream.point(t*Ef,e*Ef)}});so.invert=function(t,e){return[t,2*bf(Of(e))-yf]},ao.invert=function(t,e){return[-e,2*bf(Of(t))-yf]};var id=function(){var t=function(t){function e(){var e=gf*a(),s=o(Af(o.rotate()).invert([0,0]));return h(null==c?[[s[0]-e,s[1]-e],[s[0]+e,s[1]+e]]:t===so?[[Math.max(s[0]-e,c),n],[Math.min(s[0]+e,i),r]]:[[c,Math.max(s[1]-e,n)],[i,Math.min(s[1]+e,r)]])}var n,i,r,o=oo(t),s=o.center,a=o.scale,u=o.translate,h=o.clipExtent,c=null;return o.scale=function(t){return arguments.length?(a(t),e()):a()},o.translate=function(t){return arguments.length?(u(t),e()):u()},o.center=function(t){return arguments.length?(s(t),e()):s()},o.clipExtent=function(t){return arguments.length?(null==t?c=n=i=r=null:(c=+t[0][0],n=+t[0][1],i=+t[1][0],r=+t[1][1]),e()):null==c?null:[[c,n],[i,r]]},e()}(ao),e=t.center,n=t.rotate;return t.center=function(t){return arguments.length?e([-t[1],t[0]]):[(t=e())[1],-t[0]]},t.rotate=function(t){return arguments.length?n([t[0],t[1],t.length>2?t[2]+90:90]):[(t=n())[0],t[1],t[2]-90]},n([0,0,90]).scale(159.155)};t.projection=as,t.random=Ua,t.clusters=za,t.helpers=wo,t.invariant=Oo,t.meta=Co,t.isolines=function(t,e,n){if(!C(n=n||{}))throw new Error("options is invalid");var i=n.zProperty||"elevation",r=n.commonProperties||{},o=n.breaksProperties||[];if(K(t,"Point","Input must contain Points"),!e)throw new Error("breaks is required");if(!Array.isArray(e))throw new Error("breaks must be an Array");if(!C(r))throw new Error("commonProperties must be an Object");if(!Array.isArray(o))throw new Error("breaksProperties must be an Array");var s=function(t,e){if(!C(e=e||{}))throw new Error("options is invalid");var n=e.zProperty||"elevation",i=e.flip,r=e.flags;K(t,"Point","input must contain Points");for(var o=function(t,e){var n={};return L(t,function(t){var e=U(t)[1];n[e]||(n[e]=[]),n[e].push(t)}),Object.keys(n).map(function(t){var e=n[t],i=e.sort(function(t,e){return U(t)[0]-U(e)[0]});return i}).sort(function(t,n){return e?U(t[0])[1]-U(n[0])[1]:U(n[0])[1]-U(t[0])[1]})}(t,i),s=[],a=0;a<o.length;a++){for(var u=o[a],h=[],c=0;c<u.length;c++){var l=u[c];l.properties[n]?h.push(l.properties[n]):h.push(0),!0===r&&(l.properties.matrixPosition=[a,c])}s.push(h)}return s}(t,{zProperty:i,flip:!0});return h(function(t,e,n){var i=X(n),r=i[2]-i[0],o=i[3]-i[1],s=i[0],a=i[1],u=e[0].length-1,h=e.length-1,c=r/u,l=o/h,p=function(t){t[0]=t[0]*c+s,t[1]=t[1]*l+a};return t.forEach(function(t){S(t,p)}),t}(function(t,e,n,i,r){for(var o=[],s=1;s<e.length;s++){var a=+e[s],u=Object.assign({},i,r[s]);u[n]=a;var h=c(Q(t,a),u);o.push(h)}return o}(s,e,i,r,o),s,t))},t.convex=St,t.pointsWithinPolygon=Nt,t.concave=function(t,n){if(!C(n=n||{}))throw new Error("options is invalid");if(!t)throw new Error("points is required");var i=n.maxEdge||1/0;if(!w(i))throw new Error("maxEdge is invalid");var r=Lt(function(t){var e=[],n={};return L(t,function(t){if(t.geometry){var i=t.geometry.coordinates.join("-");n.hasOwnProperty(i)||(e.push(t),n[i]=!0)}}),h(e)}(t));if(r.features=r.features.filter(function(t){var e=t.geometry.coordinates[0][0],r=t.geometry.coordinates[0][1],o=t.geometry.coordinates[0][2],s=Dt(e,r,n),a=Dt(r,o,n),u=Dt(e,o,n);return s<=i&&a<=i&&u<=i}),r.features.length<1)return null;var o=Wt(r,n);return 1===o.coordinates.length&&(o.coordinates=o.coordinates[0],o.type="Polygon"),e(o)},t.collect=function(t,e,n,i){var r=Ro(6),o=e.features.map(function(t){return{minX:t.geometry.coordinates[0],minY:t.geometry.coordinates[1],maxX:t.geometry.coordinates[0],maxY:t.geometry.coordinates[1],property:t.properties[n]}});return r.load(o),t.features.forEach(function(t){t.properties||(t.properties={});var e=X(t),n=[];r.search({minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}).forEach(function(e){Tt([e.minX,e.minY],t)&&n.push(e.property)}),t.properties[i]=n}),t},t.flip=function(t,e){if(!C(e=e||{}))throw new Error("options is invalid");var n=e.mutate;if(!t)throw new Error("geojson is required");return!1!==n&&void 0!==n||(t=Ft(t)),S(t,function(t){var e=t[0],n=t[1];t[0]=n,t[1]=e}),t},t.simplify=function(t,e){if(!C(e=e||{}))throw new Error("options is invalid");var n=void 0!==e.tolerance?e.tolerance:1,i=e.highQuality||!1,r=e.mutate||!1;if(!t)throw new Error("geojson is required");if(n&&n<0)throw new Error("invalid tolerance");return!0!==r&&(t=Ft(t)),A(t,function(t){!function(t,e,n){var i=t.type;if("Point"===i||"MultiPoint"===i)return t;Kt(t,!0);var r=t.coordinates;switch(i){case"LineString":t.coordinates=$t(r,e,n);break;case"MultiLineString":t.coordinates=r.map(function(t){return $t(t,e,n)});break;case"Polygon":t.coordinates=te(r,e,n);break;case"MultiPolygon":t.coordinates=r.map(function(t){return te(t,e,n)})}}(t,n,i)}),t},t.bezierSpline=ee,t.tag=function(t,e,n,i){return t=Ft(t),e=Ft(e),L(t,function(t){t.properties||(t.properties={}),L(e,function(e){void 0===t.properties[i]&&Tt(t,e)&&(t.properties[i]=e.properties[n])})}),t},t.sample=function(t,e){if(!t)throw new Error("featurecollection is required");if(null===e||void 0===e)throw new Error("num is required");if("number"!=typeof e)throw new Error("num must be a number");return h(function(t,e){for(var n,i,r=t.slice(0),o=t.length,s=o-e;o-- >s;)i=Math.floor((o+1)*Math.random()),n=r[i],r[i]=r[o],r[o]=n;return r.slice(s)}(t.features,e))},t.envelope=ie,t.square=re,t.circle=se,t.midpoint=function(t,e){return oe(t,Dt(t,e)/2,ae(t,e))},t.center=ue,t.centerOfMass=function t(e,n){switch(J(e)){case"Point":return e;case"Polygon":var r=[];S(e,function(t){r.push(t)});var o,s,a,u,h,c,l,p,f=he(e,n),d=f.geometry.coordinates,g=0,y=0,_=0,v=r.map(function(t){return[t[0]-d[0],t[1]-d[1]]});for(o=0;o<r.length-1;o++)u=(s=v[o])[0],c=s[1],h=(a=v[o+1])[0],_+=p=u*(l=a[1])-h*c,g+=(u+h)*p,y+=(c+l)*p;if(0===_)return f;var m=1/(.5*_*6);return i([d[0]+m*g,d[1]+m*y],n);default:var E=St(e);return E?t(E,n):he(e,n)}},t.centroid=he,t.combine=function(t){function n(t,e,n){n?i[e].coordinates=i[e].coordinates.concat(t.geometry.coordinates):i[e].coordinates.push(t.geometry.coordinates),i[e].properties.push(t.properties)}var i={MultiPoint:{coordinates:[],properties:[]},MultiLineString:{coordinates:[],properties:[]},MultiPolygon:{coordinates:[],properties:[]}},r=Object.keys(i).reduce(function(t,e){return t[e.replace("Multi","")]=e,t},{});return L(t,function(t){t.geometry&&(i[t.geometry.type]?n(t,t.geometry.type,!0):r[t.geometry.type]&&n(t,r[t.geometry.type],!1))}),h(Object.keys(i).filter(function(t){return i[t].coordinates.length}).sort().map(function(t){return e({type:t,coordinates:i[t].coordinates},{collectedProperties:i[t].properties})}))},t.distance=Dt,t.explode=ce,t.bbox=X,t.tesselate=function(t){if(!t.geometry||"Polygon"!==t.geometry.type&&"MultiPolygon"!==t.geometry.type)throw new Error("input must be a Polygon or MultiPolygon");var e={type:"FeatureCollection",features:[]};return"Polygon"===t.geometry.type?e.features=Ie(t.geometry.coordinates):t.geometry.coordinates.forEach(function(t){e.features=e.features.concat(Ie(t))}),e},t.bboxPolygon=ne,t.booleanPointInPolygon=Tt,t.nearestPoint=Se,t.nearestPointOnLine=Ke,t.nearestPointToLine=function(t,e,n){if(!C(n=n||{}))throw new Error("options is invalid");var i=n.units,r=n.properties||{};if(!t)throw new Error("points is required");if(!(t=function(t){var e=[];switch(t.geometry?t.geometry.type:t.type){case"GeometryCollection":return A(t,function(t){"Point"===t.type&&e.push({type:"Feature",properties:{},geometry:t})}),{type:"FeatureCollection",features:e};case"FeatureCollection":return t.features=t.features.filter(function(t){return"Point"===t.geometry.type}),t;default:throw new Error("points must be a Point Collection")}}(t)).features.length)throw new Error("points must contain features");if(!e)throw new Error("line is required");if("LineString"!==J(e))throw new Error("line must be a LineString");var o=1/0,s=null;return L(t,function(t){var n=rn(t,e,{units:i});n<o&&(o=n,s=t)}),s&&(s.properties=Object.assign({dist:o},s.properties,r)),s},t.planepoint=function(t,e){var n=q(t),i=H(e).coordinates[0];if(i.length<4)throw new Error("OuterRing of a Polygon must have 4 or more Positions.");var r=e.properties||{},o=r.a,s=r.b,a=r.c,u=n[0],h=n[1],c=i[0][0],l=i[0][1],p=void 0!==o?o:i[0][2],f=i[1][0],d=i[1][1],g=void 0!==s?s:i[1][2],y=i[2][0],_=i[2][1],v=void 0!==a?a:i[2][2];return(v*(u-c)*(h-d)+p*(u-f)*(h-_)+g*(u-y)*(h-l)-g*(u-c)*(h-_)-v*(u-f)*(h-l)-p*(u-y)*(h-d))/((u-c)*(h-d)+(u-f)*(h-_)+(u-y)*(h-l)-(u-c)*(h-_)-(u-f)*(h-l)-(u-y)*(h-d))},t.tin=Lt,t.bearing=ae,t.destination=oe,t.kinks=function(t){var e,n,r={type:"FeatureCollection",features:[]};if("LineString"===(n="Feature"===t.type?t.geometry:t).type)e=[n.coordinates];else if("MultiLineString"===n.type)e=n.coordinates;else if("MultiPolygon"===n.type)e=[].concat.apply([],n.coordinates);else{if("Polygon"!==n.type)throw new Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry");e=n.coordinates}return e.forEach(function(t){e.forEach(function(e){for(var n=0;n<t.length-1;n++)for(var o=n;o<e.length-1;o++){if(t===e){if(1===Math.abs(n-o))continue;if(0===n&&o===t.length-2&&t[n][0]===t[t.length-1][0]&&t[n][1]===t[t.length-1][1])continue}var s=function(t,e,n,i,r,o,s,a){var u,h,c,l,p={x:null,y:null,onLine1:!1,onLine2:!1};return 0==(u=(a-o)*(n-t)-(s-r)*(i-e))?null!==p.x&&null!==p.y&&p:(l=(n-t)*(h=e-o)-(i-e)*(c=t-r),h=((s-r)*h-(a-o)*c)/u,c=l/u,p.x=t+h*(n-t),p.y=e+h*(i-e),h>=0&&h<=1&&(p.onLine1=!0),c>=0&&c<=1&&(p.onLine2=!0),!(!p.onLine1||!p.onLine2)&&[p.x,p.y])}(t[n][0],t[n][1],t[n+1][0],t[n+1][1],e[o][0],e[o][1],e[o+1][0],e[o+1][1]);s&&r.features.push(i([s[0],s[1]]))}})}),r},t.pointOnFeature=sn,t.area=un,t.along=function(t,e,n){if(!C(n=n||{}))throw new Error("options is invalid");var r;if("Feature"===t.type)r=t.geometry.coordinates;else{if("LineString"!==t.type)throw new Error("input must be a LineString Feature or Geometry");r=t.coordinates}if(!w(e))throw new Error("distance must be a number");for(var o=0,s=0;s<r.length&&!(e>=o&&s===r.length-1);s++){if(o>=e){var a=e-o;if(a){var u=ae(r[s],r[s-1])-180;return oe(r[s],a,u,n)}return i(r[s])}o+=Dt(r[s],r[s+1],n)}return i(r[r.length-1])},t.length=pn,t.lineSlice=function(t,e,n){var i=U(n);if("LineString"!==J(n))throw new Error("line must be a LineString");for(var r,o=Ke(n,t),s=Ke(n,e),u=[(r=o.properties.index<=s.properties.index?[o,s]:[s,o])[0].geometry.coordinates],h=r[0].properties.index+1;h<r[1].properties.index+1;h++)u.push(i[h]);return u.push(r[1].geometry.coordinates),a(u,n.properties)},t.lineSliceAlong=fn,t.pointGrid=vn,t.truncate=mn,t.flatten=function(t){if(!t)throw new Error("geojson is required");var e=[];return F(t,function(t){e.push(t)}),h(e)},t.lineIntersect=Ve,t.lineChunk=function(t,e,n){if(!C(n=n||{}))throw new Error("options is invalid");var i=n.units,r=n.reverse;if(!t)throw new Error("geojson is required");if(e<=0)throw new Error("segmentLength must be greater than 0");var o=[];return F(t,function(t){r&&(t.geometry.coordinates=t.geometry.coordinates.reverse()),function(t,e,n,i){var r=pn(t,{units:n});if(r<=e)return i(t);var o=r/e;Number.isInteger(o)||(o=Math.floor(o)+1);for(var s=0;s<o;s++){var a=fn(t,e*s,e*(s+1),{units:n});i(a)}}(t,e,i,function(t){o.push(t)})}),h(o)},t.unkinkPolygon=function(t){var e=[];return F(t,function(t){"Polygon"===t.geometry.type&&L(hs(t),function(n){e.push(o(n.geometry.coordinates,t.properties))})}),h(e)},t.greatCircle=function(t,e,n){if("object"!=typeof(n=n||{}))throw new Error("options is invalid");var i=n.properties,r=n.npoints,o=n.offset;return t=q(t),e=q(e),i=i||{},r=r||100,o=o||10,new _s({x:t[0],y:t[1]},{x:e[0],y:e[1]},i).Arc(r,{offset:o}).json()},t.lineSegment=ze,t.lineSplit=function(t,e){if(!t)throw new Error("line is required");if(!e)throw new Error("splitter is required");var n=J(t),i=J(e);if("LineString"!==n)throw new Error("line must be LineString");if("FeatureCollection"===i)throw new Error("splitter cannot be a FeatureCollection");if("GeometryCollection"===i)throw new Error("splitter cannot be a GeometryCollection");var r=mn(e,{precision:7});switch(i){case"Point":return Cn(t,r);case"MultiPoint":return wn(t,r);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return wn(t,Ve(t,r))}},t.lineArc=Sn,t.polygonToLine=Rn,t.lineToPolygon=Ln,t.bboxClip=function(t,e){var n=function(t){return t.geometry?t.geometry.type:t.type}(t),i=U(t),r=t.properties;switch(n){case"LineString":case"MultiLineString":var s=[];return"LineString"===n&&(i=[i]),i.forEach(function(t){vs(t,e,s)}),1===s.length?a(s[0],r):c(s,r);case"Polygon":return o(jn(i,e),r);case"MultiPolygon":return p(i.map(function(t){return jn(t,e)}),r);default:throw new Error("geometry "+n+" not supported")}},t.lineOverlap=Xn,t.sector=function(t,e,n,i,r){if(!C(r=r||{}))throw new Error("options is invalid");if(!t)throw new Error("center is required");if(void 0===n||null===n)throw new Error("bearing1 is required");if(void 0===i||null===i)throw new Error("bearing2 is required");if(!e)throw new Error("radius is required");if("object"!=typeof r)throw new Error("options must be an object");if(Un(n)===Un(i))return se(t,e,r);var s=U(t),a=[[s]];return S(Sn(t,e,n,i,r),function(t){a[0].push(t)}),a[0].push(s),o(a)},t.rhumbBearing=He,t.rhumbDistance=Je,t.rhumbDestination=zn,t.polygonTangents=function(t,e){var n,r,o,s=U(t),a=U(e);switch(J(e)){case"Polygon":n=a[0][0],r=a[0][0],o=Wn(a[0][0],a[0][a[0].length-1],s);var u=Vn(a[0],s,o,void 0,n,r);n=u[0],r=u[1];break;case"MultiPolygon":n=a[0][0][0],r=a[0][0][0],o=Wn(a[0][0][0],a[0][0][a[0][0].length-1],s),a.forEach(function(t){var e=Vn(t[0],s,o,void 0,n,r);n=e[0],r=e[1]})}return h([i(n),i(r)])},t.rewind=function(t,e){if(!C(e=e||{}))throw new Error("options is invalid");var n=e.reverse||!1,i=e.mutate||!1;if(!t)throw new Error("<geojson> is required");if("boolean"!=typeof n)throw new Error("<reverse> must be a boolean");if("boolean"!=typeof i)throw new Error("<mutate> must be a boolean");!1===i&&(t=Ft(t));var r=[];switch(t.type){case"GeometryCollection":return A(t,function(t){Hn(t,n)}),t;case"FeatureCollection":return L(t,function(t){L(Hn(t,n),function(t){r.push(t)})}),h(r)}return Hn(t,n)},t.isobands=function(t,e,n){if(!C(n=n||{}))throw new Error("options is invalid");var i=n.zProperty||"elevation",r=n.commonProperties||{},s=n.breaksProperties||[];if(K(t,"Point","Input must contain Points"),!e)throw new Error("breaks is required");if(!Array.isArray(e))throw new Error("breaks is not an Array");if(!C(r))throw new Error("commonProperties is not an Object");if(!Array.isArray(s))throw new Error("breaksProperties is not an Array");var a=function(t,e){if(!C(e=e||{}))throw new Error("options is invalid");var n=e.zProperty||"elevation",i=e.flip,r=e.flags;K(t,"Point","input must contain Points");for(var o=function(t,e){var n={};return L(t,function(t){var e=U(t)[1];n[e]||(n[e]=[]),n[e].push(t)}),Object.keys(n).map(function(t){var e=n[t],i=e.sort(function(t,e){return U(t)[0]-U(e)[0]});return i}).sort(function(t,n){return e?U(t[0])[1]-U(n[0])[1]:U(n[0])[1]-U(t[0])[1]})}(t,i),s=[],a=0;a<o.length;a++){for(var u=o[a],h=[],c=0;c<u.length;c++){var l=u[c];l.properties[n]?h.push(l.properties[n]):h.push(0),!0===r&&(l.properties.matrixPosition=[a,c])}s.push(h)}return s}(t,{zProperty:i,flip:!0}),u=function(t,e,n){for(var i=[],r=1;r<e.length;r++){var s=+e[r-1],a=+e[r],u=Qn(t,s,a-s),h=function(t){var e=[],n=[];t.forEach(function(t){var i=un(o([t]));n.push(i),e.push({ring:t,area:i})}),n.sort(function(t,e){return e-t});var i=[];return n.forEach(function(t){for(var n=0;n<e.length;n++)if(e[n].area===t){i.push(e[n].ring),e.splice(n,1);break}}),i}(u),c=function(t){for(var e=t.map(function(t){return{lrCoordinates:t,grouped:!1}}),n=[];!function(t){for(var e=0;e<t.length;e++)if(!1===t[e].grouped)return!1;return!0}(e);)for(var i=0;i<e.length;i++)if(!e[i].grouped){var r=[];r.push(e[i].lrCoordinates),e[i].grouped=!0;for(var s=o([e[i].lrCoordinates]),a=i+1;a<e.length;a++)if(!e[a].grouped){var u=o([e[a].lrCoordinates]);(function(t,e){for(var n=ce(t),i=0;i<n.features.length;i++)if(!Tt(n.features[i],e))return!1;return!0})(u,s)&&(r.push(e[a].lrCoordinates),e[a].grouped=!0)}n.push(r)}return n}(h),l={};l.groupedRings=c,l[n]=s+"-"+a,i.push(l)}return i}(a,e,i);return h((u=function(t,e,n){var i=X(n),r=i[2]-i[0],o=i[3]-i[1],s=i[0],a=i[1],u=e[0].length-1,h=e.length-1,c=r/u,l=o/h,p=function(t){t[0]=t[0]*c+s,t[1]=t[1]*l+a};return t.forEach(function(t){t.groupedRings.forEach(function(t){t.forEach(function(t){t.forEach(p)})})}),t}(u,a,t)).map(function(t,e){if(s[e]&&!C(s[e]))throw new Error("Each mappedProperty is required to be an Object");var n=Object.assign({},r,s[e]);return n[i]=t[i],p(t.groupedRings,n)}))},t.transformRotate=ei,t.transformScale=ni,t.transformTranslate=function(t,e,n,i){if(!C(i=i||{}))throw new Error("options is invalid");var r=i.units,o=i.zTranslation,s=i.mutate;if(!t)throw new Error("geojson is required");if(void 0===e||null===e||isNaN(e))throw new Error("distance is required");if(o&&"number"!=typeof o&&isNaN(o))throw new Error("zTranslation is not a number");if(o=void 0!==o?o:0,0===e&&0===o)return t;if(void 0===n||null===n||isNaN(n))throw new Error("direction is required");return e<0&&(e=-e,n=-n),!1!==s&&void 0!==s||(t=Ft(t)),S(t,function(t){var i=U(zn(t,e,n,{units:r}));t[0]=i[0],t[1]=i[1],o&&3===t.length&&(t[2]+=o)}),t},t.lineOffset=function(t,e,n){if(!C(n=n||{}))throw new Error("options is invalid");var i=n.units;if(!t)throw new Error("geojson is required");if(void 0===e||null===e||isNaN(e))throw new Error("distance is required");var r=J(t),o=t.properties;switch(r){case"LineString":return si(t,e,i);case"MultiLineString":var s=[];return F(t,function(t){s.push(si(t,e,i).geometry.coordinates)}),c(s,o);default:throw new Error("geometry "+r+" is not supported")}},t.polygonize=function(t){var e=_a.fromGeoJson(t);e.deleteDangles(),e.deleteCutEdges();var n=[],i=[];return e.getEdgeRings().filter(function(t){return t.isValid()}).forEach(function(t){t.isHole()?n.push(t):i.push(t)}),n.forEach(function(t){ga.findEdgeRingContaining(t,i)&&i.push(t)}),h(i.map(function(t){return t.toPolygon()}))},t.booleanDisjoint=function(t,e){var n;return F(t,function(t){F(e,function(e){if(!1===n)return!1;n=function(t,e){switch(t.type){case"Point":switch(e.type){case"Point":return!function(t,e){return t[0]===e[0]&&t[1]===e[1]}(t.coordinates,e.coordinates);case"LineString":return!hi(e,t);case"Polygon":return!Tt(t,e)}break;case"LineString":switch(e.type){case"Point":return!hi(t,e);case"LineString":return!function(t,e){return Ve(t,e).features.length>0}(t,e);case"Polygon":return!ci(e,t)}break;case"Polygon":switch(e.type){case"Point":return!Tt(e,t);case"LineString":return!ci(t,e);case"Polygon":return!function(t,e){for(var n=0;n<t.coordinates[0].length;n++)if(Tt(t.coordinates[0][n],e))return!0;for(var i=0;i<e.coordinates[0].length;i++)if(Tt(e.coordinates[0][i],t))return!0;return!1}(e,t)}}}(t.geometry,e.geometry)})}),n},t.booleanContains=function(t,e){var n=J(t),i=J(e),r=H(t),o=H(e),s=U(t),a=U(e);switch(n){case"Point":switch(i){case"Point":return pi(s,a);default:throw new Error("feature2 "+i+" geometry not supported")}case"MultiPoint":switch(i){case"Point":return function(t,e){var n,i=!1;for(n=0;n<t.coordinates.length;n++)if(pi(t.coordinates[n],e.coordinates)){i=!0;break}return i}(r,o);case"MultiPoint":return function(t,e){for(var n=0;n<e.coordinates.length;n++){for(var i=!1,r=0;r<t.coordinates.length;r++)if(pi(e.coordinates[n],t.coordinates[r])){i=!0;break}if(!i)return!1}return!0}(r,o);default:throw new Error("feature2 "+i+" geometry not supported")}case"LineString":switch(i){case"Point":return dn(o,r,{ignoreEndVertices:!0});case"LineString":return function(t,e){for(var n=!1,i=0;i<e.coordinates.length;i++)if(dn({type:"Point",coordinates:e.coordinates[i]},t,{ignoreEndVertices:!0})&&(n=!0),!dn({type:"Point",coordinates:e.coordinates[i]},t,{ignoreEndVertices:!1}))return!1;return n}(r,o);case"MultiPoint":return function(t,e){for(var n=!1,i=0;i<e.coordinates.length;i++)if(dn(e.coordinates[i],t,{ignoreEndVertices:!0})&&(n=!0),!dn(e.coordinates[i],t))return!1;return!!n}(r,o);default:throw new Error("feature2 "+i+" geometry not supported")}case"Polygon":switch(i){case"Point":return Tt(o,r,{ignoreBoundary:!0});case"LineString":return function(t,e){var n=!1,i=0,r=X(t),o=X(e);if(!li(r,o))return!1;for(;i<e.coordinates.length-1;i++){var s=function(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]}(e.coordinates[i],e.coordinates[i+1]);if(Tt({type:"Point",coordinates:s},t,{ignoreBoundary:!0})){n=!0;break}}return n}(r,o);case"Polygon":return function(t,e){var n=X(t),i=X(e);if(!li(n,i))return!1;for(var r=0;r<e.coordinates[0].length;r++)if(!Tt(e.coordinates[0][r],t))return!1;return!0}(r,o);case"MultiPoint":return function(t,e){for(var n=0;n<e.coordinates.length;n++)if(!Tt(e.coordinates[n],t,{ignoreBoundary:!0}))return!1;return!0}(r,o);default:throw new Error("feature2 "+i+" geometry not supported")}default:throw new Error("feature1 "+n+" geometry not supported")}},t.booleanCrosses=function(t,e){var n=J(t),i=J(e),r=H(t),o=H(e);switch(n){case"MultiPoint":switch(i){case"LineString":return fi(r,o);case"Polygon":return gi(r,o);default:throw new Error("feature2 "+i+" geometry not supported")}case"LineString":switch(i){case"MultiPoint":return fi(o,r);case"LineString":return function(t,e){if(Ve(t,e).features.length>0)for(var n=0;n<t.coordinates.length-1;n++)for(var i=0;i<e.coordinates.length-1;i++){var r=!0;if(0!==i&&i!==e.coordinates.length-2||(r=!1),yi(t.coordinates[n],t.coordinates[n+1],e.coordinates[i],r))return!0}return!1}(r,o);case"Polygon":return di(r,o);default:throw new Error("feature2 "+i+" geometry not supported")}case"Polygon":switch(i){case"MultiPoint":return gi(o,r);case"LineString":return di(o,r);default:throw new Error("feature2 "+i+" geometry not supported")}default:throw new Error("feature1 "+n+" geometry not supported")}},t.booleanClockwise=Kn,t.booleanOverlap=Ei,t.booleanPointOnLine=dn,t.booleanEqual=function(t,e){if(!t)throw new Error("feature1 is required");if(!e)throw new Error("feature2 is required");return J(t)===J(e)&&new ba({precision:6}).compare(Kt(t),Kt(e))},t.booleanWithin=gn,t.clone=Ft,t.cleanCoords=Kt,t.clustersDbscan=function(t,e,n){if("object"!=typeof(n=n||{}))throw new Error("options is invalid");var i=n.minPoints,r=n.units;if(K(t,"Point","Input must contain Points"),null===e||void 0===e)throw new Error("maxDistance is required");if(!(Math.sign(e)>0))throw new Error("Invalid maxDistance");if(!(void 0===i||null===i||Math.sign(i)>0))throw new Error("Invalid minPoints");t=Ft(t),i=i||3;var o=new Sa.DBSCAN,s=-1;return o.run(P(t),x(e,r),i,Dt).forEach(function(e){s++,e.forEach(function(e){var n=t.features[e];n.properties||(n.properties={}),n.properties.cluster=s,n.properties.dbscan="core"})}),o.noise.forEach(function(e){var n=t.features[e];n.properties||(n.properties={}),n.properties.cluster?n.properties.dbscan="edge":n.properties.dbscan="noise"}),t},t.clustersKmeans=function(t,e){if("object"!=typeof(e=e||{}))throw new Error("options is invalid");var n=e.numberOfClusters,i=e.mutate;K(t,"Point","Input must contain Points");var r=t.features.length;(n=n||Math.round(Math.sqrt(r/2)))>r&&(n=r),!1!==i&&void 0!==i||(t=Ft(t));var o=P(t),s=o.slice(0,n),a=Ma(o,n,s),u={};return a.centroids.forEach(function(t,e){u[e]=t}),L(t,function(t,e){var n=a.idxs[e];t.properties.cluster=n,t.properties.centroid=u[n]}),t},t.pointToLineDistance=rn,t.booleanParallel=function(t,e){if(!t)throw new Error("line1 is required");if(!e)throw new Error("line2 is required");if("LineString"!==bi(t,"line1"))throw new Error("line1 must be a LineString");if("LineString"!==bi(e,"line2"))throw new Error("line2 must be a LineString");for(var n=ze(Kt(t)).features,i=ze(Kt(e)).features,r=0;r<n.length;r++){var o=n[r].geometry.coordinates;if(!i[r])break;if(!function(t,e){var n=v(He(t[0],t[1])),i=v(He(e[0],e[1]));return n===i}(o,i[r].geometry.coordinates))return!1}return!0},t.shortestPath=function(t,n,r){if(!C(r=r||{}))throw new Error("options is invalid");var o=r.resolution,s=r.minDistance,u=r.obstacles||h([]);if(!t)throw new Error("start is required");if(!n)throw new Error("end is required");if(o&&!w(o)||o<=0)throw new Error("options.resolution must be a number, greater than 0");if(s)throw new Error("options.minDistance is not yet implemented");var c=q(t),l=q(n);switch(t=i(c),n=i(l),J(u)){case"FeatureCollection":if(0===u.features.length)return a([c,l]);break;case"Polygon":u=h([e(H(u))]);break;default:throw new Error("invalid obstacles")}var p=u;p.features.push(t),p.features.push(n);var f=X(ni(ne(X(p)),1.15));o||(o=Dt([f[0],f[1]],[f[2],f[1]],r)/100),p.features.pop(),p.features.pop();for(var d=f[0],g=f[1],y=f[2],_=f[3],v=o/Dt([d,g],[y,g],r)*(y-d),m=o/Dt([d,g],[d,_],r)*(_-g),E=y-d,x=_-g,b=(E-Math.floor(E/v)*v)/2,O=[],I=[],S=[],T=[],R=1/0,N=1/0,L=_-(x-Math.floor(x/m)*m)/2,M=0;L>=g;){for(var P=[],A=[],D=d+b,F=0;D<=y;){var j=i([D,L]),G=function(t,e){for(var n=0;n<e.features.length;n++)if(Tt(t,e.features[n]))return!0;return!1}(j,u);P.push(G?0:1),A.push(D+"|"+L);var k=Dt(j,t);!G&&k<R&&(R=k,S={x:F,y:M});var B=Dt(j,n);!G&&B<N&&(N=B,T={x:F,y:M}),D+=v,F++}I.push(P),O.push(A),L-=m,M++}var Y=new Ci(I,{diagonal:!0}),U=Y.grid[S.y][S.x],z=Y.grid[T.y][T.x],V=[c];return Pa.search(Y,U,z).forEach(function(t){var e=O[t.x][t.y].split("|");V.push([+e[0],+e[1]])}),V.push(l),Kt(a(V))},t.voronoi=function(t,e){if(!C(e=e||{}))throw new Error("options is invalid");var n=e.bbox||[-180,-85,180,85];if(!t)throw new Error("points is required");if(!Array.isArray(n))throw new Error("bbox is invalid");return K(t,"Point","points"),h(function(){function t(t){return new Ji(t.map(function(i,r){var o=[Math.round(e(i,r,t)/Xa)*Xa,Math.round(n(i,r,t)/Xa)*Xa];return o.index=r,o.data=i,o}),i)}var e=Si,n=Ti,i=null;return t.polygons=function(e){return t(e).polygons()},t.links=function(e){return t(e).links()},t.triangles=function(e){return t(e).triangles()},t.x=function(n){return arguments.length?(e="function"==typeof n?n:Aa(+n),t):e},t.y=function(e){return arguments.length?(n="function"==typeof e?e:Aa(+e),t):n},t.extent=function(e){return arguments.length?(i=null==e?null:[[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]],t):i&&[[i[0][0],i[0][1]],[i[1][0],i[1][1]]]},t.size=function(e){return arguments.length?(i=null==e?null:[[0,0],[+e[0],+e[1]]],t):i&&[i[1][0]-i[0][0],i[1][1]-i[0][1]]},t}().x(function(t){return t.geometry.coordinates[0]}).y(function(t){return t.geometry.coordinates[1]}).extent([[n[0],n[1]],[n[2],n[3]]]).polygons(t.features).map(Qi))},t.ellipse=$i,t.centerMean=er,t.centerMedian=function(t,e){if(!C(e=e||{}))throw new Error("options is invalid");var n=e.counter||10;if(!w(n))throw new Error("counter must be a number");var i=e.weight,r=er(t,{weight:e.weight}),o=h([]);return L(t,function(t){o.features.push(he(t,{weight:t.properties[i]}))}),o.properties={tolerance:e.tolerance,medianCandidates:[]},nr(r.geometry.coordinates,[0,0],o,n)},t.standardDeviationalEllipse=function(t,e){if(!C(e=e||{}))throw new Error("options is invalid");var n=e.steps||64,i=e.weight,r=e.properties||{};if(!w(n))throw new Error("steps must be a number");if(!C(r))throw new Error("properties must be a number");var o=P(t).length,s=er(t,{weight:i}),a=0,u=0,c=0;L(t,function(t){var e=t.properties[i]||1,n=ir(U(t),U(s));a+=Math.pow(n.x,2)*e,u+=Math.pow(n.y,2)*e,c+=n.x*n.y*e});var l=a-u,p=Math.sqrt(Math.pow(l,2)+4*Math.pow(c,2)),f=2*c,d=Math.atan((l+p)/f),g=180*d/Math.PI,y=0,_=0,v=0;L(t,function(t){var e=t.properties[i]||1,n=ir(U(t),U(s));y+=Math.pow(n.x*Math.cos(d)-n.y*Math.sin(d),2)*e,_+=Math.pow(n.x*Math.sin(d)+n.y*Math.cos(d),2)*e,v+=e});var m=Math.sqrt(2*y/v),E=Math.sqrt(2*_/v),x=$i(s,m,E,{units:"degrees",angle:g,steps:n,properties:r}),b=Nt(t,h([x])),O={meanCenterCoordinates:U(s),semiMajorAxis:m,semiMinorAxis:E,numberOfFeatures:o,angle:g,percentageWithinEllipse:100*P(b).length/o};return x.properties.standardDeviationalEllipse=O,x},t.difference=function(t,n){var i=H(t),r=H(n),o=t.properties||{};if(i=Lr(i),r=Lr(r),!i)return null;if(!r)return e(i,o);var s=new $h,a=s.read(i),u=s.read(r),h=ef.difference(a,u);return h.isEmpty()?null:e((new tc).write(h),o)},t.buffer=function(t,e,n){var i=(n=n||{}).units,r=n.steps||64;if(!t)throw new Error("geojson is required");if("object"!=typeof n)throw new Error("options must be an object");if("number"!=typeof r)throw new Error("steps must be an number");if(void 0===e)throw new Error("radius is required");if(r<=0)throw new Error("steps must be greater than 0");r=r||64,i=i||"kilometers";var o=[];switch(t.type){case"GeometryCollection":return A(t,function(t){var n=uo(t,e,i,r);n&&o.push(n)}),h(o);case"FeatureCollection":return L(t,function(t){var n=uo(t,e,i,r);n&&L(n,function(t){t&&o.push(t)})}),h(o)}return uo(t,e,i,r)},t.union=co,t.intersect=lo,t.dissolve=function(t,e){if(!C(e=e||{}))throw new Error("options is invalid");var n=e.propertyName;K(t,"Polygon","dissolve");var i=Ft(t),r=i.features,o=[];r.forEach(function(t,e){t.properties.origIndexPosition=e});var s=Xe();for(var u in s.load(i),r){var h=r[u],c=!1;if(s.search(h).features.forEach(function(t){h=r[u];var e=t.properties.origIndexPosition;if(o.length>0&&0!==e)if(e>o[o.length-1])e-=o.length;else{var i=po(e,o);0!==i&&(e-=i)}if(e!==+u){var l=r[e];l&&h&&(void 0!==n&&l.properties[n]!==h.properties[n]||Ei(h,l)&&function(t,e){var n=a(P(t)),i=a(P(e));return Ve(n,i).features.length>0}(h,l)&&(r[u]=co(h,l),o.push(t.properties.origIndexPosition),o.sort(function(t,e){return t-e}),s.remove(t),r.splice(e,1),h.properties.origIndexPosition=u,s.remove(h,function(t,e){return t.properties.origIndexPosition===e.properties.origIndexPosition}),c=!0))}}),c){if(!h)continue;h.properties.origIndexPosition=u,s.insert(h),u--}}return r.forEach(function(t){delete t.properties.origIndexPosition,delete t.bbox}),i},t.hexGrid=fo,t.mask=function(t,e){var n=o([[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]]),i=function(t){var e=[],n=[];return F(t,function(t){var i=t.geometry.coordinates,r=i[0],s=i.slice(1);e.push(o([r])),s.forEach(function(t){n.push(o([t]))})}),[h(e),h(n)]}(t),r=i[0],s=i[1];return function(t,e,n){var i=[];return i.push(t.geometry.coordinates[0]),F(e,function(t){i.push(t.geometry.coordinates[0])}),F(n,function(t){i.push(t.geometry.coordinates[0])}),o(i)}(n,r=go(r),s=go(s))},t.squareGrid=_o,t.triangleGrid=vo,t.interpolate=function(t,e,n){if("object"!=typeof(n=n||{}))throw new Error("options is invalid");var i=n.gridType,r=n.property,o=n.weight;if(!t)throw new Error("points is required");if(K(t,"Point","input must contain Points"),!e)throw new Error("cellSize is required");if(void 0!==o&&"number"!=typeof o)throw new Error("weight must be a number");r=r||"elevation",i=i||"square",o=o||1;var s,a=X(t);switch(i){case"point":case"points":s=vn(a,e,n);break;case"square":case"squares":s=_o(a,e,n);break;case"hex":case"hexes":s=fo(a,e,n);break;case"triangle":case"triangles":s=vo(a,e,n);break;default:throw new Error("invalid gridType")}var u=[];return L(s,function(e){var s=0,a=0;L(t,function(t){var u,h=Dt("point"===i?e:he(e),t,n);if(void 0!==r&&(u=t.properties[r]),void 0===u&&(u=t.geometry.coordinates[2]),void 0===u)throw new Error("zValue is missing");0===h&&(s=u);var c=1/Math.pow(h,o);a+=c,s+=c*u});var h=Ft(e);h.properties[r]=s/a,u.push(h)}),h(u)},t.pointOnSurface=sn,t.polygonToLineString=Rn,t.lineStringToPolygon=Ln,t.inside=Tt,t.within=Nt,t.bezier=ee,t.nearest=Se,t.pointOnLine=Ke,t.lineDistance=pn,t.radians2degrees=m,t.degrees2radians=E,t.distanceToDegrees=_,t.distanceToRadians=y,t.radiansToDistance=g,t.bearingToAngle=v,t.convertDistance=x,t.toMercator=Qe,t.toWgs84=$e,t.randomPosition=rr,t.randomPoint=or,t.randomPolygon=sr,t.randomLineString=ar,t.getCluster=hr,t.clusterEach=cr,t.clusterReduce=lr,t.createBins=pr,t.applyFilter=fr,t.propertiesContainsFilter=dr,t.filterProperties=gr,t.earthRadius=mo,t.factors=Eo,t.unitsFactors=xo,t.areaFactors=bo,t.feature=e,t.geometry=n,t.point=i,t.points=r,t.polygon=o,t.polygons=s,t.lineString=a,t.lineStrings=u,t.featureCollection=h,t.multiLineString=c,t.multiPoint=l,t.multiPolygon=p,t.geometryCollection=f,t.round=d,t.radiansToLength=g,t.lengthToRadians=y,t.lengthToDegrees=_,t.bearingToAzimuth=v,t.radiansToDegrees=m,t.degreesToRadians=E,t.convertLength=x,t.convertArea=b,t.isNumber=w,t.isObject=C,t.validateBBox=O,t.validateId=I,t.getCoord=q,t.getCoords=U,t.containsNumber=z,t.geojsonType=V,t.featureOf=W,t.collectionOf=K,t.getGeom=H,t.getGeomType=Z,t.getType=J,t.coordEach=S,t.coordReduce=T,t.propEach=R,t.propReduce=N,t.featureEach=L,t.featureReduce=M,t.coordAll=P,t.geomEach=A,t.geomReduce=D,t.flattenEach=F,t.flattenReduce=j,t.segmentEach=G,t.segmentReduce=k,t.lineEach=B,t.lineReduce=Y,Object.defineProperty(t,"__esModule",{value:!0})}(e)},function(t){t.exports={type:"FeatureCollection",features:[{type:"Feature",properties:{threshold:0},geometry:{type:"Polygon",coordinates:[[[-104.88801956176758,40.22908713081636],[-104.93539810180664,40.20981886323868],[-104.91342544555664,40.18307014852534],[-104.83291625976561,40.183463588419485],[-104.84167098999023,40.21650439316211],[-104.88801956176758,40.22908713081636]]]}},{type:"Feature",properties:{threshold:1},geometry:{type:"Polygon",coordinates:[[[-104.82330322265625,40.24114339464074],[-104.82330322265625,40.24114339464074],[-104.8231315612793,40.24114339464074],[-104.8231315612793,40.24114339464074],[-104.82330322265625,40.24114339464074]]]}},{type:"Feature",properties:{threshold:2},geometry:{type:"Polygon",coordinates:[[[-104.85523223876953,40.194085603043305],[-104.8231315612793,40.194085603043305],[-104.8231315612793,40.239833035160466],[-104.85523223876953,40.239833035160466],[-104.85523223876953,40.194085603043305]]]}},{type:"Feature",properties:{threshold:3},geometry:{type:"Polygon",coordinates:[[[-104.92733001708983,40.20667250329804],[-104.88458633422852,40.20667250329804],[-104.88458633422852,40.24363300778246],[-104.92733001708983,40.24363300778246],[-104.92733001708983,40.20667250329804]]]}},{type:"Feature",properties:{threshold:4},geometry:{type:"Polygon",coordinates:[[[-104.94586944580078,40.167855389492544],[-104.80871200561523,40.167855389492544],[-104.80871200561523,40.25411458509127],[-104.94586944580078,40.25411458509127],[-104.94586944580078,40.167855389492544]]]}},{type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:[[[-105.82855224609375,39.87812720644829],[-105.10894775390625,39.87812720644829],[-105.10894775390625,40.16418235037417],[-105.82855224609375,40.16418235037417],[-105.82855224609375,39.87812720644829]]]}},{type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:[[[-105.53741455078125,39.5633531658293],[-104.41680908203125,39.5633531658293],[-104.41680908203125,40.107487419012415],[-105.53741455078125,40.107487419012415],[-105.53741455078125,39.5633531658293]]]}}]}},function(t,e,n){"use strict";n.r(e),n.d(e,"TranslateEvent",function(){return p});var i=n(19),r=n(23),o=n(1),s=n(29),a=n(9),u=n(12),h=n(24),c=n(70),l={TRANSLATESTART:"translatestart",TRANSLATING:"translating",TRANSLATEEND:"translateend"},p=function(t){function e(e,n,i){t.call(this,e),this.features=n,this.coordinate=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(s.a),f=function(t){function e(e){t.call(this,{handleDownEvent:d,handleDragEvent:y,handleMoveEvent:_,handleUpEvent:g});var n,i=e||{};if(this.lastCoordinate_=null,this.features_=void 0!==i.features?i.features:null,i.layers)if("function"==typeof i.layers)n=i.layers;else{var s=i.layers;n=function(t){return Object(u.d)(s,t)}}else n=a.b;this.layerFilter_=n,this.hitTolerance_=i.hitTolerance?i.hitTolerance:0,this.lastFeature_=null,Object(o.a)(this,Object(r.b)(c.a.ACTIVE),this.handleActiveChanged_,this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.featuresAtPixel_=function(t,e){return e.forEachFeatureAtPixel(t,function(t){if(!this.features_||Object(u.d)(this.features_.getArray(),t))return t}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_})},e.prototype.getHitTolerance=function(){return this.hitTolerance_},e.prototype.setHitTolerance=function(t){this.hitTolerance_=t},e.prototype.setMap=function(e){var n=this.getMap();t.prototype.setMap.call(this,e),this.updateState_(n)},e.prototype.handleActiveChanged_=function(){this.updateState_(null)},e.prototype.updateState_=function(t){var e=this.getMap(),n=this.getActive();e&&n||(e=e||t)&&e.getViewport().classList.remove("ol-grab","ol-grabbing")},e}(h.b);function d(t){if(this.lastFeature_=this.featuresAtPixel_(t.pixel,t.map),!this.lastCoordinate_&&this.lastFeature_){this.lastCoordinate_=t.coordinate,_.call(this,t);var e=this.features_||new i.a([this.lastFeature_]);return this.dispatchEvent(new p(l.TRANSLATESTART,e,t.coordinate)),!0}return!1}function g(t){if(this.lastCoordinate_){this.lastCoordinate_=null,_.call(this,t);var e=this.features_||new i.a([this.lastFeature_]);return this.dispatchEvent(new p(l.TRANSLATEEND,e,t.coordinate)),!0}return!1}function y(t){if(this.lastCoordinate_){var e=t.coordinate,n=e[0]-this.lastCoordinate_[0],r=e[1]-this.lastCoordinate_[1],o=this.features_||new i.a([this.lastFeature_]);o.forEach(function(t){var e=t.getGeometry();e.translate(n,r),t.setGeometry(e)}),this.lastCoordinate_=e,this.dispatchEvent(new p(l.TRANSLATING,o,e))}}function _(t){var e=t.map.getViewport();this.featuresAtPixel_(t.pixel,t.map)?(e.classList.remove(this.lastCoordinate_?"ol-grab":"ol-grabbing"),e.classList.add(this.lastCoordinate_?"ol-grabbing":"ol-grab")):e.classList.remove("ol-grab","ol-grabbing")}e.default=f},function(t,e,n){"use strict";n.r(e),n.d(e,"handleEvent",function(){return m});var i=n(6),r=n(19),o=n(22),s=n(11),a=n(1),u=n(4),h=n(0),c=n(9),l=n(2),p=n(30),f=n(24),d=n(13),g=n(44),y=n(null),_=n(null),v=function(t){function e(e){t.call(this,{handleEvent:m,handleDownEvent:c.b,handleUpEvent:E,stopDown:c.a});var n=e||{};this.source_=n.source?n.source:null,this.vertex_=void 0===n.vertex||n.vertex,this.edge_=void 0===n.edge||n.edge,this.features_=n.features?n.features:null,this.featuresListenerKeys_=[],this.featureChangeListenerKeys_={},this.indexedFeaturesExtents_={},this.pendingFeatures_={},this.pixelCoordinate_=null,this.pixelTolerance_=void 0!==n.pixelTolerance?n.pixelTolerance:10,this.sortByDistance_=function(t,e){var n=Object(s[!1])(this.pixelCoordinate_,t.segment),i=Object(s[!1])(this.pixelCoordinate_,e.segment);return n-i}.bind(this),this.rBush_=new _.a,this.SEGMENT_WRITERS_={Point:this.writePointGeometry_,LineString:this.writeLineStringGeometry_,LinearRing:this.writeLineStringGeometry_,Polygon:this.writePolygonGeometry_,MultiPoint:this.writeMultiPointGeometry_,MultiLineString:this.writeMultiLineStringGeometry_,MultiPolygon:this.writeMultiPolygonGeometry_,GeometryCollection:this.writeGeometryCollectionGeometry_,Circle:this.writeCircleGeometry_}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.addFeature=function(t,e){var n=void 0===e||e,r=Object(i.b)(t),o=t.getGeometry();if(o){var s=this.SEGMENT_WRITERS_[o.getType()];s&&(this.indexedFeaturesExtents_[r]=o.getExtent(Object(h.j)()),s.call(this,t,o))}n&&(this.featureChangeListenerKeys_[r]=Object(a.a)(t,u.a.CHANGE,this.handleFeatureChange_,this))},e.prototype.forEachFeatureAdd_=function(t){this.addFeature(t)},e.prototype.forEachFeatureRemove_=function(t){this.removeFeature(t)},e.prototype.getFeatures_=function(){var t;return this.features_?t=this.features_:this.source_&&(t=this.source_.getFeatures()),t},e.prototype.handleFeatureAdd_=function(t){var e;t instanceof g.VectorSourceEvent?e=t.feature:t instanceof r[!1]&&(e=t.element),this.addFeature(e)},e.prototype.handleFeatureRemove_=function(t){var e;t instanceof g.VectorSourceEvent?e=t.feature:t instanceof r[!1]&&(e=t.element),this.removeFeature(e)},e.prototype.handleFeatureChange_=function(t){var e=t.target;if(this.handlingDownUpSequence){var n=Object(i.b)(e);n in this.pendingFeatures_||(this.pendingFeatures_[n]=e)}else this.updateFeature_(e)},e.prototype.removeFeature=function(t,e){var n=void 0===e||e,r=Object(i.b)(t),o=this.indexedFeaturesExtents_[r];if(o){var s=this.rBush_,u=[];s.forEachInExtent(o,function(e){t===e.feature&&u.push(e)});for(var h=u.length-1;h>=0;--h)s.remove(u[h])}n&&(Object(a.e)(this.featureChangeListenerKeys_[r]),delete this.featureChangeListenerKeys_[r])},e.prototype.setMap=function(e){var n=this.getMap(),i=this.featuresListenerKeys_,r=this.getFeatures_();n&&(i.forEach(a.e),i.length=0,r.forEach(this.forEachFeatureRemove_.bind(this))),t.prototype.setMap.call(this,e),e&&(this.features_?i.push(Object(a.a)(this.features_,o.a.ADD,this.handleFeatureAdd_,this),Object(a.a)(this.features_,o.a.REMOVE,this.handleFeatureRemove_,this)):this.source_&&i.push(Object(a.a)(this.source_,y.a.ADDFEATURE,this.handleFeatureAdd_,this),Object(a.a)(this.source_,y.a.REMOVEFEATURE,this.handleFeatureRemove_,this)),r.forEach(this.forEachFeatureAdd_.bind(this)))},e.prototype.snapTo=function(t,e,n){var i=n.getCoordinateFromPixel([t[0]-this.pixelTolerance_,t[1]+this.pixelTolerance_]),r=n.getCoordinateFromPixel([t[0]+this.pixelTolerance_,t[1]-this.pixelTolerance_]),o=Object(h.b)([i,r]),a=this.rBush_.getInExtent(o);this.vertex_&&!this.edge_&&(a=a.filter(function(t){return t.feature.getGeometry().getType()!==l.a.CIRCLE}));var u,c,p,f,d=!1,g=null,y=null;if(a.length>0){this.pixelCoordinate_=e,a.sort(this.sortByDistance_);var _=a[0].segment,v=a[0].feature.getGeometry().getType()===l.a.CIRCLE;this.vertex_&&!this.edge_?(u=n.getPixelFromCoordinate(_[0]),c=n.getPixelFromCoordinate(_[1]),p=Object(s.e)(t,u),f=Object(s.e)(t,c),Math.sqrt(Math.min(p,f))<=this.pixelTolerance_&&(d=!0,g=p>f?_[1]:_[0],y=n.getPixelFromCoordinate(g))):this.edge_&&(g=v?Object(s[!1])(e,a[0].feature.getGeometry()):Object(s[!1])(e,_),y=n.getPixelFromCoordinate(g),Object(s[!1])(t,y)<=this.pixelTolerance_&&(d=!0,this.vertex_&&!v&&(u=n.getPixelFromCoordinate(_[0]),c=n.getPixelFromCoordinate(_[1]),p=Object(s.e)(y,u),f=Object(s.e)(y,c),Math.sqrt(Math.min(p,f))<=this.pixelTolerance_&&(g=p>f?_[1]:_[0],y=n.getPixelFromCoordinate(g))))),d&&(y=[Math.round(y[0]),Math.round(y[1])])}return{snapped:d,vertex:g,vertexPixel:y}},e.prototype.updateFeature_=function(t){this.removeFeature(t,!1),this.addFeature(t,!1)},e.prototype.writeCircleGeometry_=function(t,e){for(var n=Object(p.b)(e).getCoordinates()[0],i=0,r=n.length-1;i<r;++i){var o=n.slice(i,i+2),s={feature:t,segment:o};this.rBush_.insert(Object(h.b)(o),s)}},e.prototype.writeGeometryCollectionGeometry_=function(t,e){for(var n=e.getGeometriesArray(),i=0;i<n.length;++i){var r=this.SEGMENT_WRITERS_[n[i].getType()];r&&r.call(this,t,n[i])}},e.prototype.writeLineStringGeometry_=function(t,e){for(var n=e.getCoordinates(),i=0,r=n.length-1;i<r;++i){var o=n.slice(i,i+2),s={feature:t,segment:o};this.rBush_.insert(Object(h.b)(o),s)}},e.prototype.writeMultiLineStringGeometry_=function(t,e){for(var n=e.getCoordinates(),i=0,r=n.length;i<r;++i)for(var o=n[i],s=0,a=o.length-1;s<a;++s){var u=o.slice(s,s+2),c={feature:t,segment:u};this.rBush_.insert(Object(h.b)(u),c)}},e.prototype.writeMultiPointGeometry_=function(t,e){for(var n=e.getCoordinates(),i=0,r=n.length;i<r;++i){var o=n[i],s={feature:t,segment:[o,o]};this.rBush_.insert(e.getExtent(),s)}},e.prototype.writeMultiPolygonGeometry_=function(t,e){for(var n=e.getCoordinates(),i=0,r=n.length;i<r;++i)for(var o=n[i],s=0,a=o.length;s<a;++s)for(var u=o[s],c=0,l=u.length-1;c<l;++c){var p=u.slice(c,c+2),f={feature:t,segment:p};this.rBush_.insert(Object(h.b)(p),f)}},e.prototype.writePointGeometry_=function(t,e){var n=e.getCoordinates(),i={feature:t,segment:[n,n]};this.rBush_.insert(e.getExtent(),i)},e.prototype.writePolygonGeometry_=function(t,e){for(var n=e.getCoordinates(),i=0,r=n.length;i<r;++i)for(var o=n[i],s=0,a=o.length-1;s<a;++s){var u=o.slice(s,s+2),c={feature:t,segment:u};this.rBush_.insert(Object(h.b)(u),c)}},e}(f.b);function m(t){var e=this.snapTo(t.pixel,t.coordinate,t.map);return e.snapped&&(t.coordinate=e.vertex.slice(0,2),t.pixel=e.vertexPixel),f.c.call(this,t)}function E(t){var e=Object(d.c)(this.pendingFeatures_);return e.length&&(e.forEach(this.updateFeature_.bind(this)),this.pendingFeatures_={}),!1}e.default=v},function(t,e,n){"use strict";n.r(e);var i=n(6),r=n(22),o=n(12),s=n(1),a=n(29),u=n(14),h=n(9),c=n(2),l=n(18),p=n(52),f=n(13),d=n(44),g=n(40),y={SELECT:"select"},_=function(t){function e(e,n,i,r){t.call(this,e),this.selected=n,this.deselected=i,this.mapBrowserEvent=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(a.a),v=function(t){function e(e){t.call(this,{handleEvent:m});var n=e||{};this.condition_=n.condition?n.condition:u[!1],this.addCondition_=n.addCondition?n.addCondition:u[!1],this.removeCondition_=n.removeCondition?n.removeCondition:u[!1],this.toggleCondition_=n.toggleCondition?n.toggleCondition:u.f,this.multi_=!!n.multi&&n.multi,this.filter_=n.filter?n.filter:h.b,this.hitTolerance_=n.hitTolerance?n.hitTolerance:0;var i,a,l=new p.default({source:new d.default({useSpatialIndex:!1,features:n.features,wrapX:n.wrapX}),style:n.style?n.style:(i=Object(g.createEditingStyle)(),Object(o.c)(i[c.a.POLYGON],i[c.a.LINE_STRING]),Object(o.c)(i[c.a.GEOMETRY_COLLECTION],i[c.a.LINE_STRING]),function(t,e){return t.getGeometry()?i[t.getGeometry().getType()]:null}),updateWhileAnimating:!0,updateWhileInteracting:!0});if(this.featureOverlay_=l,n.layers)if("function"==typeof n.layers)a=n.layers;else{var f=n.layers;a=function(t){return Object(o.d)(f,t)}}else a=h.b;this.layerFilter_=a,this.featureLayerAssociation_={};var y=this.featureOverlay_.getSource().getFeaturesCollection();Object(s.a)(y,r.a.ADD,this.addFeature_,this),Object(s.a)(y,r.a.REMOVE,this.removeFeature_,this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.addFeatureLayerAssociation_=function(t,e){var n=Object(i.b)(t);this.featureLayerAssociation_[n]=e},e.prototype.getFeatures=function(){return this.featureOverlay_.getSource().getFeaturesCollection()},e.prototype.getHitTolerance=function(){return this.hitTolerance_},e.prototype.getLayer=function(t){var e=Object(i.b)(t);return this.featureLayerAssociation_[e]},e.prototype.setHitTolerance=function(t){this.hitTolerance_=t},e.prototype.setMap=function(e){var n=this.getMap(),i=this.featureOverlay_.getSource().getFeaturesCollection();n&&i.forEach(n.unskipFeature.bind(n)),t.prototype.setMap.call(this,e),this.featureOverlay_.setMap(e),e&&i.forEach(e.skipFeature.bind(e))},e.prototype.addFeature_=function(t){var e=this.getMap();e&&e.skipFeature(t.element)},e.prototype.removeFeature_=function(t){var e=this.getMap();e&&e.unskipFeature(t.element)},e.prototype.removeFeatureLayerAssociation_=function(t){var e=Object(i.b)(t);delete this.featureLayerAssociation_[e]},e}(l.a);function m(t){if(!this.condition_(t))return!0;var e=this.addCondition_(t),n=this.removeCondition_(t),i=this.toggleCondition_(t),r=!e&&!n&&!i,s=t.map,a=this.featureOverlay_.getSource().getFeaturesCollection(),h=[],c=[];if(r){Object(f.b)(this.featureLayerAssociation_),s.forEachFeatureAtPixel(t.pixel,function(t,e){if(this.filter_(t,e))return c.push(t),this.addFeatureLayerAssociation_(t,e),!this.multi_}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(var l=a.getLength()-1;l>=0;--l){var p=a.item(l),d=c.indexOf(p);d>-1?c.splice(d,1):(a.remove(p),h.push(p))}0!==c.length&&a.extend(c)}else{s.forEachFeatureAtPixel(t.pixel,function(t,r){if(this.filter_(t,r))return!e&&!i||Object(o.d)(a.getArray(),t)?(n||i)&&Object(o.d)(a.getArray(),t)&&(h.push(t),this.removeFeatureLayerAssociation_(t)):(c.push(t),this.addFeatureLayerAssociation_(t,r)),!this.multi_}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(var g=h.length-1;g>=0;--g)a.remove(h[g]);a.extend(c)}return(c.length>0||h.length>0)&&this.dispatchEvent(new _(y.SELECT,c,h,t)),Object(u[!1])(t)}e.default=v},function(t,e,n){"use strict";n.r(e),n.d(e,"ModifyEvent",function(){return S});var i=n(6),r=n(19),o=n(22),s=n(42),a=n(10),u=n(35),h=n(12),c=n(11),l=n(1),p=n(29),f=n(4),d=n(14),g=n(0),y=n(2),_=n(48),v=n(24),m=n(52),E=n(44),x=n(null),b=n(null),w=n(40),C=0,O=1,I={MODIFYSTART:"modifystart",MODIFYEND:"modifyend"},S=function(t){function e(e,n,i){t.call(this,e),this.features=n,this.mapBrowserEvent=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(p.a),T=function(t){function e(e){var n,i;if(t.call(this,{handleDownEvent:N,handleDragEvent:L,handleEvent:P,handleUpEvent:M}),this.condition_=e.condition?e.condition:d[!1],this.defaultDeleteCondition_=function(t){return Object(d[!1])(t)&&Object(d[!1])(t)},this.deleteCondition_=e.deleteCondition?e.deleteCondition:this.defaultDeleteCondition_,this.insertVertexCondition_=e.insertVertexCondition?e.insertVertexCondition:d.b,this.vertexFeature_=null,this.vertexSegments_=null,this.lastPixel_=[0,0],this.ignoreNextSingleClick_=!1,this.modified_=!1,this.rBush_=new b.a,this.pixelTolerance_=void 0!==e.pixelTolerance?e.pixelTolerance:10,this.snappedToVertex_=!1,this.changingFeature_=!1,this.dragSegments_=[],this.overlay_=new m.default({source:new E.default({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.style?e.style:(n=Object(w.createEditingStyle)(),function(t,e){return n[y.a.POINT]}),updateWhileAnimating:!0,updateWhileInteracting:!0}),this.SEGMENT_WRITERS_={Point:this.writePointGeometry_,LineString:this.writeLineStringGeometry_,LinearRing:this.writeLineStringGeometry_,Polygon:this.writePolygonGeometry_,MultiPoint:this.writeMultiPointGeometry_,MultiLineString:this.writeMultiLineStringGeometry_,MultiPolygon:this.writeMultiPolygonGeometry_,Circle:this.writeCircleGeometry_,GeometryCollection:this.writeGeometryCollectionGeometry_},this.source_=null,e.source?(this.source_=e.source,i=new r.a(this.source_.getFeatures()),Object(l.a)(this.source_,x.a.ADDFEATURE,this.handleSourceAdd_,this),Object(l.a)(this.source_,x.a.REMOVEFEATURE,this.handleSourceRemove_,this)):i=e.features,!i)throw new Error("The modify interaction requires features or a source");this.features_=i,this.features_.forEach(this.addFeature_.bind(this)),Object(l.a)(this.features_,o.a.ADD,this.handleFeatureAdd_,this),Object(l.a)(this.features_,o.a.REMOVE,this.handleFeatureRemove_,this),this.lastPointerEvent_=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.addFeature_=function(t){var e=t.getGeometry();e&&e.getType()in this.SEGMENT_WRITERS_&&this.SEGMENT_WRITERS_[e.getType()].call(this,t,e);var n=this.getMap();n&&n.isRendered()&&this.getActive()&&this.handlePointerAtPixel_(this.lastPixel_,n),Object(l.a)(t,f.a.CHANGE,this.handleFeatureChange_,this)},e.prototype.willModifyFeatures_=function(t){this.modified_||(this.modified_=!0,this.dispatchEvent(new S(I.MODIFYSTART,this.features_,t)))},e.prototype.removeFeature_=function(t){this.removeFeatureSegmentData_(t),this.vertexFeature_&&0===this.features_.getLength()&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),Object(l.c)(t,f.a.CHANGE,this.handleFeatureChange_,this)},e.prototype.removeFeatureSegmentData_=function(t){var e=this.rBush_,n=[];e.forEach(function(e){t===e.feature&&n.push(e)});for(var i=n.length-1;i>=0;--i)e.remove(n[i])},e.prototype.setActive=function(e){this.vertexFeature_&&!e&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),t.prototype.setActive.call(this,e)},e.prototype.setMap=function(e){this.overlay_.setMap(e),t.prototype.setMap.call(this,e)},e.prototype.handleSourceAdd_=function(t){t.feature&&this.features_.push(t.feature)},e.prototype.handleSourceRemove_=function(t){t.feature&&this.features_.remove(t.feature)},e.prototype.handleFeatureAdd_=function(t){this.addFeature_(t.element)},e.prototype.handleFeatureChange_=function(t){if(!this.changingFeature_){var e=t.target;this.removeFeature_(e),this.addFeature_(e)}},e.prototype.handleFeatureRemove_=function(t){var e=t.element;this.removeFeature_(e)},e.prototype.writePointGeometry_=function(t,e){var n=e.getCoordinates(),i={feature:t,geometry:e,segment:[n,n]};this.rBush_.insert(e.getExtent(),i)},e.prototype.writeMultiPointGeometry_=function(t,e){for(var n=e.getCoordinates(),i=0,r=n.length;i<r;++i){var o=n[i],s={feature:t,geometry:e,depth:[i],index:i,segment:[o,o]};this.rBush_.insert(e.getExtent(),s)}},e.prototype.writeLineStringGeometry_=function(t,e){for(var n=e.getCoordinates(),i=0,r=n.length-1;i<r;++i){var o=n.slice(i,i+2),s={feature:t,geometry:e,index:i,segment:o};this.rBush_.insert(Object(g.b)(o),s)}},e.prototype.writeMultiLineStringGeometry_=function(t,e){for(var n=e.getCoordinates(),i=0,r=n.length;i<r;++i)for(var o=n[i],s=0,a=o.length-1;s<a;++s){var u=o.slice(s,s+2),h={feature:t,geometry:e,depth:[i],index:s,segment:u};this.rBush_.insert(Object(g.b)(u),h)}},e.prototype.writePolygonGeometry_=function(t,e){for(var n=e.getCoordinates(),i=0,r=n.length;i<r;++i)for(var o=n[i],s=0,a=o.length-1;s<a;++s){var u=o.slice(s,s+2),h={feature:t,geometry:e,depth:[i],index:s,segment:u};this.rBush_.insert(Object(g.b)(u),h)}},e.prototype.writeMultiPolygonGeometry_=function(t,e){for(var n=e.getCoordinates(),i=0,r=n.length;i<r;++i)for(var o=n[i],s=0,a=o.length;s<a;++s)for(var u=o[s],h=0,c=u.length-1;h<c;++h){var l=u.slice(h,h+2),p={feature:t,geometry:e,depth:[s,i],index:h,segment:l};this.rBush_.insert(Object(g.b)(l),p)}},e.prototype.writeCircleGeometry_=function(t,e){var n=e.getCenter(),i={feature:t,geometry:e,index:C,segment:[n,n]},r={feature:t,geometry:e,index:O,segment:[n,n]},o=[i,r];i.featureSegments=r.featureSegments=o,this.rBush_.insert(Object(g.m)(n),i),this.rBush_.insert(e.getExtent(),r)},e.prototype.writeGeometryCollectionGeometry_=function(t,e){for(var n=e.getGeometriesArray(),i=0;i<n.length;++i)this.SEGMENT_WRITERS_[n[i].getType()].call(this,t,n[i])},e.prototype.createOrUpdateVertexFeature_=function(t){var e=this.vertexFeature_;e?e.getGeometry().setCoordinates(t):(e=new s.a(new _.a(t)),this.vertexFeature_=e,this.overlay_.getSource().addFeature(e));return e},e.prototype.handlePointerMove_=function(t){this.lastPixel_=t.pixel,this.handlePointerAtPixel_(t.pixel,t.map)},e.prototype.handlePointerAtPixel_=function(t,e){var n=e.getCoordinateFromPixel(t),r=Object(g.c)(Object(g.m)(n),e.getView().getResolution()*this.pixelTolerance_),o=this.rBush_.getInExtent(r);if(o.length>0){o.sort(function(t,e){return A(n,t)-A(n,e)});var s=o[0],a=s.segment,u=D(n,s),h=e.getPixelFromCoordinate(u),l=Object(c[!1])(t,h);if(l<=this.pixelTolerance_){var p={};if(s.geometry.getType()===y.a.CIRCLE&&s.index===O)this.snappedToVertex_=!0,this.createOrUpdateVertexFeature_(u);else{var f=e.getPixelFromCoordinate(a[0]),d=e.getPixelFromCoordinate(a[1]),_=Object(c.e)(h,f),v=Object(c.e)(h,d);l=Math.sqrt(Math.min(_,v)),this.snappedToVertex_=l<=this.pixelTolerance_,this.snappedToVertex_&&(u=_>v?a[1]:a[0]),this.createOrUpdateVertexFeature_(u);for(var m=1,E=o.length;m<E;++m){var x=o[m].segment;if(!(Object(c.b)(a[0],x[0])&&Object(c.b)(a[1],x[1])||Object(c.b)(a[0],x[1])&&Object(c.b)(a[1],x[0])))break;p[Object(i.b)(x)]=!0}}return p[Object(i.b)(a)]=!0,void(this.vertexSegments_=p)}}this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null)},e.prototype.insertVertex_=function(t,e){for(var n,i=t.segment,r=t.feature,o=t.geometry,s=t.depth,a=t.index;e.length<o.getStride();)e.push(0);switch(o.getType()){case y.a.MULTI_LINE_STRING:case y.a.POLYGON:(n=o.getCoordinates())[s[0]].splice(a+1,0,e);break;case y.a.MULTI_POLYGON:(n=o.getCoordinates())[s[1]][s[0]].splice(a+1,0,e);break;case y.a.LINE_STRING:(n=o.getCoordinates()).splice(a+1,0,e);break;default:return}this.setGeometryCoordinates_(o,n);var u=this.rBush_;u.remove(t),this.updateSegmentIndices_(o,a,s,1);var h={segment:[i[0],e],feature:r,geometry:o,depth:s,index:a};u.insert(Object(g.b)(h.segment),h),this.dragSegments_.push([h,1]);var c={segment:[e,i[1]],feature:r,geometry:o,depth:s,index:a+1};u.insert(Object(g.b)(c.segment),c),this.dragSegments_.push([c,0]),this.ignoreNextSingleClick_=!0},e.prototype.removePoint=function(){if(this.lastPointerEvent_&&this.lastPointerEvent_.type!=a.a.POINTERDRAG){var t=this.lastPointerEvent_;return this.willModifyFeatures_(t),this.removeVertex_(),this.dispatchEvent(new S(I.MODIFYEND,this.features_,t)),this.modified_=!1,!0}return!1},e.prototype.removeVertex_=function(){var t,e,n,r,o,s,a,u,h,c,l,p=this.dragSegments_,f={},d=!1;for(o=p.length-1;o>=0;--o)c=(n=p[o])[0],l=Object(i.b)(c.feature),c.depth&&(l+="-"+c.depth.join("-")),l in f||(f[l]={}),0===n[1]?(f[l].right=c,f[l].index=c.index):1==n[1]&&(f[l].left=c,f[l].index=c.index+1);for(l in f){switch(h=f[l].right,a=f[l].left,u=(s=f[l].index)-1,c=void 0!==a?a:h,u<0&&(u=0),t=e=(r=c.geometry).getCoordinates(),d=!1,r.getType()){case y.a.MULTI_LINE_STRING:e[c.depth[0]].length>2&&(e[c.depth[0]].splice(s,1),d=!0);break;case y.a.LINE_STRING:e.length>2&&(e.splice(s,1),d=!0);break;case y.a.MULTI_POLYGON:t=t[c.depth[1]];case y.a.POLYGON:(t=t[c.depth[0]]).length>4&&(s==t.length-1&&(s=0),t.splice(s,1),d=!0,0===s&&(t.pop(),t.push(t[0]),u=t.length-1))}if(d){this.setGeometryCoordinates_(r,e);var _=[];if(void 0!==a&&(this.rBush_.remove(a),_.push(a.segment[0])),void 0!==h&&(this.rBush_.remove(h),_.push(h.segment[1])),void 0!==a&&void 0!==h){var v={depth:c.depth,feature:c.feature,geometry:c.geometry,index:u,segment:_};this.rBush_.insert(Object(g.b)(v.segment),v)}this.updateSegmentIndices_(r,s,c.depth,-1),this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),p.length=0}}return d},e.prototype.setGeometryCoordinates_=function(t,e){this.changingFeature_=!0,t.setCoordinates(e),this.changingFeature_=!1},e.prototype.updateSegmentIndices_=function(t,e,n,i){this.rBush_.forEachInExtent(t.getExtent(),function(r){r.geometry===t&&(void 0===n||void 0===r.depth||Object(h.b)(r.depth,n))&&r.index>e&&(r.index+=i)})},e}(v.b);function R(t,e){return t.index-e.index}function N(t){if(!this.condition_(t))return!1;this.handlePointerAtPixel_(t.pixel,t.map);var e=t.map.getCoordinateFromPixel(t.pixel);this.dragSegments_.length=0,this.modified_=!1;var n=this.vertexFeature_;if(n){var r=[],o=n.getGeometry().getCoordinates(),s=Object(g.b)([o]),a=this.rBush_.getInExtent(s),u={};a.sort(R);for(var h=0,l=a.length;h<l;++h){var p=a[h],f=p.segment,d=Object(i.b)(p.feature),_=p.depth;if(_&&(d+="-"+_.join("-")),u[d]||(u[d]=new Array(2)),p.geometry.getType()===y.a.CIRCLE&&p.index===O){var v=D(e,p);Object(c.b)(v,o)&&!u[d][0]&&(this.dragSegments_.push([p,0]),u[d][0]=p)}else if(Object(c.b)(f[0],o)&&!u[d][0])this.dragSegments_.push([p,0]),u[d][0]=p;else if(Object(c.b)(f[1],o)&&!u[d][1]){if((p.geometry.getType()===y.a.LINE_STRING||p.geometry.getType()===y.a.MULTI_LINE_STRING)&&u[d][0]&&0===u[d][0].index)continue;this.dragSegments_.push([p,1]),u[d][1]=p}else this.insertVertexCondition_(t)&&Object(i.b)(f)in this.vertexSegments_&&!u[d][0]&&!u[d][1]&&r.push([p,o])}r.length&&this.willModifyFeatures_(t);for(var m=r.length-1;m>=0;--m)this.insertVertex_.apply(this,r[m])}return!!this.vertexFeature_}function L(t){this.ignoreNextSingleClick_=!1,this.willModifyFeatures_(t);for(var e=t.coordinate,n=0,i=this.dragSegments_.length;n<i;++n){for(var r=this.dragSegments_[n],o=r[0],s=o.depth,a=o.geometry,u=void 0,h=o.segment,l=r[1];e.length<a.getStride();)e.push(h[l][e.length]);switch(a.getType()){case y.a.POINT:u=e,h[0]=h[1]=e;break;case y.a.MULTI_POINT:(u=a.getCoordinates())[o.index]=e,h[0]=h[1]=e;break;case y.a.LINE_STRING:(u=a.getCoordinates())[o.index+l]=e,h[l]=e;break;case y.a.MULTI_LINE_STRING:case y.a.POLYGON:(u=a.getCoordinates())[s[0]][o.index+l]=e,h[l]=e;break;case y.a.MULTI_POLYGON:(u=a.getCoordinates())[s[1]][s[0]][o.index+l]=e,h[l]=e;break;case y.a.CIRCLE:h[0]=h[1]=e,o.index===C?(this.changingFeature_=!0,a.setCenter(e),this.changingFeature_=!1):(this.changingFeature_=!0,a.setRadius(Object(c[!1])(a.getCenter(),e)),this.changingFeature_=!1)}u&&this.setGeometryCoordinates_(a,u)}this.createOrUpdateVertexFeature_(e)}function M(t){for(var e=this.dragSegments_.length-1;e>=0;--e){var n=this.dragSegments_[e][0],i=n.geometry;if(i.getType()===y.a.CIRCLE){var r=i.getCenter(),o=n.featureSegments[0],s=n.featureSegments[1];o.segment[0]=o.segment[1]=r,s.segment[0]=s.segment[1]=r,this.rBush_.update(Object(g.m)(r),o),this.rBush_.update(i.getExtent(),s)}else this.rBush_.update(Object(g.b)(n.segment),n)}return this.modified_&&(this.dispatchEvent(new S(I.MODIFYEND,this.features_,t)),this.modified_=!1),!1}function P(t){return!(t instanceof u.a)||(this.lastPointerEvent_=t,t.map.getView().getInteracting()||t.type!=a.a.POINTERMOVE||this.handlingDownUpSequence||this.handlePointerMove_(t),this.vertexFeature_&&this.deleteCondition_(t)&&(e=!(t.type!=a.a.SINGLECLICK||!this.ignoreNextSingleClick_)||this.removePoint()),t.type==a.a.SINGLECLICK&&(this.ignoreNextSingleClick_=!1),v.c.call(this,t)&&!e);var e}function A(t,e){var n=e.geometry;if(n.getType()===y.a.CIRCLE){var i=n;if(e.index===O){var r=Object(c.e)(i.getCenter(),t),o=Math.sqrt(r)-i.getRadius();return o*o}}return Object(c[!1])(t,e.segment)}function D(t,e){var n=e.geometry;return n.getType()===y.a.CIRCLE&&e.index===O?n.getClosestPoint(t):Object(c[!1])(t,e.segment)}e.default=T},function(t,e,n){"use strict";n.r(e);var i=n(42),r=n(10),o=n(35),s=n(11),a=n(29),u=n(0),h=n(2),c=n(48),l=n(30),p=n(24),f=n(52),d=n(44),g=n(40),y={EXTENTCHANGED:"extentchanged"},_=function(t){function e(e){t.call(this,y.EXTENTCHANGED),this.extent=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(a.a),v=function(t){function e(e){t.call(this,{handleDownEvent:E,handleDragEvent:x,handleEvent:m,handleUpEvent:b});var n,i=e||{};this.extent_=null,this.pointerHandler_=null,this.pixelTolerance_=void 0!==i.pixelTolerance?i.pixelTolerance:10,this.snappedToVertex_=!1,this.extentFeature_=null,this.vertexFeature_=null,e||(e={}),this.extentOverlay_=new f.default({source:new d.default({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.boxStyle?e.boxStyle:(n=Object(g.createEditingStyle)(),function(t,e){return n[h.a.POLYGON]}),updateWhileAnimating:!0,updateWhileInteracting:!0}),this.vertexOverlay_=new f.default({source:new d.default({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.pointerStyle?e.pointerStyle:function(){var t=Object(g.createEditingStyle)();return function(e,n){return t[h.a.POINT]}}(),updateWhileAnimating:!0,updateWhileInteracting:!0}),e.extent&&this.setExtent(e.extent)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.snapToVertex_=function(t,e){var n=e.getCoordinateFromPixel(t),i=this.getExtent();if(i){var r=function(t){return[[[t[0],t[1]],[t[0],t[3]]],[[t[0],t[3]],[t[2],t[3]]],[[t[2],t[3]],[t[2],t[1]]],[[t[2],t[1]],[t[0],t[1]]]]}(i);r.sort(function(t,e){return Object(s[!1])(n,t)-Object(s[!1])(n,e)});var o=r[0],a=Object(s[!1])(n,o),u=e.getPixelFromCoordinate(a);if(Object(s[!1])(t,u)<=this.pixelTolerance_){var h=e.getPixelFromCoordinate(o[0]),c=e.getPixelFromCoordinate(o[1]),l=Object(s.e)(u,h),p=Object(s.e)(u,c),f=Math.sqrt(Math.min(l,p));return this.snappedToVertex_=f<=this.pixelTolerance_,this.snappedToVertex_&&(a=l>p?o[1]:o[0]),a}}return null},e.prototype.handlePointerMove_=function(t){var e=t.pixel,n=t.map,i=this.snapToVertex_(e,n);i||(i=n.getCoordinateFromPixel(e)),this.createOrUpdatePointerFeature_(i)},e.prototype.createOrUpdateExtentFeature_=function(t){var e=this.extentFeature_;return e?t?e.setGeometry(Object(l.c)(t)):e.setGeometry(void 0):(e=t?new i.a(Object(l.c)(t)):new i.a({}),this.extentFeature_=e,this.extentOverlay_.getSource().addFeature(e)),e},e.prototype.createOrUpdatePointerFeature_=function(t){var e=this.vertexFeature_;e?e.getGeometry().setCoordinates(t):(e=new i.a(new c.a(t)),this.vertexFeature_=e,this.vertexOverlay_.getSource().addFeature(e));return e},e.prototype.setMap=function(e){this.extentOverlay_.setMap(e),this.vertexOverlay_.setMap(e),t.prototype.setMap.call(this,e)},e.prototype.getExtent=function(){return this.extent_},e.prototype.setExtent=function(t){this.extent_=t||null,this.createOrUpdateExtentFeature_(t),this.dispatchEvent(new _(this.extent_))},e}(p.b);function m(t){return!(t instanceof o.a)||(t.type!=r.a.POINTERMOVE||this.handlingDownUpSequence||this.handlePointerMove_(t),p.c.call(this,t),!1)}function E(t){var e=t.pixel,n=t.map,i=this.getExtent(),r=this.snapToVertex_(e,n),o=function(t){var e=null,n=null;return t[0]==i[0]?e=i[2]:t[0]==i[2]&&(e=i[0]),t[1]==i[1]?n=i[3]:t[1]==i[3]&&(n=i[1]),null!==e&&null!==n?[e,n]:null};if(r&&i){var s=r[0]==i[0]||r[0]==i[2]?r[0]:null,a=r[1]==i[1]||r[1]==i[3]?r[1]:null;null!==s&&null!==a?this.pointerHandler_=w(o(r)):null!==s?this.pointerHandler_=C(o([s,i[1]]),o([s,i[3]])):null!==a&&(this.pointerHandler_=C(o([i[0],a]),o([i[2],a])))}else r=n.getCoordinateFromPixel(e),this.setExtent([r[0],r[1],r[0],r[1]]),this.pointerHandler_=w(r);return!0}function x(t){if(this.pointerHandler_){var e=t.coordinate;this.setExtent(this.pointerHandler_(e)),this.createOrUpdatePointerFeature_(e)}return!0}function b(t){this.pointerHandler_=null;var e=this.getExtent();return e&&0!==Object(u.u)(e)||this.setExtent(null),!1}function w(t){return function(e){return Object(u.b)([t,e])}}function C(t,e){return t[0]==e[0]?function(n){return Object(u.b)([t,[n[0],e[1]]])}:t[1]==e[1]?function(n){return Object(u.b)([t,[e[0],n[1]]])}:null}e.default=v},function(t,e,n){t.exports=function(){"use strict";function t(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}function e(t,e){return t<e?-1:t>e?1:0}return function(n,i,r,o,s){!function e(n,i,r,o,s){for(;o>r;){if(o-r>600){var a=o-r+1,u=i-r+1,h=Math.log(a),c=.5*Math.exp(2*h/3),l=.5*Math.sqrt(h*c*(a-c)/a)*(u-a/2<0?-1:1),p=Math.max(r,Math.floor(i-u*c/a+l)),f=Math.min(o,Math.floor(i+(a-u)*c/a+l));e(n,i,p,f,s)}var d=n[i],g=r,y=o;for(t(n,r,i),s(n[o],d)>0&&t(n,r,o);g<y;){for(t(n,g,y),g++,y--;s(n[g],d)<0;)g++;for(;s(n[y],d)>0;)y--}0===s(n[r],d)?t(n,r,y):t(n,++y,o),y<=i&&(r=y+1),i<=y&&(o=y-1)}}(n,i,r||0,o||n.length-1,s||e)}}()},function(t,e,n){"use strict";n.r(e);var i=n(46),r=n(17),o=n(14),s=n(18),a=function(t){function e(e){var n=e||{};t.call(this,{handleDownEvent:c,handleDragEvent:u,handleUpEvent:h}),this.condition_=n.condition?n.condition:o.f,this.lastAngle_=void 0,this.lastMagnitude_=void 0,this.lastScaleDelta_=0,this.duration_=void 0!==n.duration?n.duration:400}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(n(24).b);function u(t){if(Object(o.d)(t)){var e=t.map,n=e.getSize(),r=t.pixel,a=r[0]-n[0]/2,u=n[1]/2-r[1],h=Math.atan2(u,a),c=Math.sqrt(a*a+u*u),l=e.getView();if(l.getConstraints().rotation!==i.c&&void 0!==this.lastAngle_){var p=h-this.lastAngle_;Object(s.d)(l,l.getRotation()-p)}if(this.lastAngle_=h,void 0!==this.lastMagnitude_){var f=this.lastMagnitude_*(l.getResolution()/c);Object(s.g)(l,f)}void 0!==this.lastMagnitude_&&(this.lastScaleDelta_=this.lastMagnitude_/c),this.lastMagnitude_=c}}function h(t){if(!Object(o.d)(t))return!0;var e=t.map.getView();e.setHint(r.a.INTERACTING,-1);var n=this.lastScaleDelta_-1;return Object(s.c)(e,e.getRotation()),Object(s.e)(e,e.getResolution(),void 0,this.duration_,n),this.lastScaleDelta_=0,!1}function c(t){return!!Object(o.d)(t)&&(!!this.condition_(t)&&(t.map.getView().setHint(r.a.INTERACTING,1),this.lastAngle_=void 0,this.lastMagnitude_=void 0,!0))}e.default=a},function(t,e,n){"use strict";n.r(e),n.d(e,"ONE",function(){return i}),n.d(e,"SRC_ALPHA",function(){return r}),n.d(e,"COLOR_ATTACHMENT0",function(){return o}),n.d(e,"COLOR_BUFFER_BIT",function(){return s}),n.d(e,"TRIANGLES",function(){return a}),n.d(e,"TRIANGLE_STRIP",function(){return u}),n.d(e,"ONE_MINUS_SRC_ALPHA",function(){return h}),n.d(e,"ARRAY_BUFFER",function(){return c}),n.d(e,"ELEMENT_ARRAY_BUFFER",function(){return l}),n.d(e,"STREAM_DRAW",function(){return p}),n.d(e,"STATIC_DRAW",function(){return f}),n.d(e,"DYNAMIC_DRAW",function(){return d}),n.d(e,"CULL_FACE",function(){return g}),n.d(e,"BLEND",function(){return y}),n.d(e,"STENCIL_TEST",function(){return _}),n.d(e,"DEPTH_TEST",function(){return v}),n.d(e,"SCISSOR_TEST",function(){return m}),n.d(e,"UNSIGNED_BYTE",function(){return E}),n.d(e,"UNSIGNED_SHORT",function(){return x}),n.d(e,"UNSIGNED_INT",function(){return b}),n.d(e,"FLOAT",function(){return w}),n.d(e,"RGBA",function(){return C}),n.d(e,"FRAGMENT_SHADER",function(){return O}),n.d(e,"VERTEX_SHADER",function(){return I}),n.d(e,"LINK_STATUS",function(){return S}),n.d(e,"LINEAR",function(){return T}),n.d(e,"TEXTURE_MAG_FILTER",function(){return R}),n.d(e,"TEXTURE_MIN_FILTER",function(){return N}),n.d(e,"TEXTURE_WRAP_S",function(){return L}),n.d(e,"TEXTURE_WRAP_T",function(){return M}),n.d(e,"TEXTURE_2D",function(){return P}),n.d(e,"TEXTURE0",function(){return A}),n.d(e,"CLAMP_TO_EDGE",function(){return D}),n.d(e,"COMPILE_STATUS",function(){return F}),n.d(e,"FRAMEBUFFER",function(){return j}),n.d(e,"getContext",function(){return k}),n.d(e,"DEBUG",function(){return X}),n.d(e,"HAS",function(){return q}),n.d(e,"MAX_TEXTURE_SIZE",function(){return B}),n.d(e,"EXTENSIONS",function(){return Y});var i=1,r=770,o=36064,s=16384,a=4,u=5,h=771,c=34962,l=34963,p=35040,f=35044,d=35048,g=2884,y=3042,_=2960,v=2929,m=3089,E=5121,x=5123,b=5125,w=5126,C=6408,O=35632,I=35633,S=35714,T=9729,R=10240,N=10241,L=10242,M=10243,P=3553,A=33984,D=33071,F=35713,j=36160,G=["experimental-webgl","webgl","webkit-3d","moz-webgl"];function k(t,e){for(var n=G.length,i=0;i<n;++i)try{var r=t.getContext(G[i],e);if(r)return r}catch(t){}return null}var B,Y,X=!0,q=!1;if("undefined"!=typeof window&&"WebGLRenderingContext"in window)try{var U=k(document.createElement("CANVAS"),{failIfMajorPerformanceCaveat:!0});U&&(q=!0,B=U.getParameter(U.MAX_TEXTURE_SIZE),Y=U.getSupportedExtensions())}catch(t){}},function(t,e,n){"use strict";n.r(e);var i=n(9),r=n(1),o=n(29),s=n(4),a=n(18),u=n(16),h="addfeatures",c=function(t){function e(e,n,i,r){t.call(this,e),this.features=i,this.file=n,this.projection=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(o.a),l=function(t){function e(e){var n=e||{};t.call(this,{handleEvent:i.b}),this.formatConstructors_=n.formatConstructors?n.formatConstructors:[],this.projection_=n.projection?Object(u.c)(n.projection):null,this.dropListenKeys_=null,this.source_=n.source||null,this.target=n.target?n.target:null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.handleResult_=function(t,e){var n=e.target.result,i=this.getMap(),r=this.projection_;r||(r=i.getView().getProjection());for(var o=this.formatConstructors_,s=[],a=0,u=o.length;a<u;++a){var l=new(0,o[a]);if((s=this.tryReadFeatures_(l,n,{featureProjection:r}))&&s.length>0)break}this.source_&&(this.source_.clear(),this.source_.addFeatures(s)),this.dispatchEvent(new c(h,t,s,r))},e.prototype.registerListeners_=function(){var t=this.getMap();if(t){var e=this.target?this.target:t.getViewport();this.dropListenKeys_=[Object(r.a)(e,s.a.DROP,p,this),Object(r.a)(e,s.a.DRAGENTER,f,this),Object(r.a)(e,s.a.DRAGOVER,f,this),Object(r.a)(e,s.a.DROP,f,this)]}},e.prototype.setActive=function(e){t.prototype.setActive.call(this,e),e?this.registerListeners_():this.unregisterListeners_()},e.prototype.setMap=function(e){this.unregisterListeners_(),t.prototype.setMap.call(this,e),this.getActive()&&this.registerListeners_()},e.prototype.tryReadFeatures_=function(t,e,n){try{return t.readFeatures(e,n)}catch(t){return null}},e.prototype.unregisterListeners_=function(){this.dropListenKeys_&&(this.dropListenKeys_.forEach(r.e),this.dropListenKeys_=null)},e}(a.a);function p(t){for(var e=t.dataTransfer.files,n=0,i=e.length;n<i;++n){var r=e.item(n),o=new FileReader;o.addEventListener(s.a.LOAD,this.handleResult_.bind(this,r)),o.readAsText(r)}}function f(t){t.stopPropagation(),t.preventDefault(),t.dataTransfer.dropEffect="copy"}e.default=l},function(t,e,n){"use strict";var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=m(n(80)),o=m(n(96)),s=m(n(93)),a=m(n(95)),u=m(n(52)),h=m(n(44)),c=m(n(94)),l=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(98)),p=n(97),f=m(n(66)),d=m(n(40)),g=n(78),y=m(g),_=m(n(62)),v=m(n(79));function m(t){return t&&t.__esModule?t:{default:t}}var E=[-105.3369140625,39.863371338285305],x={red:"#ff0010",green:"#23ff00",added:"#b500ff"},b=function(t){window.console.log(t)},w=l,C=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._vectorSource=new h.default({format:new c.default}),this._vectorLayer=new u.default({source:this._vectorSource,opacity:.5,style:new d.default({fill:new f.default({color:"#d40000"})})}),this._turfFeatureCollection=[]}return i(t,[{key:"getVectorLayer",value:function(){return this._vectorLayer}},{key:"setVectorLayer",value:function(t){return this._vectorLayer=t,this}},{key:"getVectorSource",value:function(){return this._vectorSource}},{key:"setVectorSource",value:function(t){return this._vectorSource=t,this}},{key:"parse",value:function(){var t=this;return this._turfFeatureCollection.features.forEach(function(e){var n=new c.default({dataProjection:"EPSG:4326",featureProjection:"EPSG:3857"}).readFeature(e);t._vectorSource.addFeature(n)}),this}},{key:"setFeatureCollection",value:function(t){return this._turfFeatureCollection=(0,p.featureCollection)(t.features),this}}]),t}();window.onload=function(){var t=document.getElementById("map"),e=void 0,n=new C(w);window.fmt=new c.default;var i={isDeleting:!1,drawStyle:"box"},l=new h.default({format:new c.default}),m=new u.default({source:l,opacity:.5,style:new d.default({opacity:.5,fill:new f.default({color:x.red,opacity:.5})})}),O=new o.default({target:t,view:new r.default({center:(0,p.toMercator)(E),zoom:9}),layers:[new s.default({source:new a.default}),m,n.getVectorLayer()]});var I=function(t){b("Drawing ended.");var e=turf.polygon(t.feature.getGeometry().getCoordinates()),n=fmt.readFeatureFromObject(e);n.getGeometry().getExtent();m.getSource().forEachFeature(function(t){t.setStyle(new d.default({fill:new f.default({color:x.red})}))}),n.setStyle(new d.default({fill:new f.default({color:x.added})})),b("isDeleting: "+i.isDeleting),m.getSource().addFeature(n);var r=(0,p.combine)(fmt.writeFeaturesObject(m.getSource().getFeatures())),o=[];(0,p.flattenEach)((0,p.featureCollection)(r.features),function(t,e,n){t.properties={},o.push(t)});var s=(0,p.featureCollection)(o);window.flatFeaturesCollection=s,b(s)};function S(){O.removeInteraction(e);var t=new d.default({opacity:.2,image:new v.default({fill:new f.default({color:"red",opacity:.2}),points:4,radius1:15,radius2:1,opacity:.2}),stroke:new _.default({color:"black",width:0,opacity:.5}),fill:new f.default({color:x.red,opacity:.5})});"box"===i.drawStyle&&(e=new y.default({source:l,type:"Circle",freehand:!0,geometryFunction:(0,g.createBox)(),style:t})),"polygon"===i.drawStyle&&(e=new y.default({source:l,type:"Polygon",freehand:!0,style:t})),e.on("drawend",I),O.addInteraction(e)}S();O.on("pointermove",function(t){t.dragging&&b("Dragging")}),window.map=O,window.drawLayer=m,document.addEventListener("keyup",function(t){if(b(t.key),"d"===t.key&&(i.isDeleting=!i.isDeleting,S()),"f"===t.key&&(i.drawStyle="polygon",b("Polygon style drawing"),S()),"d"===t.key&&(i.drawStyle="box",b("Box style drawing"),S()),"q"===t.key){var e=O.getView().getZoom()+1;O.getView().setZoom(e)}if("w"===t.key){var n=O.getView().getZoom()-1;O.getView().setZoom(n)}})}}]);
//# sourceMappingURL=main.d12bce0de0e284630f56.js.map